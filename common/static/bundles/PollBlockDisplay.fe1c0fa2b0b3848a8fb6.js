(()=>{var t={23844:function(t,n,e){var o,s;(function(i){"use strict";o=[e(95891),e(20428),e(2648)],s=function(t,n,e){var o,s,i,r,l,a,u,c;function d(t){this.text=t}return d.prototype.valueOf=function(){return this.text},d.prototype.toString=function(){return this.text},i=function(n,o){var i=e.interpolate(s(n).toString(),t.mapObject(o,s));return l(i)},r=function(){var t,n="",e=arguments.length;for(t=0;t<e;t+=1)n+=s(arguments[t]);return l(n)},a=function(n,s){return function(i){var r=t.extend({HtmlUtils:o,StringUtils:e},i||{});return l(t.template(n,s)(r))}},u=function(t,e){return n(t).html(s(e).toString())},c=function(t,e){return n(t).prepend(s(e).toString())},o={append:function(t,e){return n(t).append(s(e).toString())},ensureHtml:s=function(n){return n instanceof d?n:l(t.escape(n))},HTML:l=function(t){return new d(t)},HtmlSnippet:d,interpolateHtml:i,joinHtml:r,prepend:c,setHtml:u,template:a}}.apply(n,o),void 0===s||(t.exports=s)}).call(this,e.amdD)},2648:function(t,n,e){var o;(function(e){"use strict";void 0===(o=function(){return{interpolate:function(t,n){return t.replace(/{\w+}/g,(function(t){var e=t.slice(1,-1);return String(n[e])}))}}}.apply(n,[]))||(t.exports=o)}).call(this,e.amdD)},44158:(t,n,e)=>{var o=e(95891),s=e(20428);(function(){(function(){"use strict";var t,n={};n.Descriptor=((t=function(t){this.element=t,this.update=o.bind(this.update,this)}).prototype.onUpdate=function(t){this.callbacks||(this.callbacks=[]),this.callbacks.push(t)},t.prototype.update=function(){var t,n;t=this.save(),(n=this.callbacks).length,s.each(n,(function(n,e){e(t)}))},t.prototype.save=function(){return{}},t),this.XBlockToXModuleShim=function(t,n,e){var o,i;if(e&&(o=e["xmodule-type"]),o||(o=s(n).data("type")),"None"!==o)try{return i=new window[o](n,t),s(n).hasClass("xmodule_edit")&&s(document).trigger("XModule.loaded.edit",[n,i]),s(n).hasClass("xmodule_display")&&s(document).trigger("XModule.loaded.display",[n,i]),i}catch(t){console.error("Unable to load "+o+": "+t.message)}},this.XModule=n}).call(this)}).call(window),t.exports=window.XModule},31570:(t,n,e)=>{var o=e(20428);(function(){(function(){"use strict";this.JavascriptLoader=function(){function t(){}return t.executeModuleScripts=function(t,n){var e,s,i,r,l;return n||(n=null),0===(l=t.find(".script_placeholder")).length?(null!==n&&n(),[]):(s=function(){var t,n,e;for(e=[],t=1,n=l.length;n>=1?t<=n:t>=n;n>=1?++t:--t)e.push(!1);return e}(),e=!1,i=function(t){return function(){var o,i,r;for(o=!0,s[t]=!0,i=0,r=s.length;i<r;i++)if(!s[i]){o=!1;break}if(o&&!e&&(e=!0,null!==n))return n()}},r={},l.each((function(t,n){var e,s;return(s=o(n).attr("data-src"))in r?i(t)():(r[s]=!0,(e=document.createElement("script")).setAttribute("src",s),e.setAttribute("type","text/javascript"),e.onload=i(t),o("head")[0].appendChild(e)),o(n).remove()})))},t}()}).call(this)}).call(window)},81806:(t,n,e)=>{var o,s;(function(){o=[e(64044)],void 0===(s=function(t){"use strict";function n(n){return new t(n)}return window.Poll=n,n}.apply(n,o))||(t.exports=s)}).call(window)},64044:(t,n,e)=>{var o,s,i=e(20428),r=e(20428);(function(){o=[e(23844)],void 0===(s=function(t){return n.prototype={showAnswerGraph:function(n,e){var o,s;s=parseFloat(e),!1!==isFinite(s)&&(o=this,i.each(n,(function(n,e){var i,r;i=parseFloat(e),!1!==isFinite(i)&&(r=i/s*100,o.answersObj[n].statsEl.show(),o.answersObj[n].numberEl.html(t.HTML(e+" ("+r.toFixed(1)+"%)").toString()),o.answersObj[n].percentEl.css({width:r.toFixed(1)+"%"}))})))},submitAnswer:function(t,n){var e;!0!==this.questionAnswered&&(this.questionAnswered=!0,e=this,console.log("submit answer"),n.buttonEl.addClass("answered"),i.postWithPrefix(e.ajax_url+"/"+t,{},(function(t){console.log("success! response = "),console.log(t),e.showAnswerGraph(t.poll_answers,t.total),!0===e.canReset&&e.resetButton.show(),null!==e.wrapperSectionEl&&i(e.wrapperSectionEl).find(".xmodule_ConditionalModule").each((function(t,n){new window.Conditional(n,e.runtime,e.id.replace(/^poll_/,""))}))})))},submitReset:function(){var t;t=this,console.log("submit reset"),i.postWithPrefix(this.ajax_url+"/reset_poll",{},(function(n){console.log("success! response = "),console.log(n),!0===n.hasOwnProperty("status")&&"string"==typeof n.status&&"success"===n.status.toLowerCase()&&(t.questionAnswered=!1,t.questionEl.find(".button.answered").removeClass("answered"),t.questionEl.find(".stats").hide(),t.resetButton.hide(),null!==t.wrapperSectionEl&&i(t.wrapperSectionEl).find(".xmodule_ConditionalModule").each((function(n,e){new window.Conditional(e,t.runtime,t.id.replace(/^poll_/,""))})))}))},postInit:function(){var n;n=this,this.jsonConfig.poll_answer.length>0&&!1===this.jsonConfig.answers.hasOwnProperty(this.jsonConfig.poll_answer)?t.append(this.questionEl,t.joinHtml(t.HTML("<h3>Error!</h3>"),t.HTML("<p>XML data format changed. List of answers was modified, but poll data was not updated.</p>"))):(this.id=this.questionEl.attr("id"),this.ajax_url=this.questionEl.data("ajax-url"),this.questionHtmlMarkup=i("<div />").html(t.HTML(this.jsonConfig.question).toString()).text(),this.questionEl.append(t.HTML(this.questionHtmlMarkup).toString()),this.questionAnswered=!1,this.answersObj={},this.shortVersion=!0,i.each(this.jsonConfig.answers,(function(t,e){e.length>=18&&(n.shortVersion=!1)})),i.each(this.jsonConfig.answers,(function(e,o){var s;s={},n.answersObj[e]=s,s.el=i('<div class="poll_answer"></div>'),s.questionEl=i('<div class="question"></div>'),s.buttonEl=i('<div class="button"></div>'),s.textEl=i('<div class="text"></div>'),s.questionEl.append(t.HTML(s.buttonEl).toString()),s.questionEl.append(t.HTML(s.textEl).toString()),s.el.append(t.HTML(s.questionEl).toString()),s.statsEl=i('<div class="stats"></div>'),s.barEl=i('<div class="bar"></div>'),s.percentEl=i('<div class="percent"></div>'),s.barEl.append(t.HTML(s.percentEl).toString()),s.numberEl=i('<div class="number"></div>'),s.statsEl.append(t.HTML(s.barEl).toString()),s.statsEl.append(t.HTML(s.numberEl).toString()),s.statsEl.hide(),s.el.append(t.HTML(s.statsEl).toString()),s.textEl.html(t.HTML(o).toString()),!0===n.shortVersion&&i.each(s,(function(t,n){n instanceof r&&n.addClass("short")})),s.el.appendTo(n.questionEl),s.textEl.on("click",(function(){n.submitAnswer(e,s)})),s.buttonEl.on("click",(function(){n.submitAnswer(e,s)})),e===n.jsonConfig.poll_answer&&(s.buttonEl.addClass("answered"),n.questionAnswered=!0)})),console.log(this.jsonConfig.reset),"string"==typeof this.jsonConfig.reset&&"true"===this.jsonConfig.reset.toLowerCase()?(this.canReset=!0,this.resetButton=i('<div class="button reset-button">Change your vote</div>'),!1===this.questionAnswered&&this.resetButton.hide(),t.append(this.questionEl,this.resetButton),this.resetButton.on("click",(function(){n.submitReset()}))):this.canReset=!1,!0===this.questionAnswered&&this.showAnswerGraph(this.jsonConfig.poll_answers,this.jsonConfig.total))}},n;function n(t,n){var e;if(this.runtime=n,this.questionEl=i(t).find(".poll_question"),1===this.questionEl.length)if("true"!==this.questionEl.attr("poll_main_processed")){this.questionEl.attr("poll_main_processed","true"),e=this,this.wrapperSectionEl=null,function(t,n){for(;"body"!==t.tagName.toLowerCase();){if(n+=1,"div"===(t=i(t).parent()[0]).tagName.toLowerCase()&&"wrapper"===i(t).data("block-type")){e.wrapperSectionEl=t;break}if(n>50)break}}(i(t)[0],0);try{return this.jsonConfig=JSON.parse(this.questionEl.children(".poll_question_div").html()),void i.postWithPrefix(this.questionEl.data("ajax-url")+"/get_state",{},(function(t){e.jsonConfig.poll_answer=t.poll_answer,e.jsonConfig.total=t.total,i.each(t.poll_answers,(function(t,n){e.jsonConfig.poll_answers[t]=n})),e.questionEl.children(".poll_question_div").html(JSON.stringify(e.jsonConfig)),e.postInit()}))}catch(t){console.log('ERROR: Invalid JSON config for poll ID "'+this.id+'".','Error messsage: "'+t.message+'".')}}else console.log("ERROR: PolMain JS constructor was called on a DOM element that has already been processed once.");else console.log("ERROR: PollMain constructor requires one question DOM element.")}}.apply(n,o))||(t.exports=s)}).call(window)},95891:t=>{"use strict";t.exports=window._},20428:t=>{"use strict";t.exports=window.jQuery}},n={};function e(o){var s=n[o];if(void 0!==s)return s.exports;var i=n[o]={exports:{}};return t[o].call(i.exports,i,i.exports,e),i.exports}e.amdD=function(){throw new Error("define cannot be used indirect")},e(44158),e(31570),e(81806);var o=e(64044),s=window;for(var i in o)s[i]=o[i];o.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();