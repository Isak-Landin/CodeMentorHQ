/*! For license information please see library.0915ec643196aa40ae1b.js.LICENSE.txt */
(()=>{var e={41023:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(51583),n(70126),n(81239),n(92),n(40496),n(93148),n(69253),n(28920),n(6782)],void 0===(r=function(e,t,i,r,o){"use strict";return window.$=e,window._=t,o("https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_SVG&delayStartupUntil=configured","mathjax",(function(){window.MathJax.Hub.Config({tex2jax:{inlineMath:[["\\(","\\)"],["[mathjaxinline]","[/mathjaxinline]"]],displayMath:[["\\[","\\]"],["[mathjax]","[/mathjax]"]]},CommonHTML:{linebreaks:{automatic:!0}},SVG:{linebreaks:{automatic:!0}},"HTML-CSS":{linebreaks:{automatic:!0}}}),window.MathJax.Hub.processSectionDelay=0,window.MathJax.Hub.Configured(),window.addEventListener("resize",(function(){e>=0&&window.clearTimeout(e);n!==document.documentElement.scrollWidth&&(e=window.setTimeout((function(){n=document.documentElement.scrollWidth,MathJax.Hub.Queue(["Rerender",MathJax.Hub]),e=-1}),t))}));var e=-1,t=1e3,n=document.documentElement.scrollWidth})),window.CodeMirror=i,window.RequireJS={requirejs:{},require:o,define:n.amdD},a=[],s=e.Deferred(),function e(t){o.ready("mathjax",(function(){t.length?o([t.shift()],(function(){e(t)})):s.resolve()}))}(a.concat()),s.promise();var a,s}.apply(t,i))||(e.exports=r)},33714:(e,t,n)=>{var i,r,o=n(25799),a=n(20428);i=[n(55883),n(20428),n(95891),n(44511),n(99927),n(90165),n(84516),n(28920)],void 0===(r=function(e,t,n,i,r,s,l){"use strict";var u,c;return(u=function(){return o.addAjaxPrefix(a,(function(){return t("meta[name='path_prefix']").attr("content")})),window.CMS=window.CMS||{},window.CMS.URL=window.CMS.URL||{},window.onTouchBasedDevice=function(){return navigator.userAgent.match(/iPhone|iPod|iPad|Android/i)},n.extend(window.CMS,r.Events),r.emulateHTTP=!0,t.ajaxSetup({headers:{"X-CSRFToken":t.cookie("csrftoken")},dataType:"json",content:{script:!1}}),t(document).ajaxError((function(e,t,n){var i,r,o=s("This may be happening because of an error with our server or your internet connection. Try refreshing the page or making sure you are online.");if(!1!==n.notifyOnError)return(r=t.getResponseHeader("content-type"))&&r.indexOf("json")>-1&&t.responseText&&(o=JSON.parse(t.responseText).error),i=new l.Error({title:s("Studio's having trouble saving your work"),message:o}),console.log("Studio AJAX Error",{url:e.currentTarget.URL,response:t.responseText,status:t.status}),i.show()})),c=function(e,n,i,r){return t.isFunction(n)&&(i=n,n=void 0),t.ajax({url:e,type:r,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(n),success:i,global:!n||n.global})},t.postJSON=function(e,t,n){return c(e,t,n,"POST")},t.patchJSON=function(e,t,n){return c(e,t,n,"PATCH")},e((function(){return window.onTouchBasedDevice()?t("body").addClass("touch-based-device"):null}))})(),u}.apply(t,i))||(e.exports=r)},70483:(e,t,n)=>{var i,r,o=n(95891);i=[n(20428),n(99927),n(14930),n(8468),n(90165),n(99738),n(84516)],void 0===(r=function(e,t,n,i,r,a,s){"use strict";var l={}.hasOwnProperty,u=function(e,t){var n;for(n in t)l.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},c={},d={},f={};c.v1=function(n){function a(){a.__super__.constructor.call(this),this.dispatcher=o.clone(t.Events),this.listenTo("save",this._handleSave),this.listenTo("cancel",this._handleCancel),this.listenTo("error",this._handleError),this.listenTo("modal-shown",(function(e){this.modal=e})),this.listenTo("modal-hidden",(function(){this.modal=null})),this.listenTo("page-shown",(function(e){this.page=e}))}return u(a,n),a.prototype.handlerUrl=function(t,n,r,o){var a;return a=i(this.handlerPrefix).segment(e(t).data("usage-id")).segment("handler").segment(n),null!==r&&a.segment(r),null!==o&&a.search(o),a.toString()},a.prototype.notify=function(e,t){this.dispatcher.trigger(e,t)},a.prototype.listenTo=function(e,t){this.dispatcher.bind(e,t,this)},a.prototype.refreshXBlock=function(e){this.page&&this.page.refreshXBlock(e)},a.prototype._handleError=function(e){var t,n;(t=e.message||e.msg)&&(n=e.title||r("OpenAssessment Save Error"),this.alert=new s.Error({title:n,message:t,closeIcon:!1,shown:!1}),this.alert.show())},a.prototype._handleSave=function(e){var t;"start"===e.state?(t=e.message||r("Saving"),this.notification=new s.Mini({title:t}),this.notification.show()):"end"===e.state&&(this._hideAlerts(),this.modal&&this.modal.onSave?this.modal.onSave():e.element&&this.refreshXBlock(e.element),this.notification.hide())},a.prototype._handleCancel=function(){this._hideAlerts(),this.modal&&(this.modal.cancel(),this.notify("modal-hidden"))},a.prototype._hideAlerts=function(){this.alert&&this.alert.options.shown&&this.alert.hide()},a}(n.Runtime.v1),d.v1=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.handlerPrefix="/preview/xblock",t}(c.v1),f.v1=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.handlerPrefix="/xblock",t}(c.v1),window.BaseRuntime=c,window.PreviewRuntime=d,window.StudioRuntime=f}.apply(t,i))||(e.exports=r)},67044:(e,t,n)=>{var i,r;i=[n(55883),n(20428),n(95891),n(90165),n(84516),n(56537),n(97573),n(37127),n(98642),n(72188),n(78759),n(98573),n(61280),n(8970)],void 0===(r=function(e,t,n,i,r,o,a,s,l,u){"use strict";var c;function d(e){e.preventDefault(),t.smoothScroll({offset:-200,easing:"swing",speed:1e3,scrollElement:null,scrollTarget:t(this).attr("href")})}function f(e){e.preventDefault(),t(this).closest(".wrapper-notification").removeClass("is-shown").addClass("is-hiding").attr("aria-hidden","true")}function h(e){e.preventDefault(),t(this).closest(".wrapper-alert").removeClass("is-shown")}e((function(){(c=t("body")).on("click",".embeddable-xml-input",(function(){t(this).select()})),c.addClass("js"),t(".action-alert-close, .alert.has-actions .nav-actions a").bind("click",h),t(".action-notification-close").bind("click",f),c.click((function(){t(".nav-dd .nav-item .wrapper-nav-sub").removeClass("is-shown"),t(".nav-dd .nav-item .title").removeClass("is-selected"),t(".custom-dropdown .dropdown-options").hide()})),t(".nav-dd .nav-item, .filterable-column .nav-item").click((function(e){var n=t(this).find(".wrapper-nav-sub"),i=t(this).find(".title");n.hasClass("is-shown")?(n.removeClass("is-shown"),i.removeClass("is-selected")):(t(".nav-dd .nav-item .title").removeClass("is-selected"),t(".nav-dd .nav-item .wrapper-nav-sub").removeClass("is-shown"),i.addClass("is-selected"),n.addClass("is-shown"),e.stopPropagation())})),t('a[rel="external"]:not([title])').attr("title",i("This link will open in a new browser window/tab")),t('a[rel="external"]').attr({rel:"noopener external",target:"_blank"}),t('a[rel="modal"]').attr("title",i("This link will open in a modal window")).leanModal({overlay:.5,closeButton:".action-modal-close"}),t(".action-modal-close").click((function(e){e.preventDefault()})),t('a[rel*="view"][href^="#"]').bind("click",d),l.iframeBinding(),t.browser.msie&&t.ajaxSetup({cache:!1}),t(".js-header-user-menu").length&&new u({el:".js-header-user-menu"}).postRender(),window.studioNavMenuActive=!0}))}.apply(t,i))||(e.exports=r)},79225:(e,t,n)=>{var i,r;i=[n(99927),n(85524)],void 0===(r=function(e,t){return e.Collection.extend({model:t})}.apply(t,i))||(e.exports=r)},68194:(e,t,n)=>{var i,r;i=[n(99927),n(3707)],void 0===(r=function(e,t){return e.Collection.extend({model:t,comparator:"display_name"})}.apply(t,i))||(e.exports=r)},13183:(e,t,n)=>{var i,r;i=[n(67044),n(33714),n(46041),n(25874),n(96310),n(5840),n(87285),n(38264),n(95795),n(91760)],void 0===(r=function(){}.apply(t,i))||(e.exports=r)},85524:(e,t,n)=>{var i,r;i=[n(99927)],void 0===(r=function(e){return e.Model.extend({defaults:{type:"",templates:[],support_legend:{}},parse:function(e){var t=function(t){return!t.boilerplate_name&&t.category===e.type};this.type=e.type,this.templates=e.templates,this.display_name=e.display_name,this.support_legend=e.support_legend,this.templates.sort((function(e,n){return t(e)?-1:t(n)||e.hinted&&!n.hinted?1:!e.hinted&&n.hinted?-1:e.display_name>n.display_name?1:e.display_name<n.display_name?-1:0}))}})}.apply(t,i))||(e.exports=r)},95795:(e,t,n)=>{var i,r;i=[n(99927)],void 0===(r=function(e){return e.Model.extend({defaults:{name:""},validate:function(e,t){if(!e.name)return gettext("You must specify a name")}})}.apply(t,i))||(e.exports=r)},73175:(e,t,n)=>{var i,r;i=[n(99927),n(95891)],void 0===(r=function(e,t){return e.Model.extend({defaults:{type:null,options:{},custom:!1},initialize:function(e){e&&e.asString&&(this.setFromString(e.asString),this.unset("asString"))},toString:function(){var e=this.get("custom");if(e)return e;var n=this.get("type"),i=this.get("options");if(t.isEmpty(i))return n||"";var r=t.map(i,(function(e,n){return t.isBoolean(e)?e?n:null:n+"="+e}));return n+": "+(r=t.filter(r,t.identity)).join(" ")},setFromString:function(e,n){if(!e)return this.set(this.defaults,n);var i=e.indexOf(":"),r=e.indexOf(" ");if(-1==i)return-1==r?this.set({type:e,options:{},custom:!1},n):this.set({type:null,options:{},custom:e},n);var o=e.substring(0,i),a={},s=e.substring(i+1);return t.each(s.split(" "),(function(e){if(!t.isEmpty(e)){var n=e.indexOf("=");if(-1==n)a[e]=!0;else{var i=e.substring(0,n),r=e.substring(n+1);a[i]=r}}})),this.set({type:o,options:a,custom:!1},n)}})}.apply(t,i))||(e.exports=r)},3707:(e,t,n)=>{var i,r;i=[n(99927)],void 0===(r=function(e){var t=e.Model.extend({defaults:{field_name:null,display_name:null,value:null,explicitly_set:null,default_value:null,options:null,type:null,custom:!1},initialize:function(){this.original_value=this.get("value"),this.original_explicitly_set=this.get("explicitly_set")},isModified:function(){return!0!==this.get("custom")&&(!(!this.get("explicitly_set")&&!this.original_explicitly_set)&&(!this.get("explicitly_set")||!this.original_explicitly_set||this.get("value")!==this.original_value))},isExplicitlySet:function(){return this.get("explicitly_set")},getDisplayValue:function(){return this.get("value")},getValue:function(){return this.get("explicitly_set")?this.get("value"):null},setValue:function(e){this.set({explicitly_set:!0,value:e})},getFieldName:function(){return this.get("field_name")},getOptions:function(){return this.get("options")},getType:function(){return this.get("type")},clear:function(){this.set({explicitly_set:!1,value:this.get("default_value")})}});return t.SELECT_TYPE="Select",t.INTEGER_TYPE="Integer",t.FLOAT_TYPE="Float",t.GENERIC_TYPE="Generic",t.LIST_TYPE="List",t.DICT_TYPE="Dict",t.VIDEO_LIST_TYPE="VideoList",t.RELATIVE_TIME_TYPE="RelativeTime",t}.apply(t,i))||(e.exports=r)},27786:(e,t,n)=>{var i,r;i=[n(99927),n(95891),n(90165)],void 0===(r=function(e,t,n){return e.Model.extend({defaults:{title:"",message:"",selectedFile:null,uploading:!1,uploadedBytes:0,totalBytes:0,finished:!1,mimeTypes:[],fileFormats:[]},validate:function(e,i){if(e.selectedFile&&!this.checkTypeValidity(e.selectedFile))return{message:t.template(n("Only <%- fileTypes %> files can be uploaded. Please select a file ending in <%- (fileExtensions) %> to upload."))(this.formatValidTypes()),attributes:{selectedFile:!0}}},fileTypes:function(){var e=t.map(this.attributes.mimeTypes,(function(e){return e.split("/")[1].toUpperCase()})),n=t.map(this.attributes.fileFormats,(function(e){return e.toUpperCase()}));return e.concat(n)},checkTypeValidity:function(e){var n,i=this.attributes;return 0===i.mimeTypes.length&&0===i.fileFormats.length||t.contains(i.mimeTypes,e.type)||(n=i.fileFormats,RegExp("(?:.+)\\.("+n.join("|")+")$","i")).test(e.name)},formatValidTypes:function(){var e=this.attributes;if(1===e.mimeTypes.concat(e.fileFormats).length)return{fileTypes:this.fileTypes()[0],fileExtensions:"."+this.fileTypes()[0].toLowerCase()};var i=n("or"),r=function(e){return t.template("<%- initial %> <%- or %> <%- last %>")({initial:t.initial(e).join(", "),or:i,last:t.last(e)})};return{fileTypes:r(this.fileTypes()),fileExtensions:r(t.map(this.fileTypes(),(function(e){return"."+e.toLowerCase()})))}}})}.apply(t,i))||(e.exports=r)},19506:(e,t,n)=>{var i,r;i=[n(99927),n(95891),n(44511),n(37127)],void 0===(r=function(e,t,n,i){"use strict";var r=e.Model.extend({urlRoot:i.urlRoot,defaults:{id:null,display_name:null,category:null,data:null,metadata:null,studio_url:null,child_info:null,ancestor_info:null,edited_on:null,edited_by:null,published:null,published_on:null,published_by:null,has_children:null,has_changes:null,visibility_state:null,released_to_students:null,release_date:null,release_date_from:null,currently_visible_to_students:null,due_date:null,format:null,course_graders:null,graded:null,start:null,due:null,has_explicit_staff_lock:null,ancestor_has_staff_lock:null,staff_lock_from:null,staff_only_message:null,has_partition_group_components:null,actions:null,is_header_visible:null,explanatory_message:null,group_access:null,user_partitions:null,highlights:[],highlights_enabled:!1,highlights_enabled_for_messaging:!1,highlights_preview_only:!0,highlights_doc_url:"",summary_configuration_enabled:null,tags:null,hide_from_toc:null,hide_from_toc_message:null},initialize:function(){t.extend(this,this.getCategoryHelpers())},parse:function(e){return e.ancestor_info&&(e.ancestor_info.ancestors=this.parseXBlockInfoList(e.ancestor_info.ancestors)),e.child_info&&(e.child_info.children=this.parseXBlockInfoList(e.child_info.children)),e},parseXBlockInfoList:function(e){return t.map(e,(function(e){return this.createChild(e)}),this)},createChild:function(e){return new r(e,{parse:!0})},hasChildren:function(){var e=this.get("child_info");return e&&e.children.length>0},isPublishable:function(){return!this.get("published")||this.get("has_changes")},isDeletable:function(){return this.isActionRequired("deletable")},isDuplicable:function(){return this.isActionRequired("duplicable")},isDraggable:function(){return this.isActionRequired("draggable")},isChildAddable:function(){return this.isActionRequired("childAddable")},isHeaderVisible:function(){return null===this.get("is_header_visible")||this.get("is_header_visible")},isActionRequired:function(e){var n=this.get("actions");return!(null!==n&&t.has(n,e)&&!n[e])},getCategoryHelpers:function(){var e={};return t.each(["course","chapter","sequential","vertical"],(function(t){e["is"+n.titleize(t)]=function(){return this.get("category")===t}}),this),e},isEditableOnCourseOutline:function(){return this.isSequential()||this.isChapter()||this.isVertical()}});return r}.apply(t,i))||(e.exports=r)},48150:(e,t,n)=>{var i,r;i=[n(20428)],void 0===(r=function(e){return function(t){13==t.which&&e(this).trigger("change").blur()}}.apply(t,i))||(e.exports=r)},97573:(e,t,n)=>{var i,r;i=[n(20428),n(58112),n(48150),n(78759),n(60903)],r=function(e,t,n){"use strict";function i(t,n){var i=null,r=null;return t.length>0&&(i=e(t).datepicker("getDate")),n.length>0&&(r=e(n).timepicker("getTime")),i&&r?new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),r.getHours(),r.getMinutes())):i?new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate())):null}function r(t,n,i){var r=Date.parse(i);r&&(e(t).datepicker("setDate",r),n.length>0&&e(n).timepicker("setTime",r))}function o(e){return e&&"string"==typeof e?new Date(e):e}return{getDate:i,setDate:r,renderDate:function(e){return new Date(e).toLocaleString([],{timeZone:"UTC",timeZoneName:"short"})},convertDateStringsToObjects:function(e,t){var n;for(n=0;n<t.length;n++)e[t[n]]&&(e[t[n]]=o(e[t[n]]));return e},parseDateFromString:o,setupDatePicker:function(t,o,a){var s,l,u,c,d,f,h;void 0!==a&&o.hasOwnProperty("collection")?(s=o.collection.models[a],l=o.$el.find("#"+o.collectionSelector(s.cid))):(s=o.model,l=o.$el.find("#"+o.fieldToSelectorMap[t])),u=e(l).find("input.date"),c=e(l).find("input.time"),d=o,f=function(e){var n=i(u,c);d.clearValidationErrors(),d.setAndValidate(t,n||null,e)},c.timepicker({timeFormat:"H:i"}),u.datepicker(),u.change(f).keyup(n),c.on("changeTime",f),c.on("input",f),h=null,s&&(h=s.get(t)),h?r(u,c,h):(c.val(""),u.val(""))}}}.apply(t,i),void 0===r||(e.exports=r)},98642:(e,t,n)=>{var i,r;i=[n(20428)],void 0===(r=function(e){var t=function(t){t.each((function(){if("IFRAME"===e(this).prop("tagName")){var t=e(this).attr("src");if(t){var n="wmode=transparent";if(-1!==t.indexOf("?")){var i=t.split("?");if(-1===i[1].search("wmode=transparent")){var r=i[1],o=i[0];e(this).attr("src",o+"?"+n+"&"+r)}}else 0!==t.lastIndexOf("javascript:",0)&&e(this).attr("src",t+"?"+n)}}else e(this).attr("wmode","transparent")}))};return{iframeBinding:function(n){var i=null;i=void 0===n?e("iframe, embed"):void 0!==n.nodeName?e(n).find("iframe, embed"):n.$("iframe, embed"),t(i)},iframeBindingHtml:function(n){if(n){var i,r=document.createElement("div");e(r).html(n),(i=e(r).find("iframe, embed")).length>0&&(t(i),n=e(r).html())}return n}}}.apply(t,i))||(e.exports=r)},99738:(e,t,n)=>{var i,r;i=[n(20428)],void 0===(r=function(e){var t=function(e){e&&e.preventDefault();var t=r();t.hasClass("is-fixed")||(o().hide(),n(t))},n=function(e){null==e&&(e=r()),e.hide(),e.removeClass("is-fixed"),e.unbind("click")},i=function(e,n){var i=r();return i.show(),e&&i.addClass("is-fixed"),i.unbind("click"),n?i.bind("click",n):i.bind("click",t),i},r=function(){return e(".modal-cover")},o=function(){return e(".modal, .showAsModal")};return{showModal:function(){o().show(),i()},hideModal:t,showModalCover:i,hideModalCover:n}}.apply(t,i))||(e.exports=r)},37127:(e,t,n)=>{var i,r;i=[n(95891)],void 0===(r=function(e){var t="/xblock";return{urlRoot:t,getUpdateUrl:function(n){return e.isUndefined(n)?t+"/":t+"/"+n}}}.apply(t,i))||(e.exports=r)},42264:(e,t,n)=>{var i,r;i=[n(20428),n(95891)],void 0===(r=function(e,t){return{loadTemplate:function(n){var i=e("#"+n+"-tpl").text();return i||console.error("Failed to load "+n+" template"),t.template(i)}}}.apply(t,i))||(e.exports=r)},32446:(e,t,n)=>{var i,r,o=n(20428);i=[n(39346),n(95891)],void 0===(r=function(e,t){return e.extend({initialize:function(){var e=t.result(this,"templateName");this.uniqueId=t.uniqueId(e+"_"),this.template=this.loadTemplate(e),this.$el.html(this.template({model:this.model,uniqueId:this.uniqueId})),this.listenTo(this.model,"change",this.render),this.render()},templateName:"",getValueFromEditor:function(){},setValueInEditor:function(e){},updateModel:function(){this.model.setValue(this.getValueFromEditor())},clear:function(){this.model.clear()},showClearButton:function(){this.$el.hasClass("is-set")||(this.$el.addClass("is-set"),this.getClearButton().removeClass("inactive"),this.getClearButton().addClass("active"))},getClearButton:function(){return this.$el.find(".setting-clear")},render:function(){if(this.template)return this.setValueInEditor(this.model.getDisplayValue()),this.model.isExplicitlySet()?this.showClearButton():(this.$el.removeClass("is-set"),this.getClearButton().addClass("inactive"),this.getClearButton().removeClass("active")),this},loadTemplate:function(e){var n=o("#"+e).text();return n||console.error("Failed to load "+e+" template"),t.template(n)}})}.apply(t,i))||(e.exports=r)},39346:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(99927),n(90165),n(98642),n(42264),n(5581)],void 0===(r=function(e,t,n,i,r,o,a){var s=n.View.extend({events:{"click .ui-toggle-expansion":"toggleExpandCollapse"},options:{collapsedClass:"collapsed"},constructor:function(e){t.bindAll(this,"beforeRender","render","afterRender"),this.options&&(e=t.extend({},t.result(this,"options"),e)),Math.trunc||(Math.trunc=function(e){return(e=+e)-e%1||(isFinite(e)&&0!==e?e<0?-0:0:e)}),this.options=e;var i=this;this.render=t.wrap(this.render,(function(e,t){return i.beforeRender(),e(t),i.afterRender(),i})),n.View.prototype.constructor.apply(this,arguments)},beforeRender:function(){},render:function(){return this},afterRender:function(){r.iframeBinding(this)},toggleExpandCollapse:function(t){var n=e(t.target);t.stopPropagation(),t.preventDefault(),a.toggleExpandCollapse(n,this.options.collapsedClass)},loadTemplate:function(e){return o.loadTemplate(e)}});return s}.apply(t,i))||(e.exports=r)},67136:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(90165),n(39346),n(5581),n(87807),n(37352),n(23844)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";return i.extend({events:{"click .new-component .new-component-type .multiple-templates":"showComponentTemplates","click .new-component .new-component-type .single-template":"createNewComponent","click .new-component .cancel-button":"closeNewComponent","click .new-component-templates .new-component-template .button-component":"createNewComponent","click .new-component-templates .cancel-button":"closeNewComponent"},initialize:function(e){i.prototype.initialize.call(this,e),this.template=this.loadTemplate("add-xblock-component")},render:function(){var e;this.$el.html()||(e=this,this.$el.html(s.HTML(this.template({})).toString()),this.collection.each((function(t){var n,i;n=new o({model:t}),e.$el.find(".new-component-type").append(n.render().el),i=new a({model:t}),e.$el.append(i.render().el)})))},showComponentTemplates:function(t){var n;t.preventDefault(),t.stopPropagation(),n=e(t.currentTarget).data("type"),this.$(".new-component").slideUp(250),this.$(".new-component-"+n).slideDown(250),this.$(".new-component-"+n+" div").focus()},closeNewComponent:function(t){var n;t.preventDefault(),t.stopPropagation(),n=e(t.currentTarget).data("type"),this.$(".new-component").slideDown(250),this.$(".new-component-templates").slideUp(250),this.$("ul.new-component-type li button[data-type="+n+"]").focus()},createNewComponent:function(i){var o=this,a=e(i.currentTarget),s=a.data(),l=r.getScrollOffset(this.$el);i.preventDefault(),this.closeNewComponent(i),r.runOperationShowingMessage(n("Adding"),t.bind(this.options.createComponent,this,s,a)).always((function(){r.setScrollOffset(o.$el,l)}))}})}.apply(t,i))||(e.exports=r)},87807:(e,t,n)=>{var i,r;i=[n(39346),n(23844)],void 0===(r=function(e,t){"use strict";return e.extend({tagName:"li",initialize:function(){var n={type:this.model.type,templates:this.model.templates,display_name:this.model.display_name};e.prototype.initialize.call(this),this.template=this.loadTemplate("add-xblock-component-button"),this.$el.html(t.HTML(this.template(n)).toString())}})}.apply(t,i))||(e.exports=r)},37352:(e,t,n)=>{var i,r;i=[n(20428),n(39346),n(23844)],void 0===(r=function(e,t,n){return t.extend({className:function(){return"new-component-templates new-component-"+this.model.type},initialize:function(){t.prototype.initialize.call(this);var e="problem"===this.model.type?"add-xblock-component-menu-problem":"add-xblock-component-menu",i=this.loadTemplate("add-xblock-component-support-level"),r=this.loadTemplate("add-xblock-component-support-legend");this.template=this.loadTemplate(e),n.setHtml(this.$el,n.HTML(this.template({type:this.model.type,templates:this.model.templates,support_legend:this.model.support_legend,support_indicator_template:i,support_legend_template:r,HtmlUtils:n}))),this.$(".tab-group").tabs()}})}.apply(t,i))||(e.exports=r)},31815:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(6775),n(37127),n(90165),n(2648),n(84516),n(78759)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";var s=".studio-xblock-wrapper";return n.extend({requestToken:"",new_child_view:"reorderable_container_child_preview",xblockReady:function(){var i,o,l,u,c=this;n.prototype.xblockReady.call(this),this.requestToken=this.$("div.xblock").first().data("request-token"),i=this.makeRequestSpecificSelector(".reorderable-container"),(o=this.$(i)).sortable({handle:".drag-handle",start:function(){o.sortable("refreshPositions")},stop:function(){var e,n,i;t.isUndefined(u)||((e=new a.Mini({title:r("Saving")})).show(),n=function(){e.hide()},l?(i=u,c.updateChildren(l,(function(){c.updateChildren(i,n)}))):c.updateChildren(u,n),u=void 0,l=void 0)},update:function(t,n){var i=e(t.target).closest(s);n.sender?l=i:u=i},helper:"original",opacity:"0.5",placeholder:"component-placeholder",forcePlaceholderSize:!0,axis:"y",items:"> .is-draggable",connectWith:i,tolerance:"pointer"})},updateChildren:function(n,r){var o,a,l=this.model;o=n.find(s).filter((function(){return e(this).parent().closest(s).data("locator")===n.data("locator")})),a=t.map(o,(function(t){return e(t).data("locator")})),e.ajax({url:i.getUpdateUrl(n.data("locator")),type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify({children:a}),success:function(){r&&r(),l.fetch()}})},acknowledgeXBlockDeletion:function(e){this.notifyRuntime("deleted-child",e)},refresh:function(){var e=this.makeRequestSpecificSelector(".reorderable-container.ui-sortable");this.$(e).sortable("refresh")},makeRequestSpecificSelector:function(e){return o.interpolate(r("{startTag}{requestToken}{endTag}{selector}"),{startTag:'div.xblock[data-request-token="',requestToken:this.requestToken,endTag:'"] > ',selector:e})}})}.apply(t,i))||(e.exports=r)},40895:(e,t,n)=>{var i,r;i=[n(32129)],void 0===(r=function(e){return e}.apply(t,i))||(e.exports=r)},74199:(e,t,n)=>{var i,r,o=n(20428);i=[n(99927),n(39346),n(95891),n(3707),n(32446),n(27786),n(78358),n(73175),n(68575),n(81645),n(12151),n(26808),n(23844)],void 0===(r=function(e,t,n,i,r,a,s,l,u,c,d,f,h){"use strict";var p={};return p.Editor=t.extend({views:{},initialize:function(){var e=this,t=0,i=e.$el.closest("[data-locator]").data("locator"),r=e.$el.closest("[data-course-key]").data("course-key"),o={numEntries:this.collection.length,locator:i};this.template=this.loadTemplate("metadata-editor"),this.$el.html(h.HTML(this.template(o)).toString()),this.collection.each((function(o){var a={el:e.$el.find(".metadata_entry")[t++],courseKey:r,locator:i,model:o},s={Select:"Option",Float:"Number",Integer:"Number"},l=o.getType();s[l]&&(l=s[l]),n.isFunction(p[l])?e.views[a.model.getFieldName()]=new p[l](a):e.views[a.model.getFieldName()]=new p.String(a)}))},getModifiedMetadataValues:function(){var e={};return this.collection.each((function(t){t.isModified()&&(e[t.getFieldName()]=t.getValue())})),e},getDisplayName:function(){var e="";return this.collection.each((function(t){if("display_name"===t.get("field_name")){var n=t.get("value");e=n||""}})),e}}),p.VideoList=d,p.VideoTranslations=f,p.String=r.extend({events:{"change input":"updateModel","keypress .setting-input":"showClearButton","click .setting-clear":"clear"},templateName:"metadata-string-entry",render:function(){r.prototype.render.apply(this),this.model.get("non_editable")&&this.$el.find("#"+this.uniqueId).prop("readonly",!0).addClass("is-disabled").attr("aria-disabled",!0)},getValueFromEditor:function(){return this.$el.find("#"+this.uniqueId).val()},setValueInEditor:function(e){this.$el.find("input").val(e)}}),p.VideoID=p.String.extend({requestDelay:300,initialize:function(){p.String.prototype.initialize.apply(this,arguments),this.$el.on("input","input",n.debounce(n.bind(this.inputChange,this),this.requestDelay))},render:function(){p.String.prototype.render.apply(this,arguments),c.Storage.set("edx_video_id",this.getValueFromEditor())},clear:function(){this.model.setValue(""),this.inputChange()},getData:function(){return[{mode:"edx_video_id",type:"edx_video_id",video:this.getValueFromEditor()}]},inputChange:function(){c.Storage.set("edx_video_id",this.getValueFromEditor()),e.trigger("transcripts:basicTabFieldChanged")}}),p.Number=r.extend({events:{"change input":"updateModel","keypress .setting-input":"keyPressed","change .setting-input":"changed","click .setting-clear":"clear"},render:function(){if(r.prototype.render.apply(this),!this.initialized){var e=function(e){return e.toFixed(4)},t="min",n="max",i="step",a=this.model.getOptions();a.hasOwnProperty(t)&&(this.min=Number(a[t]),this.$el.find("input").attr(t,e(this.min))),a.hasOwnProperty(n)&&(this.max=Number(a[n]),this.$el.find("input").attr(n,e(this.max)));var s=void 0;a.hasOwnProperty(i)?s=e(Number(a[i])):this.isIntegerField()&&(s="1"),void 0!==s&&this.$el.find("input").attr(i,s),o.fn.inputNumber&&this.$el.find(".setting-input-number").inputNumber(),this.initialized=!0}return this},templateName:"metadata-number-entry",getValueFromEditor:function(){return this.$el.find("#"+this.uniqueId).val()},setValueInEditor:function(e){this.$el.find("input").val(e)},isIntegerField:function(){return"Integer"===this.model.getType()},keyPressed:function(e){var t,n;this.showClearButton(),8!==(t=e.keyCode)&&9!==t&&35!==t&&36!==t&&37!==t&&39!==t&&45!==(n=e.which)&&46!==n&&48!==n&&49!==n&&50!==n&&51!==n&&52!==n&&53!==n&&54!==n&&55!==n&&56!==n&&57!==n&&e.preventDefault(),this.isIntegerField()&&46===e.keyCode&&e.preventDefault()},changed:function(){var e=this.getValueFromEditor();e?(void 0!==this.max&&e>this.max?e=this.max:null!=this.min&&e<this.min&&(e=this.min),this.setValueInEditor(e),this.updateModel()):this.clear()}}),p.Option=r.extend({events:{"change select":"updateModel","click .setting-clear":"clear"},templateName:"metadata-option-entry",getValueFromEditor:function(){var e,t=this.$el.find("#"+this.uniqueId).find(":selected").text();return n.each(this.model.getOptions(),(function(n){n===t?e=n:n.display_name===t&&(e=n.value)})),e},setValueInEditor:function(e){n.each(this.model.getOptions(),(function(t){t.value===e&&(e=t.display_name)})),this.$el.find("#"+this.uniqueId+" option").filter((function(){return o(this).text()===e})).prop("selected",!0)}}),p.PublicAccess=p.Option.extend({templateName:"metadata-option-public-access",initialize:function(){p.Option.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.updateUrlFieldVisibility),this.updateUrlFieldVisibility()},updateUrlFieldVisibility:function(){var e=this.$el.find(".public-access-block-url-container");this.getValueFromEditor()?e.removeClass("is-hidden"):e.addClass("is-hidden")}}),p.List=r.extend({events:{"click .setting-clear":"clear","keypress .setting-input":"showClearButton","change input":"updateModel","input input":"enableAdd","click .create-setting":"addEntry","click .remove-setting":"removeEntry"},templateName:"metadata-list-entry",getValueFromEditor:function(){return n.map(this.$el.find("li input"),(function(e){return e.value.trim()})).filter(n.identity)},setValueInEditor:function(e){var t=this.$el.find("ol");t.empty(),n.each(e,(function(e,i){var r=n.template(h.joinHtml(h.HTML('<li class="list-settings-item">'),h.HTML('<input type="text" class="input" value="<%- ele %>">'),h.HTML('<a href="#" class="remove-action remove-setting" data-index="<%- index %>"><span class="icon fa fa-times-circle" aria-hidden="true"></span><span class="sr">'),gettext("Remove"),h.HTML("</span></a>"),h.HTML("</li>")).toString());t.append(h.HTML(o(r({ele:e,index:i}))).toString())}))},addEntry:function(e){e.preventDefault();var t=this.model.get("value")||[];this.setValueInEditor(t.concat([""])),this.$el.find(".create-setting").addClass("is-disabled").attr("aria-disabled",!0)},removeEntry:function(e){e.preventDefault();var t=o(e.currentTarget).siblings().val();this.setValueInEditor(n.without(this.model.get("value"),t)),this.updateModel(),this.$el.find(".create-setting").removeClass("is-disabled").attr("aria-disabled",!1)},enableAdd:function(){this.$el.find(".create-setting").removeClass("is-disabled").attr("aria-disabled",!1)},clear:function(){r.prototype.clear.apply(this,arguments),n.isNull(this.model.getValue())&&this.$el.find(".create-setting").removeClass("is-disabled").attr("aria-disabled",!1)}}),p.RelativeTime=r.extend({defaultValue:"00:00:00",maxTimeInSeconds:86399,events:{"focus input":"addSelection","mouseup input":"mouseUpHandler","change input":"updateModel","keypress .setting-input":"showClearButton","click .setting-clear":"clear"},templateName:"metadata-string-entry",getValueFromEditor:function(){return this.$el.find("#"+this.uniqueId).val()},updateModel:function(){var e=this.getValueFromEditor(),t=this.parseRelativeTime(e);this.model.setValue(t),e===t||this.model.hasChanged("value")||this.render()},parseRelativeTime:function(e){var t,i,r=function(e){return e<10?"0"+e:e},o=e.replace(/\s+/g,"").split(":");return o=n.map(o,(function(e){return Math.max(0,parseInt(e,10)||0)})).reverse(),t=n.reduce(o,(function(e,t,n){return e+t*Math.pow(60,n)}),0),[r((i=new Date(1e3*Math.min(t,this.maxTimeInSeconds))).getUTCHours()),r(i.getUTCMinutes()),r(i.getUTCSeconds())].join(":")},setValueInEditor:function(e){e||(e=this.defaultValue),this.$el.find("input").val(e)},addSelection:function(e){o(e.currentTarget).select()},mouseUpHandler:function(e){e.preventDefault()}}),p.Dict=r.extend({events:{"click .setting-clear":"clear","keypress .setting-input":"showClearButton","change input":"updateModel","input input":"enableAdd","click .create-setting":"addEntry","click .remove-setting":"removeEntry"},templateName:"metadata-dict-entry",getValueFromEditor:function(){var e={};return n.each(this.$el.find("li"),(function(t,n){var i=o(t).find(".input-key").val().trim(),r=o(t).find(".input-value").val().trim();if(""===r&&(""===i||i in e))return!1;e[i]=r})),e},setValueInEditor:function(e){var t=this.$el.find("ol"),i=document.createDocumentFragment();n.each(e,(function(e,t){var r=n.template(h.joinHtml(h.HTML('<li class="list-settings-item">'),h.HTML('<input type="text" class="input input-key" value="<%- key %>">'),h.HTML('<input type="text" class="input input-value" value="<%- value %>">'),h.HTML('<a href="#" class="remove-action remove-setting" data-value="<%- value %>"><span class="icon fa fa-times-circle" aria-hidden="true"></span><span class="sr">Remove</span></a>'),h.HTML("</li>")).toString());i.appendChild(o(r({key:t,value:e}))[0])})),t.html([i])},addEntry:function(e){e.preventDefault();var t=o.extend(!0,{},this.model.get("value"))||{};t[""]="",this.setValueInEditor(t),this.$el.find(".create-setting").addClass("is-disabled").attr("aria-disabled",!0)},removeEntry:function(e){e.preventDefault();var t=o(e.currentTarget).siblings(".input-key").val();this.setValueInEditor(n.omit(this.model.get("value"),t)),this.updateModel(),this.$el.find(".create-setting").removeClass("is-disabled").attr("aria-disabled",!1)},enableAdd:function(){this.$el.find(".create-setting").removeClass("is-disabled").attr("aria-disabled",!1)},clear:function(){r.prototype.clear.apply(this,arguments),n.isNull(this.model.getValue())&&this.$el.find(".create-setting").removeClass("is-disabled").attr("aria-disabled",!1)}}),p.FileUploader=r.extend({events:{"click .upload-setting":"upload","click .setting-clear":"clear"},templateName:"metadata-file-uploader-entry",templateButtonsName:"metadata-file-uploader-item",initialize:function(){this.buttonTemplate=this.loadTemplate(this.templateButtonsName),r.prototype.initialize.apply(this)},getValueFromEditor:function(){return this.$("#"+this.uniqueId).val()},setValueInEditor:function(e){var t=this.buttonTemplate({model:this.model,uniqueId:this.uniqueId});this.$("#"+this.uniqueId).val(e),this.$(".wrapper-uploader-actions").html(h.HTML(t).toString())},upload:function(e){var t=this,n=o(e.currentTarget),i="/assets/"+this.options.courseKey+"/",r=new a({title:gettext("Upload File")});new s({model:r,url:i,parentElement:n.closest(".xblock-editor"),onSuccess:function(e){e.asset&&e.asset.url&&t.model.setValue(e.asset.url)}}).show();e.preventDefault()}}),p.License=r.extend({initialize:function(e){this.licenseModel=new l({asString:this.model.getValue()}),this.licenseView=new u({model:this.licenseModel}),this.listenTo(this.licenseModel,"change",this.setLicense),this.render()},render:function(){return this.licenseView.render().$el.css("display","inline"),this.licenseView.undelegateEvents(),this.$el.empty().append(this.licenseView.el),this.licenseView.delegateEvents(),this},setLicense:function(){this.model.setValue(this.licenseModel.toString()),this.render()}}),p}.apply(t,i))||(e.exports=r)},3332:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(90165),n(39346)],void 0===(r=function(e,t,n,i){return i.extend({events:{"click .action-cancel":"cancel"},options:t.extend({},i.prototype.options,{type:"prompt",closeIcon:!1,icon:!1,modalName:"basic",modalType:"generic",modalSize:"lg",title:"",modalWindowClass:".modal-window",viewSpecificClasses:"",addPrimaryActionButton:!1,primaryActionButtonType:"save",primaryActionButtonTitle:n("Save"),showEditorModeButtons:!0}),initialize:function(){var t=this.options.parent,n=this.options.parentElement;this.modalTemplate=this.loadTemplate("basic-modal"),this.buttonTemplate=this.loadTemplate("modal-button"),t?n=t.$el:n||0===(n=this.$el.closest(this.options.modalWindowClass)).length&&(n=e("body")),this.parentElement=n},render:function(){this.$el.html(this.modalTemplate({name:this.options.modalName,type:this.options.modalType,size:this.options.modalSize,title:this.getTitle(),modalSRTitle:this.options.modalSRTitle,showEditorModeButtons:this.options.showEditorModeButtons,viewSpecificClasses:this.options.viewSpecificClasses})),this.addActionButtons(),this.renderContents(),this.parentElement.append(this.$el)},getTitle:function(){return this.options.title},renderContents:function(){var e=this.getContentHtml();this.$(".modal-content").html(e)},getContentHtml:function(){return""},show:function(n){var i=void 0===n;this.render(),this.resize(),e(window).resize(t.bind(this.resize,this)),i&&this.$el.find(this.options.modalWindowClass).focus()},hide:function(){this.undelegateEvents(),this.$el.html("")},cancel:function(e){e&&(e.preventDefault(),e.stopPropagation()),this.hide()},addActionButtons:function(){this.options.addPrimaryActionButton&&this.addActionButton(this.options.primaryActionButtonType,this.options.primaryActionButtonTitle,!0),this.addActionButton("cancel",n("Cancel"))},addActionButton:function(e,t,n){var i=this.buttonTemplate({type:e,name:t,isPrimary:n});this.getActionBar().find("ul").append(i)},getActionBar:function(){return this.$(this.options.modalWindowClass+" > div > .modal-actions")},getActionButton:function(e){return this.getActionBar().find(".action-"+e)},enableActionButton:function(e){this.getActionBar().find(".action-"+e).prop("disabled",!1).removeClass("is-disabled")},disableActionButton:function(e){this.getActionBar().find(".action-"+e).prop("disabled",!0).addClass("is-disabled")},resize:function(){var t,n,i,r,o,a,s;i=this.$el.find(this.options.modalWindowClass),a=.98*(r=e(window).width()),s=.98*(o=e(window).height()),n=(r-Math.min(i.outerWidth(),a))/2,t=(o-Math.min(i.outerHeight(),s))/2,i.css({top:t+e(window).scrollTop(),left:n+e(window).scrollLeft()})}})}.apply(t,i))||(e.exports=r)},20763:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(99927),n(90165),n(3332),n(5581),n(56155),n(33671)],r=function(e,t,n,i,r,o,a,s){"use strict";var l=r.extend({events:t.extend({},r.prototype.events,{"click .action-save":"save","click .action-modes a":"changeMode","click .title-edit-button":"clickTitleButton"}),options:e.extend({},r.prototype.options,{modalName:"edit-xblock",view:"studio_view",viewSpecificClasses:"modal-editor confirm",titleFormat:i("Editing: {title}"),addPrimaryActionButton:!0}),initialize:function(){r.prototype.initialize.call(this),this.template=this.loadTemplate("edit-xblock-modal"),this.editorModeButtonTemplate=this.loadTemplate("editor-mode-button")},edit:function(e,t,n){this.xblockElement=e,this.xblockInfo=a.findXBlockInfo(e,t),this.options.modalType=this.xblockInfo.get("category"),this.editOptions=n,this.render(),this.show(),this.getActionBar().hide(),this.displayXBlock()},getContentHtml:function(){return this.template({xblockInfo:this.xblockInfo})},displayXBlock:function(){this.editorView=new s({el:this.$(".xblock-editor"),model:this.xblockInfo,view:this.options.view}),this.editorView.render({success:t.bind(this.onDisplayXBlock,this)})},createTitleEditor:function(e){this.$(".modal-window-title").html(this.loadTemplate("edit-title-button")({title:e}))},onDisplayXBlock:function(){var e=this.editorView,t=this.getTitle(),n=this.editOptions&&this.editOptions.readOnlyView||!this.canSave();e.notifyRuntime("modal-shown",this),e.hasCustomTabs()?(this.$(".modal-header").hide(),e.$(".component-name").text(t)):e.getDataEditor()&&e.getMetadataEditor()?(this.createTitleEditor(t),this.addDefaultModes(),this.$(".wrapper-comp-plugins").length>0&&this.addModeButton("plugins",i("Plugins")),this.selectMode(e.mode)):this.$(".modal-window-title").text(t),e.hasCustomButtons()||(n&&this.disableSave(),this.getActionBar().show()),this.resize()},canSave:function(){return this.editorView.xblock.save||this.editorView.xblock.collectFieldData},disableSave:function(){var e=this.getActionButton("save"),t=this.getActionButton("cancel");e.parent().hide(),t.text(i("Close")),t.addClass("action-primary")},getTitle:function(){var e=this.xblockInfo.get("display_name");return e||(e=this.xblockInfo.isVertical()?i("Unit"):i("Component")),edx.StringUtils.interpolate(this.options.titleFormat,{title:e})},addDefaultModes:function(){var e,t,n;for(e=this.editorView.getDefaultModes(),t=0;t<e.length;t++)n=e[t],this.addModeButton(n.id,n.name)},changeMode:function(t){var n=e(t.target.parentElement).data("mode");t.preventDefault(),this.selectMode(n)},selectMode:function(e){var t;this.editorView.selectMode(e),this.$(".editor-modes a").removeClass("is-set"),e&&(t="."+e+"-button",this.$(t).addClass("is-set"))},save:function(e){var t=this,n=this.editorView,r=this.xblockInfo,a=null;try{a=n.getXBlockFieldData()}catch(e){return o.showErrorMeassage(i("Studio's having trouble parsing the problem component's content"),e.message,1e4),o.setScrollOffset(n.$el,100),null}return e.preventDefault(),a&&o.runOperationShowingMessage(i("Saving"),(function(){return r.save(a)})).done((function(){t.onSave()})),null},onSave:function(){var e=this.editOptions.refresh;this.hide(),e&&e(this.xblockInfo)},hide:function(){n.trigger("xblock:editorModalHidden"),r.prototype.hide.call(this),this.editorView.notifyRuntime("modal-hidden")},addModeButton:function(e,t){this.$(".editor-modes").append(this.editorModeButtonTemplate({mode:e,displayName:t}))},clickTitleButton:function(t){var n=this,i=this.xblockInfo.get("display_name"),r=this.$(".modal-window-title"),o=e('<input type="text" size="40" />'),a=function(t){var r=e(t.target).val();return i!==r&&(n.xblockInfo.set("display_name",r),n.xblockInfo.save({metadata:{display_name:r}})),n.createTitleEditor(n.getTitle()),!0};return t.preventDefault(),o.val(i),o.change(a).blur(a),r.html(o),o.focus().select(),e(t.target).remove(),!0}});return l}.apply(t,i),void 0===r||(e.exports=r)},32129:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(5581),n(31815),n(37127),n(90165),n(84516),n(21756),n(8017)],void 0===(r=function(e,t,n,i,r,o,a,s,l){return i.extend({initialize:function(e){var t=this;i.prototype.initialize.call(this),this.page_size=this.options.page_size,this.page=e.page,this.collection={currentPage:0,totalPages:0,totalCount:0,sortDirection:"desc",start:0,_size:0,bind:function(){},size:function(){return t.collection._size},showChildrenPreviews:!0,setPage:function(e){t.setPage(e-1)},nextPage:function(){t.nextPage()},previousPage:function(){t.previousPage()},getPage:function(){return t.collection.currentPage+1},hasPreviousPage:function(){return t.collection.currentPage>0},hasNextPage:function(){return t.collection.currentPage<t.collection.totalPages-1},getTotalPages:function(){return this.totalPages},getPageNumber:function(){return this.getPage()},getTotalRecords:function(){return this.totalCount},getPageSize:function(){return t.page_size}}},new_child_view:"container_child_preview",render:function(e){return(e=e||{}).page_number=void 0!==e.page_number?e.page_number:this.collection.currentPage,this.renderPage(e)},renderPage:function(t){var i=this,r=this.view,o=this.model.url();return e.ajax({url:decodeURIComponent(o)+"/"+r,type:"GET",cache:!1,data:this.getRenderParameters(t.page_number,t.force_render),headers:{Accept:"application/json"},success:function(r){var o=t.done;t.done=function(){if(i.processPaging({requested_page:t.page_number}),i.page.updatePreviewButton(i.collection.showChildrenPreviews),i.page.renderAddXBlockComponents(),t.force_render){var r=e('.studio-xblock-wrapper[data-locator="'+t.force_render+'"]');n.setScrollOffset(r,.1*e(window).height())}o&&o()},i.handleXBlockFragment(r,t)}})},getRenderParameters:function(e,t){return{page_size:this.page_size,enable_paging:!0,page_number:e,force_render:t}},getPageCount:function(e){return 0===e?1:Math.ceil(e/this.page_size)},setPage:function(e,n){n=n||{};var i=t.extend({page_number:e},n);this.render(i)},nextPage:function(){var e=this.collection,t=e.currentPage;t<e.totalPages-1&&this.setPage(t+1)},previousPage:function(){var e=this.collection.currentPage;e>0&&this.setPage(e-1)},processPaging:function(e){var t=this.$el.find(".xblock-container-paging-parameters"),n=t.data("total"),i=t.data("displayed"),r=t.data("start"),o=t.data("previews");this.collection.currentPage=e.requested_page,this.collection.totalCount=n,this.collection.totalPages=this.getPageCount(n),this.collection.start=r,this.collection._size=i,this.collection.showChildrenPreviews=o,this.processPagingHeaderAndFooter()},processPagingHeaderAndFooter:function(){this.pagingHeader&&this.pagingHeader.undelegateEvents(),this.pagingFooter&&this.pagingFooter.undelegateEvents(),this.pagingHeader=new s({view:this,el:this.$el.find(".container-paging-header")}),this.pagingFooter=new l({collection:this.collection,el:this.$el.find(".container-paging-footer")}),this.pagingHeader.render(),this.pagingFooter.render()},refresh:function(e,t,n){if(t){if(n){var i=e.xblock.element.parents(".studio-xblock-wrapper").first(),r=i.parent().children(".studio-xblock-wrapper");if(r.index(i)+1<=this.page_size&&r.length>this.page_size)return void r[r.length-1].remove()}if(this.collection.totalCount+=1,this.collection._size+=1,1!=this.collection.totalCount){this.collection.totalPages=this.getPageCount(this.collection.totalCount);var o=this.collection.totalPages-1;if(this.collection.currentPage!=o||1==this.collection.totalCount){var a=e.model.id;n&&(o=this.collection.currentPage+1),this.setPage(o,{force_render:a})}else this.pagingHeader.render(),this.pagingFooter.render()}else this.render()}},acknowledgeXBlockDeletion:function(e){this.notifyRuntime("deleted-child",e),this.collection._size-=1,this.collection.totalCount-=1;var t=this.collection.currentPage,n=this.getPageCount(this.collection.totalCount);this.collection.totalPages=n,t+1>n?this.setPage(n-1):t+1!=n?this.setPage(t):(this.pagingHeader.render(),this.pagingFooter.render())},sortDisplayName:function(){return o("Date added")},togglePreviews:function(){var t=this.model.url();return e.ajax({url:"/preview"+decodeURIComponent(t)+"/handler/trigger_previews",type:"POST",data:JSON.stringify({showChildrenPreviews:!this.collection.showChildrenPreviews}),dataType:"json"}).then(this.render).promise()}})}.apply(t,i))||(e.exports=r)},94534:(e,t,n)=>{var i,r;i=[n(20428),n(39346)],void 0===(r=function(e,t){return t.extend({initialize:function(){t.prototype.initialize.call(this)},hasContent:function(){return!0},renderPage:function(){return e.Deferred().resolve().promise()},render:function(){var e=this;return this.$(".ui-loading").removeClass("is-hidden"),this.renderPage().done((function(){e.hasContent()||e.$(".no-content").removeClass("is-hidden")})).always((function(){e.$(".ui-loading").addClass("is-hidden")})),this}})}.apply(t,i))||(e.exports=r)},98780:(e,t,n)=>{var i,r;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t,n){return t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}i=[n(20428),n(95891),n(99927),n(90165),n(94534),n(5581),n(31815),n(6775),n(67136),n(20763),n(54974),n(19506),n(88618),n(34958),n(91575),n(9705),n(56155),n(84516),n(56537),n(73439),n(37127)],void 0===(r=function(e,t,n,i,r,o,s,l,u,c,d,f,h,p,m,g,v,y,b,w,x){"use strict";var C;return r.extend((a(a(a(a(a(a(a(a(a(a(C={events:{"click .edit-button":"editXBlock","click .access-button":"editVisibilitySettings","click .duplicate-button":"duplicateXBlock","click .copy-button":"copyXBlock","click .move-button":"showMoveXBlockModal","click .delete-button":"deleteXBlock","click .show-actions-menu-button":"showXBlockActionsMenu","click .new-component-button":"scrollToNewComponentButtons","click .save-button":"saveSelectedLibraryComponents","click .paste-component-button":"pasteComponent","click .manage-tags-button":"openManageTags","change .header-library-checkbox":"toggleLibraryComponent","click .collapse-button":"collapseXBlock"},options:{collapsedClass:"is-collapsed",canEdit:!0,clipboardData:{content:null}},view:"container_preview",defaultViewClass:s,components_on_init:!0,initialize:function(e){r.prototype.initialize.call(this,e),this.viewClass=e.viewClass||this.defaultViewClass,this.isLibraryPage="library"===this.model.attributes.category,this.isLibraryContentPage="library_content"===this.model.attributes.category,this.nameEditor=new h({el:this.$(".wrapper-xblock-field"),model:this.model}),this.nameEditor.render(),this.isLibraryPage||(this.accessEditor=new p({el:this.$(".wrapper-xblock-field")}),this.accessEditor.render()),"new"===this.options.action&&this.nameEditor.$(".xblock-field-value-edit").click(),this.xblockView=this.getXBlockView(),this.messageView=new m.MessageView({el:this.$(".container-message"),model:this.model}),this.messageView.render(),this.clipboardBroadcastChannel=new BroadcastChannel("studio_clipboard_channel"),this.isLibraryPage||(this.containerAccessView=new m.ContainerAccess({el:this.$(".container-access"),model:this.model}),this.containerAccessView.render(),this.xblockPublisher=new m.Publisher({el:this.$("#publish-unit"),model:this.model,renderPage:this.render,clipboardBroadcastChannel:this.clipboardBroadcastChannel}),this.xblockPublisher.render(),this.publishHistory=new m.PublishHistory({el:this.$("#publish-history"),model:this.model}),this.publishHistory.render(),this.viewLiveActions=new m.ViewLiveButtonController({el:this.$(".nav-actions"),model:this.model}),this.viewLiveActions.render(),this.model.get("is_tagging_feature_disabled")||(this.tagListView=new m.TagList({el:this.$(".unit-tags"),model:this.model}),this.tagListView.setupMessageListener(),this.tagListView.render()),this.unitOutlineView=new g({el:this.$(".wrapper-unit-overview"),model:this.model}),this.unitOutlineView.render()),this.listenTo(n,"move:onXBlockMoved",this.onXBlockMoved)},getViewParameters:function(){return{el:this.$(".wrapper-xblock"),model:this.model,view:this.view}},getXBlockView:function(){return new this.viewClass(this.getViewParameters())},render:function(e){var t=this,n=this.xblockView,i=this.$(".ui-loading"),r=this.$(".unit-location"),o=this.$(".unit-tags"),a="is-hidden";i.removeClass(a),n.$el.addClass(a),n.render({done:function(){n.$el.removeClass(a),i.addClass(a),n.notifyRuntime("page-shown",t),t.components_on_init&&t.renderAddXBlockComponents(),t.onXBlockRefresh(n),r.removeClass(a),o.removeClass(a),t.delegateEvents(),t.isLibraryPage||t.isLibraryContentPage||t.initializePasteButton();var e=window.location.hash.slice(1);e&&document.getElementById(e).scrollIntoView({behavior:"smooth",inline:"center"})},block_added:e&&e.block_added})},findXBlockElement:function(t){return e(t).closest(".studio-xblock-wrapper")},getURLRoot:function(){return this.xblockView.model.urlRoot},onXBlockRefresh:function(e,t,n){this.xblockView.refresh(e,t,n),this.model.fetch()},renderAddXBlockComponents:function(){var e=this;e.options.canEdit?this.$(".add-xblock-component").each((function(n,i){new u({el:i,createComponent:t.bind(e.createComponent,e),collection:e.options.templates}).render()})):this.$(".add-xblock-component").remove()},initializePasteButton:function(){var e=this;if(this.options.canEdit){var t=this.options.clipboardData;this.refreshPasteButton(t),this.clipboardBroadcastChannel.onmessage=function(t){e.refreshPasteButton(t.data)}}else this.$(".paste-component").hide()},refreshPasteButton:function(e){if(!this.isLibraryPage&&!this.isLibraryContentPage)if(this.options.canEdit&&e.content)if(["vertical","sequential","chapter","course"].includes(e.content.block_type))this.$(".paste-component").hide();else if("expired"===e.content.status)this.$(".paste-component").hide();else{var t=this.$(".clipboard-details-popup")[0];t.querySelector(".detail-block-name").innerText=e.content.display_name,t.querySelector(".detail-block-type").innerText=e.content.block_type_display,t.querySelector(".detail-course-name").innerText=e.source_context_title,e.source_edit_url?(t.setAttribute("href",e.source_edit_url),t.classList.remove("no-edit-link")):(t.setAttribute("href","#"),t.classList.add("no-edit-link")),this.$(".paste-component").show()}else this.$(".paste-component").hide()},pasteComponent:function(t){var n=this;t.preventDefault();var r=this.findXBlockElement(t.target).data("locator"),a=e(this.createPlaceholderElement()),s=e(t.target).closest(".paste-component").prev(),l=s.prev(),u=o.getScrollOffset(s),c=a.appendTo(l);o.runOperationShowingMessage(i("Pasting"),(function(){return e.postJSON(n.getURLRoot()+"/",{parent_locator:r,staged_content:"clipboard"}).then((function(e){return n.onNewXBlock(c,u,!1,e),e})).fail((function(){c.remove()}))})).done((function(t){var n=t.static_file_notices,r=n.conflicting_files,o=n.error_files,a=n.new_files,s=[];if(o.length&&s.push((function(e){return new b.Error({title:i("Some errors occurred"),message:i("The following required files could not be added to the course:")+" "+o.join(", "),actions:{primary:{text:i("OK"),click:function(t){t.hide(),e()}}}})})),r.length&&s.push((function(e){return new b.Warning({title:i("You may need to update a file(s) manually"),message:i("The following files already exist in this course but don't match the version used by the component you pasted:")+" "+r.join(", "),actions:{primary:{text:i("OK"),click:function(t){t.hide(),e()}}}})})),a.length&&s.push((function(){return new y.Info({title:i("New file(s) added to Files & Uploads."),message:i("The following required files were imported to this course:")+" "+a.join(", "),actions:{primary:{text:i("View files"),click:function(t){var n=document.querySelector("[data-course-assets]"),i=e(n).attr("data-course-assets");window.location.href=i}},secondary:{text:i("Dismiss"),click:function(e){return e.hide()}}}})})),s.length){setTimeout((function e(){s.shift()(e).show()}),1250)}}))},editXBlock:function(t,n){if(t.preventDefault(),!n||"visibility_view"!==n.view){var i=e(t.target).closest(".xblock-header-primary"),r=i.attr("use-new-editor-text"),o=i.attr("use-new-editor-video"),a=i.attr("use-new-editor-problem"),s=i.attr("data-block-type");if("True"===r&&"html"===s||"True"===o&&"video"===s||"True"===a&&"problem"===s){var l=i.attr("authoring_MFE_base_url")+"/"+s+"/"+encodeURI(i.attr("data-usage-id"));return void(window.location.href=l)}}var u=this.findXBlockElement(t.target),d=this;new c(n).edit(u,this.model,{readOnlyView:!this.options.canEdit,refresh:function(){d.refreshXBlock(u,!1)}})},showXBlockActionsMenu:function(e){var t=e.currentTarget,n=t.parentElement.querySelector(".wrapper-nav-sub");document.querySelectorAll("li.action-item.action-actions-menu.nav-item").forEach((function(e){e!==t.parentElement&&e.querySelector(".wrapper-nav-sub").classList.remove("is-shown")})),n.classList.toggle("is-shown"),e.stopPropagation()},editVisibilitySettings:function(e){this.editXBlock(e,{view:"visibility_view",titleFormat:i("Editing access for: {title}"),viewSpecificClasses:"",modalSize:"med"})},duplicateXBlock:function(e){e.preventDefault(),this.duplicateComponent(this.findXBlockElement(e.target))},openManageTags:function(e){var t=this.model.get("taxonomy_tags_widget_url"),n=this.findXBlockElement(e.target).data("locator");w.openDrawer(t,n)},showMoveXBlockModal:function(e){var t=this.findXBlockElement(e.target),n=t.parents(".studio-xblock-wrapper"),i=new d({sourceXBlockInfo:v.findXBlockInfo(t,this.model),sourceParentXBlockInfo:v.findXBlockInfo(n,this.model),XBlockURLRoot:this.getURLRoot(),outlineURL:this.options.outlineURL});e.preventDefault(),i.show()},deleteXBlock:function(e){e.preventDefault(),this.deleteComponent(this.findXBlockElement(e.target))},createPlaceholderElement:function(){return e("<div/>",{class:"studio-xblock-wrapper"})},createComponent:function(n,i){var r,a=this.findXBlockElement(i).data("locator"),s=i.closest(".add-xblock-component"),l=s.prev(),u=o.getScrollOffset(s),c=e(this.createPlaceholderElement()),d=t.extend(n,{parent_locator:a});return r=c.appendTo(l),e.postJSON(this.getURLRoot()+"/",d,t.bind(this.onNewXBlock,this,r,u,!1)).fail((function(){r.remove()}))},copyXBlock:function(t){var n=this;t.preventDefault();var r="/api/content-staging/v1/clipboard/",a=this.findXBlockElement(t.target).data("locator");o.runOperationShowingMessage(i("Copying"),(function(){return e.postJSON(r,{usage_key:a}).then((function(t){var i,o=null===(i=t.content)||void 0===i?void 0:i.status;if("ready"===o)return n.refreshPasteButton(t),n.clipboardBroadcastChannel.postMessage(t),t;if("loading"===o){var a=e.Deferred();return setTimeout((function i(){e.getJSON(r,(function(e){var r,o=null===(r=e.content)||void 0===r?void 0:r.status;if("ready"===o)n.refreshPasteButton(t),n.clipboardBroadcastChannel.postMessage(e),a.resolve(e);else{if("loading"!==o)throw a.reject(),new Error('Unexpected clipboard status "'.concat(o,'" in successful API response.'));setTimeout(i,1e3)}}))}),1e3),a}throw new Error('Unexpected clipboard status "'.concat(o,'" in successful API response.'))}))}))},duplicateComponent:function(t){var n,i=this,r=i.findXBlockElement(t.parent()),a=o.getScrollOffset(t),s=e(i.createPlaceholderElement());n=s.insertAfter(t),v.duplicateXBlock(t,r).done((function(e){i.onNewXBlock(n,a,!0,e)})).fail((function(){n.remove()}))}},"duplicateXBlock",(function(e){e.preventDefault(),this.duplicateComponent(this.findXBlockElement(e.target))})),"showMoveXBlockModal",(function(e){var t=this.findXBlockElement(e.target),n=t.parents(".studio-xblock-wrapper"),i=new d({sourceXBlockInfo:v.findXBlockInfo(t,this.model),sourceParentXBlockInfo:v.findXBlockInfo(n,this.model),XBlockURLRoot:this.getURLRoot(),outlineURL:this.options.outlineURL});e.preventDefault(),i.show()})),"deleteXBlock",(function(e){e.preventDefault(),this.deleteComponent(this.findXBlockElement(e.target))})),"createPlaceholderElement",(function(){return e("<div/>",{class:"studio-xblock-wrapper"})})),"createComponent",(function(n,i){var r,a=this.findXBlockElement(i).data("locator"),s=i.closest(".add-xblock-component"),l=s.prev(),u=o.getScrollOffset(s),c=e(this.createPlaceholderElement()),d=t.extend(n,{parent_locator:a});return r=c.appendTo(l),e.postJSON(this.getURLRoot()+"/",d,t.bind(this.onNewXBlock,this,r,u,!1)).fail((function(){r.remove()}))})),"duplicateComponent",(function(t){var n,i=this,r=i.findXBlockElement(t.parent()),a=o.getScrollOffset(t),s=e(i.createPlaceholderElement());n=s.insertAfter(t),v.duplicateXBlock(t,r).done((function(e){i.onNewXBlock(n,a,!0,e)})).fail((function(){n.remove()}))})),"deleteComponent",(function(e){var t=this,n=new f({id:e.data("locator")});v.deleteXBlock(n).done((function(){t.onDelete(e)}))})),"getSelectedLibraryComponents",(function(){var t=this,n=this.$el.find(".studio-xblock-wrapper").data("locator");console.log(x),e.getJSON(x.getUpdateUrl(n)+"/handler/get_block_ids",(function(e){t.selectedLibraryComponents=Array.from(e.source_block_ids),t.storedSelectedLibraryComponents=Array.from(e.source_block_ids)}))})),"saveSelectedLibraryComponents",(function(t){var n=this,i=this.$el.find(".studio-xblock-wrapper").data("locator");t.preventDefault(),e.postJSON(x.getUpdateUrl(i)+"/handler/submit_studio_edits",{values:{source_block_ids:n.storedSelectedLibraryComponents}},(function(){n.selectedLibraryComponents=Array.from(n.storedSelectedLibraryComponents),n.toggleSaveButton()}))})),"toggleLibraryComponent",(function(t){var n=e(t.target).closest(".studio-xblock-wrapper").data("locator"),i=this.storedSelectedLibraryComponents.indexOf(n);i>-1?(this.storedSelectedLibraryComponents.splice(i,1),this.toggleSaveButton()):(this.storedSelectedLibraryComponents.push(n),this.toggleSaveButton())})),a(a(a(a(a(a(a(a(C,"toggleSaveButton",(function(){var t=e(".nav-actions .save-button");JSON.stringify(this.selectedLibraryComponents.sort())===JSON.stringify(this.storedSelectedLibraryComponents.sort())?(t.addClass("is-hidden"),window.removeEventListener("beforeunload",this.onBeforePageUnloadCallback)):(t.removeClass("is-hidden"),window.addEventListener("beforeunload",this.onBeforePageUnloadCallback))})),"onBeforePageUnloadCallback",(function(e){e.preventDefault(),e.returnValue=""})),"onDelete",(function(e){var t=this.xblockView,n=this.findXBlockElement(e.parent());e.remove(),t.acknowledgeXBlockDeletion(n.data("locator")),this.model.fetch()})),"onXBlockMoved",(function(){this.model.fetch()})),"onNewXBlock",(function(e,t,n,i){var r,a=this.$(".xblock-header-primary").attr("use-new-editor-text"),s=this.$(".xblock-header-primary").attr("use-new-editor-video"),l=this.$(".xblock-header-primary").attr("use-video-gallery-flow"),u=this.$(".xblock-header-primary").attr("use-new-editor-problem");if(i.hasOwnProperty("locator"))var c=i.locator.match(/\@(.*?)\+/);return"True"===a&&c.includes("html")||"True"===s&&c.includes("video")||"True"===u&&c.includes("problem")?(r="True"===l&&c.includes("video")?this.$(".xblock-header-primary").attr("authoring_MFE_base_url")+"/course-videos/"+encodeURI(i.locator):this.$(".xblock-header-primary").attr("authoring_MFE_base_url")+"/"+c[1]+"/"+encodeURI(i.locator),void(window.location.href=r)):(o.setScrollOffset(e,t),e.data("locator",i.locator),this.refreshXBlock(e,!0,n))})),"refreshXBlock",(function(e,t,n){var i=this.findXBlockElement(e),r=i.parent(),o=this.xblockView.model.id;0===i.length||i.data("locator")===o?this.render({refresh:!0,block_added:t}):r.hasClass("reorderable-container")?this.refreshChildXBlock(i,t,n):this.refreshXBlock(this.findXBlockElement(r))})),"refreshChildXBlock",(function(t,n,i){var r,o,a,s=this;return r=new f({id:t.data("locator")}),o=l.extend({updateHtml:function(t,n){this.$el=e(n).replaceAll(t)}}),(a=new o({model:r,view:s.xblockView.new_child_view,el:t})).render({success:function(){s.onXBlockRefresh(a,n,i),a.unbind()},initRuntimeData:this})})),"scrollToNewComponentButtons",(function(t){t.preventDefault(),e.scrollTo(this.$(".add-xblock-component"),{duration:250})}))))}.apply(t,i))||(e.exports=r)},91575:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(90165),n(39346),n(5581),n(56155),n(76623),n(23844),n(73439)],r=function(e,t,n,i,r,o,a,s,l){"use strict";var u="is-disabled",c=i.extend({initialize:function(){this.model.on("sync",this.onSync,this)},onSync:function(e){this.shouldRefresh(e)&&this.render()},shouldRefresh:function(e){return!1},render:function(){}}),d=c.extend({initialize:function(){c.prototype.initialize.call(this),this.template=this.loadTemplate("container-access")},shouldRefresh:function(e){return r.hasChangedAttributes(e,["has_partition_group_components","user_partitions"])},render:function(){return s.setHtml(this.$el,s.HTML(this.template({hasPartitionGroupComponents:this.model.get("has_partition_group_components"),userPartitionInfo:this.model.get("user_partition_info")}))),this}}),f=c.extend({initialize:function(){c.prototype.initialize.call(this),this.template=this.loadTemplate("container-message")},shouldRefresh:function(e){return r.hasChangedAttributes(e,["currently_visible_to_students"])},render:function(){return s.setHtml(this.$el,s.HTML(this.template({currentlyVisibleToStudents:this.model.get("currently_visible_to_students")}))),this}}),h=c.extend({shouldRefresh:function(e){return r.hasChangedAttributes(e,["published"])},render:function(){var e=this.$el.find(".button-view");this.model.get("published")?e.removeClass(u).attr("aria-disabled",!1):e.addClass(u).attr("aria-disabled",!0)}}),p=i.extend({events:{"click .action-publish":"publish","click .action-discard":"discardChanges","click .action-staff-lock":"toggleStaffLock","click .action-copy":"copyToClipboard"},initialize:function(){i.prototype.initialize.call(this),this.template=this.loadTemplate("publish-xblock"),this.model.on("sync",this.onSync,this),this.renderPage=this.options.renderPage,this.clipboardBroadcastChannel=this.options.clipboardBroadcastChannel},onSync:function(e){r.hasChangedAttributes(e,["has_changes","published","edited_on","edited_by","visibility_state","has_explicit_staff_lock"])&&this.render()},render:function(){return s.setHtml(this.$el,s.HTML(this.template({visibilityState:this.model.get("visibility_state"),visibilityClass:o.getXBlockVisibilityClass(this.model.get("visibility_state")),hasChanges:this.model.get("has_changes"),editedOn:this.model.get("edited_on"),editedBy:this.model.get("edited_by"),published:this.model.get("published"),publishedOn:this.model.get("published_on"),publishedBy:this.model.get("published_by"),released:this.model.get("released_to_students"),releaseDate:this.model.get("release_date"),releaseDateFrom:this.model.get("release_date_from"),hasExplicitStaffLock:this.model.get("has_explicit_staff_lock"),hideFromTOC:this.model.get("hide_from_toc"),staffLockFrom:this.model.get("staff_lock_from"),enableCopyUnit:this.model.get("enable_copy_paste_units"),course:window.course,HtmlUtils:s}))),this},publish:function(e){var t=this.model;e&&e.preventDefault&&e.preventDefault(),r.runOperationShowingMessage(n("Publishing"),(function(){return t.save({publish:"make_public"},{patch:!0})})).always((function(){t.set("publish",null),a.hideMovedNotification()})).done((function(){t.fetch()}))},copyToClipboard:function(t){var i=this;t.preventDefault(),t.stopPropagation();var o="/api/content-staging/v1/clipboard/",a=this.model.get("id");r.runOperationShowingMessage(n("Copying"),(function(){return e.postJSON(o,{usage_key:a}).then((function(t){var n,r=null===(n=t.content)||void 0===n?void 0:n.status;if("ready"===r)return i.clipboardBroadcastChannel.postMessage(t),t;if("loading"===r){var a=e.Deferred();return setTimeout((function t(){e.getJSON(o,(function(e){var n,r=null===(n=e.content)||void 0===n?void 0:n.status;if("ready"===r)i.clipboardBroadcastChannel.postMessage(e),a.resolve(e);else{if("loading"!==r)throw a.reject(),new Error('Unexpected clipboard status "'.concat(r,'" in successful API response.'));setTimeout(t,1e3)}}))}),1e3),a}throw new Error('Unexpected clipboard status "'.concat(r,'" in successful API response.'))}))}))},discardChanges:function(e){var t=this.model,i=this.renderPage;e&&e.preventDefault&&e.preventDefault(),r.confirmThenRunOperation(n("Discard Changes"),n("Are you sure you want to revert to the last published version of the unit? You cannot undo this action."),n("Discard Changes"),(function(){r.runOperationShowingMessage(n("Discarding Changes"),(function(){return t.save({publish:"discard_changes"},{patch:!0})})).always((function(){t.set("publish",null),a.hideMovedNotification()})).done((function(){i()}))}))},toggleStaffLock:function(e){var i,o,a,s,l=this.model,u=this;e&&e.preventDefault&&e.preventDefault(),i=!l.get("has_explicit_staff_lock"),o=l.get("ancestor_has_staff_lock"),s=function(){u.checkStaffLock(!i)},a=function(){return l.save({publish:"republish",metadata:{visible_to_staff_only:!!i||null}},{patch:!0}).always((function(){l.set("publish",null)})).done((function(){l.fetch()})).fail((function(){s()}))},this.checkStaffLock(i),i&&!o?r.runOperationShowingMessage(n("Hiding from Students"),t.bind(a,u)):i&&o?r.runOperationShowingMessage(n("Explicitly Hiding from Students"),t.bind(a,u)):!i&&o?r.runOperationShowingMessage(n("Inheriting Student Visibility"),t.bind(a,u)):r.confirmThenRunOperation(n("Make Visible to Students"),n("If the unit was previously published and released to students, any changes you made to the unit when it was hidden will now be visible to students. Do you want to proceed?"),n("Make Visible to Students"),(function(){r.runOperationShowingMessage(n("Making Visible to Students"),t.bind(a,u))}),(function(){s()}))},checkStaffLock:function(e){this.$(".action-staff-lock i").removeClass("fa-check-square-o fa-square-o"),this.$(".action-staff-lock i").addClass(e?"fa-check-square-o":"fa-square-o")}}),m=i.extend({initialize:function(){i.prototype.initialize.call(this),this.template=this.loadTemplate("publish-history"),this.model.on("sync",this.onSync,this)},onSync:function(e){r.hasChangedAttributes(e,["published","published_on","published_by"])&&this.render()},render:function(){return s.setHtml(this.$el,s.HTML(this.template({published:this.model.get("published"),published_on:this.model.get("published_on"),published_by:this.model.get("published_by")}))),this}}),g=i.extend({events:{"click .wrapper-tag-header":"expandTagContainer","click .tagging-label":"expandContentTag","click .manage-tag-button":"openManageTagDrawer","keydown .wrapper-tag-header":"handleKeyDownOnHeader","keydown .tagging-label":"handleKeyDownOnContentTag","keydown .manage-tag-button":"handleKeyDownOnTagDrawer"},initialize:function(){i.prototype.initialize.call(this),this.template=this.loadTemplate("tag-list"),this.model.on("sync",this.onSync,this)},onSync:function(e){r.hasChangedAttributes(e,["tags"])&&this.render()},setupMessageListener:function(){var e=this;window.addEventListener("message",(function(t){var n=t.data,i=new URL(e.model.get("course_authoring_url")).origin;t.origin==i&&"authoring.events.tags.updated"==n.type&&(n=n.data).contentId==e.model.id&&(e.model.set("tags",e.buildTaxonomyTree(n)),e.render())}))},buildTaxonomyTree:function(e){var t=[],n=0,i=0;return e.taxonomies.forEach((function(e){var r=[],o={};e.tags.forEach((function(e){for(var t=e.lineage.length-1;t>=0;t--){var n=e.lineage[t],a=o.hasOwnProperty(n);if(a||(o[n]={id:i,value:n,children:[]},i++,0==t&&r.push(n)),t!==e.lineage.length-1&&o[n].children.push(o[e.lineage[t+1]]),a)break}}));var a=Object.keys(o).length;t.push({id:e.taxonomyId,value:e.name,tags:r.map((function(e){return o[e]})),count:a}),n+=a})),{count:n,taxonomies:t}},handleKeyDownOnHeader:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.expandTagContainer())},handleKeyDownOnContentTag:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.expandContentTag(e))},handleKeyDownOnTagDrawer:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.openManageTagDrawer())},expandTagContainer:function(){var e=this.$(".wrapper-tags .wrapper-tag-content"),t=this.$(".wrapper-tags .wrapper-tag-header"),n=this.$(".wrapper-tags .wrapper-tag-header .icon");e.hasClass("is-hidden")?(e.removeClass("is-hidden"),n.addClass("fa-caret-up"),n.removeClass("fa-caret-down"),t.attr("aria-expanded","true")):(e.addClass("is-hidden"),n.removeClass("fa-caret-up"),n.addClass("fa-caret-down"),t.attr("aria-expanded","false"))},expandContentTag:function(e){var t=e.target.id,n=this.$(".wrapper-tags .content-tags-".concat(t)),i=this.$(".wrapper-tags .tagging-label-".concat(t)),r=this.$(".wrapper-tags .tagging-label-".concat(t," .icon"));n.hasClass("is-hidden")?(n.removeClass("is-hidden"),r.addClass("fa-caret-up"),r.removeClass("fa-caret-down"),i.attr("aria-expanded","true")):(n.addClass("is-hidden"),r.removeClass("fa-caret-up"),r.addClass("fa-caret-down"),i.attr("aria-expanded","false"))},renderTagElements:function(e,t,n){var i=this;e.forEach((function(e){var r=document.querySelector(".content-tags-".concat(n)),o=document.createElement("div"),a=document.createElement("span");if(o.style.marginLeft="".concat(t,"em"),o.className="tagging-label tagging-label-tag-".concat(e.id),o.id="tag-".concat(e.id),a.textContent=e.value,a.id="tag-".concat(e.id),a.className="tagging-label-value",o.appendChild(a),r.appendChild(o),e.children.length>0){var s=document.createElement("span"),l=document.createElement("div");s.className="icon fa fa-caret-down",s.ariaHidden="true",s.id="tag-".concat(e.id),l.className="content-tags-tag-".concat(e.id," is-hidden"),o.tabIndex=0,o.role="button",o.ariaExpanded="false",o.setAttribute("aria-controls","content-tags-tag-".concat(e.id)),o.appendChild(s),o.className+=" tagging-label-link",r.appendChild(l),i.renderTagElements(e.children,t+1,"tag-".concat(e.id))}}))},renderTags:function(){if(null!==this.model.get("tags")){var e=this.model.get("tags").taxonomies,t=this;e.forEach((function(e){t.renderTagElements(e.tags,1,"tax-".concat(e.id))}))}},openManageTagDrawer:function(){var e=this.model.get("taxonomy_tags_widget_url"),t=this.model.get("id");l.openDrawer(e,t)},render:function(){return s.setHtml(this.$el,s.HTML(this.template({tags:this.model.get("tags")}))),this.renderTags(),this}});return{MessageView:f,ViewLiveButtonController:h,Publisher:p,PublishHistory:m,ContainerAccess:d,TagList:g}}.apply(t,i),void 0===r||(e.exports=r)},29086:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(90165),n(98780),n(32129)],void 0===(r=function(e,t,n,i,r){"use strict";return i.extend({events:t.extend({},i.prototype.events,{"click .toggle-preview-button":"toggleChildrenPreviews"}),defaultViewClass:r,components_on_init:!1,initialize:function(e){this.page_size=e.page_size||10,this.showChildrenPreviews=e.showChildrenPreviews||!0,i.prototype.initialize.call(this,e)},getViewParameters:function(){return t.extend(i.prototype.getViewParameters.call(this),{page_size:this.page_size,page:this})},refreshXBlock:function(e,t,n){var i=this.findXBlockElement(e),r=this.xblockView.model.id;0===i.length||i.data("locator")===r?this.render({refresh:!0,block_added:t}):this.refreshChildXBlock(i,t,n)},toggleChildrenPreviews:function(e){e.preventDefault(),this.xblockView.togglePreviews()},updatePreviewButton:function(t){var i=n(t?"Hide Previews":"Show Previews"),r=e(".nav-actions .button-toggle-preview");this.$(".preview-text",r).text(i),this.$(".toggle-preview-button").removeClass("is-hidden")}})}.apply(t,i))||(e.exports=r)},9705:(e,t,n)=>{var i,r;i=[n(95891),n(89846),n(58840)],r=function(e,t,n){var i=t.extend({templateName:"unit-outline",render:function(){return t.prototype.render.call(this),this.renderAncestors(),this},renderAncestors:function(){var e,t,n,i,r=this,o=null;if(this.model.get("ancestor_info"))for(n=this.model.get("ancestor_info").ancestors,t=this.getListElement(),e=n.length-1;e>=0;e--)i=n[e],(r=this.createChildView(i,o,{parentView:r,currentUnitId:this.model.get("id")})).render(),t.append(r.$el),o=i,t=r.getListElement();return r},getChildViewClass:function(){return n},getTemplateContext:function(){return e.extend(t.prototype.getTemplateContext.call(this),{currentUnitId:this.model.get("id")})}});return i}.apply(t,i),void 0===r||(e.exports=r)},58840:(e,t,n)=>{var i,r;i=[n(95891),n(89846)],void 0===(r=function(e,t){var n=t.extend({initialize:function(){t.prototype.initialize.call(this),this.currentUnitId=this.options.currentUnitId},getTemplateContext:function(){return e.extend(t.prototype.getTemplateContext.call(this),{currentUnitId:this.currentUnitId})},getChildViewClass:function(){return n},createChildView:function(n,i,r){return r=e.isUndefined(r)?{}:r,t.prototype.createChildView.call(this,n,i,e.extend(r,{currentUnitId:this.currentUnitId}))}});return n}.apply(t,i))||(e.exports=r)},78358:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(90165),n(3332),n(23844),n(61280)],void 0===(r=function(e,t,n,i,r){"use strict";return i.extend({events:t.extend({},i.prototype.events,{"change input[type=file]":"selectFile","click .action-upload":"upload"}),options:e.extend({},i.prototype.options,{modalName:"assetupload",modalSize:"med",successMessageTimeout:2e3,viewSpecificClasses:"confirm"}),initialize:function(e){i.prototype.initialize.call(this),this.template=this.loadTemplate("upload-dialog"),this.listenTo(this.model,"change",this.renderContents),this.options.title=this.model.get("title"),this.uploadData=t.extend({},e.uploadData)},addActionButtons:function(){this.addActionButton("upload",n("Upload"),!0),i.prototype.addActionButtons.call(this)},renderContents:function(){var t=this.model.isValid(),n=this.model.get("selectedFile"),o=this.$("input[type=file]");return i.prototype.renderContents.call(this),n&&t?(e(o).removeClass("error"),this.$("input[type=file]").replaceWith(r.HTML(o).toString()),this.$(".action-upload").removeClass("disabled")):this.$(".action-upload").addClass("disabled"),this},getContentHtml:function(){return this.template({url:this.options.url||CMS.URL.UPLOAD_ASSET,message:this.model.get("message"),selectedFile:this.model.get("selectedFile"),uploading:this.model.get("uploading"),uploadedBytes:this.model.get("uploadedBytes"),totalBytes:this.model.get("totalBytes"),finished:this.model.get("finished"),error:this.model.validationError})},selectFile:function(t){var n=t.target.files[0]||null;this.model.set({selectedFile:n}),n&&e.isEmptyObject(this.model.changed)&&this.model.trigger("change")},upload:function(e){var n=t.extend({},this.uploadData);n.notifyOnError=!1,e&&e.preventDefault&&e.preventDefault(),this.model.set("uploading",!0),this.$("form").ajaxSubmit({success:t.bind(this.success,this),error:t.bind(this.error,this),uploadProgress:t.bind(this.progress,this),data:n})},progress:function(e,t,n){this.model.set({uploadedBytes:t,totalBytes:n})},success:function(e,t,n,i){this.model.set({uploading:!1,finished:!0}),this.options.onSuccess&&this.options.onSuccess(e,t,n,i);var r=this;this.removalTimeout=setTimeout((function(){r.hide()}),this.options.successMessageTimeout)},error:function(){this.model.set({uploading:!1,uploadedBytes:0,title:n("We're sorry, there was an error")})}})}.apply(t,i))||(e.exports=r)},76623:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(99927),n(5452),n(32969),n(56155),n(76623),n(2648),n(8970)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";var l,u,c,d;return u=function(e){o.moveXBlock(e.sourceLocator,e.targetParentLocator).done((function(t){n.trigger("move:hideMoveModal"),e.sourceXBlockElement.hide(),d(s.interpolate(gettext('Success! "{displayName}" has been moved.'),{displayName:e.sourceDisplayName}),{sourceXBlockElement:e.sourceXBlockElement,sourceDisplayName:e.sourceDisplayName,sourceLocator:e.sourceLocator,sourceParentLocator:e.sourceParentLocator,targetParentLocator:e.targetParentLocator,targetIndex:t.source_index}),n.trigger("move:onXBlockMoved")}))},c=function(e){o.moveXBlock(e.sourceLocator,e.sourceParentLocator,e.targetIndex).done((function(){e.sourceXBlockElement.show(),d(s.interpolate(gettext('Move cancelled. "{sourceDisplayName}" has been moved back to its original location.'),{sourceDisplayName:e.sourceDisplayName})),n.trigger("move:onXBlockMoved")}))},d=function(t,n){var i;return(i=n?new r.Confirmation({title:t,actions:{primary:{text:gettext("Undo move"),class:"action-save",click:function(){c({sourceXBlockElement:n.sourceXBlockElement,sourceDisplayName:n.sourceDisplayName,sourceLocator:n.sourceLocator,sourceParentLocator:n.sourceParentLocator,targetIndex:n.targetIndex})}},secondary:[{text:gettext("Take me to the new location"),class:"action-cancel",click:function(){l("/container/"+n.targetParentLocator)}}]}}):new r.Confirmation({title:t})).show(),e.smoothScroll({offset:0,easing:"swing",speed:1e3}),i.$(".wrapper").first().focus(),i},{redirectLink:l=function(e){window.location.href=e},moveXBlock:u,undoMoveXBlock:c,showMovedNotification:d,hideMovedNotification:function(){var e=i.active_alert;e&&r.prototype.hide.apply(e)}}}.apply(t,i))||(e.exports=r)},73439:(e,t,n)=>{var i,r;i=[n(20428)],void 0===(r=function(e){"use strict";var t;return{openDrawer:function(n,i){var r=document.querySelector("#manage-tags-drawer"),o=document.querySelector(".drawer-cover");window.addEventListener("message",function(e){"closeManageTagsDrawer"===e.data&&t(r,o)}.bind(this)),e(o).css("display","block"),e(r).html('<iframe src="'.concat(n).concat(i,'" onload="this.contentWindow.focus()" frameborder="0" style="width: 100%; height: 100%;"></iframe>')),e(r).css("display","block"),e("body").addClass("drawer-open")},closeDrawer:t=function(t,n){e(n).css("display","none"),e(t).empty(),e(t).css("display","none"),e("body").removeClass("drawer-open")}}}.apply(t,i))||(e.exports=r)},56155:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(90165),n(5581),n(37127),n(19506),n(2648)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";var s,l;return s=function(e,t){var n={};return n[e]=t,{metadata:n}},{VisibilityState:l={live:"live",ready:"ready",unscheduled:"unscheduled",needsAttention:"needs_attention",staffOnly:"staff_only",gated:"gated",hideFromTOC:"hide_from_toc"},addXBlock:function(t){var o=t.data("parent"),a=t.data("category"),s=t.data("default-name");return i.runOperationShowingMessage(n("Adding"),(function(){var t=e.Deferred();return analytics.track("Created a "+a,{course:course_location_analytics,display_name:s}),e.postJSON(r.getUpdateUrl(),{parent_locator:o,category:a,display_name:s},(function(e){var n=e.locator;t.resolve(n)})),t.promise()}))},moveXBlock:function(t,o,a){var s=e.Deferred(),l=n(void 0!==a?"Undo moving":"Moving");return i.runOperationShowingMessage(l,(function(){return e.patchJSON(r.getUpdateUrl(),{move_source_locator:t,parent_locator:o,target_index:a},(function(e){s.resolve(e)})).fail((function(){s.reject()})),s.promise()}))},duplicateXBlock:function(t,o){return i.runOperationShowingMessage(n("Duplicating"),(function(){var n=e.Deferred();return e.postJSON(r.getUpdateUrl(),{duplicate_source_locator:t.data("locator"),parent_locator:o.data("locator")},(function(e){n.resolve(e)})).fail((function(){n.reject()})),n.promise()}))},deleteXBlock:function(t,o){var s,l=e.Deferred(),u=r.getUpdateUrl(t.id),c=function(){i.runOperationShowingMessage(n("Deleting"),(function(){return e.ajax({type:"DELETE",url:u}).success((function(){l.resolve()}))}))};return o=o||"component",s=a.interpolate(n("Deleting this {xblock_type} is permanent and cannot be undone."),{xblock_type:o},!0),t.get("is_prereq")?(s+=" "+n("Any content that has listed this content as a prerequisite will also have access limitations removed."),i.confirmThenRunOperation(a.interpolate(n("Delete this {xblock_type} (and prerequisite)?"),{xblock_type:o},!0),s,a.interpolate(n("Yes, delete this {xblock_type}"),{xblock_type:o},!0),c)):i.confirmThenRunOperation(a.interpolate(n("Delete this {xblock_type}?"),{xblock_type:o},!0),s,a.interpolate(n("Yes, delete this {xblock_type}"),{xblock_type:o},!0),c),l.promise()},updateXBlockField:function(e,t,r){var o=s(t,r);return i.runOperationShowingMessage(n("Saving"),(function(){return e.save(o,{patch:!0})}))},getXBlockVisibilityClass:function(e){return e===l.staffOnly?"is-staff-only":e===l.hideFromTOC?"is-hidden-from-toc":e===l.gated?"is-gated":e===l.live?"is-live":e===l.ready?"is-ready":e===l.needsAttention?"has-warnings":""},getXBlockListTypeClass:function(e){var t="list-unknown";return"course"===e?t="list-sections":"section"===e?t="list-subsections":"subsection"===e&&(t="list-units"),t},updateXBlockFields:function(e,r,o){return o=t.extend({},{patch:!0},o),i.runOperationShowingMessage(n("Saving"),(function(){return e.save(r,o)}))},getXBlockType:function(e,t,i){var r=e;return"chapter"===e?r=i?n("section"):"section":"sequential"===e?r=i?n("subsection"):"subsection":"vertical"!==e||t&&"sequential"!==t.get("category")||(r=i?n("unit"):"unit"),r},findXBlockInfo:function(e,t){var n,i,r,a=t;return e.length>0&&(n=e.find(".xblock"),(i=e.find(".xblock-header .header-details .xblock-display-name").text().trim())||(i=n.find(".component-header").text().trim()),r=!!t&&t.get("has_children"),a=new o({id:e.data("locator"),courseKey:e.data("course-key"),category:n.data("block-type"),display_name:i,has_children:r})),a},pasteXBlock:function(t){var o=t.data("parent");t.data("default-name");return i.runOperationShowingMessage(n("Pasting"),(function(){return e.postJSON(r.getUpdateUrl(),{parent_locator:o,staged_content:"clipboard"}).then((function(e){return e}))})).done((function(t){var i=t.static_file_notices,r=i.conflicting_files,o=i.error_files,a=i.new_files,s=[];if(o.length&&s.push((function(e){return new PromptView.Error({title:n("Some errors occurred"),message:n("The following required files could not be added to the course:")+" "+o.join(", "),actions:{primary:{text:n("OK"),click:function(t){t.hide(),e()}}}})})),r.length&&s.push((function(e){return new PromptView.Warning({title:n("You may need to update a file(s) manually"),message:n("The following files already exist in this course but don't match the version used by the component you pasted:")+" "+r.join(", "),actions:{primary:{text:n("OK"),click:function(t){t.hide(),e()}}}})})),a.length&&s.push((function(){return new NotificationView.Info({title:n("New file(s) added to Files & Uploads."),message:n("The following required files were imported to this course:")+" "+a.join(", "),actions:{primary:{text:n("View files"),click:function(t){var n=document.querySelector("[data-course-assets]"),i=e(n).attr("data-course-assets");window.location.href=i}},secondary:{text:n("Dismiss"),click:function(e){return e.hide()}}}})})),s.length){setTimeout((function e(){s.shift()(e).show()}),1250)}}))}}}.apply(t,i))||(e.exports=r)},50229:(e,t,n)=>{var i,r;i=[n(20428),n(99927),n(95891),n(81645),n(23844)],void 0===(r=function(e,t,n,i,r){"use strict";return t.View.extend({invisibleClass:"is-invisible",validFileExtensions:["srt"],events:{"change .file-input":"changeHandler","click .setting-upload":"clickHandler"},uploadTpl:"#file-upload",initialize:function(e){n.bindAll(this,"changeHandler","clickHandler","xhrResetProgressBar","xhrProgressHandler","xhrCompleteHandler","render"),this.options=n.extend({},e),this.file=!1,this.render()},render:function(){var t=e(this.uploadTpl).text(),n=this.$el.find(".transcripts-file-uploader");if(n.length){if(!t)return void console.error("Couldn't load Transcripts File Upload template");this.template=r.template(t),r.setHtml(n,this.template({ext:this.validFileExtensions,component_locator:this.options.component_locator})),this.$form=this.$el.find(".file-chooser"),this.$input=this.$form.find(".file-input"),this.$progress=this.$el.find(".progress-fill")}},upload:function(){var e={edx_video_id:i.Storage.get("edx_video_id")||""};this.file&&this.$form.ajaxSubmit({beforeSend:this.xhrResetProgressBar,uploadProgress:this.xhrProgressHandler,complete:this.xhrCompleteHandler,data:e})},clickHandler:function(e){e.preventDefault(),this.$input.val(null).trigger("click")},changeHandler:function(e){e.preventDefault(),this.options.messenger.hideError(),this.file=this.$input.get(0).files[0],this.checkExtValidity(this.file)?this.upload():this.options.messenger.showError(gettext("Please select a file in .srt format."))},checkExtValidity:function(t){var n;if(t.name)return n=t.name.split(".").pop().toLowerCase(),-1!==e.inArray(n,this.validFileExtensions)},xhrResetProgressBar:function(){this.$progress.width("0%").text("0%").removeClass(this.invisibleClass)},xhrProgressHandler:function(e,t,n,i){var r=i+"%";this.$progress.width(r).text(r)},xhrCompleteHandler:function(e){var n=JSON.parse(e.responseText),i=n.status||gettext("Error: Uploading failed."),r=n.edx_video_id;this.$progress.addClass(this.invisibleClass),200===e.status?(this.options.messenger.render("uploaded",n),t.trigger("transcripts:basicTabUpdateEdxVideoId",r)):this.options.messenger.showError(i)}})}.apply(t,i))||(e.exports=r)},43219:(e,t,n)=>{var i,r,o=n(23844);i=[n(20428),n(99927),n(95891),n(81645),n(50229),n(90165)],void 0===(r=function(e,t,n,i,r,a){return t.View.extend({tagName:"div",elClass:".wrapper-transcripts-message",invisibleClass:"is-invisible",events:{"click .setting-import":"importHandler","click .setting-replace":"replaceHandler","click .setting-choose":"chooseHandler","click .setting-use-existing":"useExistingHandler"},templates:{not_found:"#transcripts-not-found",found:"#transcripts-found",import:"#transcripts-import",replace:"#transcripts-replace",uploaded:"#transcripts-uploaded",use_existing:"#transcripts-use-existing",choose:"#transcripts-choose"},initialize:function(e){n.bindAll(this,"importHandler","replaceHandler","chooseHandler","useExistingHandler","showError","hideError"),this.options=n.extend({},e),this.component_locator=this.$el.closest("[data-locator]").data("locator"),this.fileUploader=new r({el:this.$el,messenger:this,component_locator:this.component_locator})},render:function(t,i){var r,a=e(this.templates[t]).text(),s=this.options.parent.getVideoObjectsList(),l=n.groupBy(s,(function(e){return e.video})),u=i?i.html5_local:[];return a?(r=o.template(a),o.setHtml(this.$el.find(".transcripts-status").removeClass("is-invisible").find(this.elClass),r({component_locator:encodeURIComponent(this.component_locator),html5_list:u,grouped_list:l,subs_id:i?i.subs:""})),this.fileUploader.render(),this):(console.error("Couldn't load Transcripts status template"),this)},showError:function(e,t){var n=this.$el.find(".transcripts-error-message");e&&(this.hideError(),o.setHtml(n,a(e)).removeClass(this.invisibleClass),t&&this.$el.find(".wrapper-transcripts-buttons").addClass(this.invisibleClass))},hideError:function(){this.$el.find(".transcripts-error-message").addClass(this.invisibleClass),this.$el.find(".wrapper-transcripts-buttons").removeClass(this.invisibleClass)},importHandler:function(e){e.preventDefault(),this.processCommand("replace",a("Error: Import failed."))},replaceHandler:function(e){e.preventDefault(),this.processCommand("replace",a("Error: Replacing failed."))},chooseHandler:function(t){t.preventDefault();var n=e(t.currentTarget).data("video-id");this.processCommand("choose",a("Error: Choosing failed."),n)},useExistingHandler:function(e){e.preventDefault(),this.processCommand("rename",a("Error: Choosing failed."))},processCommand:function(e,n,r){var o,a=this,s=this.component_locator,l=this.options.parent.getVideoObjectsList();return r&&(o={html5_id:r}),i.command(e,s,l,o).done((function(e){var n=e.edx_video_id;a.render("found",e),t.trigger("transcripts:basicTabUpdateEdxVideoId",n)})).fail((function(e){var t=e.status||n;a.showError(t)}))}})}.apply(t,i))||(e.exports=r)},12151:(e,t,n)=>{var i,r;i=[n(20428),n(99927),n(95891),n(32446),n(81645),n(43219)],void 0===(r=function(e,t,n,i,r,o){"use strict";var a=i.extend({inputDelay:300,events:{"click .setting-clear":"clear","keypress .setting-input":"showClearButton","click .collapse-setting":"toggleExtraVideosBar"},templateName:"metadata-videolist-entry",placeholders:{webm:".webm",mp4:"http://somesite.com/video.mp4",youtube:"http://youtube.com/"},initialize:function(e){this.options=n.extend({},e);var t=this.options.MessageManager||o;this.messenger=new t({el:this.$el,parent:this}),i.prototype.initialize.apply(this,arguments),this.$el.on("input",".videolist-settings-item input",n.debounce(n.bind(this.inputHandler,this),this.inputDelay)),this.component_locator=this.$el.closest("[data-locator]").data("locator")},render:function(){i.prototype.render.apply(this,arguments),this.$extraVideosBar=this.$el.find(".videolist-extra-videos"),t.trigger("transcripts:basicTabFieldChanged")},updateOnCheckTranscriptSuccess:function(e,t){var n=t,i=e.length,r=1===i&&e[0].mode;i>1||"html5"===r?this.openExtraVideosBar():this.closeExtraVideosBar(),this.messenger.render(t.command,n),this.checkIsUniqVideoTypes()},showServerError:function(e){var t=gettext("Error: Connection with server failed.");void 0!==e.responseJSON&&(t=e.responseJSON.status),this.messenger.render("not_found").showError(t,!0)},getValueFromEditor:function(){return n.map(this.$el.find(".input"),(function(e){return e.value.trim()})).filter(n.identity)},getVideoObjectsList:function(){var e=this.getValueFromEditor();return r.getVideoList(e)},setValueInEditor:function(t){var i=this.$el.find(".input"),r=t.filter(n.identity),o=this.getPlaceholders(r);i.each((function(t){e(this).val(r[t]||null).attr("placeholder",o[t])}))},getPlaceholders:function(t){var i=r.parseLink,o=n.clone(this.placeholders);return n.map(this.$el.find(".input"),(function(r,a){var s,l=i(t[a]),u=l?l.type:null;return o[u]?(s=o[u],delete o[u]):(e.isArray(o)||(o=n.values(o)),s=o.pop()),s}))},openExtraVideosBar:function(e){e&&e.preventDefault&&e.preventDefault(),this.$extraVideosBar.addClass("is-visible")},closeExtraVideosBar:function(e){e&&e.preventDefault&&e.preventDefault(),this.$extraVideosBar.removeClass("is-visible")},toggleExtraVideosBar:function(e){e&&e.preventDefault&&e.preventDefault(),this.$extraVideosBar.hasClass("is-visible")?this.closeExtraVideosBar.apply(this,arguments):this.openExtraVideosBar.apply(this,arguments)},inputHandler:function(t){t&&t.preventDefault&&t.preventDefault();var i=e(t.currentTarget),o=this.$el.find(".input"),a=i.val(),s=r.parseLink(a),l=Boolean(a);if(this.checkValidity(s,l)){var u=this.getValueFromEditor(),c=this.model.getValue();c&&(c=c.filter(n.identity)),n.isEqual(u,c)?this.messenger.hideError():this.updateModel(),o.prop("disabled",!1).attr("aria-disabled",!1).removeClass("is-disabled")}else o.not(i).prop("disabled",!0).attr("aria-disabled",!0).addClass("is-disabled"),i.hasClass("videolist-url")&&this.closeExtraVideosBar()},isUniqVideoTypes:function(e){var t=n.pluck(e,"type").filter((function(e){return"other"!==e})),i=n.uniq(t);return t.length===i.length},isUniqOtherVideos:function(e){var t=e.filter((function(e){return"other"===e.type})),i=n.pluck(t,"video"),r=n.uniq(i);return i.length===r.length},checkIsValid:function(e,t,n){var i=!0;return e(t||this.getVideoObjectsList())||(this.messenger.showError(n,!0),i=!1),i},checkIsUniqVideoTypes:function(e){return this.checkIsValid(this.isUniqVideoTypes,e,gettext("Link types should be unique."))},checkIsUniqOtherVideos:function(e){return this.checkIsValid(this.isUniqOtherVideos,e,gettext("Links should be unique."))},checkValidity:function(e,t){var n=this.getVideoObjectsList(),i=this.checkIsUniqVideoTypes.bind(this),r=this.checkIsUniqOtherVideos.bind(this);return!(!i(n)||!r(n))&&("incorrect"!==e.mode||!t||(this.messenger.showError(gettext("Incorrect url format."),!0),!1))}});return a}.apply(t,i))||(e.exports=r)},81645:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(2337)],r=function(e){"use strict";return i={set:function(e,t){return i[e]=t,this},get:function(e){return i[e]},remove:function(e){return delete i[e]}},t={},n=/(?:http|https|)(?:\:\/\/|)(?:www.|)(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/ytscreeningroom\?v=|\/feeds\/api\/videos\/|\/user\S*[^\w\-\s]|\S*[^\w\-\s]))([\w\-]+)/i,r=function(e){if("string"==typeof e){if(t[e])return t[e];var i=e.match(n);return t[e]=i?i[1]:void 0,t[e]}},o=function(){var e={};return function(t){if("string"==typeof t){if(e[t])return e[t];var n,i=document.createElement("a");return i.href=t,(n=i.pathname.match(/\/{1}([^\/]+)\.([^\/]+)$/))?e[t]={video:n[1],type:n[2]}:(n=i.pathname.match(/\/{1}([^\/\.]+)$/))&&(e[t]={video:n[1],type:"other"}),e[t]}}}(),a=function(t){if("string"==typeof t)return r(t)?11===r(t).length?{mode:"youtube",video:r(t),type:"youtube"}:{mode:"incorrect"}:o(t)?e.extend({mode:"html5"},o(t)):{mode:"incorrect"}},{getField:function(e,t){var n;return e&&t&&(n=e.findWhere({field_name:t})),n},parseYoutubeLink:r,parseHTML5Link:o,parseLink:a,getYoutubeLink:function(e){return"http://youtu.be/"+e},syncCollections:function(e,t){e.each((function(e){var n=t.findWhere({field_name:e.getFieldName()});n&&n.setValue(e.getDisplayValue())}))},command:function(t,n,i,r){var o,a;return r&&(o=e.isPlainObject(r)?r:{params:r}),a=e.extend({locator:n},{videos:i},o),e.ajaxQueue({url:"/transcripts/"+t,data:{data:JSON.stringify(a)},notifyOnError:!1,type:"get"})},getVideoList:function(t){if(e.isArray(t)){for(var n,i=[],r=0,o=t.length;r<o;r+=1)"incorrect"!==(n=a(t[r])).mode&&i.push(n);return i}},Storage:{set:i.set,get:i.get,remove:i.remove}};var t,n,i,r,o,a}.apply(t,i),void 0===r||(e.exports=r)},26808:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(23844),n(81645),n(32446),n(5581),n(27786),n(78358)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";var l,u,c=s.extend({error:function(){this.model.set({uploading:!1,uploadedBytes:0,title:gettext("Sorry, there was an error parsing the subtitles that you uploaded. Please check the format and try again.")})}}),d=r.extend({events:{"click .create-setting":"addEntry","click .remove-setting":"removeEntry","click .upload-setting":"upload","change select":"onChangeHandler"},templateName:"metadata-translations-entry",templateItemName:"metadata-translations-item",validFileFormats:["srt"],initialize:function(){var e=t.result(this,"templateItemName"),n=document.getElementById(e).text,o={};n||console.error("Couldn't load template for item: "+e),this.templateItem=t.template(n),t.each(this.model.getDisplayValue(),(function(e,t){o[t]=t})),i.Storage.set("languageMap",o),r.prototype.initialize.apply(this,arguments)},getDropdown:(u=function(n,i){var r=e(n).clone();return t.each(i,(function(e,t){""===t&&(t=null);var n=r[0].options.namedItem(t);n&&(n.disabled=!0)})),r},function(e){return l||((l=document.createElement("select")).options.add(new Option),t.each(this.model.get("languages"),(function(e,t){var n=new Option;n.setAttribute("name",e.code),n.value=e.code,n.text=e.label,l.options.add(n)}))),u(l,e)}),getValueFromEditor:function(){var n={},i=this.$el.find("ol").find(".list-settings-item");return t.each(i,(function(t,i){var r=e(t).find("select option:selected").val(),o=e(t).find(".input").val();if(""===o&&(""===r||r in n))return!1;n[r]=o})),n},setValueInEditor:function(r){var o=this,a=document.createDocumentFragment(),s=o.getDropdown(r),l=i.Storage.get("languageMap");t.each(r,(function(i,r){var u=e(o.templateItem({newLang:r,originalLang:t.findKey(l,(function(e){return e===r}))||"",value:i,url:o.model.get("urlRoot")}));n.prepend(u,n.HTML(s.clone().val(r))),a.appendChild(u[0])})),n.setHtml(this.$el.find("ol"),n.HTML([a]))},addEntry:function(e){e.preventDefault(),this.setValueInEditor(this.getAllLanguageDropdownElementsData(!0)),this.$el.find(".create-setting").addClass("is-disabled").attr("aria-disabled",!0)},removeEntry:function(n){var r=this,a=e(n.currentTarget).parent(),s=a.data("original-lang"),l=a.find("select option:selected").val(),u=i.Storage.get("languageMap"),c=i.getField(r.model.collection,"edx_video_id");n.preventDefault(),s?o.confirmThenRunOperation(gettext("Are you sure you want to remove this transcript?"),gettext("If you remove this transcript, the transcript will not be available for this component."),gettext("Remove Transcript"),(function(){o.runOperationShowingMessage(gettext("Removing"),(function(){return e.ajax({url:r.model.get("urlRoot"),type:"DELETE",data:JSON.stringify({lang:s,edx_video_id:c.getValue()})}).done((function(){r.setValueInEditor(r.getAllLanguageDropdownElementsData(!1,l)),i.Storage.set("languageMap",t.omit(u,s))}))}))})):this.setValueInEditor(this.getAllLanguageDropdownElementsData(!1,l)),this.$el.find(".create-setting").removeClass("is-disabled").attr("aria-disabled",!1)},upload:function(n){var r,o,s=this,l=e(n.currentTarget),u=l.parents("li.list-settings-item"),d=u.data("original-lang"),f=u.find(":selected").val(),h=i.getField(s.model.collection,"edx_video_id");n.preventDefault(),d||(d=f),o={edx_video_id:h.getValue(),language_code:d,new_language_code:f},r=new a({title:gettext("Upload translation"),fileFormats:this.validFileFormats}),new c({model:r,url:this.model.get("urlRoot"),parentElement:l.closest(".xblock-editor"),uploadData:o,onSuccess:function(e){var n=i.Storage.get("languageMap"),r={};r[f]=f,h.setValue(e.edx_video_id),n=t.extend(t.omit(n,d),r),i.Storage.set("languageMap",n),s.setValueInEditor(s.getAllLanguageDropdownElementsData())}}).show()},enableAdd:function(){this.$el.find(".create-setting").removeClass("is-disabled").attr("aria-disabled",!1)},onChangeHandler:function(t){var n=e(t.currentTarget).parents("li.list-settings-item"),r=n.data("original-lang"),o=n.find("select option:selected").val(),a=i.Storage.get("languageMap");if(r in a)return a[r]=o,void i.Storage.set("languageMap",a);this.enableAdd(),this.setValueInEditor(this.getAllLanguageDropdownElementsData())},getAllLanguageDropdownElementsData:function(n,r){var o={},a=this.$el.find("select"),s=i.Storage.get("languageMap");return t.each(a,(function(n){var i=e(n).find(":selected").val();o[i]=t.findKey(s,(function(e){return e===i}))||""})),n&&(o[""]=""),void 0!==r&&(o=t.omit(o,r)),o}});return d}.apply(t,i))||(e.exports=r)},6775:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(5581),n(39346),n(14930),n(23844)],void 0===(r=function(e,t,n,i,r,o){"use strict";return i.extend({events:{"click .notification-action-button":"fireNotificationActionEvent"},options:{clipboardData:{content:null}},initialize:function(){i.prototype.initialize.call(this),this.view=this.options.view},render:function(t){var n=this,i=this.view,r=this.model.url(),o=window.location.search;return e.ajax({url:decodeURIComponent(r)+"/"+i+o,type:"GET",cache:!1,headers:{Accept:"application/json"},success:function(e){n.handleXBlockFragment(e,t)}})},initRuntimeData:function(e,t){return t&&t.initRuntimeData&&e&&e.runtime&&!e.runtime.page&&(e.runtime.page=t.initRuntimeData),e},handleXBlockFragment:function(t,n){var i,o,a,s=this,l=this.$el,u=n?n.success||n.done:null,c=n?n.error||n.done:null;this.renderXBlockFragment(t,l).always((function(){i=s.$(".xblock").first();try{o=r.initializeBlock(i),s.xblock=s.initRuntimeData(o,n),s.xblockReady(s.xblock),s.$(".xblock_asides-v1").each((function(){e(this).hasClass("xblock-initialized")||(a=r.initializeBlock(e(this)),s.initRuntimeData(a,n))})),u&&u(o)}catch(e){console.error(e,e.stack),s.$(".xblock").addClass("xblock-initialization-failed"),i&&s.xblockReady(null),c&&c()}}))},notifyRuntime:function(t,n){var i,r=this.xblock&&this.xblock.runtime;r?r.notify(t,n):this.xblock&&(i=this.xblock.element&&e(this.xblock.element).prop("xblock_children"))&&e(i).each((function(){this.runtime&&this.runtime.notify(t,n)}))},xblockReady:function(e){},renderXBlockFragment:function(t,n){var i=t.html,r=t.resources,o=this;n||(n=this.$el);try{return this.addXBlockFragmentResources(r).done((function(){console.log("Updating HTML");try{o.updateHtml(n,i)}catch(e){console.error(e,e.stack)}}))}catch(t){return console.error(t,t.stack),e.Deferred().resolve()}},updateHtml:function(e,t){o.setHtml(e,o.HTML(t))},addXBlockFragmentResources:function(n){var i,r,o,a=this;return r=n.length,o=e.Deferred(),(i=function(e){var s,l,u,c;e>=r?o.resolve():(s=(u=n[e])[0],window.loadedXBlockResources||(window.loadedXBlockResources=[]),t.indexOf(window.loadedXBlockResources,s)<0?(l=u[1],c=a.loadResource(l),window.loadedXBlockResources.push(s),c.done((function(){i(e+1)})).fail((function(){o.reject()}))):i(e+1))})(0),o.promise()},loadResource:function(t){var i=e("head"),r=t.mimetype,a=t.kind,s=t.placement,l=t.data;if("text/css"===r)"text"===a?i.append('<style type="text/css">'+l+"</style>"):"url"===a&&i.append('<link rel="stylesheet" href="'+l+'" type="text/css">');else if("application/javascript"===r){if("text"===a)i.append("<script>"+l+"<\/script>");else if("url"===a)return n.loadJavaScript(l)}else"text/html"===r&&"head"===s&&o.append(i,o.HTML(l));return e.Deferred().resolve().promise()},fireNotificationActionEvent:function(t){var n=e(t.currentTarget).data("notification-action");n&&(t.preventDefault(),this.notifyRuntime(n,this.model.get("id")))}})}.apply(t,i))||(e.exports=r)},34958:(e,t,n)=>{var i,r;i=[n(39346),n(23844)],void 0===(r=function(e,t){"use strict";return e.extend({initialize:function(){e.prototype.initialize.call(this),this.template=this.loadTemplate("xblock-access-editor")},render:function(){return t.append(this.$el,t.HTML(this.template({}))),this}})}.apply(t,i))||(e.exports=r)},33671:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(90165),n(39346),n(6775),n(74199),n(68194),n(36022)],r=function(e,t,n,i,r,o,a){var s=r.extend({options:e.extend({},r.prototype.options,{view:"studio_view"}),initialize:function(){r.prototype.initialize.call(this),this.view=this.options.view},xblockReady:function(e){r.prototype.xblockReady.call(this,e),this.initializeEditors()},initializeEditors:function(){var e,t,n="editor";e=this.createMetadataEditor(),this.metadataEditor=e,this.hasCustomTabs()||(this.getDataEditor()?n="editor":e&&(n="settings"),this.selectMode(n)),(t=this.$(".wrapper-comp-plugins")).length>0&&(this.pluginEditor=new i({el:t}))},getDefaultModes:function(){return[{id:"editor",name:n("Editor")},{id:"settings",name:n("Settings")}]},hasCustomTabs:function(){return this.$(".editor-with-tabs").length>0},hasCustomButtons:function(){return this.$(".editor-with-buttons").length>0},createMetadataEditor:function(){var e,t,n,i=[],r=this.xblock,s=null;if(1===(e=this.$(".metadata_edit")).length){for(n in t=e.data("metadata"))t.hasOwnProperty(n)&&i.push(t[n]);s=new o.Editor({el:e,collection:new a(i)}),r.setMetadataEditor&&r.setMetadataEditor(s)}return s},getDataEditor:function(){var e=this.$(".wrapper-comp-editor");return 1===e.length?e:null},getMetadataEditor:function(){return this.metadataEditor},getPluginEditor:function(){return this.pluginEditor},getXBlockFieldData:function(){var e=this.xblock,n=this.getMetadataEditor(),i=null;return e.collectFieldData?i=e.collectFieldData():e.save?(i=e.save(),n&&(i.metadata=t.extend(i.metadata||{},this.getChangedMetadata()))):console.error("Cannot save xblock as it has no save method"),i},getChangedMetadata:function(){var e=this.getMetadataEditor();return t.extend(e.getModifiedMetadataValues(),this.getCustomMetadata())},getCustomMetadata:function(){var t,n,i,r;for(t={},n=this.$("[data-metadata-name]"),i=0;i<n.length;i++)r=n[i],t[e(r).data("metadata-name")]=r.value;return t},getMode:function(){return this.mode},selectMode:function(e){var t=this.getDataEditor(),n=this.getMetadataEditor(),i=this.getPluginEditor();t&&this.setEditorActivation(t,"editor"===e),n&&this.setEditorActivation(n.$el,"settings"===e),i&&this.setEditorActivation(i.$el,"plugins"===e),this.mode=e},setEditorActivation:function(e,t){e.removeClass("is-active").removeClass("is-inactive"),e.addClass(t?"is-active":"is-inactive")}});return s}.apply(t,i),void 0===r||(e.exports=r)},89846:(e,t,n)=>{var i,r;i=[n(20428),n(95891),n(90165),n(39346),n(5581),n(56155),n(88618),n(2648),n(23844)],void 0===(r=function(e,t,n,i,r,o,a,s,l){"use strict";var u=i.extend({options:{collapsedClass:"is-collapsed",canEdit:!0},templateName:"xblock-outline",initialize:function(){i.prototype.initialize.call(this),this.initialState=this.options.initialState,this.expandedLocators=this.options.expandedLocators,this.template=this.options.template,this.template||(this.template=this.loadTemplate(this.templateName)),this.parentInfo=this.options.parentInfo,this.parentView=this.options.parentView,this.renderedChildren=!1,this.model.on("sync",this.onSync,this),this.clipboardManager=this.options.clipboardManager},render:function(){if(this.renderTemplate(),this.addButtonActions(this.$el),this.addNameEditor(),null!==this.model.get("is_header_visible")&&!this.model.get("is_header_visible")){var e=this.model.get("id");t.isUndefined(this.expandedLocators)||this.expandedLocators.contains(e)||(this.expandedLocators.add(e),this.refresh())}return this.shouldRenderChildren()&&this.shouldExpandChildren()?this.renderChildren():this.renderedChildren=!1,this},renderTemplate:function(){var t=this.template(this.getTemplateContext());this.parentInfo?this.setElement(e(t)):l.setHtml(this.$el,l.HTML(t))},getTemplateContext:function(){var e=this.model,t=e.get("child_info"),i=this.parentInfo,r=o.getXBlockType(this.model.get("category"),this.parentInfo),a=o.getXBlockType(this.model.get("category"),this.parentInfo,!0),l=i?o.getXBlockType(i.get("category")):null,u=null,c=null,d=this.shouldRenderChildren()&&!this.shouldExpandChildren();return t&&(u=s.interpolate(n("New {component_type}"),{component_type:t.display_name},!0),c=t.display_name),{xblockInfo:e,visibilityClass:o.getXBlockVisibilityClass(e.get("visibility_state")),typeListClass:o.getXBlockListTypeClass(r),parentInfo:this.parentInfo,xblockType:r,xblockTypeDisplayName:a,parentType:l,childType:t?o.getXBlockType(t.category,e):null,childCategory:t?t.category:null,addChildLabel:u,defaultNewChildName:c,isCollapsed:d,includesChildren:this.shouldRenderChildren(),hasExplicitStaffLock:this.model.get("has_explicit_staff_lock"),staffOnlyMessage:this.model.get("staff_only_message"),hideFromTOCMessage:this.model.get("hide_from_toc_message"),enableHideFromTOC:this.model.get("hide_from_toc"),course,enableCopyPasteUnits:this.model.get("enable_copy_paste_units"),isTaggingFeatureDisabled:this.model.get("is_tagging_feature_disabled")}},renderChildren:function(){var e=this,n=this.model;n.get("child_info")&&t.each(this.model.get("child_info").children,(function(t){var i=e.createChildView(t,n);i.render(),e.addChildView(i)})),this.renderedChildren=!0},getListElement:function(){return this.$("> .outline-content > ol")},addChildView:function(e,t){t?e.$el.insertAfter(t):this.getListElement().append(e.$el)},addNameEditor:function(){var e=this,t=this.$(".wrapper-xblock-field");t.length>0&&new(a.extend({refresh:function(){e.refresh()}}))({el:t,model:this.model}).render()},toggleExpandCollapse:function(e){if(this.expandedLocators){var t=this.model.get("id");this.expandedLocators.contains(t)?this.expandedLocators.remove(t):this.expandedLocators.add(t)}this.ensureChildrenRendered(),i.prototype.toggleExpandCollapse.call(this,e)},ensureChildrenRendered:function(){!this.renderedChildren&&this.shouldRenderChildren()&&this.renderChildren()},addButtonActions:function(e){e.find(".delete-button").click(t.bind(this.handleDeleteEvent,this)),e.find(".duplicate-button").click(t.bind(this.handleDuplicateEvent,this)),e.find(".button-new").click(t.bind(this.handleAddEvent,this))},shouldRenderChildren:function(){return!0},shouldExpandChildren:function(){return!0},getChildViewClass:function(){return u},createChildView:function(e,n,i){return new(this.getChildViewClass())(t.extend({model:e,parentInfo:n,parentView:this,initialState:this.initialState,expandedLocators:this.expandedLocators,template:this.template,clipboardManager:this.clipboardManager},i))},onSync:function(e){r.hasChangedAttributes(this.model,["visibility_state","child_info","display_name","highlights"])&&this.onXBlockChange()},onXBlockChange:function(){var e=this.$el,t=this.initialState;this.render(),this.parentInfo&&e.replaceWith(this.$el),t&&this.setViewState(t)},setViewState:function(e){var t,n=e.locator_to_show,i=e.scroll_offset||0,o=e.edit_display_name;n&&((t=n===this.model.id?this.$el:this.$('.outline-item[data-locator="'+n+'"]')).length>0?r.setScrollOffset(t,i):console.error("Failed to show item with locator "+n),o&&t.find('> div[class$="header"] .xblock-field-value-edit').click()),this.initialState=null},refresh:function(){return this.model.fetch()},onChildAdded:function(e,t){"vertical"===t?this.onUnitAdded(e):this.refresh()},onUnitAdded:function(e){r.redirect("/container/"+e+"?action=new")},onChildDeleted:function(){this.refresh()},handleDeleteEvent:function(e){var t=this,n=this.parentView,i=o.getXBlockType(this.model.get("category"),n.model,!0);e.preventDefault(),o.deleteXBlock(this.model,i).done((function(){n&&n.onChildDeleted(t,e)}))},getParentElement:function(e,t){var n={unit:"subsection",subsection:"section",section:"course"}[t];return e.closest(".outline-"+n)},handleDuplicateEvent:function(t){var n=this,i=o.getXBlockType(n.model.get("category"),n.parentView.model),r=e(t.currentTarget).closest(".outline-item"),a=n.getParentElement(r,i);t.preventDefault(),o.duplicateXBlock(r,a).done((function(e){n.parentView&&n.parentView.onChildDuplicated(e.locator,i,r)}))},handleAddEvent:function(t){var n=this,i=e(t.currentTarget),r=i.data("category");t.preventDefault(),o.addXBlock(i).done((function(e){n.onChildAdded(e,r,t)}))}});return u}.apply(t,i))||(e.exports=r)},88618:(e,t,n)=>{var i,r;i=[n(39346),n(56155),n(23844)],void 0===(r=function(e,t,n){"use strict";return e.extend({events:{"click .xblock-field-value-edit":"showInput","click button[name=submit]":"onClickSubmit","click button[name=cancel]":"onClickCancel","click .xblock-string-field-editor":"onClickEditor","change .xblock-field-input":"updateField","focusout .xblock-field-input":"onInputFocusLost","keyup .xblock-field-input":"handleKeyUp"},initialize:function(){e.prototype.initialize.call(this),this.fieldName=this.$el.data("field"),this.fieldDisplayName=this.$el.data("field-display-name"),this.template=this.loadTemplate("xblock-string-field-editor"),this.model.on("change:"+this.fieldName,this.onChangeField,this)},render:function(){var e={value:this.model.escape(this.fieldName),fieldName:this.fieldName,fieldDisplayName:this.fieldDisplayName};return this.$el.append(n.HTML(this.template(e)).toString()),this},getLabel:function(){return this.$(".xblock-field-value")},getInput:function(){return this.$(".xblock-field-input")},onInputFocusLost:function(){this.model.get(this.fieldName)===this.getInput().val()&&this.hideInput()},onClickSubmit:function(e){e.preventDefault(),e.stopPropagation(),this.updateField()},onClickCancel:function(e){e.preventDefault(),e.stopPropagation(),this.cancelInput()},onClickEditor:function(e){e.stopPropagation()},onChangeField:function(){var e=this.model.get(this.fieldName);this.getLabel().text(e),this.getInput().val(e),this.hideInput()},showInput:function(e){var t=this.getInput();e.preventDefault(),e.stopPropagation(),this.$el.addClass("is-editing"),t.focus().select()},hideInput:function(){this.$el.removeClass("is-editing")},cancelInput:function(){this.getInput().val(this.model.get(this.fieldName)),this.hideInput()},refresh:function(){this.model.fetch()},updateField:function(){var e=this,n=this.model,i=this.getInput().val().trim(),r=n.get(this.fieldName);if(""!==i&&i!==r)return t.updateXBlockField(n,this.fieldName,i).done((function(){e.refresh()}));this.cancelInput()},handleKeyUp:function(e){27===e.keyCode&&this.cancelInput()}})}.apply(t,i))||(e.exports=r)},93148:(e,t,n)=>{var i,r,o;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}!function(s){"use strict";r=[n(20428)],i=function(e){var t=e.scrollTo=function(t,n,i){return e(window).scrollTo(t,n,i)};function n(t){return!t.nodeName||-1!==e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])}function i(e){return"function"==typeof e}function r(t){return i(t)||e.isPlainObject(t)?t:{top:t,left:t}}return t.defaults={axis:"xy",duration:0,limit:!0},e.fn.scrollTo=function(o,s,l){"object"===a(s)&&(l=s,s=0),"function"==typeof l&&(l={onAfter:l}),"max"===o&&(o=9e9),l=e.extend({},t.defaults,l),s=s||l.duration;var u=l.queue&&l.axis.length>1;return u&&(s/=2),l.offset=r(l.offset),l.over=r(l.over),this.each((function(){if(null!==o){var c,d=n(this),f=d?this.contentWindow||window:this,h=e(f),p=o,m={};switch(a(p)){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(p)){p=r(p);break}p=d?e(p):e(p,f);case"object":if(0===p.length)return;(p.is||p.style)&&(c=(p=e(p)).offset())}var g=i(l.offset)&&l.offset(f,p)||l.offset;e.each(l.axis.split(""),(function(e,n){var i="x"===n?"Left":"Top",r=i.toLowerCase(),o="scroll"+i,a=h[o](),s=t.max(f,n);if(c)m[o]=c[r]+(d?0:a-h.offset()[r]),l.margin&&(m[o]-=parseInt(p.css("margin"+i),10)||0,m[o]-=parseInt(p.css("border"+i+"Width"),10)||0),m[o]+=g[r]||0,l.over[r]&&(m[o]+=p["x"===n?"width":"height"]()*l.over[r]);else{var y=p[r];m[o]=y.slice&&"%"===y.slice(-1)?parseFloat(y)/100*s:y}l.limit&&/^\d+$/.test(m[o])&&(m[o]=m[o]<=0?0:Math.min(m[o],s)),!e&&l.axis.length>1&&(a===m[o]?m={}:u&&(v(l.onAfterFirst),m={}))})),v(l.onAfter)}function v(t){var n=e.extend({},l,{queue:!0,duration:s,complete:t&&function(){t.call(f,p,l)}});h.animate(m,n)}}))},t.max=function(t,i){var r="x"===i?"Width":"Height",o="scroll"+r;if(!n(t))return t[o]-e(t)[r.toLowerCase()]();var a="client"+r,s=t.ownerDocument||t.document,l=s.documentElement,u=s.body;return Math.max(l[o],u[o])-Math.min(l[a],u[a])},e.Tween.propHooks.scrollLeft=e.Tween.propHooks.scrollTop={get:function(t){return e(t.elem)[t.prop]()},set:function(t){var n=this.get(t);if(t.options.interrupt&&t._last&&t._last!==n)return e(t.elem).stop();var i=Math.round(t.now);n!==i&&(e(t.elem)[t.prop](i),t._last=this.get(t))}},t},void 0===(o="function"==typeof i?i.apply(t,r):i)||(e.exports=o)}()},44511:(e,t,n)=>{var i,r,o,a;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}a=function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return r(t[a][1][e]||e)}),u,u.exports,e,t,n,i)}return n[a].exports}for(var o=void 0,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){var i=e("./trim"),r=e("./decapitalize");t.exports=function(e,t){return e=i(e).replace(/[-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""})),!0===t?r(e):e}},{"./decapitalize":10,"./trim":65}],2:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e,t){e=i(e);var n=t?e.slice(1).toLowerCase():e.slice(1);return e.charAt(0).toUpperCase()+n}},{"./helper/makeString":20}],3:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e){return i(e).split("")}},{"./helper/makeString":20}],4:[function(e,t,n){t.exports=function(e,t){return null==e?[]:(e=String(e),(t=~~t)>0?e.match(new RegExp(".{1,"+t+"}","g")):[e])}},{}],5:[function(e,t,n){var i=e("./capitalize"),r=e("./camelize"),o=e("./helper/makeString");t.exports=function(e){return e=o(e),i(r(e.replace(/[\W_]/g," ")).replace(/\s/g,""))}},{"./camelize":1,"./capitalize":2,"./helper/makeString":20}],6:[function(e,t,n){var i=e("./trim");t.exports=function(e){return i(e).replace(/\s\s+/g," ")}},{"./trim":65}],7:[function(e,t,n){var i=e("./helper/makeString"),r="",o="aaaaaaaaaccceeeeeghiiiijllnnoooooooossssstttuuuuuunyyczzz";r+=r.toUpperCase(),o=(o+=o.toUpperCase()).split(""),r+="",o.push("ss"),t.exports=function(e){return i(e).replace(/.{1}/g,(function(e){var t=r.indexOf(e);return-1===t?e:o[t]}))}},{"./helper/makeString":20}],8:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e,t){return e=i(e),t=i(t),0===e.length||0===t.length?0:e.split(t).length-1}},{"./helper/makeString":20}],9:[function(e,t,n){var i=e("./trim");t.exports=function(e){return i(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}},{"./trim":65}],10:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e){return(e=i(e)).charAt(0).toLowerCase()+e.slice(1)}},{"./helper/makeString":20}],11:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e,t){var n,r=function(e){for(var t=e.match(/^[\s\\t]*/gm),n=t[0].length,i=1;i<t.length;i++)n=Math.min(t[i].length,n);return n}(e=i(e));return 0===r?e:(n="string"==typeof t?new RegExp("^"+t,"gm"):new RegExp("^[ \\t]{"+r+"}","gm"),e.replace(n,""))}},{"./helper/makeString":20}],12:[function(e,t,n){var i=e("./helper/makeString"),r=e("./helper/toPositive");t.exports=function(e,t,n){return e=i(e),t=""+t,(n=void 0===n?e.length-t.length:Math.min(r(n),e.length)-t.length)>=0&&e.indexOf(t,n)===n}},{"./helper/makeString":20,"./helper/toPositive":22}],13:[function(e,t,n){var i=e("./helper/makeString"),r=e("./helper/escapeChars"),o="[";for(var a in r)o+=a;o+="]";var s=new RegExp(o,"g");t.exports=function(e){return i(e).replace(s,(function(e){return"&"+r[e]+";"}))}},{"./helper/escapeChars":17,"./helper/makeString":20}],14:[function(e,t,n){t.exports=function(){var e={};for(var t in this)this.hasOwnProperty(t)&&!t.match(/^(?:include|contains|reverse|join|map|wrap)$/)&&(e[t]=this[t]);return e}},{}],15:[function(e,t,n){var i=e("./makeString");t.exports=function(e,t){return 0===(e=i(e)).length?"":e.slice(0,-1)+String.fromCharCode(e.charCodeAt(e.length-1)+t)}},{"./makeString":20}],16:[function(e,t,n){var i=e("./escapeRegExp");t.exports=function(e){return null==e?"\\s":e.source?e.source:"["+i(e)+"]"}},{"./escapeRegExp":18}],17:[function(e,t,n){t.exports={"":"cent","":"pound","":"yen","":"euro","":"copy","":"reg","<":"lt",">":"gt",'"':"quot","&":"amp","'":"#39"}},{}],18:[function(e,t,n){var i=e("./makeString");t.exports=function(e){return i(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},{"./makeString":20}],19:[function(e,t,n){t.exports={nbsp:" ",cent:"",pound:"",yen:"",euro:"",copy:"",reg:"",lt:"<",gt:">",quot:'"',amp:"&",apos:"'"}},{}],20:[function(e,t,n){t.exports=function(e){return null==e?"":""+e}},{}],21:[function(e,t,n){t.exports=function(e,t){if(t<1)return"";for(var n="";t>0;)1&t&&(n+=e),t>>=1,e+=e;return n}},{}],22:[function(e,t,n){t.exports=function(e){return e<0?0:+e||0}},{}],23:[function(e,t,n){var i=e("./capitalize"),r=e("./underscored"),o=e("./trim");t.exports=function(e){return i(o(r(e).replace(/_id$/,"").replace(/_/g," ")))}},{"./capitalize":2,"./trim":65,"./underscored":67}],24:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e,t){return""===t||-1!==i(e).indexOf(t)}},{"./helper/makeString":20}],25:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);this._wrapped=e}function r(e,t){"function"==typeof t&&(i.prototype[e]=function(){var e=[this._wrapped].concat(Array.prototype.slice.call(arguments)),n=t.apply(null,e);return"string"==typeof n?new i(n):n})}for(var o in i.VERSION="3.3.6",i.isBlank=e("./isBlank"),i.stripTags=e("./stripTags"),i.capitalize=e("./capitalize"),i.decapitalize=e("./decapitalize"),i.chop=e("./chop"),i.trim=e("./trim"),i.clean=e("./clean"),i.cleanDiacritics=e("./cleanDiacritics"),i.count=e("./count"),i.chars=e("./chars"),i.swapCase=e("./swapCase"),i.escapeHTML=e("./escapeHTML"),i.unescapeHTML=e("./unescapeHTML"),i.splice=e("./splice"),i.insert=e("./insert"),i.replaceAll=e("./replaceAll"),i.include=e("./include"),i.join=e("./join"),i.lines=e("./lines"),i.dedent=e("./dedent"),i.reverse=e("./reverse"),i.startsWith=e("./startsWith"),i.endsWith=e("./endsWith"),i.pred=e("./pred"),i.succ=e("./succ"),i.titleize=e("./titleize"),i.camelize=e("./camelize"),i.underscored=e("./underscored"),i.dasherize=e("./dasherize"),i.classify=e("./classify"),i.humanize=e("./humanize"),i.ltrim=e("./ltrim"),i.rtrim=e("./rtrim"),i.truncate=e("./truncate"),i.prune=e("./prune"),i.words=e("./words"),i.pad=e("./pad"),i.lpad=e("./lpad"),i.rpad=e("./rpad"),i.lrpad=e("./lrpad"),i.sprintf=e("./sprintf"),i.vsprintf=e("./vsprintf"),i.toNumber=e("./toNumber"),i.numberFormat=e("./numberFormat"),i.strRight=e("./strRight"),i.strRightBack=e("./strRightBack"),i.strLeft=e("./strLeft"),i.strLeftBack=e("./strLeftBack"),i.toSentence=e("./toSentence"),i.toSentenceSerial=e("./toSentenceSerial"),i.slugify=e("./slugify"),i.surround=e("./surround"),i.quote=e("./quote"),i.unquote=e("./unquote"),i.repeat=e("./repeat"),i.naturalCmp=e("./naturalCmp"),i.levenshtein=e("./levenshtein"),i.toBoolean=e("./toBoolean"),i.exports=e("./exports"),i.escapeRegExp=e("./helper/escapeRegExp"),i.wrap=e("./wrap"),i.map=e("./map"),i.strip=i.trim,i.lstrip=i.ltrim,i.rstrip=i.rtrim,i.center=i.lrpad,i.rjust=i.lpad,i.ljust=i.rpad,i.contains=i.include,i.q=i.quote,i.toBool=i.toBoolean,i.camelcase=i.camelize,i.mapChars=i.map,i.prototype={value:function(){return this._wrapped}},i)r(o,i[o]);function a(e){r(e,(function(t){var n=Array.prototype.slice.call(arguments,1);return String.prototype[e].apply(t,n)}))}r("tap",(function(e,t){return t(e)}));var s=["toUpperCase","toLowerCase","split","replace","slice","substring","substr","concat"];for(var l in s)a(s[l]);t.exports=i},{"./camelize":1,"./capitalize":2,"./chars":3,"./chop":4,"./classify":5,"./clean":6,"./cleanDiacritics":7,"./count":8,"./dasherize":9,"./decapitalize":10,"./dedent":11,"./endsWith":12,"./escapeHTML":13,"./exports":14,"./helper/escapeRegExp":18,"./humanize":23,"./include":24,"./insert":26,"./isBlank":27,"./join":28,"./levenshtein":29,"./lines":30,"./lpad":31,"./lrpad":32,"./ltrim":33,"./map":34,"./naturalCmp":35,"./numberFormat":38,"./pad":39,"./pred":40,"./prune":41,"./quote":42,"./repeat":43,"./replaceAll":44,"./reverse":45,"./rpad":46,"./rtrim":47,"./slugify":48,"./splice":49,"./sprintf":50,"./startsWith":51,"./strLeft":52,"./strLeftBack":53,"./strRight":54,"./strRightBack":55,"./stripTags":56,"./succ":57,"./surround":58,"./swapCase":59,"./titleize":60,"./toBoolean":61,"./toNumber":62,"./toSentence":63,"./toSentenceSerial":64,"./trim":65,"./truncate":66,"./underscored":67,"./unescapeHTML":68,"./unquote":69,"./vsprintf":70,"./words":71,"./wrap":72}],26:[function(e,t,n){var i=e("./splice");t.exports=function(e,t,n){return i(e,t,0,n)}},{"./splice":49}],27:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e){return/^\s*$/.test(i(e))}},{"./helper/makeString":20}],28:[function(e,t,n){var i=e("./helper/makeString"),r=[].slice;t.exports=function(){var e=r.call(arguments),t=e.shift();return e.join(i(t))}},{"./helper/makeString":20}],29:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e,t){"use strict";if((e=i(e))===(t=i(t)))return 0;if(!e||!t)return Math.max(e.length,t.length);for(var n=new Array(t.length+1),r=0;r<n.length;++r)n[r]=r;for(r=0;r<e.length;++r){for(var o=r+1,a=0;a<t.length;++a){var s=o,l=s+1;(o=n[a]+(e.charAt(r)===t.charAt(a)?0:1))>l&&(o=l),o>(l=n[a+1]+1)&&(o=l),n[a]=s}n[a]=o}return o}},{"./helper/makeString":20}],30:[function(e,t,n){t.exports=function(e){return null==e?[]:String(e).split(/\r\n?|\n/)}},{}],31:[function(e,t,n){var i=e("./pad");t.exports=function(e,t,n){return i(e,t,n)}},{"./pad":39}],32:[function(e,t,n){var i=e("./pad");t.exports=function(e,t,n){return i(e,t,n,"both")}},{"./pad":39}],33:[function(e,t,n){var i=e("./helper/makeString"),r=e("./helper/defaultToWhiteSpace"),o=String.prototype.trimLeft;t.exports=function(e,t){return e=i(e),!t&&o?o.call(e):(t=r(t),e.replace(new RegExp("^"+t+"+"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":20}],34:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e,t){return 0===(e=i(e)).length||"function"!=typeof t?e:e.replace(/./g,t)}},{"./helper/makeString":20}],35:[function(e,t,n){t.exports=function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var n=/(\.\d+|\d+|\D+)/g,i=String(e).match(n),r=String(t).match(n),o=Math.min(i.length,r.length),a=0;a<o;a++){var s=i[a],l=r[a];if(s!==l){var u=+s,c=+l;return u==u&&c==c?u>c?1:-1:s<l?-1:1}}return i.length!=r.length?i.length-r.length:e<t?-1:1}},{}],36:[function(e,t,n){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(n){return function(n,i){var r,o,a,l,u,c,d,f,h,p=1,m=n.length,g="";for(o=0;o<m;o++)if("string"==typeof n[o])g+=n[o];else if("object"===s(n[o])){if((l=n[o]).keys)for(r=i[p],a=0;a<l.keys.length;a++){if(null==r)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',l.keys[a],l.keys[a-1]));r=r[l.keys[a]]}else r=l.param_no?i[l.param_no]:i[p++];if(e.not_type.test(l.type)&&e.not_primitive.test(l.type)&&r instanceof Function&&(r=r()),e.numeric_arg.test(l.type)&&"number"!=typeof r&&isNaN(r))throw new TypeError(t("[sprintf] expecting number but found %T",r));switch(e.number.test(l.type)&&(f=r>=0),l.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,l.width?parseInt(l.width):0);break;case"e":r=l.precision?parseFloat(r).toExponential(l.precision):parseFloat(r).toExponential();break;case"f":r=l.precision?parseFloat(r).toFixed(l.precision):parseFloat(r);break;case"g":r=l.precision?String(Number(r.toPrecision(l.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=l.precision?r.substring(0,l.precision):r;break;case"t":r=String(!!r),r=l.precision?r.substring(0,l.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=l.precision?r.substring(0,l.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=l.precision?r.substring(0,l.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}e.json.test(l.type)?g+=r:(!e.number.test(l.type)||f&&!l.sign?h="":(h=f?"+":"-",r=r.toString().replace(e.sign,"")),c=l.pad_char?"0"===l.pad_char?"0":l.pad_char.charAt(1):" ",d=l.width-(h+r).length,u=l.width&&d>0?c.repeat(d):"",g+=l.align?h+r+u:"0"===c?h+u+r:u+h+r)}return g}(function(t){if(r[t])return r[t];for(var n,i=t,o=[],a=0;i;){if(null!==(n=e.text.exec(i)))o.push(n[0]);else if(null!==(n=e.modulo.exec(i)))o.push("%");else{if(null===(n=e.placeholder.exec(i)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){a|=1;var s=[],l=n[2],u=[];if(null===(u=e.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(u[1]);""!==(l=l.substring(u[0].length));)if(null!==(u=e.key_access.exec(l)))s.push(u[1]);else{if(null===(u=e.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(u[1])}n[2]=s}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}i=i.substring(n[0].length)}return r[t]=o}(n),arguments)}function i(e,n){return t.apply(null,[e].concat(n||[]))}var r=Object.create(null);void 0!==n&&(n.sprintf=t,n.vsprintf=i),"undefined"!=typeof window&&(window.sprintf=t,window.vsprintf=i)}()},{}],37:[function(e,t,i){(function(e){(function(){function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(this)}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],38:[function(e,t,n){t.exports=function(e,t,n,i){if(isNaN(e)||null==e)return"";i="string"==typeof i?i:",";var r=(e=e.toFixed(~~t)).split("."),o=r[0],a=r[1]?(n||".")+r[1]:"";return o.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+i)+a}},{}],39:[function(e,t,n){var i=e("./helper/makeString"),r=e("./helper/strRepeat");t.exports=function(e,t,n,o){e=i(e),t=~~t;var a=0;switch(n?n.length>1&&(n=n.charAt(0)):n=" ",o){case"right":return a=t-e.length,e+r(n,a);case"both":return a=t-e.length,r(n,Math.ceil(a/2))+e+r(n,Math.floor(a/2));default:return a=t-e.length,r(n,a)+e}}},{"./helper/makeString":20,"./helper/strRepeat":21}],40:[function(e,t,n){var i=e("./helper/adjacent");t.exports=function(e){return i(e,-1)}},{"./helper/adjacent":15}],41:[function(e,t,n){var i=e("./helper/makeString"),r=e("./rtrim");t.exports=function(e,t,n){if(e=i(e),t=~~t,n=null!=n?String(n):"...",e.length<=t)return e;var o=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,(function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "}));return((o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):r(o.slice(0,o.length-1)))+n).length>e.length?e:e.slice(0,o.length)+n}},{"./helper/makeString":20,"./rtrim":47}],42:[function(e,t,n){var i=e("./surround");t.exports=function(e,t){return i(e,t||'"')}},{"./surround":58}],43:[function(e,t,n){var i=e("./helper/makeString"),r=e("./helper/strRepeat");t.exports=function(e,t,n){if(e=i(e),t=~~t,null==n)return r(e,t);for(var o=[];t>0;o[--t]=e);return o.join(n)}},{"./helper/makeString":20,"./helper/strRepeat":21}],44:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e,t,n,r){var o=new RegExp(t,!0===r?"gi":"g");return i(e).replace(o,n)}},{"./helper/makeString":20}],45:[function(e,t,n){var i=e("./chars");t.exports=function(e){return i(e).reverse().join("")}},{"./chars":3}],46:[function(e,t,n){var i=e("./pad");t.exports=function(e,t,n){return i(e,t,n,"right")}},{"./pad":39}],47:[function(e,t,n){var i=e("./helper/makeString"),r=e("./helper/defaultToWhiteSpace"),o=String.prototype.trimRight;t.exports=function(e,t){return e=i(e),!t&&o?o.call(e):(t=r(t),e.replace(new RegExp(t+"+$"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":20}],48:[function(e,t,n){var i=e("./trim"),r=e("./dasherize"),o=e("./cleanDiacritics");t.exports=function(e){return i(r(o(e).replace(/[^\w\s-]/g,"-").toLowerCase()),"-")}},{"./cleanDiacritics":7,"./dasherize":9,"./trim":65}],49:[function(e,t,n){var i=e("./chars");t.exports=function(e,t,n,r){var o=i(e);return o.splice(~~t,~~n,r),o.join("")}},{"./chars":3}],50:[function(e,t,n){var i=e("util-deprecate");t.exports=i(e("sprintf-js").sprintf,"sprintf() will be removed in the next major release, use the sprintf-js package instead.")},{"sprintf-js":36,"util-deprecate":37}],51:[function(e,t,n){var i=e("./helper/makeString"),r=e("./helper/toPositive");t.exports=function(e,t,n){return e=i(e),t=""+t,n=null==n?0:Math.min(r(n),e.length),e.lastIndexOf(t,n)===n}},{"./helper/makeString":20,"./helper/toPositive":22}],52:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e,t){e=i(e);var n=(t=i(t))?e.indexOf(t):-1;return~n?e.slice(0,n):e}},{"./helper/makeString":20}],53:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e,t){e=i(e),t=i(t);var n=e.lastIndexOf(t);return~n?e.slice(0,n):e}},{"./helper/makeString":20}],54:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e,t){e=i(e);var n=(t=i(t))?e.indexOf(t):-1;return~n?e.slice(n+t.length,e.length):e}},{"./helper/makeString":20}],55:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e,t){e=i(e);var n=(t=i(t))?e.lastIndexOf(t):-1;return~n?e.slice(n+t.length,e.length):e}},{"./helper/makeString":20}],56:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e){return i(e).replace(/<\/?[^>]+>/g,"")}},{"./helper/makeString":20}],57:[function(e,t,n){var i=e("./helper/adjacent");t.exports=function(e){return i(e,1)}},{"./helper/adjacent":15}],58:[function(e,t,n){t.exports=function(e,t){return[t,e,t].join("")}},{}],59:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e){return i(e).replace(/\S/g,(function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()}))}},{"./helper/makeString":20}],60:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e){return i(e).toLowerCase().replace(/(?:^|\s|-)\S/g,(function(e){return e.toUpperCase()}))}},{"./helper/makeString":20}],61:[function(e,t,n){var i=e("./trim");function r(e,t){var n,i,r=e.toLowerCase();for(t=[].concat(t),n=0;n<t.length;n+=1)if(i=t[n]){if(i.test&&i.test(e))return!0;if(i.toLowerCase()===r)return!0}}t.exports=function(e,t,n){return"number"==typeof e&&(e=""+e),"string"!=typeof e?!!e:!!r(e=i(e),t||["true","1"])||!r(e,n||["false","0"])&&void 0}},{"./trim":65}],62:[function(e,t,n){t.exports=function(e,t){if(null==e)return 0;var n=Math.pow(10,isFinite(t)?t:0);return Math.round(e*n)/n}},{}],63:[function(e,t,n){var i=e("./rtrim");t.exports=function(e,t,n,r){t=t||", ",n=n||" and ";var o=e.slice(),a=o.pop();return e.length>2&&r&&(n=i(t)+n),o.length?o.join(t)+n+a:a}},{"./rtrim":47}],64:[function(e,t,n){var i=e("./toSentence");t.exports=function(e,t,n){return i(e,t,n,!0)}},{"./toSentence":63}],65:[function(e,t,n){var i=e("./helper/makeString"),r=e("./helper/defaultToWhiteSpace"),o=String.prototype.trim;t.exports=function(e,t){return e=i(e),!t&&o?o.call(e):(t=r(t),e.replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":20}],66:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e,t,n){return n=n||"...",t=~~t,(e=i(e)).length>t?e.slice(0,t)+n:e}},{"./helper/makeString":20}],67:[function(e,t,n){var i=e("./trim");t.exports=function(e){return i(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}},{"./trim":65}],68:[function(e,t,n){var i=e("./helper/makeString"),r=e("./helper/htmlEntities");t.exports=function(e){return i(e).replace(/\&([^;]{1,10});/g,(function(e,t){var n;return t in r?r[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):e}))}},{"./helper/htmlEntities":19,"./helper/makeString":20}],69:[function(e,t,n){t.exports=function(e,t){return t=t||'"',e[0]===t&&e[e.length-1]===t?e.slice(1,e.length-1):e}},{}],70:[function(e,t,n){var i=e("util-deprecate");t.exports=i(e("sprintf-js").vsprintf,"vsprintf() will be removed in the next major release, use the sprintf-js package instead.")},{"sprintf-js":36,"util-deprecate":37}],71:[function(e,t,n){var i=e("./isBlank"),r=e("./trim");t.exports=function(e,t){return i(e)?[]:r(e,t).split(t||/\s+/)}},{"./isBlank":27,"./trim":65}],72:[function(e,t,n){var i=e("./helper/makeString");t.exports=function(e,t){e=i(e);var n,r=(t=t||{}).width||75,o=t.seperator||"\n",a=t.cut||!1,s=t.preserveSpaces||!1,l=t.trailingSpaces||!1;if(r<=0)return e;if(a){var u=0;for(n="";u<e.length;)u%r==0&&u>0&&(n+=o),n+=e.charAt(u),u++;if(l)for(;u%r>0;)n+=" ",u++;return n}var c=e.split(" "),d=0;for(n="";c.length>0;){if(1+c[0].length+d>r&&d>0){if(s)n+=" ",d++;else if(l)for(;d<r;)n+=" ",d++;n+=o,d=0}d>0&&(n+=" ",d++),n+=c[0],d+=c[0].length,c.shift()}if(l)for(;d<r;)n+=" ",d++;return n}},{"./helper/makeString":20}]},{},[25])(25)},"object"===s(t)?e.exports=a():(r=[],void 0===(o="function"==typeof(i=a)?i.apply(t,r):i)||(e.exports=o))},96310:(e,t,n)=>{var i=n(20428),r=n(23844);i(".nav-skip").click((function(){var e=i(this).attr("href");e&&i(e).attr("tabIndex",-1).focus()})),i(".nav-skip").keypress((function(e){var t;13===e.which&&(t=i(this).attr("href"))&&i(t).attr("tabIndex",-1).focus()})),i((function(){var e;e=function(){function e(){var e="reader-feedback";0===i("#"+e).length&&r.append(i("body"),r.interpolateHtml(r.HTML('<div id="{readerFeedbackID}" class="sr" aria-live="polite"></div>'),{readerFeedbackID:e})),this.el=i("#"+e)}return e.prototype.clear=function(){r.setHtml(this.el,"")},e.prototype.readElts=function(e){var t=[];return i.each(e,(function(e,n){t.push(i(n).html())})),this.readTexts(t)},e.prototype.readText=function(e){return this.readTexts([e])},e.prototype.readTexts=function(e){var t=r.HTML("");i.each(e,(function(e,n){t=r.interpolateHtml(r.HTML("{previous_feedback}<p>{value}</p>\n"),{previous_feedback:t,value:r.HTML(n)})})),r.setHtml(this.el,t)},e}(),window.SR=new e}))},5840:()=>{window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))},73705:function(e,t,n){var i=n(20428);(function(){i.fn.immediateDescendents=function(e){return this.children().map((function(){var t;return(t=i(this)).is(e)?this:t.immediateDescendents(e).get()}))}}).call(this)},91760:(e,t,n)=>{var i=n(20428);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}i.extend=i.fn.extend=function(){var e,t,n,o,a,s,l=arguments[0]||{},u=1,c=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=arguments[u]||{},u++),"object"===r(l)||i.isFunction(l)||(l={}),u===c&&(l=this,u--);u<c;u++)if(null!=(e=arguments[u]))for(t in e)o=e[t],"__proto__"!==t&&l!==o&&(d&&o&&(i.isPlainObject(o)||(a=Array.isArray(o)))?(n=l[t],s=a&&!Array.isArray(n)?[]:a||i.isPlainObject(n)?n:{},a=!1,l[t]=i.extend(d,s,o)):void 0!==o&&(l[t]=o));return l}},38264:(e,t,n)=>{var i=n(20428),r=function(){"use strict";var e,t=null;return{init:function(){e=i("#settings-language-value"),t=this,this.listenForLanguagePreferenceChange()},listenForLanguagePreferenceChange:function(){e.change((function(e){var n=this.value,r=i(".url-endpoint").val(),o=JSON.parse(i(".url-endpoint").data("user-is-authenticated"));e.preventDefault(),t.submitAjaxRequest(n,r,(function(){o?i("#language-settings-form").submit():t.refresh()}))}))},submitAjaxRequest:function(e,n,r){i.ajax({type:"PATCH",data:JSON.stringify({"pref-lang":e}),url:n,dataType:"json",contentType:"application/merge-patch+json",notifyOnError:!1,beforeSend:function(e){e.setRequestHeader("X-CSRFToken",i.cookie("csrftoken"))}}).done((function(){r()})).fail((function(){t.refresh()}))},refresh:function(){location.reload()}}}();i(document).ready((function(){"use strict";r.init()}))},87285:(e,t,n)=>{var i=n(20428),r=n(95891);!function(){"use strict";var e=function(e){this.element=i(e),this.tooltip=i("div."+this.className.split(/\s+/).join(".")),this.tooltip.length||(this.tooltip=i("<div />",{class:this.className}).appendTo(this.element)),this.hide(),r.bindAll(this,"show","hide","showTooltip","moveTooltip","hideTooltip","click"),this.bindEvents()};e.prototype={className:"tooltip",SELECTOR:"[data-tooltip]",bindEvents:function(){this.element.on({"mouseover.TooltipManager":this.showTooltip,"mousemove.TooltipManager":this.moveTooltip,"mouseout.TooltipManager":this.hideTooltip,"click.TooltipManager":this.click},this.SELECTOR)},getCoords:function(e,t){return{left:e-.5*this.tooltip.outerWidth(),top:t-(this.tooltip.outerHeight()+15)}},show:function(){this.tooltip.show().css("opacity",1)},hide:function(){this.tooltip.hide().css("opacity",0)},showTooltip:function(e){this.prepareTooltip(e.currentTarget,e.pageX,e.pageY),this.tooltipTimer&&clearTimeout(this.tooltipTimer),this.tooltipTimer=setTimeout(this.show,500)},prepareTooltip:function(e,t,n){t=void 0!==t?t:e.offset().left+e.width()/2,n=void 0!==n?n:e.offset().top+e.height()/2;var r=i(e).attr("data-tooltip");this.tooltip.text(r).css(this.getCoords(t,n))},openTooltip:function(e){this.prepareTooltip(e),this.show(),this.tooltipTimer&&clearTimeout(this.tooltipTimer)},moveTooltip:function(e){this.tooltip.css(this.getCoords(e.pageX,e.pageY))},hideTooltip:function(){clearTimeout(this.tooltipTimer),this.tooltipTimer=setTimeout(this.hide,50)},click:function(e){!!i(e.currentTarget).data("tooltip-show-on-click")?(this.show(),this.tooltipTimer&&clearTimeout(this.tooltipTimer)):this.hideTooltip(e)},destroy:function(){this.tooltip.remove(),this.element.off(".TooltipManager",this.SELECTOR)}},window.TooltipManager=e,i(document).ready((function(){window.globalTooltipManager=new e(document.body)}))}()},6782:()=>{window.isExternal=function(e){var t=e.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof t[1]&&t[1].length>0&&t[1].toLowerCase()!==location.protocol||"string"==typeof t[2]&&t[2].length>0&&t[2].replace(new RegExp(":("+{"http:":80,"https:":443}[location.protocol]+")?$"),"")!==location.host},window.rewriteStaticLinks=function(e,t,n){if(null===t||null===n)return e;fromRe=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var i=new RegExp("(https?://(www.)?[-a-zA-Z0-9@:%._+~#=]{2,256}.[a-z]{2,6}([-a-zA-Z0-9@:%_+.~#?&//=]*))?"+fromRe,"g");return e.replace(i,(function(e){return e===t?n:e}))}},58112:()=>{var e,t,n,i,o,a,s;Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},i=Date,o=i.prototype,a=i.CultureInfo,s=function(e,t){return t||(t=2),("000"+e).slice(-1*t)},o.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},o.setTimeToNow=function(){var e=new Date;return this.setHours(e.getHours()),this.setMinutes(e.getMinutes()),this.setSeconds(e.getSeconds()),this.setMilliseconds(e.getMilliseconds()),this},i.today=function(){return(new Date).clearTime()},i.compare=function(e,t){if(isNaN(e)||isNaN(t))throw new Error(e+" - "+t);if(e instanceof Date&&t instanceof Date)return e<t?-1:e>t?1:0;throw new TypeError(e+" - "+t)},i.equals=function(e,t){return 0===e.compareTo(t)},i.getDayNumberFromName=function(e){for(var t=a.dayNames,n=a.abbreviatedDayNames,i=a.shortestDayNames,r=e.toLowerCase(),o=0;o<t.length;o++)if(t[o].toLowerCase()==r||n[o].toLowerCase()==r||i[o].toLowerCase()==r)return o;return-1},i.getMonthNumberFromName=function(e){for(var t=a.monthNames,n=a.abbreviatedMonthNames,i=e.toLowerCase(),r=0;r<t.length;r++)if(t[r].toLowerCase()==i||n[r].toLowerCase()==i)return r;return-1},i.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},i.getDaysInMonth=function(e,t){return[31,i.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},i.getTimezoneAbbreviation=function(e){for(var t=a.timezones,n=0;n<t.length;n++)if(t[n].offset===e)return t[n].name;return null},i.getTimezoneOffset=function(e){for(var t=a.timezones,n=0;n<t.length;n++)if(t[n].name===e.toUpperCase())return t[n].offset;return null},o.clone=function(){return new Date(this.getTime())},o.compareTo=function(e){return Date.compare(this,e)},o.equals=function(e){return Date.equals(this,e||new Date)},o.between=function(e,t){return this.getTime()>=e.getTime()&&this.getTime()<=t.getTime()},o.isAfter=function(e){return 1===this.compareTo(e||new Date)},o.isBefore=function(e){return-1===this.compareTo(e||new Date)},o.isToday=function(){return this.isSameDay(new Date)},o.isSameDay=function(e){return this.clone().clearTime().equals(e.clone().clearTime())},o.addMilliseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+e),this},o.addSeconds=function(e){return this.addMilliseconds(1e3*e)},o.addMinutes=function(e){return this.addMilliseconds(6e4*e)},o.addHours=function(e){return this.addMilliseconds(36e5*e)},o.addDays=function(e){return this.setDate(this.getDate()+e),this},o.addWeeks=function(e){return this.addDays(7*e)},o.addMonths=function(e){var t=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+e),this.setDate(Math.min(t,i.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},o.addYears=function(e){return this.addMonths(12*e)},o.add=function(e){if("number"==typeof e)return this._orient=e,this;var t=e;return t.milliseconds&&this.addMilliseconds(t.milliseconds),t.seconds&&this.addSeconds(t.seconds),t.minutes&&this.addMinutes(t.minutes),t.hours&&this.addHours(t.hours),t.weeks&&this.addWeeks(t.weeks),t.months&&this.addMonths(t.months),t.years&&this.addYears(t.years),t.days&&this.addDays(t.days),this},o.getWeek=function(){var i,r,o,a,s,l,u;return e=e||this.getFullYear(),t=t||this.getMonth()+1,n=n||this.getDate(),t<=2?(u=(r=((i=e-1)/4|0)-(i/100|0)+(i/400|0))-(((i-1)/4|0)-((i-1)/100|0)+((i-1)/400|0)),o=0,a=n-1+31*(t-1)):(o=1+(u=(r=((i=e)/4|0)-(i/100|0)+(i/400|0))-(((i-1)/4|0)-((i-1)/100|0)+((i-1)/400|0))),a=n+(153*(t-3)+2)/5+58+u),e=t=n=null,(l=a+3-(a+(s=(i+r)%7)-o)%7|0)<0?53-((s-u)/5|0):l>364+u?1:1+(l/7|0)},o.getISOWeek=function(){return e=this.getUTCFullYear(),t=this.getUTCMonth()+1,n=this.getUTCDate(),s(this.getWeek())},o.setWeek=function(e){return this.moveToDayOfWeek(1).addWeeks(e-this.getWeek())},i._validate=function(e,t,n,i){if(void 0===e)return!1;if("number"!=typeof e)throw new TypeError(e+" is not a Number.");if(e<t||e>n)throw new RangeError(e+" is not a valid value for "+i+".");return!0},i.validateMillisecond=function(e){return i._validate(e,0,999,"millisecond")},i.validateSecond=function(e){return i._validate(e,0,59,"second")},i.validateMinute=function(e){return i._validate(e,0,59,"minute")},i.validateHour=function(e){return i._validate(e,0,23,"hour")},i.validateDay=function(e,t,n){return i._validate(e,1,i.getDaysInMonth(t,n),"day")},i.validateMonth=function(e){return i._validate(e,0,11,"month")},i.validateYear=function(e){return i._validate(e,0,9999,"year")},o.set=function(e){return i.validateMillisecond(e.millisecond)&&this.addMilliseconds(e.millisecond-this.getMilliseconds()),i.validateSecond(e.second)&&this.addSeconds(e.second-this.getSeconds()),i.validateMinute(e.minute)&&this.addMinutes(e.minute-this.getMinutes()),i.validateHour(e.hour)&&this.addHours(e.hour-this.getHours()),i.validateMonth(e.month)&&this.addMonths(e.month-this.getMonth()),i.validateYear(e.year)&&this.addYears(e.year-this.getFullYear()),i.validateDay(e.day,this.getFullYear(),this.getMonth())&&this.addDays(e.day-this.getDate()),e.timezone&&this.setTimezone(e.timezone),e.timezoneOffset&&this.setTimezoneOffset(e.timezoneOffset),e.week&&i._validate(e.week,0,53,"week")&&this.setWeek(e.week),this},o.moveToFirstDayOfMonth=function(){return this.set({day:1})},o.moveToLastDayOfMonth=function(){return this.set({day:i.getDaysInMonth(this.getFullYear(),this.getMonth())})},o.moveToNthOccurrence=function(e,t){var n=0;if(t>0)n=t-1;else if(-1===t)return this.moveToLastDayOfMonth(),this.getDay()!==e&&this.moveToDayOfWeek(e,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(e,1).addWeeks(n)},o.moveToDayOfWeek=function(e,t){var n=(e-this.getDay()+7*(t||1))%7;return this.addDays(0===n?n+=7*(t||1):n)},o.moveToMonth=function(e,t){var n=(e-this.getMonth()+12*(t||1))%12;return this.addMonths(0===n?n+=12*(t||1):n)},o.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},o.getTimezone=function(){return i.getTimezoneAbbreviation(this.getUTCOffset())},o.setTimezoneOffset=function(e){var t=this.getTimezoneOffset(),n=-6*Number(e)/10;return this.addMinutes(n-t)},o.setTimezone=function(e){return this.setTimezoneOffset(i.getTimezoneOffset(e))},o.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},o.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},o.getUTCOffset=function(){var e,t=-10*this.getTimezoneOffset()/6;return t<0?(e=(t-1e4).toString()).charAt(0)+e.substr(2):"+"+(e=(t+1e4).toString()).substr(1)},o.getElapsed=function(e){return(e||new Date)-this},o.toISOString||(o.toISOString=function(){function e(e){return e<10?"0"+e:e}return'"'+this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+'Z"'}),void 0===o._toString&&(o._toString=o.toString),o.toString=function(e){var t=this;if(e&&1==e.length){var n=a.formatPatterns;switch(t.t=t.toString,e){case"d":return t.t(n.shortDate);case"D":return t.t(n.longDate);case"F":return t.t(n.fullDateTime);case"m":return t.t(n.monthDay);case"r":return t.t(n.rfc1123);case"s":return t.t(n.sortableDateTime);case"t":return t.t(n.shortTime);case"T":return t.t(n.longTime);case"u":return t.t(n.universalSortableDateTime);case"y":return t.t(n.yearMonth)}}return e?e.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,(function(e){if("\\"===e.charAt(0))return e.replace("\\","");switch(t.h=t.getHours,e){case"hh":return s(t.h()<13?0===t.h()?12:t.h():t.h()-12);case"h":return t.h()<13?0===t.h()?12:t.h():t.h()-12;case"HH":return s(t.h());case"H":return t.h();case"mm":return s(t.getMinutes());case"m":return t.getMinutes();case"ss":return s(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return s(t.getFullYear(),4);case"yy":return s(t.getFullYear());case"dddd":return a.dayNames[t.getDay()];case"ddd":return a.abbreviatedDayNames[t.getDay()];case"dd":return s(t.getDate());case"d":return t.getDate();case"MMMM":return a.monthNames[t.getMonth()];case"MMM":return a.abbreviatedMonthNames[t.getMonth()];case"MM":return s(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.h()<12?a.amDesignator.substring(0,1):a.pmDesignator.substring(0,1);case"tt":return t.h()<12?a.amDesignator:a.pmDesignator;case"S":return function(e){switch(1*e){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}}(t.getDate());default:return e}})):this._toString()},function(){var e=Date,t=e.prototype,n=e.CultureInfo,i=Number.prototype;t._orient=1,t._nth=null,t._is=!1,t._same=!1,t._isSecond=!1,i._dateElement="day",t.next=function(){return this._orient=1,this},e.next=function(){return e.today().next()},t.last=t.prev=t.previous=function(){return this._orient=-1,this},e.last=e.prev=e.previous=function(){return e.today().last()},t.is=function(){return this._is=!0,this},t.same=function(){return this._same=!0,this._isSecond=!1,this},t.today=function(){return this.same().day()},t.weekday=function(){return!!this._is&&(this._is=!1,!this.is().sat()&&!this.is().sun())},t.at=function(t){return"string"==typeof t?e.parse(this.toString("d")+" "+t):this.set(t)},i.fromNow=i.after=function(e){var t={};return t[this._dateElement]=this,(e?e.clone():new Date).add(t)},i.ago=i.before=function(e){var t={};return t[this._dateElement]=-1*this,(e?e.clone():new Date).add(t)};var r,o="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),a="january february march april may june july august september october november december".split(/\s/),s="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),l="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),u="final first second third fourth fifth".split(/\s/);t.toObject=function(){for(var e={},t=0;t<s.length;t++)e[s[t].toLowerCase()]=this["get"+l[t]]();return e},e.fromObject=function(e){return e.week=null,Date.today().set(e)};for(var c=function(t){return function(){if(this._is)return this._is=!1,this.getDay()==t;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var n=this._nth;this._nth=null;var i=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(t,n),this>i)throw new RangeError(e.getDayName(t)+" does not occur "+n+" times in the month of "+e.getMonthName(i.getMonth())+" "+i.getFullYear()+".");return this}return this.moveToDayOfWeek(t,this._orient)}},d=function(t){return function(){var i=e.today(),r=t-i.getDay();return 0===t&&1===n.firstDayOfWeek&&0!==i.getDay()&&(r+=7),i.addDays(r)}},f=0;f<o.length;f++)e[o[f].toUpperCase()]=e[o[f].toUpperCase().substring(0,3)]=f,e[o[f]]=e[o[f].substring(0,3)]=d(f),t[o[f]]=t[o[f].substring(0,3)]=c(f);for(var h=function(e){return function(){return this._is?(this._is=!1,this.getMonth()===e):this.moveToMonth(e,this._orient)}},p=function(t){return function(){return e.today().set({month:t,day:1})}},m=0;m<a.length;m++)e[a[m].toUpperCase()]=e[a[m].toUpperCase().substring(0,3)]=m,e[a[m]]=e[a[m].substring(0,3)]=p(m),t[a[m]]=t[a[m].substring(0,3)]=h(m);for(var g=function(e){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var t=this.toObject(),n=(arguments[0]||new Date).toObject(),i="",r=e.toLowerCase(),o=s.length-1;o>-1;o--){if(t[i=s[o].toLowerCase()]!=n[i])return!1;if(r==i)break}return!0}return"s"!=e.substring(e.length-1)&&(e+="s"),this["add"+e](this._orient)}},v=function(e){return function(){return this._dateElement=e,this}},y=0;y<s.length;y++)t[r=s[y].toLowerCase()]=t[r+"s"]=g(s[y]),i[r]=i[r+"s"]=v(r);t._ss=g("Second");for(var b=function(e){return function(t){return this._same?this._ss(arguments[0]):t||0===t?this.moveToNthOccurrence(t,e):(this._nth=e,2===e&&null==t?(this._isSecond=!0,this.addSeconds(this._orient)):this)}},w=0;w<u.length;w++)t[u[w]]=b(0===w?-1:w)}(),function(){Date.Parsing={Exception:function(e){this.message="Parse error at '"+e.substring(0,10)+" ...'"}};for(var e=Date.Parsing,t=e.Operators={rtoken:function(t){return function(n){var i=n.match(t);if(i)return[i[0],n.substring(i[0].length)];throw new e.Exception(n)}},token:function(e){return function(e){return t.rtoken(new RegExp("^s*"+e+"s*"))(e)}},stoken:function(e){return t.rtoken(new RegExp("^"+e))},until:function(e){return function(t){for(var n=[],i=null;t.length;){try{i=e.call(this,t)}catch(e){n.push(i[0]),t=i[1];continue}break}return[n,t]}},many:function(e){return function(t){for(var n=[],i=null;t.length;){try{i=e.call(this,t)}catch(e){return[n,t]}n.push(i[0]),t=i[1]}return[n,t]}},optional:function(e){return function(t){var n=null;try{n=e.call(this,t)}catch(e){return[null,t]}return[n[0],n[1]]}},not:function(t){return function(n){try{t.call(this,n)}catch(e){return[null,n]}throw new e.Exception(n)}},ignore:function(e){return e?function(t){return[null,e.call(this,t)[1]]}:null},product:function(){for(var e=arguments[0],n=Array.prototype.slice.call(arguments,1),i=[],r=0;r<e.length;r++)i.push(t.each(e[r],n));return i},cache:function(t){var n={},i=null;return function(r){try{i=n[r]=n[r]||t.call(this,r)}catch(e){i=n[r]=e}if(i instanceof e.Exception)throw i;return i}},any:function(){var t=arguments;return function(n){for(var i=null,r=0;r<t.length;r++)if(null!=t[r]){try{i=t[r].call(this,n)}catch(e){i=null}if(i)return i}throw new e.Exception(n)}},each:function(){var t=arguments;return function(n){for(var i=[],r=null,o=0;o<t.length;o++)if(null!=t[o]){try{r=t[o].call(this,n)}catch(t){throw new e.Exception(n)}i.push(r[0]),n=r[1]}return[i,n]}},all:function(){var e=arguments,t=t;return t.each(t.optional(e))},sequence:function(n,i,r){return i=i||t.rtoken(/^\s*/),r=r||null,1==n.length?n[0]:function(t){for(var o=null,a=null,s=[],l=0;l<n.length;l++){try{o=n[l].call(this,t)}catch(e){break}s.push(o[0]);try{a=i.call(this,o[1])}catch(e){a=null;break}t=a[1]}if(!o)throw new e.Exception(t);if(a)throw new e.Exception(a[1]);if(r)try{o=r.call(this,o[1])}catch(t){throw new e.Exception(o[1])}return[s,o?o[1]:t]}},between:function(e,n,i){i=i||e;var o=t.each(t.ignore(e),n,t.ignore(i));return function(e){var t=o.call(this,e);return[[t[0][0],r[0][2]],t[1]]}},list:function(e,n,i){return n=n||t.rtoken(/^\s*/),i=i||null,e instanceof Array?t.each(t.product(e.slice(0,-1),t.ignore(n)),e.slice(-1),t.ignore(i)):t.each(t.many(t.each(e,t.ignore(n))),px,t.ignore(i))},set:function(n,i,r){return i=i||t.rtoken(/^\s*/),r=r||null,function(o){for(var a=null,s=null,l=null,u=null,c=[[],o],d=!1,f=0;f<n.length;f++){l=null,s=null,a=null,d=1==n.length;try{a=n[f].call(this,o)}catch(e){continue}if(u=[[a[0]],a[1]],a[1].length>0&&!d)try{l=i.call(this,a[1])}catch(e){d=!0}else d=!0;if(d||0!==l[1].length||(d=!0),!d){for(var h=[],p=0;p<n.length;p++)f!=p&&h.push(n[p]);(s=t.set(h,i).call(this,l[1]))[0].length>0&&(u[0]=u[0].concat(s[0]),u[1]=s[1])}if(u[1].length<c[1].length&&(c=u),0===c[1].length)break}if(0===c[0].length)return c;if(r){try{l=r.call(this,c[1])}catch(t){throw new e.Exception(c[1])}c[1]=l[1]}return c}},forward:function(e,t){return function(n){return e[t].call(this,n)}},replace:function(e,t){return function(n){var i=e.call(this,n);return[t,i[1]]}},process:function(e,t){return function(n){var i=e.call(this,n);return[t.call(this,i[0]),i[1]]}},min:function(t,n){return function(i){var r=n.call(this,i);if(r[0].length<t)throw new e.Exception(i);return r}}},n=function(e){return function(){var t=null,n=[];if(arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]),!t)return e.apply(null,arguments);for(var i=0,r=t.shift();i<r.length;i++)return t.unshift(r[i]),n.push(e.apply(null,t)),t.shift(),n}},i="optional not ignore cache".split(/\s/),o=0;o<i.length;o++)t[i[o]]=n(t[i[o]]);for(var a=function(e){return function(){return arguments[0]instanceof Array?e.apply(null,arguments[0]):e.apply(null,arguments)}},s="each any all".split(/\s/),l=0;l<s.length;l++)t[s[l]]=a(t[s[l]])}(),function(){var e=Date,t=(e.prototype,e.CultureInfo),n=function e(t){for(var n=[],i=0;i<t.length;i++)t[i]instanceof Array?n=n.concat(e(t[i])):t[i]&&n.push(t[i]);return n};e.Grammar={},e.Translator={hour:function(e){return function(){this.hour=Number(e)}},minute:function(e){return function(){this.minute=Number(e)}},second:function(e){return function(){this.second=Number(e)}},meridian:function(e){return function(){this.meridian=e.slice(0,1).toLowerCase()}},timezone:function(e){return function(){var t=e.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=e.toLowerCase()}},day:function(e){var t=e[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(e){return function(){this.month=3==e.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(e)/4:Number(e)-1}},year:function(e){return function(){var n=Number(e);this.year=e.length>2?n:n+(n+2e3<t.twoDigitYearMax?2e3:1900)}},rday:function(e){return function(){switch(e){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(t){t=t instanceof Array?t:[t];for(var n=0;n<t.length;n++)t[n]&&t[n].call(this);var i=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=i.getDate()),this.year||(this.year=i.getFullYear()),this.month||0===this.month||(this.month=i.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>e.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?r.set({timezone:this.timezone}):this.timezoneOffset&&r.set({timezoneOffset:this.timezoneOffset}),r},finish:function(t){if(0===(t=t instanceof Array?n(t):[t]).length)return null;for(var i=0;i<t.length;i++)"function"==typeof t[i]&&t[i].call(this);var r=e.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(r=new Date);var o,a,s,l=!!(this.days&&null!==this.days||this.orient||this.operator);if(s="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||r.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,l=!0),!l&&this.weekday&&!this.day&&!this.days){var u=Date[this.weekday]();this.day=u.getDate(),this.month||(this.month=u.getMonth()),this.year=u.getFullYear()}if(l&&this.weekday&&"month"!=this.unit&&(this.unit="day",o=e.getDayNumberFromName(this.weekday)-r.getDay(),a=7,this.days=o?(o+s*a)%a:s*a),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(r.set({day:1*this.value}),l||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,l=!0),l&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",o=this.month-r.getMonth(),a=12,this.months=o?(o+s*a)%a:s*a,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*s:null!=this[this.unit+"s"]&&null==this.operator||(this.value||(this.value=1),this[this.unit+"s"]=this.value*s),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){u=Date[this.weekday]();this.day=u.getDate(),u.getMonth()!==r.getMonth()&&(this.month=u.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(l&&this.timezone&&this.day&&this.days&&(this.day=this.days),l?r.add(this):r.set(this)):Date.today().setWeek(this.value)}};var i,r=e.Parsing.Operators,o=e.Grammar,a=e.Translator;o.datePartDelimiter=r.rtoken(/^([\s\-\.\,\/\x27]+)/),o.timePartDelimiter=r.stoken(":"),o.whiteSpace=r.rtoken(/^\s*/),o.generalDelimiter=r.rtoken(/^(([\s\,]|at|@|on)+)/);var s={};o.ctoken=function(e){var n=s[e];if(!n){for(var i=t.regexPatterns,o=e.split(/\s+/),a=[],l=0;l<o.length;l++)a.push(r.replace(r.rtoken(i[o[l]]),o[l]));n=s[e]=r.any.apply(null,a)}return n},o.ctoken2=function(e){return r.rtoken(t.regexPatterns[e])},o.h=r.cache(r.process(r.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),a.hour)),o.hh=r.cache(r.process(r.rtoken(/^(0[0-9]|1[0-2])/),a.hour)),o.H=r.cache(r.process(r.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),a.hour)),o.HH=r.cache(r.process(r.rtoken(/^([0-1][0-9]|2[0-3])/),a.hour)),o.m=r.cache(r.process(r.rtoken(/^([0-5][0-9]|[0-9])/),a.minute)),o.mm=r.cache(r.process(r.rtoken(/^[0-5][0-9]/),a.minute)),o.s=r.cache(r.process(r.rtoken(/^([0-5][0-9]|[0-9])/),a.second)),o.ss=r.cache(r.process(r.rtoken(/^[0-5][0-9]/),a.second)),o.hms=r.cache(r.sequence([o.H,o.m,o.s],o.timePartDelimiter)),o.t=r.cache(r.process(o.ctoken2("shortMeridian"),a.meridian)),o.tt=r.cache(r.process(o.ctoken2("longMeridian"),a.meridian)),o.z=r.cache(r.process(r.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),a.timezone)),o.zz=r.cache(r.process(r.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),a.timezone)),o.zzz=r.cache(r.process(o.ctoken2("timezone"),a.timezone)),o.timeSuffix=r.each(r.ignore(o.whiteSpace),r.set([o.tt,o.zzz])),o.time=r.each(r.optional(r.ignore(r.stoken("T"))),o.hms,o.timeSuffix),o.d=r.cache(r.process(r.each(r.rtoken(/^([0-2]\d|3[0-1]|\d)/),r.optional(o.ctoken2("ordinalSuffix"))),a.day)),o.dd=r.cache(r.process(r.each(r.rtoken(/^([0-2]\d|3[0-1])/),r.optional(o.ctoken2("ordinalSuffix"))),a.day)),o.ddd=o.dddd=r.cache(r.process(o.ctoken("sun mon tue wed thu fri sat"),(function(e){return function(){this.weekday=e}}))),o.M=r.cache(r.process(r.rtoken(/^(1[0-2]|0\d|\d)/),a.month)),o.MM=r.cache(r.process(r.rtoken(/^(1[0-2]|0\d)/),a.month)),o.MMM=o.MMMM=r.cache(r.process(o.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),a.month)),o.y=r.cache(r.process(r.rtoken(/^(\d\d?)/),a.year)),o.yy=r.cache(r.process(r.rtoken(/^(\d\d)/),a.year)),o.yyy=r.cache(r.process(r.rtoken(/^(\d\d?\d?\d?)/),a.year)),o.yyyy=r.cache(r.process(r.rtoken(/^(\d\d\d\d)/),a.year)),i=function(){return r.each(r.any.apply(null,arguments),r.not(o.ctoken2("timeContext")))},o.day=i(o.d,o.dd),o.month=i(o.M,o.MMM),o.year=i(o.yyyy,o.yy),o.orientation=r.process(o.ctoken("past future"),(function(e){return function(){this.orient=e}})),o.operator=r.process(o.ctoken("add subtract"),(function(e){return function(){this.operator=e}})),o.rday=r.process(o.ctoken("yesterday tomorrow today now"),a.rday),o.unit=r.process(o.ctoken("second minute hour day week month year"),(function(e){return function(){this.unit=e}})),o.value=r.process(r.rtoken(/^\d\d?(st|nd|rd|th)?/),(function(e){return function(){this.value=e.replace(/\D/g,"")}})),o.expression=r.set([o.rday,o.operator,o.value,o.unit,o.orientation,o.ddd,o.MMM]),i=function(){return r.set(arguments,o.datePartDelimiter)},o.mdy=i(o.ddd,o.month,o.day,o.year),o.ymd=i(o.ddd,o.year,o.month,o.day),o.dmy=i(o.ddd,o.day,o.month,o.year),o.date=function(e){return(o[t.dateElementOrder]||o.mdy).call(this,e)},o.format=r.process(r.many(r.any(r.process(r.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),(function(t){if(o[t])return o[t];throw e.Parsing.Exception(t)})),r.process(r.rtoken(/^[^dMyhHmstz]+/),(function(e){return r.ignore(r.stoken(e))})))),(function(e){return r.process(r.each.apply(null,e),a.finishExact)}));var l={},u=function(e){return l[e]=l[e]||o.format(e)[0]};o.formats=function(e){if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(u(e[n]));return r.any.apply(null,t)}return u(e)},o._formats=o.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),o._start=r.process(r.set([o.date,o.time,o.expression],o.generalDelimiter,o.whiteSpace),a.finish),o.start=function(e){try{var t=o._formats.call({},e);if(0===t[1].length)return t}catch(e){}return o._start.call({},e)},e._parse=e.parse,e.parse=function(t){var n=null;if(!t)return null;if(t instanceof Date)return t;try{n=e.Grammar.start.call({},t.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(e){return null}return 0===n[1].length?n[0]:null},e.getParseFunction=function(t){var n=e.Grammar.formats(t);return function(e){var t=null;try{t=n.call({},e)}catch(e){return null}return 0===t[1].length?t[0]:null}},e.parseExact=function(t,n){return e.getParseFunction(n)(t)}}()},55883:(e,t,n)=>{var i;i=function(){"use strict";var e,t,n,i="undefined"!=typeof window&&window.document,r=!i,o=i?document:null,a=[];function s(){var e=a;r&&e.length&&(a=[],function(e){var t;for(t=0;t<e.length;t+=1)e[t](o)}(e))}function l(){r||(r=!0,n&&clearInterval(n),s())}if(i){if(document.addEventListener)document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1);else if(window.attachEvent){window.attachEvent("onload",l),t=document.createElement("div");try{e=null===window.frameElement}catch(e){}t.doScroll&&e&&window.external&&(n=setInterval((function(){try{t.doScroll(),l()}catch(e){}}),30))}"complete"===document.readyState&&l()}function u(e){return r?e(o):a.push(e),u}return u.version="2.0.1",u.load=function(e,t,n,i){i.isBuild?n(null):u(n)},u}.call(t,n,t,e),void 0===i||(e.exports=i)},69253:(e,t,n)=>{var i=n(20428);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}!function(e){e.color={},e.color.make=function(t,n,i,r){var o={};return o.r=t||0,o.g=n||0,o.b=i||0,o.a=null!=r?r:1,o.add=function(e,t){for(var n=0;n<e.length;++n)o[e.charAt(n)]+=t;return o.normalize()},o.scale=function(e,t){for(var n=0;n<e.length;++n)o[e.charAt(n)]*=t;return o.normalize()},o.toString=function(){return o.a>=1?"rgb("+[o.r,o.g,o.b].join(",")+")":"rgba("+[o.r,o.g,o.b,o.a].join(",")+")"},o.normalize=function(){function e(e,t,n){return t<e?e:t>n?n:t}return o.r=e(0,parseInt(o.r),255),o.g=e(0,parseInt(o.g),255),o.b=e(0,parseInt(o.b),255),o.a=e(0,o.a,1),o},o.clone=function(){return e.color.make(o.r,o.b,o.g,o.a)},o.normalize()},e.color.extract=function(t,n){var i;do{if(""!=(i=t.css(n).toLowerCase())&&"transparent"!=i)break;t=t.parent()}while(!e.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==i&&(i="transparent"),e.color.parse(i)},e.color.parse=function(n){var i,r=e.color.make;if(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))return r(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10));if(i=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return r(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),parseFloat(i[4]));if(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n))return r(2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3]));if(i=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return r(2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3]),parseFloat(i[4]));if(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))return r(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16));if(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n))return r(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16));var o=e.trim(n).toLowerCase();return"transparent"==o?r(255,255,255,0):r((i=t[o]||[0,0,0])[0],i[1],i[2])};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(i),function(e){function t(t,i,o,s){var l=[],u={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1},shadowSize:3},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},hooks:{}},c=null,d=null,f=null,h=null,p=null,m=[],g=[],v={left:0,right:0,top:0,bottom:0},y=0,b=0,w=0,x=0,C={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},k=this;function _(e,t){t=[k].concat(t);for(var n=0;n<e.length;++n)e[n].apply(this,t)}function S(t){l=function(t){for(var n=[],i=0;i<t.length;++i){var r=e.extend(!0,{},u.series);null!=t[i].data?(r.data=t[i].data,delete t[i].data,e.extend(!0,r,t[i]),t[i].data=r.data):r.data=t[i],n.push(r)}return n}(t),function(){var t,n=l.length,i=[],r=[];for(t=0;t<l.length;++t){var o=l[t].color;null!=o&&(--n,"number"==typeof o?r.push(o):i.push(e.color.parse(l[t].color)))}for(t=0;t<r.length;++t)n=Math.max(n,r[t]+1);var a=[],s=0;t=0;for(;a.length<n;){var c,d=s%2==1?-1:1;(c=u.colors.length==t?e.color.make(100,100,100):e.color.parse(u.colors[t])).scale("rgb",1+d*Math.ceil(s/2)*.2),a.push(c),++t>=u.colors.length&&(t=0,++s)}var f,h=0;for(t=0;t<l.length;++t){if(null==(f=l[t]).color?(f.color=a[h].toString(),++h):"number"==typeof f.color&&(f.color=a[f.color].toString()),null==f.lines.show){var p,v=!0;for(p in f)if(f[p]&&f[p].show){v=!1;break}v&&(f.lines.show=!0)}f.xaxis=E(m,T(f,"x")),f.yaxis=E(g,T(f,"y"))}}(),function(){var t,n,i,r,o,a,s,u,c,d,f=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,p=Number.MAX_VALUE;function m(e,t,n){t<e.datamin&&t!=-p&&(e.datamin=t),n>e.datamax&&n!=p&&(e.datamax=n)}for(e.each(D(),(function(e,t){t.datamin=f,t.datamax=h,t.used=!1})),t=0;t<l.length;++t)(o=l[t]).datapoints={points:[]},_(C.processRawData,[o,o.data,o.datapoints]);for(t=0;t<l.length;++t){var g=(o=l[t]).data,v=o.datapoints.format;if(v||((v=[]).push({x:!0,number:!0,required:!0}),v.push({y:!0,number:!0,required:!0}),(o.bars.show||o.lines.show&&o.lines.fill)&&(v.push({y:!0,number:!0,required:!1,defaultValue:0}),o.bars.horizontal&&(delete v[v.length-1].y,v[v.length-1].x=!0)),o.datapoints.format=v),null==o.datapoints.pointsize)for(o.datapoints.pointsize=v.length,s=o.datapoints.pointsize,a=o.datapoints.points,insertSteps=o.lines.show&&o.lines.steps,o.xaxis.used=o.yaxis.used=!0,n=i=0;n<g.length;++n,i+=s){var y=null==(d=g[n]);if(!y)for(r=0;r<s;++r)u=d[r],(c=v[r])&&(c.number&&null!=u&&(u=+u,isNaN(u)?u=null:u==1/0?u=p:u==-1/0&&(u=-p)),null==u&&(c.required&&(y=!0),null!=c.defaultValue&&(u=c.defaultValue))),a[i+r]=u;if(y)for(r=0;r<s;++r)null!=(u=a[i+r])&&((c=v[r]).x&&m(o.xaxis,u,u),c.y&&m(o.yaxis,u,u)),a[i+r]=null;else if(insertSteps&&i>0&&null!=a[i-s]&&a[i-s]!=a[i]&&a[i-s+1]!=a[i+1]){for(r=0;r<s;++r)a[i+s+r]=a[i+r];a[i+1]=a[i-s+1],i+=s}}}for(t=0;t<l.length;++t)o=l[t],_(C.processDatapoints,[o,o.datapoints]);for(t=0;t<l.length;++t){a=(o=l[t]).datapoints.points,s=o.datapoints.pointsize;var b=f,w=f,x=h,k=h;for(n=0;n<a.length;n+=s)if(null!=a[n])for(r=0;r<s;++r)u=a[n+r],(c=v[r])&&u!=p&&u!=-p&&(c.x&&(u<b&&(b=u),u>x&&(x=u)),c.y&&(u<w&&(w=u),u>k&&(k=u)));if(o.bars.show){var S="left"==o.bars.align?0:-o.bars.barWidth/2;o.bars.horizontal?(w+=S,k+=S+o.bars.barWidth):(b+=S,x+=S+o.bars.barWidth)}m(o.xaxis,b,x),m(o.yaxis,w,k)}e.each(D(),(function(e,t){t.datamin==f&&(t.datamin=null),t.datamax==h&&(t.datamax=null)}))}()}function T(e,t){var n=e[t+"axis"];return"object"==r(n)&&(n=n.n),"number"!=typeof n&&(n=1),n}function D(){return e.grep(m.concat(g),(function(e){return e}))}function M(e){var t,n,i={};for(t=0;t<m.length;++t)(n=m[t])&&n.used&&(i["x"+n.n]=n.c2p(e.left));for(t=0;t<g.length;++t)(n=g[t])&&n.used&&(i["y"+n.n]=n.c2p(e.top));return void 0!==i.x1&&(i.x=i.x1),void 0!==i.y1&&(i.y=i.y1),i}function E(t,n){return t[n-1]||(t[n-1]={n,direction:t==m?"x":"y",options:e.extend(!0,{},t==m?u.xaxis:u.yaxis)}),t[n-1]}function N(n,i){var r=document.createElement("canvas");return r.className=i,r.width=y,r.height=b,n||e(r).css({position:"absolute",left:0,top:0}),e(r).appendTo(t),r.getContext||(r=window.G_vmlCanvasManager.initElement(r)),r.getContext("2d").save(),r}function A(){if(y=t.width(),b=t.height(),y<=0||b<=0)throw"Invalid dimensions for plot, width = "+y+", height = "+b}function P(e){e.width!=y&&(e.width=y),e.height!=b&&(e.height=b);var t=e.getContext("2d");t.restore(),t.save()}function L(t){var n=t.labelWidth,i=t.labelHeight,r=t.options.position,o=t.options.tickLength,a=u.grid.axisMargin,s=u.grid.labelMargin,l="x"==t.direction?m:g,c=e.grep(l,(function(e){return e&&e.options.position==r&&e.reserveSpace}));e.inArray(t,c)==c.length-1&&(a=0),null==o&&(o="full");var d=e.grep(l,(function(e){return e&&e.reserveSpace})),f=0==e.inArray(t,d);f||"full"!=o||(o=5),isNaN(+o)||(s+=+o),"x"==t.direction?(i+=s,"bottom"==r?(v.bottom+=i+a,t.box={top:b-v.bottom,height:i}):(t.box={top:v.top+a,height:i},v.top+=i+a)):(n+=s,"left"==r?(t.box={left:v.left+a,width:n},v.left+=n+a):(v.right+=n+a,t.box={left:y-v.right,width:n})),t.position=r,t.tickLength=o,t.box.padding=s,t.innermost=f}function O(){var i,o=D();if(e.each(o,(function(e,t){t.show=t.options.show,null==t.show&&(t.show=t.used),t.reserveSpace=t.show||t.options.reserveSpace,function(e){var t=e.options,n=+(null!=t.min?t.min:e.datamin),i=+(null!=t.max?t.max:e.datamax),r=i-n;if(0==r){var o=0==i?1:.01;null==t.min&&(n-=o),null!=t.max&&null==t.min||(i+=o)}else{var a=t.autoscaleMargin;null!=a&&(null==t.min&&(n-=r*a)<0&&null!=e.datamin&&e.datamin>=0&&(n=0),null==t.max&&(i+=r*a)>0&&null!=e.datamax&&e.datamax<=0&&(i=0))}e.min=n,e.max=i}(t)})),allocatedAxes=e.grep(o,(function(e){return e.reserveSpace})),v.left=v.right=v.top=v.bottom=0,u.grid.show){for(e.each(allocatedAxes,(function(i,o){!function(t){var i,r=t.options;i="number"==typeof r.ticks&&r.ticks>0?r.ticks:.3*Math.sqrt("x"==t.direction?y:b);var o,a,s,l,u,c,d=(t.max-t.min)/i;if("time"==r.mode){var f={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:525949.2*60*1e3},h=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],p=0;null!=r.minTickSize&&(p="number"==typeof r.tickSize?r.tickSize:r.minTickSize[0]*f[r.minTickSize[1]]);for(var v=0;v<h.length-1&&!(d<(h[v][0]*f[h[v][1]]+h[v+1][0]*f[h[v+1][1]])/2&&h[v][0]*f[h[v][1]]>=p);++v);o=h[v][0],"year"==(s=h[v][1])&&(u=Math.pow(10,Math.floor(Math.log(d/f.year)/Math.LN10)),o=(c=d/f.year/u)<1.5?1:c<3?2:c<7.5?5:10,o*=u),t.tickSize=r.tickSize||[o,s],a=function(e){var t=[],i=e.tickSize[0],r=e.tickSize[1],o=new Date(e.min),a=i*f[r];"second"==r&&o.setUTCSeconds(n(o.getUTCSeconds(),i)),"minute"==r&&o.setUTCMinutes(n(o.getUTCMinutes(),i)),"hour"==r&&o.setUTCHours(n(o.getUTCHours(),i)),"month"==r&&o.setUTCMonth(n(o.getUTCMonth(),i)),"year"==r&&o.setUTCFullYear(n(o.getUTCFullYear(),i)),o.setUTCMilliseconds(0),a>=f.minute&&o.setUTCSeconds(0),a>=f.hour&&o.setUTCMinutes(0),a>=f.day&&o.setUTCHours(0),a>=4*f.day&&o.setUTCDate(1),a>=f.year&&o.setUTCMonth(0);var s,l=0,u=Number.NaN;do{if(s=u,u=o.getTime(),t.push(u),"month"==r)if(i<1){o.setUTCDate(1);var c=o.getTime();o.setUTCMonth(o.getUTCMonth()+1);var d=o.getTime();o.setTime(u+l*f.hour+(d-c)*i),l=o.getUTCHours(),o.setUTCHours(0)}else o.setUTCMonth(o.getUTCMonth()+i);else"year"==r?o.setUTCFullYear(o.getUTCFullYear()+i):o.setTime(u+a)}while(u<e.max&&u!=s);return t},l=function(t,n){var i=new Date(t);if(null!=r.timeformat)return e.plot.formatDate(i,r.timeformat,r.monthNames);var o=n.tickSize[0]*f[n.tickSize[1]],a=n.max-n.min,s=r.twelveHourClock?" %p":"";return o<f.minute?fmt="%h:%M:%S"+s:o<f.day?a<2*f.day?fmt="%h:%M"+s:fmt="%b %d %h:%M"+s:o<f.month?fmt="%b %d":o<f.year?a<f.year?fmt="%b":fmt="%b %y":fmt="%y",e.plot.formatDate(i,fmt,r.monthNames)}}else{var w=r.tickDecimals,x=-Math.floor(Math.log(d)/Math.LN10);null!=w&&x>w&&(x=w),(c=d/(u=Math.pow(10,-x)))<1.5?o=1:c<3?(o=2,c>2.25&&(null==w||x+1<=w)&&(o=2.5,++x)):o=c<7.5?5:10,o*=u,null!=r.minTickSize&&o<r.minTickSize&&(o=r.minTickSize),t.tickDecimals=Math.max(0,null!=w?w:x),t.tickSize=r.tickSize||o,a=function(e){var t,i=[],r=n(e.min,e.tickSize),o=0,a=Number.NaN;do{t=a,a=r+o*e.tickSize,i.push(a),++o}while(a<e.max&&a!=t);return i},l=function(e,t){return e.toFixed(t.tickDecimals)}}if(null!=r.alignTicksWithAxis){var C=("x"==t.direction?m:g)[r.alignTicksWithAxis-1];if(C&&C.used&&C!=t){var k=a(t);if(k.length>0&&(null==r.min&&(t.min=Math.min(t.min,k[0])),null==r.max&&k.length>1&&(t.max=Math.max(t.max,k[k.length-1]))),a=function(e){var t,n,i=[];for(n=0;n<C.ticks.length;++n)t=(C.ticks[n].v-C.min)/(C.max-C.min),t=e.min+t*(e.max-e.min),i.push(t);return i},"time"!=t.mode&&null==r.tickDecimals){var _=Math.max(0,1-Math.floor(Math.log(d)/Math.LN10)),S=a(t);S.length>1&&/\..*0$/.test((S[1]-S[0]).toFixed(_))||(t.tickDecimals=_)}}}t.tickGenerator=a,e.isFunction(r.tickFormatter)?t.tickFormatter=function(e,t){return""+r.tickFormatter(e,t)}:t.tickFormatter=l}(o),function(t){var n,i,o=t.options.ticks,a=[];null==o||"number"==typeof o&&o>0?a=t.tickGenerator(t):o&&(a=e.isFunction(o)?o({min:t.min,max:t.max}):o);for(t.ticks=[],n=0;n<a.length;++n){var s=null,l=a[n];"object"==r(l)?(i=+l[0],l.length>1&&(s=l[1])):i=+l,null==s&&(s=t.tickFormatter(i,t)),isNaN(i)||t.ticks.push({v:i,label:s})}}(o),function(e,t){e.options.autoscaleMargin&&t.length>0&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v)),null==e.options.max&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v)))}(o,o.ticks),function(n){var i,r,o,a=n.options,s=n.ticks||[],l=[],u=a.labelWidth,c=a.labelHeight;function d(i,r){return e('<div style="position:absolute;top:-10000px;'+r+'font-size:smaller"><div class="'+n.direction+"Axis "+n.direction+n.n+'Axis">'+i.join("")+"</div></div>").appendTo(t)}if("x"==n.direction){if(null==u&&(u=Math.floor(y/(s.length>0?s.length:1))),null==c){for(l=[],i=0;i<s.length;++i)(r=s[i].label)&&l.push('<div class="tickLabel" style="float:left;width:'+u+'px">'+r+"</div>");l.length>0&&(l.push('<div style="clear:left"></div>'),c=(o=d(l,"width:10000px;")).height(),o.remove())}}else if(null==u||null==c){for(i=0;i<s.length;++i)(r=s[i].label)&&l.push('<div class="tickLabel">'+r+"</div>");l.length>0&&(o=d(l,""),null==u&&(u=o.children().width()),null==c&&(c=o.find("div.tickLabel").height()),o.remove())}null==u&&(u=0),null==c&&(c=0),n.labelWidth=u,n.labelHeight=c}(o)})),i=allocatedAxes.length-1;i>=0;--i)L(allocatedAxes[i]);var a=u.grid.minBorderMargin;if(null==a)for(a=0,i=0;i<l.length;++i)a=Math.max(a,l[i].points.radius+l[i].points.lineWidth/2);for(var s in v)v[s]+=u.grid.borderWidth,v[s]=Math.max(a,v[s])}w=y-v.left-v.right,x=b-v.bottom-v.top,e.each(o,(function(e,t){!function(e){function t(e){return e}var n,i,r=e.options.transform||t,o=e.options.inverseTransform;"x"==e.direction?(n=e.scale=w/Math.abs(r(e.max)-r(e.min)),i=Math.min(r(e.max),r(e.min))):(n=-(n=e.scale=x/Math.abs(r(e.max)-r(e.min))),i=Math.max(r(e.max),r(e.min))),e.p2c=r==t?function(e){return(e-i)*n}:function(e){return(r(e)-i)*n},e.c2p=o?function(e){return o(i+e/n)}:function(e){return i+e/n}}(t)})),u.grid.show&&(e.each(allocatedAxes,(function(e,t){!function(e){"x"==e.direction?(e.box.left=v.left,e.box.width=w):(e.box.top=v.top,e.box.height=x)}(t)})),function(){t.find(".tickLabels").remove();for(var e=['<div class="tickLabels" style="font-size:smaller">'],n=D(),i=0;i<n.length;++i){var r=n[i],o=r.box;if(r.show){e.push('<div class="'+r.direction+"Axis "+r.direction+r.n+'Axis" style="color:'+r.options.color+'">');for(var a=0;a<r.ticks.length;++a){var s=r.ticks[a];if(!(!s.label||s.v<r.min||s.v>r.max)){var l,u={};"x"==r.direction?(l="center",u.left=Math.round(v.left+r.p2c(s.v)-r.labelWidth/2),"bottom"==r.position?u.top=o.top+o.padding:u.bottom=b-(o.top+o.height-o.padding)):(u.top=Math.round(v.top+r.p2c(s.v)-r.labelHeight/2),"left"==r.position?(u.right=y-(o.left+o.width-o.padding),l="right"):(u.left=o.left+o.padding,l="left")),u.width=r.labelWidth;var c=["position:absolute","text-align:"+l];for(var d in u)c.push(d+":"+u[d]+"px");e.push('<div class="tickLabel" style="'+c.join(";")+'">'+s.label+"</div>")}}e.push("</div>")}}e.push("</div>"),t.append(e.join(""))}()),function(){if(t.find(".legend").remove(),!u.legend.show)return;for(var n,i,r=[],o=!1,a=u.legend.labelFormatter,s=0;s<l.length;++s)(i=(n=l[s]).label)&&(s%u.legend.noColumns==0&&(o&&r.push("</tr>"),r.push("<tr>"),o=!0),a&&(i=a(i,n)),r.push('<td class="legendColorBox"><div style="border:1px solid '+u.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+n.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+i+"</td>"));o&&r.push("</tr>");if(0==r.length)return;var c='<table style="font-size:smaller;color:'+u.grid.color+'">'+r.join("")+"</table>";if(null!=u.legend.container)e(u.legend.container).html(c);else{var d="",f=u.legend.position,h=u.legend.margin;null==h[0]&&(h=[h,h]),"n"==f.charAt(0)?d+="top:"+(h[1]+v.top)+"px;":"s"==f.charAt(0)&&(d+="bottom:"+(h[1]+v.bottom)+"px;"),"e"==f.charAt(1)?d+="right:"+(h[0]+v.right)+"px;":"w"==f.charAt(1)&&(d+="left:"+(h[0]+v.left)+"px;");var p=e('<div class="legend">'+c.replace('style="','style="position:absolute;'+d+";")+"</div>").appendTo(t);if(0!=u.legend.backgroundOpacity){var m=u.legend.backgroundColor;null==m&&((m=(m=u.grid.backgroundColor)&&"string"==typeof m?e.color.parse(m):e.color.extract(p,"background-color")).a=1,m=m.toString());var g=p.children();e('<div style="position:absolute;width:'+g.width()+"px;height:"+g.height()+"px;"+d+"background-color:"+m+';"> </div>').prependTo(p).css("opacity",u.legend.backgroundOpacity)}}}()}function I(){h.clearRect(0,0,y,b);var e=u.grid;e.show&&e.backgroundColor&&(h.save(),h.translate(v.left,v.top),h.fillStyle=ee(u.grid.backgroundColor,x,0,"rgba(255, 255, 255, 0)"),h.fillRect(0,0,w,x),h.restore()),e.show&&!e.aboveData&&B();for(var t=0;t<l.length;++t)_(C.drawSeries,[h,l[t]]),z(l[t]);_(C.draw,[h]),e.show&&e.aboveData&&B()}function R(e,t){var n,i,r,o,s=D();for(a=0;a<s.length;++a)if((n=s[a]).direction==t&&(e[o=t+n.n+"axis"]||1!=n.n||(o=t+"axis"),e[o])){i=e[o].from,r=e[o].to;break}if(e[o]||(n="x"==t?m[0]:g[0],i=e[t+"1"],r=e[t+"2"]),null!=i&&null!=r&&i>r){var l=i;i=r,r=l}return{from:i,to:r,axis:n}}function B(){var t;h.save(),h.translate(v.left,v.top);var n=u.grid.markings;if(n){if(e.isFunction(n))(a=k.getAxes()).xmin=a.xaxis.min,a.xmax=a.xaxis.max,a.ymin=a.yaxis.min,a.ymax=a.yaxis.max,n=n(a);for(t=0;t<n.length;++t){var i=n[t],r=R(i,"x"),o=R(i,"y");null==r.from&&(r.from=r.axis.min),null==r.to&&(r.to=r.axis.max),null==o.from&&(o.from=o.axis.min),null==o.to&&(o.to=o.axis.max),r.to<r.axis.min||r.from>r.axis.max||o.to<o.axis.min||o.from>o.axis.max||(r.from=Math.max(r.from,r.axis.min),r.to=Math.min(r.to,r.axis.max),o.from=Math.max(o.from,o.axis.min),o.to=Math.min(o.to,o.axis.max),r.from==r.to&&o.from==o.to||(r.from=r.axis.p2c(r.from),r.to=r.axis.p2c(r.to),o.from=o.axis.p2c(o.from),o.to=o.axis.p2c(o.to),r.from==r.to||o.from==o.to?(h.beginPath(),h.strokeStyle=i.color||u.grid.markingsColor,h.lineWidth=i.lineWidth||u.grid.markingsLineWidth,h.moveTo(r.from,o.from),h.lineTo(r.to,o.to),h.stroke()):(h.fillStyle=i.color||u.grid.markingsColor,h.fillRect(r.from,o.to,r.to-r.from,o.from-o.to))))}}for(var a=D(),s=u.grid.borderWidth,l=0;l<a.length;++l){var c,d,f,p,m=a[l],g=m.box,y=m.tickLength;if(m.show&&0!=m.ticks.length){for(h.strokeStyle=m.options.tickColor||e.color.parse(m.options.color).scale("a",.22).toString(),h.lineWidth=1,"x"==m.direction?(c=0,d="full"==y?"top"==m.position?0:x:g.top-v.top+("top"==m.position?g.height:0)):(d=0,c="full"==y?"left"==m.position?0:w:g.left-v.left+("left"==m.position?g.width:0)),m.innermost||(h.beginPath(),f=p=0,"x"==m.direction?f=w:p=x,1==h.lineWidth&&(c=Math.floor(c)+.5,d=Math.floor(d)+.5),h.moveTo(c,d),h.lineTo(c+f,d+p),h.stroke()),h.beginPath(),t=0;t<m.ticks.length;++t){var b=m.ticks[t].v;f=p=0,b<m.min||b>m.max||"full"==y&&s>0&&(b==m.min||b==m.max)||("x"==m.direction?(c=m.p2c(b),p="full"==y?-x:y,"top"==m.position&&(p=-p)):(d=m.p2c(b),f="full"==y?-w:y,"left"==m.position&&(f=-f)),1==h.lineWidth&&("x"==m.direction?c=Math.floor(c)+.5:d=Math.floor(d)+.5),h.moveTo(c,d),h.lineTo(c+f,d+p))}h.stroke()}}s&&(h.lineWidth=s,h.strokeStyle=u.grid.borderColor,h.strokeRect(-s/2,-s/2,w+s,x+s)),h.restore()}function z(e){e.lines.show&&function(e){function t(e,t,n,i,r){var o=e.points,a=e.pointsize,s=null,l=null;h.beginPath();for(var u=a;u<o.length;u+=a){var c=o[u-a],d=o[u-a+1],f=o[u],p=o[u+1];if(null!=c&&null!=f){if(d<=p&&d<r.min){if(p<r.min)continue;c=(r.min-d)/(p-d)*(f-c)+c,d=r.min}else if(p<=d&&p<r.min){if(d<r.min)continue;f=(r.min-d)/(p-d)*(f-c)+c,p=r.min}if(d>=p&&d>r.max){if(p>r.max)continue;c=(r.max-d)/(p-d)*(f-c)+c,d=r.max}else if(p>=d&&p>r.max){if(d>r.max)continue;f=(r.max-d)/(p-d)*(f-c)+c,p=r.max}if(c<=f&&c<i.min){if(f<i.min)continue;d=(i.min-c)/(f-c)*(p-d)+d,c=i.min}else if(f<=c&&f<i.min){if(c<i.min)continue;p=(i.min-c)/(f-c)*(p-d)+d,f=i.min}if(c>=f&&c>i.max){if(f>i.max)continue;d=(i.max-c)/(f-c)*(p-d)+d,c=i.max}else if(f>=c&&f>i.max){if(c>i.max)continue;p=(i.max-c)/(f-c)*(p-d)+d,f=i.max}c==s&&d==l||h.moveTo(i.p2c(c)+t,r.p2c(d)+n),s=f,l=p,h.lineTo(i.p2c(f)+t,r.p2c(p)+n)}}h.stroke()}function n(e,t,n){for(var i=e.points,r=e.pointsize,o=Math.min(Math.max(0,n.min),n.max),a=0,s=!1,l=1,u=0,c=0;!(r>0&&a>i.length+r);){var d=i[(a+=r)-r],f=i[a-r+l],p=i[a],m=i[a+l];if(s){if(r>0&&null!=d&&null==p){c=a,r=-r,l=2;continue}if(r<0&&a==u+r){h.fill(),s=!1,l=1,a=u=c+(r=-r);continue}}if(null!=d&&null!=p){if(d<=p&&d<t.min){if(p<t.min)continue;f=(t.min-d)/(p-d)*(m-f)+f,d=t.min}else if(p<=d&&p<t.min){if(d<t.min)continue;m=(t.min-d)/(p-d)*(m-f)+f,p=t.min}if(d>=p&&d>t.max){if(p>t.max)continue;f=(t.max-d)/(p-d)*(m-f)+f,d=t.max}else if(p>=d&&p>t.max){if(d>t.max)continue;m=(t.max-d)/(p-d)*(m-f)+f,p=t.max}if(s||(h.beginPath(),h.moveTo(t.p2c(d),n.p2c(o)),s=!0),f>=n.max&&m>=n.max)h.lineTo(t.p2c(d),n.p2c(n.max)),h.lineTo(t.p2c(p),n.p2c(n.max));else if(f<=n.min&&m<=n.min)h.lineTo(t.p2c(d),n.p2c(n.min)),h.lineTo(t.p2c(p),n.p2c(n.min));else{var g=d,v=p;f<=m&&f<n.min&&m>=n.min?(d=(n.min-f)/(m-f)*(p-d)+d,f=n.min):m<=f&&m<n.min&&f>=n.min&&(p=(n.min-f)/(m-f)*(p-d)+d,m=n.min),f>=m&&f>n.max&&m<=n.max?(d=(n.max-f)/(m-f)*(p-d)+d,f=n.max):m>=f&&m>n.max&&f<=n.max&&(p=(n.max-f)/(m-f)*(p-d)+d,m=n.max),d!=g&&h.lineTo(t.p2c(g),n.p2c(f)),h.lineTo(t.p2c(d),n.p2c(f)),h.lineTo(t.p2c(p),n.p2c(m)),p!=v&&(h.lineTo(t.p2c(p),n.p2c(m)),h.lineTo(t.p2c(v),n.p2c(m)))}}}}h.save(),h.translate(v.left,v.top),h.lineJoin="round";var i=e.lines.lineWidth,r=e.shadowSize;if(i>0&&r>0){h.lineWidth=r,h.strokeStyle="rgba(0,0,0,0.1)";var o=Math.PI/18;t(e.datapoints,Math.sin(o)*(i/2+r/2),Math.cos(o)*(i/2+r/2),e.xaxis,e.yaxis),h.lineWidth=r/2,t(e.datapoints,Math.sin(o)*(i/2+r/4),Math.cos(o)*(i/2+r/4),e.xaxis,e.yaxis)}h.lineWidth=i,h.strokeStyle=e.color;var a=H(e.lines,e.color,0,x);a&&(h.fillStyle=a,n(e.datapoints,e.xaxis,e.yaxis));i>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis);h.restore()}(e),e.bars.show&&function(e){function t(t,n,i,r,o,a,s){for(var l=t.points,u=t.pointsize,c=0;c<l.length;c+=u)null!=l[c]&&F(l[c],l[c+1],l[c+2],n,i,r,o,a,s,h,e.bars.horizontal,e.bars.lineWidth)}h.save(),h.translate(v.left,v.top),h.lineWidth=e.bars.lineWidth,h.strokeStyle=e.color;var n="left"==e.bars.align?0:-e.bars.barWidth/2,i=e.bars.fill?function(t,n){return H(e.bars,e.color,t,n)}:null;t(e.datapoints,n,n+e.bars.barWidth,0,i,e.xaxis,e.yaxis),h.restore()}(e),e.points.show&&function(e){function t(e,t,n,i,r,o,a,s){for(var l=e.points,u=e.pointsize,c=0;c<l.length;c+=u){var d=l[c],f=l[c+1];null==d||d<o.min||d>o.max||f<a.min||f>a.max||(h.beginPath(),d=o.p2c(d),f=a.p2c(f)+i,"circle"==s?h.arc(d,f,t,0,r?Math.PI:2*Math.PI,!1):s(h,d,f,t,r),h.closePath(),n&&(h.fillStyle=n,h.fill()),h.stroke())}}h.save(),h.translate(v.left,v.top);var n=e.points.lineWidth,i=e.shadowSize,r=e.points.radius,o=e.points.symbol;if(n>0&&i>0){var a=i/2;h.lineWidth=a,h.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,r,null,a+a/2,!0,e.xaxis,e.yaxis,o),h.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,r,null,a/2,!0,e.xaxis,e.yaxis,o)}h.lineWidth=n,h.strokeStyle=e.color,t(e.datapoints,r,H(e.points,e.color),0,!1,e.xaxis,e.yaxis,o),h.restore()}(e)}function F(e,t,n,i,r,o,a,s,l,u,c,d){var f,h,p,m,g,v,y,b,w;c?(b=v=y=!0,g=!1,m=t+i,p=t+r,(h=e)<(f=n)&&(w=h,h=f,f=w,g=!0,v=!1)):(g=v=y=!0,b=!1,f=e+i,h=e+r,(m=t)<(p=n)&&(w=m,m=p,p=w,b=!0,y=!1)),h<s.min||f>s.max||m<l.min||p>l.max||(f<s.min&&(f=s.min,g=!1),h>s.max&&(h=s.max,v=!1),p<l.min&&(p=l.min,b=!1),m>l.max&&(m=l.max,y=!1),f=s.p2c(f),p=l.p2c(p),h=s.p2c(h),m=l.p2c(m),a&&(u.beginPath(),u.moveTo(f,p),u.lineTo(f,m),u.lineTo(h,m),u.lineTo(h,p),u.fillStyle=a(p,m),u.fill()),d>0&&(g||v||y||b)&&(u.beginPath(),u.moveTo(f,p+o),g?u.lineTo(f,m+o):u.moveTo(f,m+o),y?u.lineTo(h,m+o):u.moveTo(h,m+o),v?u.lineTo(h,p+o):u.moveTo(h,p+o),b?u.lineTo(f,p+o):u.moveTo(f,p+o),u.stroke()))}function H(t,n,i,r){var o=t.fill;if(!o)return null;if(t.fillColor)return ee(t.fillColor,i,r,n);var a=e.color.parse(n);return a.a="number"==typeof o?o:.4,a.normalize(),a.toString()}k.setData=S,k.setupGrid=O,k.draw=I,k.getPlaceholder=function(){return t},k.getCanvas=function(){return c},k.getPlotOffset=function(){return v},k.width=function(){return w},k.height=function(){return x},k.offset=function(){var e=f.offset();return e.left+=v.left,e.top+=v.top,e},k.getData=function(){return l},k.getAxes=function(){var t={};return e.each(m.concat(g),(function(e,n){n&&(t[n.direction+(1!=n.n?n.n:"")+"axis"]=n)})),t},k.getXAxes=function(){return m},k.getYAxes=function(){return g},k.c2p=M,k.p2c=function(e){var t,n,i,r={};for(t=0;t<m.length;++t)if((n=m[t])&&n.used&&(null==e[i="x"+n.n]&&1==n.n&&(i="x"),null!=e[i])){r.left=n.p2c(e[i]);break}for(t=0;t<g.length;++t)if((n=g[t])&&n.used&&(null==e[i="y"+n.n]&&1==n.n&&(i="y"),null!=e[i])){r.top=n.p2c(e[i]);break}return r},k.getOptions=function(){return u},k.highlight=K,k.unhighlight=G,k.triggerRedrawOverlay=X,k.pointOffset=function(e){return{left:parseInt(m[T(e,"x")-1].p2c(+e.x)+v.left),top:parseInt(g[T(e,"y")-1].p2c(+e.y)+v.top)}},k.shutdown=function(){j&&clearTimeout(j);f.unbind("mousemove",U),f.unbind("mouseleave",V),f.unbind("click",$),_(C.shutdown,[f])},k.resize=function(){A(),P(c),P(d)},k.hooks=C,function(){for(var t=0;t<s.length;++t){var n=s[t];n.init(k),n.options&&e.extend(!0,u,n.options)}}(),function(t){var n;e.extend(!0,u,t),null==u.xaxis.color&&(u.xaxis.color=u.grid.color);null==u.yaxis.color&&(u.yaxis.color=u.grid.color);null==u.xaxis.tickColor&&(u.xaxis.tickColor=u.grid.tickColor);null==u.yaxis.tickColor&&(u.yaxis.tickColor=u.grid.tickColor);null==u.grid.borderColor&&(u.grid.borderColor=u.grid.color);null==u.grid.tickColor&&(u.grid.tickColor=e.color.parse(u.grid.color).scale("a",.22).toString());for(n=0;n<Math.max(1,u.xaxes.length);++n)u.xaxes[n]=e.extend(!0,{},u.xaxis,u.xaxes[n]);for(n=0;n<Math.max(1,u.yaxes.length);++n)u.yaxes[n]=e.extend(!0,{},u.yaxis,u.yaxes[n]);u.xaxis.noTicks&&null==u.xaxis.ticks&&(u.xaxis.ticks=u.xaxis.noTicks);u.yaxis.noTicks&&null==u.yaxis.ticks&&(u.yaxis.ticks=u.yaxis.noTicks);u.x2axis&&(u.xaxes[1]=e.extend(!0,{},u.xaxis,u.x2axis),u.xaxes[1].position="top");u.y2axis&&(u.yaxes[1]=e.extend(!0,{},u.yaxis,u.y2axis),u.yaxes[1].position="right");u.grid.coloredAreas&&(u.grid.markings=u.grid.coloredAreas);u.grid.coloredAreasColor&&(u.grid.markingsColor=u.grid.coloredAreasColor);u.lines&&e.extend(!0,u.series.lines,u.lines);u.points&&e.extend(!0,u.series.points,u.points);u.bars&&e.extend(!0,u.series.bars,u.bars);null!=u.shadowSize&&(u.series.shadowSize=u.shadowSize);for(n=0;n<u.xaxes.length;++n)E(m,n+1).options=u.xaxes[n];for(n=0;n<u.yaxes.length;++n)E(g,n+1).options=u.yaxes[n];for(var i in C)u.hooks[i]&&u.hooks[i].length&&(C[i]=C[i].concat(u.hooks[i]));_(C.processOptions,[u])}(o),function(){var n,i=t.children("canvas.base"),r=t.children("canvas.overlay");0==i.length||0==r?(t.html(""),t.css({padding:0}),"static"==t.css("position")&&t.css("position","relative"),A(),c=N(!0,"base"),d=N(!1,"overlay"),n=!1):(c=i.get(0),d=r.get(0),n=!0);h=c.getContext("2d"),p=d.getContext("2d"),f=e([d,c]),n&&(t.data("plot").shutdown(),k.resize(),p.clearRect(0,0,y,b),f.unbind(),t.children().not([c,d]).remove());t.data("plot",k)}(),S(i),O(),I(),function(){u.grid.hoverable&&(f.mousemove(U),f.mouseleave(V));u.grid.clickable&&f.click($);_(C.bindEvents,[f])}();var W=[],j=null;function U(e){u.grid.hoverable&&q("plothover",e,(function(e){return 0!=e.hoverable}))}function V(e){u.grid.hoverable&&q("plothover",e,(function(e){return!1}))}function $(e){q("plotclick",e,(function(e){return 0!=e.clickable}))}function q(e,n,i){var r=f.offset(),o=n.pageX-r.left-v.left,a=n.pageY-r.top-v.top,s=M({left:o,top:a});s.pageX=n.pageX,s.pageY=n.pageY;var c=function(e,t,n){var i,r,o=u.grid.mouseActiveRadius,a=o*o+1,s=null;for(i=l.length-1;i>=0;--i)if(n(l[i])){var c=l[i],d=c.xaxis,f=c.yaxis,h=c.datapoints.points,p=c.datapoints.pointsize,m=d.c2p(e),g=f.c2p(t),v=o/d.scale,y=o/f.scale;if(d.options.inverseTransform&&(v=Number.MAX_VALUE),f.options.inverseTransform&&(y=Number.MAX_VALUE),c.lines.show||c.points.show)for(r=0;r<h.length;r+=p){var b=h[r],w=h[r+1];if(null!=b&&!(b-m>v||b-m<-v||w-g>y||w-g<-y)){var x=Math.abs(d.p2c(b)-e),C=Math.abs(f.p2c(w)-t),k=x*x+C*C;k<a&&(a=k,s=[i,r/p])}}if(c.bars.show&&!s){var _="left"==c.bars.align?0:-c.bars.barWidth/2,S=_+c.bars.barWidth;for(r=0;r<h.length;r+=p){b=h[r],w=h[r+1];var T=h[r+2];null!=b&&(l[i].bars.horizontal?m<=Math.max(T,b)&&m>=Math.min(T,b)&&g>=w+_&&g<=w+S:m>=b+_&&m<=b+S&&g>=Math.min(T,w)&&g<=Math.max(T,w))&&(s=[i,r/p])}}}return s?(i=s[0],r=s[1],p=l[i].datapoints.pointsize,{datapoint:l[i].datapoints.points.slice(r*p,(r+1)*p),dataIndex:r,series:l[i],seriesIndex:i}):null}(o,a,i);if(c&&(c.pageX=parseInt(c.series.xaxis.p2c(c.datapoint[0])+r.left+v.left),c.pageY=parseInt(c.series.yaxis.p2c(c.datapoint[1])+r.top+v.top)),u.grid.autoHighlight){for(var d=0;d<W.length;++d){var h=W[d];h.auto!=e||c&&h.series==c.series&&h.point[0]==c.datapoint[0]&&h.point[1]==c.datapoint[1]||G(h.series,h.point)}c&&K(c.series,c.datapoint,e)}t.trigger(e,[s,c])}function X(){j||(j=setTimeout(Y,30))}function Y(){var e,t;for(j=null,p.save(),p.clearRect(0,0,y,b),p.translate(v.left,v.top),e=0;e<W.length;++e)(t=W[e]).series.bars.show?Q(t.series,t.point):Z(t.series,t.point);p.restore(),_(C.drawOverlay,[p])}function K(e,t,n){if("number"==typeof e&&(e=l[e]),"number"==typeof t){var i=e.datapoints.pointsize;t=e.datapoints.points.slice(i*t,i*(t+1))}var r=J(e,t);-1==r?(W.push({series:e,point:t,auto:n}),X()):n||(W[r].auto=!1)}function G(e,t){null==e&&null==t&&(W=[],X()),"number"==typeof e&&(e=l[e]),"number"==typeof t&&(t=e.data[t]);var n=J(e,t);-1!=n&&(W.splice(n,1),X())}function J(e,t){for(var n=0;n<W.length;++n){var i=W[n];if(i.series==e&&i.point[0]==t[0]&&i.point[1]==t[1])return n}return-1}function Z(t,n){var i=n[0],r=n[1],o=t.xaxis,a=t.yaxis;if(!(i<o.min||i>o.max||r<a.min||r>a.max)){var s=t.points.radius+t.points.lineWidth/2;p.lineWidth=s,p.strokeStyle=e.color.parse(t.color).scale("a",.5).toString();var l=1.5*s;i=o.p2c(i),r=a.p2c(r);p.beginPath(),"circle"==t.points.symbol?p.arc(i,r,l,0,2*Math.PI,!1):t.points.symbol(p,i,r,l,!1),p.closePath(),p.stroke()}}function Q(t,n){p.lineWidth=t.bars.lineWidth,p.strokeStyle=e.color.parse(t.color).scale("a",.5).toString();var i=e.color.parse(t.color).scale("a",.5).toString(),r="left"==t.bars.align?0:-t.bars.barWidth/2;F(n[0],n[1],n[2]||0,r,r+t.bars.barWidth,0,(function(){return i}),t.xaxis,t.yaxis,p,t.bars.horizontal,t.bars.lineWidth)}function ee(t,n,i,r){if("string"==typeof t)return t;for(var o=h.createLinearGradient(0,i,0,n),a=0,s=t.colors.length;a<s;++a){var l=t.colors[a];if("string"!=typeof l){var u=e.color.parse(r);null!=l.brightness&&(u=u.scale("rgb",l.brightness)),null!=l.opacity&&(u.a*=l.opacity),l=u.toString()}o.addColorStop(a/(s-1),l)}return o}}function n(e,t){return t*Math.floor(e/t)}e.plot=function(n,i,r){return new t(e(n),i,r,e.plot.plugins)},e.plot.version="0.7",e.plot.plugins=[],e.plot.formatDate=function(e,t,n){var i=function(e){return 1==(e=""+e).length?"0"+e:e},r=[],o=!1,a=!1,s=e.getUTCHours(),l=s<12;null==n&&(n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),-1!=t.search(/%p|%P/)&&(s>12?s-=12:0==s&&(s=12));for(var u=0;u<t.length;++u){var c=t.charAt(u);if(o){switch(c){case"h":c=""+s;break;case"H":c=i(s);break;case"M":c=i(e.getUTCMinutes());break;case"S":c=i(e.getUTCSeconds());break;case"d":c=""+e.getUTCDate();break;case"m":c=""+(e.getUTCMonth()+1);break;case"y":c=""+e.getUTCFullYear();break;case"b":c=""+n[e.getUTCMonth()];break;case"p":c=l?"am":"pm";break;case"P":c=l?"AM":"PM";break;case"0":c="",a=!0}c&&a&&(c=i(c),a=!1),r.push(c),a||(o=!1)}else"%"==c?o=!0:r.push(c)}return r.join("")}}(i)},36022:function(e,t,n){var i=n(20428);(function(){!function(e){var t;(t=document.createElement("input")).setAttribute("type","number"),"text"===t.type?(e.fn.inputNumber=function(){var t,n,i,r,o,a,s,l;return o=function(t){var n,i,r,o,a;return o=(n=e(t)).attr("step"),r=n.attr("min"),i=n.attr("max"),a=parseFloat(n.val()),o=/^-?\d+(?:\.\d+)?$/.test(o)?parseFloat(o):null,r=/^-?\d+(?:\.\d+)?$/.test(r)?parseFloat(r):null,i=/^-?\d+(?:\.\d+)?$/.test(i)?parseFloat(i):null,isNaN(a)&&(a=r||0),{min:r,max:i,step:o,val:a}},t=function(e,t,n){return null!=n&&e>n?n:null!=t&&e<t?t:e},r=function(e){var t,n;if(null!=e){for(t=0,n=e;n!==Math.round(n);)t+=1,n=e*Math.pow(10,t);return t}return 0},s=function(e,t,n,i){var o,a,s,l,u,c,d,f,h,p;return f=r(i),null==i?e:0===f?0===(o=(e-(t||0))%i)?e:(p=(h=e-o)+i)>n||e-h<p-e?h:p:0===(s=(e-(t||0))*(a=Math.pow(10,f))%(l=i*a))?e:(c=(u=(d=e*a)-s)+l)/a>n||d-u<c-d?u/a:c/a},a=function(t){var n,i,a;return e(t).is(":disabled")||(i=o(t),a=Math.pow(10,Math.max(r(i.val),r(i.step))),n=(Math.round(i.val*a)+Math.round((i.step||1)*a))/a,null!=i.max&&n>i.max&&(n=i.max),n=s(n,i.min,i.max,i.step),e(t).val(n).change()),null},n=function(t){var n,i,a;return e(t).is(":disabled")||(i=o(t),a=Math.pow(10,Math.max(r(i.val),r(i.step))),n=(Math.round(i.val*a)-Math.round((i.step||1)*a))/a,null!=i.min&&n<i.min&&(n=i.min),n=s(n,i.min,i.max,i.step),e(t).val(n).change()),null},i=function(e){return e.preventDefault(),e.originalEvent.detail<0?a(this):n(this),null},l=function(e){return e.preventDefault(),e.originalEvent.wheelDelta>0?a(this):n(this),null},e(this).filter('input[type="number"]').each((function(){var r,u,c,d,f,h,p,m,g;return m=(u=e(p=this)).outerHeight()/6+"px",g=document.createElement("div"),h=document.createElement("div"),c=e(g),r=e(h),f=document.createElement("div"),c.addClass("number-spin-btn number-spin-btn-up").css("height",m),r.addClass("number-spin-btn number-spin-btn-down").css("height",m),f.appendChild(g),f.appendChild(h),e(f).addClass("number-spin-btn-container").insertAfter(p),u.on({focus:function(e){return u.on({DOMMouseScroll:i,mousewheel:l}),null},blur:function(e){return u.off({DOMMouseScroll:i,mousewheel:l}),null},keypress:function(e){var t,i;return 38===e.keyCode?a(this):40===e.keyCode?n(this):8!==(t=e.keyCode)&&9!==t&&35!==t&&36!==t&&37!==t&&39!==t&&45!==(i=e.which)&&46!==i&&48!==i&&49!==i&&50!==i&&51!==i&&52!==i&&53!==i&&54!==i&&55!==i&&56!==i&&57!==i&&e.preventDefault(),null},change:function(n){var i,r;return null!=n.originalEvent&&(r=o(this),i=t(r.val,r.min,r.max),i=s(i,r.min,r.max,r.step,r.stepDecimal),e(this).val(i)),null}}),c.on("mousedown",(function(t){var n,i;return a(p),i=function(e,t){return t(e),u.data("timeoutID",window.setTimeout(i,10,e,t)),null},n=function(t){return window.clearTimeout(u.data("timeoutID")),e(document).off("mouseup",n),c.off("mouseleave",n),null},e(document).on("mouseup",n),c.on("mouseleave",n),u.data("timeoutID",window.setTimeout(i,700,p,a)),null})),r.on("mousedown",(function(t){var i,o;return n(p),o=function(e,t){return t(e),u.data("timeoutID",window.setTimeout(o,10,e,t)),null},i=function(t){return window.clearTimeout(u.data("timeoutID")),e(document).off("mouseup",i),r.off("mouseleave",i),null},e(document).on("mouseup",i),r.on("mouseleave",i),u.data("timeoutID",window.setTimeout(o,700,p,n)),null})),u.css("textAlign","left"),"1"!==u.css("opacity")&&e(f).css("opacity",u.css("opacity")),"visible"!==u.css("visibility")&&e(f).css("visibility",u.css("visibility")),""!==p.style.display&&e(f).css("display",u.css("display")),"undefined"!=typeof WebKitMutationObserver&&null!==WebKitMutationObserver||"undefined"!=typeof MutationObserver&&null!==MutationObserver?(d=function(t,n){var i,r,o;for(r=0,o=t.length;r<o;r++)"attributes"===(i=t[r]).type&&("class"===i.attributeName?e(f).removeClass(i.oldValue).addClass(p.className):"style"===i.attributeName&&e(f).css({opacity:p.style.opacity,visibility:p.style.visibility,display:p.style.display}));return null},("undefined"!=typeof WebKitMutationObserver&&null!==WebKitMutationObserver?new WebKitMutationObserver(d):"undefined"!=typeof MutationObserver&&null!==MutationObserver?new MutationObserver(d):null).observe(p,{attributes:!0,attributeOldValue:!0,attributeFilter:["class","style"]})):"undefined"!=typeof MutationEvent&&null!==MutationEvent&&u.on("DOMAttrModified",(function(t){return"class"===t.originalEvent.attrName?e(f).removeClass(t.originalEvent.prevValue).addClass(t.originalEvent.newValue):"style"===t.originalEvent.attrName&&e(f).css({display:p.style.display,visibility:p.style.visibility,opacity:p.style.opacity}),null})),null})),e(this)},e((function(){return e('input[type="number"]').inputNumber(),null}))):e.fn.inputNumber=function(){return e(this)}}(i)}).call(this)},78759:(e,t,n)=>{var i,r,o=n(20428);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}!function(e,t){function n(t,n){var r,o,a,s=t.nodeName.toLowerCase();return"area"===s?(o=(r=t.parentNode).name,!(!t.href||!o||"map"!==r.nodeName.toLowerCase())&&(!!(a=e("img[usemap=#"+o+"]")[0])&&i(a))):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s&&t.href||n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter((function(){return"hidden"===e.css(this,"visibility")})).length}var r=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each((function(){var i=this;setTimeout((function(){e(i).focus(),n&&n.call(i)}),t)})):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,r,o=e(this[0]);o.length&&o[0]!==document;){if(("absolute"===(i=o.css("position"))||"relative"===i||"fixed"===i)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++r)}))},removeUniqueId:function(){return this.each((function(){o.test(this.id)&&e(this).removeAttr("id")}))}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(n){return!!e.data(n,t)}})):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],(function(n,i){function r(t,n,i,r){return e.each(o,(function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(n-=parseFloat(e.css(t,"margin"+this))||0)})),n}var o="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?s["inner"+i].call(this):this.each((function(){e(this).css(a,r(this,n)+"px")}))},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?s["outer"+i].call(this,t):this.each((function(){e(this).css(a,r(this,t,!0,n)+"px")}))}})),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(e){e.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n){var i,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0||(t[i]=1,r=t[i]>0,t[i]=0,r)}}))}(o),function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(e){}r(t)},e.widget=function(t,n,i){var r,o,a,s,l={},u=t.split(".")[0];t=t.split(".")[1],r=u+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[u]=e[u]||{},o=e[u][t],a=e[u][t]=function(e,t){if(!this._createWidget)return new a(e,t);arguments.length&&this._createWidget(e,t)},e.extend(a,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(s=new n).options=e.widget.extend({},s.options),e.each(i,(function(t,i){e.isFunction(i)?l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}():l[t]=i})),a.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix:t},l,{constructor:a,namespace:u,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,(function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)})),delete o._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(n){for(var r,o,a=i.call(arguments,1),s=0,l=a.length;s<l;s++)for(r in a[s])o=a[s][r],a[s].hasOwnProperty(r)&&o!==t&&(e.isPlainObject(o)?n[r]=e.isPlainObject(n[r])?e.widget.extend({},n[r],o):e.widget.extend({},o):n[r]=o);return n},e.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;e.fn[n]=function(a){var s="string"==typeof a,l=i.call(arguments,1),u=this;return a=!s&&l.length?e.widget.extend.apply(null,[a].concat(l)):a,s?this.each((function(){var i,r=e.data(this,o);return r?e.isFunction(r[a])&&"_"!==a.charAt(0)?(i=r[a].apply(r,l))!==r&&i!==t?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):void 0:e.error("no such method '"+a+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")})):this.each((function(){var t=e.data(this,o);t?t.option(a||{})._init():e.data(this,o,new r(a,this))})),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var r,o,a,s=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(s={},r=n.split("."),n=r.shift(),r.length){for(o=s[n]=e.widget.extend({},this.options[n]),a=0;a<r.length-1;a++)o[r[a]]=o[r[a]]||{},o=o[r[a]];if(n=r.pop(),i===t)return o[n]===t?null:o[n];o[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];s[n]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,(function(i,a){function s(){if(t||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),u=l[1]+o.eventNamespace,c=l[2];c?r.delegate(c,u,s):n.bind(u,s)}))},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var n=this;return setTimeout((function(){return("string"==typeof e?n[e]:e).apply(n,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,a=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(a)&&!1===a.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?!0===r||"number"==typeof r?n:r.effect||n:t;"number"==typeof(r=r||{})&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,o):i.queue((function(n){e(this)[t](),o&&o.call(i[0]),n()}))}}))}(o),r=!1,(i=o)(document).mouseup((function(){r=!1})),i.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).bind("click."+this.widgetName,(function(t){if(!0===i.data(t.target,e.widgetName+".preventClickEvent"))return i.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&i(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!r){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var t=this,n=1===e.which,o=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&i(e.target).closest(this.options.cancel).length;return!(n&&!o&&this._mouseCapture(e)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){t.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),0):(!0===i.data(e.target,this.widgetName+".preventClickEvent")&&i.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},i(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),r=!0,0)))}},_mouseMove:function(e){return i.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return i(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&i.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(e,t){function n(e,t,n){return[parseInt(e[0],10)*(f.test(e[0])?t/100:1),parseInt(e[1],10)*(f.test(e[1])?n/100:1)]}function i(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var r,o=Math.max,a=Math.abs,s=Math.round,l=/left|center|right/,u=/top|center|bottom/,c=/[\+\-]\d+%?/,d=/^\w+/,f=/%$/,h=e.fn.position;e.position={scrollbarWidth:function(){if(undefined!==r)return r;var t,n,i=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=i.children()[0];return e("body").append(i),t=o.offsetWidth,i.css("overflow","scroll"),t===(n=o.offsetWidth)&&(n=i[0].clientWidth),i.remove(),r=t-n},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),i=t.isWindow?"":t.element.css("overflow-y"),r="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,o="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:r?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return h.apply(this,arguments);t=e.extend({},t);var r,f,p,m,g,v,y=e(t.of),b=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(b),x=(t.collision||"flip").split(" "),C={};return v=function(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}(y),y[0].preventDefault&&(t.at="left top"),f=v.width,p=v.height,m=v.offset,g=e.extend({},m),e.each(["my","at"],(function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=c.exec(i[0]),n=c.exec(i[1]),C[this]=[e?e[0]:0,n?n[0]:0],t[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]})),1===x.length&&(x[1]=x[0]),"right"===t.at[0]?g.left+=f:"center"===t.at[0]&&(g.left+=f/2),"bottom"===t.at[1]?g.top+=p:"center"===t.at[1]&&(g.top+=p/2),r=n(C.at,f,p),g.left+=r[0],g.top+=r[1],this.each((function(){var l,u,c=e(this),d=c.outerWidth(),h=c.outerHeight(),v=i(this,"marginLeft"),k=i(this,"marginTop"),_=d+v+i(this,"marginRight")+w.width,S=h+k+i(this,"marginBottom")+w.height,T=e.extend({},g),D=n(C.my,c.outerWidth(),c.outerHeight());"right"===t.my[0]?T.left-=d:"center"===t.my[0]&&(T.left-=d/2),"bottom"===t.my[1]?T.top-=h:"center"===t.my[1]&&(T.top-=h/2),T.left+=D[0],T.top+=D[1],e.support.offsetFractions||(T.left=s(T.left),T.top=s(T.top)),l={marginLeft:v,marginTop:k},e.each(["left","top"],(function(n,i){e.ui.position[x[n]]&&e.ui.position[x[n]][i](T,{targetWidth:f,targetHeight:p,elemWidth:d,elemHeight:h,collisionPosition:l,collisionWidth:_,collisionHeight:S,offset:[r[0]+D[0],r[1]+D[1]],my:t.my,at:t.at,within:b,elem:c})})),t.using&&(u=function(e){var n=m.left-T.left,i=n+f-d,r=m.top-T.top,s=r+p-h,l={target:{element:y,left:m.left,top:m.top,width:f,height:p},element:{element:c,left:T.left,top:T.top,width:d,height:h},horizontal:i<0?"left":n>0?"right":"center",vertical:s<0?"top":r>0?"bottom":"middle"};f<d&&a(n+i)<f&&(l.horizontal="center"),p<h&&a(r+s)<p&&(l.vertical="middle"),o(a(n),a(i))>o(a(r),a(s))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),c.offset(e.extend(T,{using:u}))}))},e.ui.position={fit:{left:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,s=e.left-t.collisionPosition.marginLeft,l=r-s,u=s+t.collisionWidth-a-r;t.collisionWidth>a?l>0&&u<=0?(n=e.left+l+t.collisionWidth-a-r,e.left+=l-n):e.left=u>0&&l<=0?r:l>u?r+a-t.collisionWidth:r:l>0?e.left+=l:u>0?e.left-=u:e.left=o(e.left-s,e.left)},top:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollTop:i.offset.top,a=t.within.height,s=e.top-t.collisionPosition.marginTop,l=r-s,u=s+t.collisionHeight-a-r;t.collisionHeight>a?l>0&&u<=0?(n=e.top+l+t.collisionHeight-a-r,e.top+=l-n):e.top=u>0&&l<=0?r:l>u?r+a-t.collisionHeight:r:l>0?e.top+=l:u>0?e.top-=u:e.top=o(e.top-s,e.top)}},flip:{left:function(e,t){var n,i,r=t.within,o=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,u=e.left-t.collisionPosition.marginLeft,c=u-l,d=u+t.collisionWidth-s-l,f="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];c<0?((n=e.left+f+h+p+t.collisionWidth-s-o)<0||n<a(c))&&(e.left+=f+h+p):d>0&&((i=e.left-t.collisionPosition.marginLeft+f+h+p-l)>0||a(i)<d)&&(e.left+=f+h+p)},top:function(e,t){var n,i,r=t.within,o=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,u=e.top-t.collisionPosition.marginTop,c=u-l,d=u+t.collisionHeight-s-l,f="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,h="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1];c<0?(i=e.top+f+h+p+t.collisionHeight-s-o,e.top+f+h+p>c&&(i<0||i<a(c))&&(e.top+=f+h+p)):d>0&&(n=e.top-t.collisionPosition.marginTop+f+h+p-l,e.top+f+h+p>d&&(n>0||a(n)<d)&&(e.top+=f+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,r,o,a=document.getElementsByTagName("body")[0],s=document.createElement("div");for(o in t=document.createElement(a?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"}),i)t.style[o]=i[o];t.appendChild(s),(n=a||document.documentElement).insertBefore(t,n.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",r=e(s).offset().left,e.support.offsetFractions=r>10&&r<11,t.innerHTML="",n.removeChild(t)}()}(o),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return!(this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(e(!0===n.iframeFix?"iframe":n.iframeFix).each((function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")})),!0))},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(!1===this._trigger("drag",t,i))return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n,i=this,r=!1,o=!1;for(e.ui.ddmanager&&!this.options.dropBehaviour&&(o=e.ui.ddmanager.drop(this,t)),this.dropped&&(o=this.dropped,this.dropped=!1),n=this.element[0];n&&(n=n.parentNode);)n===document&&(r=!0);return!(!r&&"original"===this.options.helper)&&("invalid"===this.options.revert&&!o||"valid"===this.options.revert&&o||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,o)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==i._trigger("stop",t)&&i._clear()})):!1!==this._trigger("stop",t)&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each((function(){this.parentNode.removeChild(this)})),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length;return e(this.options.handle,this.element).find("*").addBack().each((function(){this===t.target&&(n=!0)})),n},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]!==this.element[0]&&!/(fixed|absolute)/.test(i.css("position"))&&i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;if("parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=["document"===r.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===r.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===r.containment?0:e(window).scrollLeft())+e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===r.containment?0:e(window).scrollTop())+(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||r.containment.constructor===Array)r.containment.constructor===Array&&(this.containment=r.containment);else{if(!(i=(n=e(r.containment))[0]))return;t="hidden"!==e(i).css("overflow"),this.containment=[(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0),(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r,o,a=this.options,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName),u=t.pageX,c=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(u=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(u=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),a.grid&&(r=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,c=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-a.grid[1]:r+a.grid[1]:r,o=a.grid[0]?this.originalPageX+Math.round((u-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,u=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:u-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var i=e(this).data("ui-draggable"),r=i.options,o=e.extend({},n,{item:i.element});i.sortables=[],e(r.connectToSortable).each((function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,o))}))},stop:function(t,n){var i=e(this).data("ui-draggable"),r=e.extend({},n,{item:i.element});e.each(i.sortables,(function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))}))},drag:function(t,n){var i=e(this).data("ui-draggable"),r=this;e.each(i.sortables,(function(){var o=!1,a=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(i.sortables,(function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o}))),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)}))}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var i=e(n.helper),r=e(this).data("ui-draggable").options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(t,n){var i=e(this).data("ui-draggable").options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),i=n.options,r=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(document).scrollTop()<i.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(document).scrollLeft()<i.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed)))),!1!==r&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each((function(){var n=e(this),i=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})}))},drag:function(t,n){var i,r,o,a,s,l,u,c,d,f,h=e(this).data("ui-draggable"),p=h.options,m=p.snapTolerance,g=n.offset.left,v=g+h.helperProportions.width,y=n.offset.top,b=y+h.helperProportions.height;for(d=h.snapElements.length-1;d>=0;d--)l=(s=h.snapElements[d].left)+h.snapElements[d].width,c=(u=h.snapElements[d].top)+h.snapElements[d].height,s-m<g&&g<l+m&&u-m<y&&y<c+m||s-m<g&&g<l+m&&u-m<b&&b<c+m||s-m<v&&v<l+m&&u-m<y&&y<c+m||s-m<v&&v<l+m&&u-m<b&&b<c+m?("inner"!==p.snapMode&&(i=Math.abs(u-b)<=m,r=Math.abs(c-y)<=m,o=Math.abs(s-v)<=m,a=Math.abs(l-g)<=m,i&&(n.position.top=h._convertPositionTo("relative",{top:u-h.helperProportions.height,left:0}).top-h.margins.top),r&&(n.position.top=h._convertPositionTo("relative",{top:c,left:0}).top-h.margins.top),o&&(n.position.left=h._convertPositionTo("relative",{top:0,left:s-h.helperProportions.width}).left-h.margins.left),a&&(n.position.left=h._convertPositionTo("relative",{top:0,left:l}).left-h.margins.left)),f=i||r||o||a,"outer"!==p.snapMode&&(i=Math.abs(u-y)<=m,r=Math.abs(c-b)<=m,o=Math.abs(s-g)<=m,a=Math.abs(l-v)<=m,i&&(n.position.top=h._convertPositionTo("relative",{top:u,left:0}).top-h.margins.top),r&&(n.position.top=h._convertPositionTo("relative",{top:c-h.helperProportions.height,left:0}).top-h.margins.top),o&&(n.position.left=h._convertPositionTo("relative",{top:0,left:s}).left-h.margins.left),a&&(n.position.left=h._convertPositionTo("relative",{top:0,left:l-h.helperProportions.width}).left-h.margins.left)),!h.snapElements[d].snapping&&(i||r||o||a||f)&&h.options.snap.snap&&h.options.snap.snap.call(h.element,t,e.extend(h._uiHash(),{snapItem:h.snapElements[d].item})),h.snapElements[d].snapping=i||r||o||a||f):(h.snapElements[d].snapping&&h.options.snap.release&&h.options.snap.release.call(h.element,t,e.extend(h._uiHash(),{snapItem:h.snapElements[d].item})),h.snapElements[d].snapping=!1)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=e(this).data("ui-draggable").options,i=e.makeArray(e(n.stack)).sort((function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)}));i.length&&(t=parseInt(i[0].style.zIndex,10)||0,e(i).each((function(e){this.style.zIndex=t+e})),this[0].style.zIndex=t+i.length)}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var i=e(n.helper),r=e(this).data("ui-draggable").options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(t,n){var i=e(this).data("ui-draggable").options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}})}(o),function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.droppable",{version:"1.10.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,n=e.ui.ddmanager.droppables[this.options.scope];t<n.length;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){"accept"===t&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var i=n||e.ui.ddmanager.current,r=!1;return!(!i||(i.currentItem||i.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&e.ui.intersect(i,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return r=!0,!1})),!r&&(!!this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(i)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,i){if(!t.offset)return!1;var r,o=(e.positionAbs||e.position.absolute).left,a=o+e.helperProportions.width,s=(e.positionAbs||e.position.absolute).top,l=s+e.helperProportions.height,u=t.offset.left,c=u+t.proportions.width,d=t.offset.top,f=d+t.proportions.height;switch(i){case"fit":return u<=o&&a<=c&&d<=s&&l<=f;case"intersect":return u<o+e.helperProportions.width/2&&a-e.helperProportions.width/2<c&&d<s+e.helperProportions.height/2&&l-e.helperProportions.height/2<f;case"pointer":return r=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,n((e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,d,t.proportions.height)&&n(r,u,t.proportions.width);case"touch":return(s>=d&&s<=f||l>=d&&l<=f||s<d&&l>f)&&(o>=u&&o<=c||a>=u&&a<=c||o<u&&a>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,n){var i,r,o=e.ui.ddmanager.droppables[t.options.scope]||[],a=n?n.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(i=0;i<o.length;i++)if(!(o[i].options.disabled||t&&!o[i].accept.call(o[i].element[0],t.currentItem||t.element))){for(r=0;r<s.length;r++)if(s[r]===o[i].element[0]){o[i].proportions.height=0;continue e}o[i].visible="none"!==o[i].element.css("display"),o[i].visible&&("mousedown"===a&&o[i]._activate.call(o[i],n),o[i].offset=o[i].element.offset(),o[i].proportions={width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight})}},drop:function(t,n){var i=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],(function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))})),i},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",(function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}))},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,r,o,a=e.ui.intersect(t,this,this.options.tolerance),s=!a&&this.isover?"isout":a&&!this.isover?"isover":null;s&&(this.options.greedy&&(r=this.options.scope,(o=this.element.parents(":data(ui-droppable)").filter((function(){return e.data(this,"ui-droppable").options.scope===r}))).length&&((i=e.data(o[0],"ui-droppable")).greedyChild="isover"===s)),i&&"isover"===s&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,n),i&&"isout"===s&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}}))},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(o),function(e,t){function n(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,i,r,o=this,a=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;n<t.length;n++)i=e.trim(t[n]),(r=e("<div class='ui-resizable-handle "+("ui-resizable-"+i)+"'></div>")).css({zIndex:a.zIndex}),"se"===i&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(r);this._renderAxis=function(t){var n,i,r,o;for(n in t=t||this.element,this.handles)this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=e(this.handles[n],this.element),o=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(r,o),this._proportionallyResize()),e(this.handles[n]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover((function(){o.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=r&&r[1]?r[1]:"se")})),a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter((function(){a.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())})).mouseleave((function(){a.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())}))),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,i,r=!1;for(n in this.handles)((i=e(this.handles[n])[0])===t.target||e.contains(i,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(t){var i,r,o,a=this.options,s=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy(),i=n(this.helper.css("left")),r=n(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,r+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:r},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:i,top:r},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),l.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,i=this.helper,r={},o=this.originalMousePosition,a=this.axis,s=this.position.top,l=this.position.left,u=this.size.width,c=this.size.height,d=t.pageX-o.left||0,f=t.pageY-o.top||0,h=this._change[a];return!!h&&(n=h.apply(this,[t,d,f]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==s&&(r.top=this.position.top+"px"),this.position.left!==l&&(r.left=this.position.left+"px"),this.size.width!==u&&(r.width=this.size.width+"px"),this.size.height!==c&&(r.height=this.size.height+"px"),i.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var n,i,r,o,a,s,l,u=this.options,c=this;return this._helper&&(r=(i=(n=this._proportionallyResizeElements).length&&/textarea/i.test(n[0].nodeName))&&e.ui.hasScroll(n[0],"left")?0:c.sizeDiff.height,o=i?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-r},s=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,u.animate||this.element.css(e.extend(a,{top:l,left:s})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!u.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,r,o,a,s=this.options;a={minWidth:i(s.minWidth)?s.minWidth:0,maxWidth:i(s.maxWidth)?s.maxWidth:1/0,minHeight:i(s.minHeight)?s.minHeight:0,maxHeight:i(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,r=a.minWidth/this.aspectRatio,n=a.maxHeight*this.aspectRatio,o=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),r>a.minHeight&&(a.minHeight=r),n<a.maxWidth&&(a.maxWidth=n),o<a.maxHeight&&(a.maxHeight=o)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=i(e.width)&&t.minWidth&&t.minWidth>e.width,s=i(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,c=/sw|nw|w/.test(n),d=/nw|ne|n/.test(n);return a&&(e.width=t.minWidth),s&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),a&&c&&(e.left=l-t.minWidth),r&&c&&(e.left=l-t.maxWidth),s&&d&&(e.top=u-t.minHeight),o&&d&&(e.top=u-t.maxHeight),e.width||e.height||e.left||!e.top?!e.width&&!e.height&&!e.top&&e.left&&(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,n,i,r,o=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(r=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],n=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],i=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")],t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(i[t],10)||0);r.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),i=n.options,r=n._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),a=o&&e.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,s=o?0:n.sizeDiff.width,l={width:n.size.width-s,height:n.size.height-a},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,c=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,c&&u?{top:c,left:u}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,r,o,a,s,l,u=e(this).data("ui-resizable"),c=u.options,d=u.element,f=c.containment,h=f instanceof e?f.get(0):/parent/.test(f)?d.parent().get(0):f;h&&(u.containerElement=e(h),/document/.test(f)||f===document?(u.containerOffset={left:0,top:0},u.containerPosition={left:0,top:0},u.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),i=[],e(["Top","Right","Left","Bottom"]).each((function(e,r){i[e]=n(t.css("padding"+r))})),u.containerOffset=t.offset(),u.containerPosition=t.position(),u.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},r=u.containerOffset,o=u.containerSize.height,a=u.containerSize.width,s=e.ui.hasScroll(h,"left")?h.scrollWidth:a,l=e.ui.hasScroll(h)?h.scrollHeight:o,u.parentData={element:h,left:r.left,top:r.top,width:s,height:l}))},resize:function(t){var n,i,r,o,a=e(this).data("ui-resizable"),s=a.options,l=a.containerOffset,u=a.position,c=a._aspectRatio||t.shiftKey,d={top:0,left:0},f=a.containerElement;f[0]!==document&&/static/.test(f.css("position"))&&(d=l),u.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-d.left),c&&(a.size.height=a.size.width/a.aspectRatio),a.position.left=s.helper?l.left:0),u.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio),a.position.top=a._helper?l.top:0),a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top,n=Math.abs((a._helper,a.offset.left-d.left+a.sizeDiff.width)),i=Math.abs((a._helper?a.offset.top-d.top:a.offset.top-l.top)+a.sizeDiff.height),r=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),r&&o&&(n-=a.parentData.left),n+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-n,c&&(a.size.height=a.size.width/a.aspectRatio)),i+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-i,c&&(a.size.width=a.size.height*a.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.containerOffset,r=t.containerPosition,o=t.containerElement,a=e(t.helper),s=a.offset(),l=a.outerWidth()-t.sizeDiff.width,u=a.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(o.css("position"))&&e(this).css({left:s.left-r.left-i.left,width:l,height:u}),t._helper&&!n.animate&&/static/.test(o.css("position"))&&e(this).css({left:s.left-r.left-i.left,width:l,height:u})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable").options,n=function(t){e(t).each((function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})}))};"object"!=a(t.alsoResize)||t.alsoResize.parentNode?n(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],n(t.alsoResize)):e.each(t.alsoResize,(function(e){n(e)}))},resize:function(t,n){var i=e(this).data("ui-resizable"),r=i.options,o=i.originalSize,s=i.originalPosition,l={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-s.top||0,left:i.position.left-s.left||0},u=function(t,i){e(t).each((function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),o={},a=i&&i.length?i:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,(function(e,t){var n=(r[t]||0)+(l[t]||0);n&&n>=0&&(o[t]=n||null)})),t.css(o)}))};"object"!=a(r.alsoResize)||r.alsoResize.nodeType?u(r.alsoResize):e.each(r.alsoResize,(function(e,t){u(e,t)}))},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.size,r=t.originalSize,o=t.originalPosition,a=t.axis,s="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=s[0]||1,u=s[1]||1,c=Math.round((i.width-r.width)/l)*l,d=Math.round((i.height-r.height)/u)*u,f=r.width+c,h=r.height+d,p=n.maxWidth&&n.maxWidth<f,m=n.maxHeight&&n.maxHeight<h,g=n.minWidth&&n.minWidth>f,v=n.minHeight&&n.minHeight>h;n.grid=s,g&&(f+=l),v&&(h+=u),p&&(f-=l),m&&(h-=u),/^(se|s|e)$/.test(a)?(t.size.width=f,t.size.height=h):/^(ne)$/.test(a)?(t.size.width=f,t.size.height=h,t.position.top=o.top-d):/^(sw)$/.test(a)?(t.size.width=f,t.size.height=h,t.position.left=o.left-c):(t.size.width=f,t.size.height=h,t.position.top=o.top-d,t.position.left=o.left-c)}})}(o),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(t=e(n.options.filter,n.element[0])).addClass("ui-selectee"),t.each((function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})}))},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,i=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(i.filter,this.element[0]),this._trigger("start",t),e(i.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each((function(){var i=e.data(this,"selectable-item");i.startselected=!0,!t.metaKey&&!t.ctrlKey&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element}))})),e(t.target).parents().addBack().each((function(){var i,r=e.data(this,"selectable-item");if(r)return i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected"),r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1})))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,i=this,r=this.options,o=this.opos[0],a=this.opos[1],s=t.pageX,l=t.pageY;return o>s&&(n=s,s=o,o=n),a>l&&(n=l,l=a,a=n),this.helper.css({left:o,top:a,width:s-o,height:l-a}),this.selectees.each((function(){var n=e.data(this,"selectable-item"),u=!1;n&&n.element!==i.element[0]&&("touch"===r.tolerance?u=!(n.left>s||n.right<o||n.top>l||n.bottom<a):"fit"===r.tolerance&&(u=n.left>o&&n.right<s&&n.top>a&&n.bottom<l),u?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,i._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),i._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&!t.metaKey&&!t.ctrlKey&&!n.startselected&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))))})),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each((function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",t,{unselected:i.element})})),e(".ui-selecting",this.element[0]).each((function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-selecting").addClass("ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",t,{selected:i.element})})),this._trigger("stop",t),this.helper.remove(),!1}})}(o),function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=null,r=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each((function(){if(e.data(this,o.widgetName+"-item")===o)return i=e(this),!1})),e.data(t.target,o.widgetName+"-item")===o&&(i=e(t.target)),!!i&&(!(this.options.handle&&!n&&(e(this.options.handle,i).find("*").addBack().each((function(){this===t.target&&(r=!0)})),!r))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,n,i){var r,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",o.cursor)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,r,o,a=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-e(document).scrollTop()<a.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<a.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed)),t.pageX-e(document).scrollLeft()<a.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<a.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed))),!1!==s&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(r=(i=this.items[n]).item[0],(o=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(r===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===r||e.contains(this.placeholder[0],r)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],r))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft),top:r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,(function(){i._clear(t)}))}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each((function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))})),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each((function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")})),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=e.left,a=o+e.width,s=e.top,l=s+e.height,u=this.offset.click.top,c=this.offset.click.left,d=i+u>s&&i+u<l&&t+c>o&&t+c<a;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<a&&s<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&i,o=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return!!r&&(this.floating?a&&"right"===a||"down"===o?2:1:o&&("down"===o?2:1))},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,i,r,o,a=[],s=[],l=this._connectWith();if(l&&t)for(n=l.length-1;n>=0;n--)for(i=(r=e(l[n])).length-1;i>=0;i--)(o=e.data(r[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&s.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;n>=0;n--)s[n][0].each((function(){a.push(this)}));return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,(function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0}))},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,r,o,a,s,l,u,c=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(n=f.length-1;n>=0;n--)for(i=(r=e(f[n])).length-1;i>=0;i--)(o=e.data(r[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&(d.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(n=d.length-1;n>=0;n--)for(a=d[n][1],i=0,u=(s=d[n][0]).length;i<u;i++)(l=e(s[i])).data(this.widgetName+"-item",a),c.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var n,i,r,o;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),n=this.items.length-1;n>=0;n--)(i=this.items[n]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=r.outerWidth(),i.height=r.outerHeight()),o=r.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){var n,i=(t=t||this).options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=e(document.createElement(t.currentItem[0].nodeName)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(i.style.visibility="hidden"),i},update:function(e,r){n&&!i.forcePlaceholderSize||(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n,i,r,o,a,s,l,u,c,d=null,f=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(d&&e.contains(this.containers[n].element[0],d.element[0]))continue;d=this.containers[n],f=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1;else{for(r=1e4,o=null,a=this.containers[f].floating?"left":"top",s=this.containers[f].floating?"width":"height",l=this.positionAbs[a]+this.offset.click[a],i=this.items.length-1;i>=0;i--)e.contains(this.containers[f].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(u=this.items[i].item.offset()[a],c=!1,Math.abs(u-l)>Math.abs(u+this.items[i][s]-l)&&(c=!0,u+=this.items[i][s]),Math.abs(u-l)<r&&(r=Math.abs(u-l),o=this.items[i],this.direction=c?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[f],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[f].element,!0),this._trigger("change",t,this._uiHash()),this.containers[f]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],n=e(r.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r=this.options,o=t.pageX,a=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"===this.cssPosition&&(this.scrollParent[0]===document||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/r.grid[1])*r.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay((function(){r===this.counter&&this.refreshPositions(!i)}))},_clear:function(t,n){this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!n&&r.push((function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!n&&r.push((function(e){this._trigger("update",e,this._uiHash())})),this!==this.currentContainer&&(n||(r.push((function(e){this._trigger("remove",e,this._uiHash())})),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!n){for(this._trigger("beforeStop",t,this._uiHash()),i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!n){for(i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(o),function(e,t){var n=0,i={},r={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.0",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),!t.collapsible&&(!1===t.active||null==t.active)&&(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each((function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")})),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each((function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")})),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){"active"!==e?("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"===e&&!t&&!1===this.options.active&&this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)):this._activate(t)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,i=this.headers.length,r=this.headers.index(t.target),o=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:o=this.headers[(r+1)%i];break;case n.LEFT:case n.UP:o=this.headers[(r-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:o=this.headers[0];break;case n.END:o=this.headers[i-1]}o&&(e(t.target).attr("tabIndex",-1),e(o).attr("tabIndex",0),o.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),(!1===t.active&&!0===t.collapsible||!this.headers.length)&&(t.active=!1,this.active=e()),!1===t.active?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,i=this.options,r=i.heightStyle,o=this.element.parent(),a=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n);this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each((function(t){var n=e(this),i=n.attr("id"),r=n.next(),o=r.attr("id");i||(i=a+"-header-"+t,n.attr("id",i)),o||(o=a+"-panel-"+t,r.attr("id",o)),n.attr("aria-controls",o),r.attr("aria-labelledby",i)})).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===r?(t=o.height(),this.element.siblings(":visible").each((function(){var n=e(this),i=n.css("position");"absolute"!==i&&"fixed"!==i&&(t-=n.outerHeight(!0))})),this.headers.each((function(){t-=e(this).outerHeight(!0)})),this.headers.next().each((function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===r&&(t=0,this.headers.next().each((function(){t=Math.max(t,e(this).css("height","").height())})).height(t))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),(function(e,t){n[t]="_eventHandler"})),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,i=this.active,r=e(t.currentTarget),o=r[0]===i[0],a=o&&n.collapsible,s=a?e():r.next(),l=i.next(),u={oldHeader:i,oldPanel:l,newHeader:a?e():r,newPanel:s};t.preventDefault(),o&&!n.collapsible||!1===this._trigger("beforeActivate",t,u)||(n.active=!a&&this.headers.index(r),this.active=o?e():r,this._toggle(u),i.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),o||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=i,this.options.animate?this._animate(n,i,t):(i.hide(),n.show(),this._toggleComplete(t)),i.attr({"aria-expanded":"false","aria-hidden":"true"}),i.prev().attr("aria-selected","false"),n.length&&i.length?i.prev().attr("tabIndex",-1):n.length&&this.headers.filter((function(){return 0===e(this).attr("tabIndex")})).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,n){var o,a,s,l=this,u=0,c=e.length&&(!t.length||e.index()<t.index()),d=this.options.animate||{},f=c&&d.down||d,h=function(){l._toggleComplete(n)};return"number"==typeof f&&(s=f),"string"==typeof f&&(a=f),a=a||f.easing||d.easing,s=s||f.duration||d.duration,t.length?e.length?(o=e.show().outerHeight(),t.animate(i,{duration:s,easing:a,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(r,{duration:s,easing:a,complete:h,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?u+=n.now:"content"!==l.options.heightStyle&&(n.now=Math.round(o-t.outerHeight()-u),u=0)}})):t.animate(i,s,a,h):e.animate(r,s,a,h)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(o),function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.10.0",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,i;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var o=e.ui.keyCode;switch(r.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",r);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",r);break;case o.UP:t=!0,this._keyEvent("previous",r);break;case o.DOWN:t=!0,this._keyEvent("next",r);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(t=!0,r.preventDefault(),this.menu.select(r));break;case o.TAB:this.menu.active&&this.menu.select(r);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(r),r.preventDefault());break;default:n=!0,this._searchTimeout(r)}},keypress:function(i){if(t)return t=!1,void i.preventDefault();if(!n){var r=e.ui.keyCode;switch(i.keyCode){case r.PAGE_UP:this._move("previousPage",i);break;case r.PAGE_DOWN:this._move("nextPage",i);break;case r.UP:this._keyEvent("previous",i);break;case r.DOWN:this._keyEvent("next",i)}}},input:function(e){if(i)return i=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this._appendTo()).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur}));var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay((function(){var t=this;this.document.one("mousedown",(function(i){i.target!==t.element[0]&&i.target!==n&&!e.contains(n,i.target)&&t.close()}))}))},menufocus:function(t,n){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));var i=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:i})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay((function(){this.previous=i,this.selectedItem=n}))),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_isMultiLine:function(){return!!this.element.is("textarea")||!this.element.is("input")&&this.element.prop("isContentEditable")},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,r){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(i){t===n&&e.__response(i),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)}))},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,(function(e,n){i._renderItemData(t,n)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,(function(e){return i.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(o),function(e,t){var n,i,r,o,a="ui-button ui-widget ui-state-default ui-corner-all",s="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout((function(){t.button("refresh")}),1)},u=function(t){var n=t.name,i=t.form,r=e([]);return n&&(n=n.replace(/'/g,"\\'"),r=i?e(i).find("[name='"+n+"']"):e("[name='"+n+"']",t.ownerDocument).filter((function(){return!this.form}))),r};e.widget("ui.button",{version:"1.10.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,s=this.options,c="checkbox"===this.type||"radio"===this.type,d=c?"":"ui-state-active",f="ui-state-focus";null===s.label&&(s.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(a).attr("role","button").bind("mouseenter"+this.eventNamespace,(function(){s.disabled||this===n&&e(this).addClass("ui-state-active")})).bind("mouseleave"+this.eventNamespace,(function(){s.disabled||e(this).removeClass(d)})).bind("click"+this.eventNamespace,(function(e){s.disabled&&(e.preventDefault(),e.stopImmediatePropagation())})),this.element.bind("focus"+this.eventNamespace,(function(){t.buttonElement.addClass(f)})).bind("blur"+this.eventNamespace,(function(){t.buttonElement.removeClass(f)})),c&&(this.element.bind("change"+this.eventNamespace,(function(){o||t.refresh()})),this.buttonElement.bind("mousedown"+this.eventNamespace,(function(e){s.disabled||(o=!1,i=e.pageX,r=e.pageY)})).bind("mouseup"+this.eventNamespace,(function(e){s.disabled||i===e.pageX&&r===e.pageY||(o=!0)}))),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(s.disabled||o)return!1})):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(s.disabled||o)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];u(n).not(n).map((function(){return e(this).button("widget")[0]})).removeClass("ui-state-active").attr("aria-pressed","false")})):(this.buttonElement.bind("mousedown"+this.eventNamespace,(function(){if(s.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",(function(){n=null}))})).bind("mouseup"+this.eventNamespace,(function(){if(s.disabled)return!1;e(this).removeClass("ui-state-active")})).bind("keydown"+this.eventNamespace,(function(t){if(s.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")})).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,(function(){e(this).removeClass("ui-state-active")})),this.buttonElement.is("a")&&this.buttonElement.keyup((function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()}))),this._setOption("disabled",s.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),(n=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(a+" ui-state-hover ui-state-active  "+s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t),"disabled"!==e?this._resetButton():t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?u(this.element[0]).each((function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")})):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var t=this.buttonElement.removeClass(s),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,r=i.primary&&i.secondary,o=[];i.primary||i.secondary?(this.options.text&&o.push("ui-button-text-icon"+(r?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(o.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),e.widget("ui.buttonset",{version:"1.10.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(o),function(e,t){function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=i(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",(function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")})).delegate(n,"mouseover",(function(){e.datepicker._isDisabledDatepicker(o.inline?t.parent()[0]:o.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}))}function r(t,n){for(var i in e.extend(t,n),n)null==n[i]&&(t[i]=n[i]);return t}e.extend(e.ui,{datepicker:{version:"1.10.0"}});var o,s="datepicker",l=(new Date).getTime();e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var i,r,o;r="div"===(i=t.nodeName.toLowerCase())||"span"===i,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(o=this._newInst(e(t),r)).settings=e.extend({},n||{}),"input"===i?this._connectDatepicker(t,o):r&&this._inlineDatepicker(t,o)},_newInst:function(t,n){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?i(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var i=e(t);n.append=e([]),n.trigger=e([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),e.data(t,s,n),n.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var i,r,o,a=this._get(n,"appendText"),s=this._get(n,"isRTL");n.append&&n.append.remove(),a&&(n.append=e("<span class='"+this._appendClass+"'>"+a+"</span>"),t[s?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),("focus"===(i=this._get(n,"showOn"))||"both"===i)&&t.focus(this._showDatepicker),"button"!==i&&"both"!==i||(r=this._get(n,"buttonText"),o=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:o,alt:r,title:r}):e("<button type='button'></button>").addClass(this._triggerClass).html(o?e("<img/>").attr({src:o,alt:r,title:r}):r)),t[s?"before":"after"](n.trigger),n.trigger.click((function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,i,r,o=new Date(2009,11,20),a=this._get(e,"dateFormat");a.match(/[DM]/)&&(t=function(e){for(n=0,i=0,r=0;r<e.length;r++)e[r].length>n&&(n=e[r].length,i=r);return i},o.setMonth(t(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(t,n){var i=e(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),e.data(t,s,n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block"))},_dialogDatepicker:function(t,n,i,o,a){var l,u,c,d,f,h=this._dialogInst;return h||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),(h=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],s,h)),r(h.settings,o||{}),n=n&&n.constructor===Date?this._formatDate(h,n):n,this._dialogInput.val(n),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(u=document.documentElement.clientWidth,c=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,f=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[u/2-100+d,c/2-150+f]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],s,h),this},_destroyDatepicker:function(t){var n,i=e(t),r=e.data(t,s);i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),e.removeData(t,s),"input"===n?(r.append.remove(),r.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&i.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var n,i,r=e(t),o=e.data(t,s);r.hasClass(this.markerClassName)&&("input"===(n=t.nodeName.toLowerCase())?(t.disabled=!1,o.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==n&&"span"!==n||((i=r.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e})))},_disableDatepicker:function(t){var n,i,r=e(t),o=e.data(t,s);r.hasClass(this.markerClassName)&&("input"===(n=t.nodeName.toLowerCase())?(t.disabled=!0,o.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==n&&"span"!==n||((i=r.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e})),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,s)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,i,o){var a,s,l,u,c=this._getInst(n);if(2===arguments.length&&"string"==typeof i)return"defaults"===i?e.extend({},e.datepicker._defaults):c?"all"===i?e.extend({},c.settings):this._get(c,i):null;a=i||{},"string"==typeof i&&((a={})[i]=o),c&&(this._curInst===c&&this._hideDatepicker(),s=this._getDateDatepicker(n,!0),l=this._getMinMaxDate(c,"min"),u=this._getMinMaxDate(c,"max"),r(c.settings,a),null!==l&&a.dateFormat!==t&&a.minDate===t&&(c.settings.minDate=this._formatDate(c,l)),null!==u&&a.dateFormat!==t&&a.maxDate===t&&(c.settings.maxDate=this._formatDate(c,u)),"disabled"in a&&(a.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(e(n),c),this._autoSize(c),this._setDate(c,s),this._updateAlternate(c),this._updateDatepicker(c))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,i,r,o=e.datepicker._getInst(t.target),a=!0,s=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),a=!1;break;case 13:return(r=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",o.dpDiv))[0]&&e.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,r[0]),(n=e.datepicker._get(o,"onSelect"))?(i=e.datepicker._formatDate(o),n.apply(o.input?o.input[0]:null,[i,o])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),a=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),a=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?1:-1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),a=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?-1:1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),a=t.ctrlKey||t.metaKey;break;default:a=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):a=!1;a&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,i,r=e.datepicker._getInst(t.target);if(e.datepicker._get(r,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(r,"dateFormat")),i=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||i<" "||!n||n.indexOf(i)>-1},_doKeyUp:function(t){var n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n))&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(e){}return!0},_showDatepicker:function(t){var n,i,o,a,s,l,u;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)||(n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),!1!==(o=(i=e.datepicker._get(n,"beforeShow"))?i.apply(t,[t,n]):{})&&(r(n.settings,o),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),a=!1,e(t).parents().each((function(){return!(a|="fixed"===e(this).css("position"))})),s={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),s=e.datepicker._checkOffset(n,s,a),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":a?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),n.inline||(l=e.datepicker._get(n,"showAnim"),u=e.datepicker._get(n,"duration"),n.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?n.dpDiv.show(l,e.datepicker._get(n,"showOptions"),u):n.dpDiv[l||"show"](l?u:null),n.input.is(":visible")&&!n.input.is(":disabled")&&n.input.focus(),e.datepicker._curInst=n)))},_updateDatepicker:function(t){this.maxRows=4,o=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,i=this._getNumberOfMonths(t),r=i[1];t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&t.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",17*r+"em"),t.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!==document.activeElement&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout((function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null}),0))},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(t,n,i){var r=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:e(document).scrollLeft()),u=document.documentElement.clientHeight+(i?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?r-a:0,n.left-=i&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=i&&n.top===t.input.offset().top+s?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+r>l&&l>r?Math.abs(n.left+r-l):0),n.top-=Math.min(n.top,n.top+o>u&&u>o?Math.abs(o+s):0),n},_findPos:function(t){for(var n,i=this._getInst(t),r=this._get(i,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[r?"previousSibling":"nextSibling"];return[(n=e(t).offset()).left,n.top]},_hideDatepicker:function(t){var n,i,r,o,a=this._curInst;!a||t&&a!==e.data(t,s)||this._datepickerShowing&&(n=this._get(a,"showAnim"),i=this._get(a,"duration"),r=function(){e.datepicker._tidyDialog(a)},e.effects&&(e.effects.effect[n]||e.effects[n])?a.dpDiv.hide(n,e.datepicker._get(a,"showOptions"),i,r):a.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,r),n||r(),this._datepickerShowing=!1,(o=this._get(a,"onClose"))&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),i=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&0===n.parents("#"+e.datepicker._mainDivId).length&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==i)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,i){var r=e(t),o=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(o,n+("M"===i?this._get(o,"showCurrentAtPos"):0),i),this._updateDatepicker(o))},_gotoToday:function(t){var n,i=e(t),r=this._getInst(i[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(n=new Date,r.selectedDay=n.getDate(),r.drawMonth=r.selectedMonth=n.getMonth(),r.drawYear=r.selectedYear=n.getFullYear()),this._notifyChange(r),this._adjustDate(i)},_selectMonthYear:function(t,n,i){var r=e(t),o=this._getInst(r[0]);o["selected"+("M"===i?"Month":"Year")]=o["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(r)},_selectDay:function(t,n,i,r){var o,a=e(t);e(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||((o=this._getInst(a[0])).selectedDay=o.currentDay=e("a",r).html(),o.selectedMonth=o.currentMonth=n,o.selectedYear=o.currentYear=i,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var i,r=e(t),o=this._getInst(r[0]);n=null!=n?n:this._formatDate(o),o.input&&o.input.val(n),this._updateAlternate(o),(i=this._get(o,"onSelect"))?i.apply(o.input?o.input[0]:null,[n,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=a(o.input[0])&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,i,r,o=this._get(t,"altField");o&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),r=this.formatDate(n,i,this._getFormatConfig(t)),e(o).each((function(){e(this).val(r)})))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,i){if(null==t||null==n)throw"Invalid arguments";if(""===(n="object"==a(n)?n.toString():n+""))return null;var r,o,s,l,u=0,c=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),f=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,h=(i?i.dayNames:null)||this._defaults.dayNames,p=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,m=(i?i.monthNames:null)||this._defaults.monthNames,g=-1,v=-1,y=-1,b=-1,w=!1,x=function(e){var n=r+1<t.length&&t.charAt(r+1)===e;return n&&r++,n},C=function(e){var t=x(e),i=new RegExp("^\\d{1,"+("@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2)+"}"),r=n.substring(u).match(i);if(!r)throw"Missing number at position "+u;return u+=r[0].length,parseInt(r[0],10)},k=function(t,i,r){var o=-1,a=e.map(x(t)?r:i,(function(e,t){return[[t,e]]})).sort((function(e,t){return-(e[1].length-t[1].length)}));if(e.each(a,(function(e,t){var i=t[1];if(n.substr(u,i.length).toLowerCase()===i.toLowerCase())return o=t[0],u+=i.length,!1})),-1!==o)return o+1;throw"Unknown name at position "+u},_=function(){if(n.charAt(u)!==t.charAt(r))throw"Unexpected literal at position "+u;u++};for(r=0;r<t.length;r++)if(w)"'"!==t.charAt(r)||x("'")?_():w=!1;else switch(t.charAt(r)){case"d":y=C("d");break;case"D":k("D",f,h);break;case"o":b=C("o");break;case"m":v=C("m");break;case"M":v=k("M",p,m);break;case"y":g=C("y");break;case"@":g=(l=new Date(C("@"))).getFullYear(),v=l.getMonth()+1,y=l.getDate();break;case"!":g=(l=new Date((C("!")-this._ticksTo1970)/1e4)).getFullYear(),v=l.getMonth()+1,y=l.getDate();break;case"'":x("'")?_():w=!0;break;default:_()}if(u<n.length&&(s=n.substr(u),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===g?g=(new Date).getFullYear():g<100&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g<=d?0:-100)),b>-1)for(v=1,y=b;;){if(y<=(o=this._getDaysInMonth(g,v-1)))break;v++,y-=o}if((l=this._daylightSavingAdjust(new Date(g,v-1,y))).getFullYear()!==g||l.getMonth()+1!==v||l.getDate()!==y)throw"Invalid date";return l},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var i,r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,o=(n?n.dayNames:null)||this._defaults.dayNames,a=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,l=function(t){var n=i+1<e.length&&e.charAt(i+1)===t;return n&&i++,n},u=function(e,t,n){var i=""+t;if(l(e))for(;i.length<n;)i="0"+i;return i},c=function(e,t,n,i){return l(e)?i[t]:n[t]},d="",f=!1;if(t)for(i=0;i<e.length;i++)if(f)"'"!==e.charAt(i)||l("'")?d+=e.charAt(i):f=!1;else switch(e.charAt(i)){case"d":d+=u("d",t.getDate(),2);break;case"D":d+=c("D",t.getDay(),r,o);break;case"o":d+=u("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=u("m",t.getMonth()+1,2);break;case"M":d+=c("M",t.getMonth(),a,s);break;case"y":d+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":f=!0;break;default:d+=e.charAt(i)}return d},_possibleChars:function(e){var t,n="",i=!1,r=function(n){var i=t+1<e.length&&e.charAt(t+1)===n;return i&&t++,i};for(t=0;t<e.length;t++)if(i)"'"!==e.charAt(t)||r("'")?n+=e.charAt(t):i=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":r("'")?n+="'":i=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,n){return e.settings[n]!==t?e.settings[n]:this._defaults[n]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),o=r,a=this._getFormatConfig(e);try{o=this.parseDate(n,i,a)||r}catch(e){i=t?"":i}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=i?o.getDate():0,e.currentMonth=i?o.getMonth():0,e.currentYear=i?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,i){var r=null==n||""===n?i:"string"==typeof n?function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(e){}for(var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,r=i.getFullYear(),o=i.getMonth(),a=i.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(n);l;){switch(l[2]||"d"){case"d":case"D":a+=parseInt(l[1],10);break;case"w":case"W":a+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(r,o));break;case"y":case"Y":r+=parseInt(l[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(r,o))}l=s.exec(n)}return new Date(r,o,a)}(n):"number"==typeof n?isNaN(n)?i:function(e){var t=new Date;return t.setDate(t.getDate()+e),t}(n):new Date(n.getTime());return(r=r&&"Invalid Date"===r.toString()?i:r)&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,r=e.selectedMonth,o=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth(),e.drawYear=e.selectedYear=e.currentYear=a.getFullYear(),(r!==e.selectedMonth||o!==e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map((function(){var t={prev:function(){window["DP_jQuery_"+l].datepicker._adjustDate(i,-n,"M")},next:function(){window["DP_jQuery_"+l].datepicker._adjustDate(i,+n,"M")},hide:function(){window["DP_jQuery_"+l].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+l].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+l].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+l].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+l].datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])}))},_generateHTML:function(e){var t,n,i,r,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b,w,x,C,k,_,S,T,D,M,E,N,A,P,L,O,I,R,B,z,F,H=new Date,W=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),j=this._get(e,"isRTL"),U=this._get(e,"showButtonPanel"),V=this._get(e,"hideIfNoPrevNext"),$=this._get(e,"navigationAsDateFormat"),q=this._getNumberOfMonths(e),X=this._get(e,"showCurrentAtPos"),Y=this._get(e,"stepMonths"),K=1!==q[0]||1!==q[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(e,"min"),Z=this._getMinMaxDate(e,"max"),Q=e.drawMonth-X,ee=e.drawYear;if(Q<0&&(Q+=12,ee--),Z)for(t=this._daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-q[0]*q[1]+1,Z.getDate())),t=J&&t<J?J:t;this._daylightSavingAdjust(new Date(ee,Q,1))>t;)--Q<0&&(Q=11,ee--);for(e.drawMonth=Q,e.drawYear=ee,n=this._get(e,"prevText"),n=$?this.formatDate(n,this._daylightSavingAdjust(new Date(ee,Q-Y,1)),this._getFormatConfig(e)):n,i=this._canAdjustMonth(e,-1,ee,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"e":"w")+"'>"+n+"</span></a>":V?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"e":"w")+"'>"+n+"</span></a>",r=this._get(e,"nextText"),r=$?this.formatDate(r,this._daylightSavingAdjust(new Date(ee,Q+Y,1)),this._getFormatConfig(e)):r,o=this._canAdjustMonth(e,1,ee,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"w":"e")+"'>"+r+"</span></a>":V?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"w":"e")+"'>"+r+"</span></a>",a=this._get(e,"currentText"),s=this._get(e,"gotoCurrent")&&e.currentDay?G:W,a=$?this.formatDate(a,s,this._getFormatConfig(e)):a,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",u=U?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(j?l:"")+(this._isInRange(e,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(j?"":l)+"</div>":"",c=parseInt(this._get(e,"firstDay"),10),c=isNaN(c)?0:c,d=this._get(e,"showWeek"),f=this._get(e,"dayNames"),h=this._get(e,"dayNamesMin"),p=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",C=0;C<q[0];C++){for(k="",this.maxRows=4,_=0;_<q[1];_++){if(S=this._daylightSavingAdjust(new Date(ee,Q,e.selectedDay)),T=" ui-corner-all",D="",K){if(D+="<div class='ui-datepicker-group",q[1]>1)switch(_){case 0:D+=" ui-datepicker-group-first",T=" ui-corner-"+(j?"right":"left");break;case q[1]-1:D+=" ui-datepicker-group-last",T=" ui-corner-"+(j?"left":"right");break;default:D+=" ui-datepicker-group-middle",T=""}D+="'>"}for(D+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===C?j?o:i:"")+(/all|right/.test(T)&&0===C?j?i:o:"")+this._generateMonthYearHeader(e,Q,ee,J,Z,C>0||_>0,p,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",M=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;x<7;x++)M+="<th"+((x+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+f[E=(x+c)%7]+"'>"+h[E]+"</span></th>";for(D+=M+"</tr></thead><tbody>",N=this._getDaysInMonth(ee,Q),ee===e.selectedYear&&Q===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,N)),A=(this._getFirstDayOfMonth(ee,Q)-c+7)%7,P=Math.ceil((A+N)/7),L=K&&this.maxRows>P?this.maxRows:P,this.maxRows=L,O=this._daylightSavingAdjust(new Date(ee,Q,1-A)),I=0;I<L;I++){for(D+="<tr>",R=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(O)+"</td>":"",x=0;x<7;x++)B=g?g.apply(e.input?e.input[0]:null,[O]):[!0,""],F=(z=O.getMonth()!==Q)&&!y||!B[0]||J&&O<J||Z&&O>Z,R+="<td class='"+((x+c+6)%7>=5?" ui-datepicker-week-end":"")+(z?" ui-datepicker-other-month":"")+(O.getTime()===S.getTime()&&Q===e.selectedMonth&&e._keyEvent||b.getTime()===O.getTime()&&b.getTime()===S.getTime()?" "+this._dayOverClass:"")+(F?" "+this._unselectableClass+" ui-state-disabled":"")+(z&&!v?"":" "+B[1]+(O.getTime()===G.getTime()?" "+this._currentClass:"")+(O.getTime()===W.getTime()?" ui-datepicker-today":""))+"'"+(z&&!v||!B[2]?"":" title='"+B[2]+"'")+(F?"":" data-handler='selectDay' data-event='click' data-month='"+O.getMonth()+"' data-year='"+O.getFullYear()+"'")+">"+(z&&!v?"&#xa0;":F?"<span class='ui-state-default'>"+O.getDate()+"</span>":"<a class='ui-state-default"+(O.getTime()===W.getTime()?" ui-state-highlight":"")+(O.getTime()===G.getTime()?" ui-state-active":"")+(z?" ui-priority-secondary":"")+"' href='#'>"+O.getDate()+"</a>")+"</td>",O.setDate(O.getDate()+1),O=this._daylightSavingAdjust(O);D+=R+"</tr>"}++Q>11&&(Q=0,ee++),k+=D+="</tbody></table>"+(K?"</div>"+(q[0]>0&&_===q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}w+=k}return w+=u,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,i,r,o,a,s){var l,u,c,d,f,h,p,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(o||!g)w+="<span class='ui-datepicker-month'>"+a[t]+"</span>";else{for(l=i&&i.getFullYear()===n,u=r&&r.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=i.getMonth())&&(!u||c<=r.getMonth())&&(w+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+s[c]+"</option>");w+="</select>"}if(y||(b+=w+(!o&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!v)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(d=this._get(e,"yearRange").split(":"),f=(new Date).getFullYear(),h=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?f+parseInt(e,10):parseInt(e,10);return isNaN(t)?f:t},p=h(d[0]),m=Math.max(p,h(d[1]||"")),p=i?Math.max(p,i.getFullYear()):p,m=r?Math.min(m,r.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=m;p++)e.yearshtml+="<option value='"+p+"'"+(p===n?" selected='selected'":"")+">"+p+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!o&&g&&v?"":"&#xa0;")+w),b+="</div>"},_adjustInstDate:function(e,t,n){var i=e.drawYear+("Y"===n?t:0),r=e.drawMonth+("M"===n?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(i,r))+("D"===n?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,r,o)));e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),r=n&&t<n?n:t;return i&&r>i?i:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var r=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(n,i+(t<0?t:r[0]*r[1]),1));return t<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var n,i,r=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),a=null,s=null,l=this._get(e,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),a=parseInt(n[0],10)+i,s=parseInt(n[1],10)+i),(!r||t.getTime()>=r.getTime())&&(!o||t.getTime()<=o.getTime())&&(!a||t.getFullYear()>=a)&&(!s||t.getFullYear()<=s)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==a(t)?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each((function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)})):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.0",window["DP_jQuery_"+l]=e}(o),function(e,t){var n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.0",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,(function(){n._trigger("close",t)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){this._isOpen?this._moveToTop()&&this._focusTabbable():(this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show),this._focusTabbable(),this._isOpen=!0,this._trigger("open"),this._trigger("focus"))},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement;this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),r=n.filter(":last");t.target!==r[0]&&t.target!==this.uiDialog[0]||t.shiftKey?(t.target===i[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(r.focus(1),t.preventDefault()):(i.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)?this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(n,(function(n,i){var r,o;i=e.isFunction(i)?{click:i,text:n}:i,i=e.extend({type:"button"},i),r=i.click,i.click=function(){r.apply(t.element[0],arguments)},o={icons:i.icons,text:i.showText},delete i.icons,delete i.showText,e("<button></button>",i).button(o).appendTo(t.uiButtonSet)})),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,r){e(this).addClass("ui-dialog-dragging"),n._trigger("dragStart",i,t(r))},drag:function(e,i){n._trigger("drag",e,t(i))},stop:function(r,o){i.position=[o.position.left-n.document.scrollLeft(),o.position.top-n.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),n._trigger("dragStop",r,t(o))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var n=this,i=this.options,r=i.resizable,o=this.uiDialog.css("position"),a="string"==typeof r?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:a,start:function(i,r){e(this).addClass("ui-dialog-resizing"),n._trigger("resizeStart",i,t(r))},resize:function(e,i){n._trigger("resize",e,t(i))},stop:function(r,o){i.height=e(this).height(),i.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),n._trigger("resizeStop",r,t(o))}}).css("position",o)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var r=this,o=!1,a={};e.each(t,(function(e,t){r._setOption(e,t),e in n&&(o=!0),e in i&&(a[e]=t)})),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(e,t){var n,i,r=this.uiDialog;"dialogClass"===e&&r.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&((n=r.is(":data(ui-draggable)"))&&!t&&r.draggable("destroy"),!n&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((i=r.is(":data(ui-resizable)"))&&!t&&r.resizable("destroy"),i&&"string"==typeof t&&r.resizable("option","handles",t),!i&&!1!==t&&this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),t=Math.max(0,i.minHeight-e),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none","auto"===i.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_createOverlay:function(){this.options.modal&&(e.ui.dialog.overlayInstances||this._delay((function(){e.ui.dialog.overlayInstances&&this._on(this.document,{focusin:function(t){e(t.target).closest(".ui-dialog").length||(t.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable())}})})),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this.document[0].body),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++)},_destroyOverlay:function(){this.options.modal&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this._off(this.document,"focusin"),this.overlay.remove())}}),e.ui.dialog.overlayInstances=0,!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,n=this.options.position,i=[],r=[0,0];n?(("string"==typeof n||"object"==a(n)&&"0"in n)&&(1===(i=n.split?n.split(" "):[n[0],n[1]]).length&&(i[1]=i[0]),e.each(["left","top"],(function(e,t){+i[e]===i[e]&&(r[e]=i[e],i[e]=t)})),n={my:i[0]+(r[0]<0?r[0]:"+"+r[0])+" "+i[1]+(r[1]<0?r[1]:"+"+r[1]),at:i.join(" ")}),n=e.extend({},e.ui.dialog.prototype.options.position,n)):n=e.ui.dialog.prototype.options.position,(t=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.position(n),t||this.uiDialog.hide()}})}(o),function(e,t){e.widget("ui.menu",{version:"1.10.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy((function(e){this.options.disabled&&e.preventDefault()}),this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),n.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay((function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each((function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()})),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,r,o,a,s,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,r=this.previousFilter||"",o=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),o===r?a=!0:o=r+o,s=new RegExp("^"+n(o),"i"),i=this.activeMenu.children(".ui-menu-item").filter((function(){return s.test(e(this).children("a").text())})),(i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(o=String.fromCharCode(t.keyCode),s=new RegExp("^"+n(o),"i"),i=this.activeMenu.children(".ui-menu-item").filter((function(){return s.test(e(this).children("a").text())}))),i.length?(this.focus(t,i),i.length>1?(this.previousFilter=o,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),i=t.prev("a"),r=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",i.attr("id"))})),(t=i.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each((function(){var t=e(this);/[^\-\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")})),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(n=t.children(".ui-menu")).length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,r,o,a,s;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-n-i,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),s=t.height(),r<0?this.activeMenu.scrollTop(o+r):r+s>a&&this.activeMenu.scrollTop(o+r-a+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay((function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(n,i)},nextPage:function(t){var n,i,r;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i-r<0})),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var n,i,r;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i+r>0})),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(o),function(e,t){e.widget("ui.progressbar",{version:"1.10.0",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){if(e===t)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=!1===e,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(o),function(e,t){e.widget("ui.slider",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){var t,n,i=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this.range=e([]),i.range&&(!0===i.range&&(i.values?i.values.length&&2!==i.values.length?i.values=[i.values[0],i.values[0]]:e.isArray(i.values)&&(i.values=i.values.slice(0)):i.values=[this._valueMin(),this._valueMin()]),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===i.range||"max"===i.range?" ui-slider-range-"+i.range:""))),n=i.values&&i.values.length||1,t=r.length;t<n;t++)o.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=r.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click((function(e){e.preventDefault()})).mouseenter((function(){i.disabled||e(this).addClass("ui-state-hover")})).mouseleave((function(){e(this).removeClass("ui-state-hover")})).focus((function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))})).blur((function(){e(this).removeClass("ui-state-focus")})),this.handles.each((function(t){e(this).data("ui-slider-handle-index",t)})),this._setOption("disabled",i.disabled),this._on(this.handles,this._handleEvents),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,i,r,o,a,s,l,u=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,this.handles.each((function(t){var n=Math.abs(i-u.values(t));(r>n||r===n&&(t===u._lastChangedValue||u.values(t)===c.min))&&(r=n,o=e(this),a=t)})),!1!==this._start(t,a)&&(this._mouseSliding=!0,this._handleIndex=a,o.addClass("ui-state-active").focus(),s=o.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-s.left-o.width()/2,top:t.pageY-s.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,r,o;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(i=n/t)>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),o=this._valueMin()+i*r,this._trimAlignValue(o)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,r,o;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&n>i||1===t&&n<i)&&(n=i),n!==this.values(t)&&((r=this.values())[t]=n,o=this._trigger("slide",e,{handle:this.handles[t],value:n,values:r}),i=this.values(t?0:1),!1!==o&&this.values(t,n,!0))):n!==this.value()&&(!1!==(o=this._trigger("slide",e,{handle:this.handles[t],value:n}))&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,n){var i,r,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,r=arguments[0],o=0;o<i.length;o+=1)i[o]=this._trimAlignValue(r[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,n){var i,r=0;switch(e.isArray(this.options.values)&&(r=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0)):this.handles.prop("disabled",!1);break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;i<r;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,r,o,a=this.options.range,s=this.options,l=this,u=!this._animateOff&&s.animate,c={};this.options.values&&this.options.values.length?this.handles.each((function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[u?"animate":"css"](c,s.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[u?"animate":"css"]({left:n+"%"},s.animate),1===i&&l.range[u?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:s.animate})):(0===i&&l.range.stop(1,1)[u?"animate":"css"]({bottom:n+"%"},s.animate),1===i&&l.range[u?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:s.animate}))),t=n})):(i=this.value(),r=this._valueMin(),o=this._valueMax(),n=o!==r?(i-r)/(o-r)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[u?"animate":"css"](c,s.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:n+"%"},s.animate),"max"===a&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:s.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:n+"%"},s.animate),"max"===a&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:s.animate}))},_handleEvents:{keydown:function(t){var n,i,r,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),!1===this._start(t,o)))return}switch(r=this.options.step,n=i=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax())return;i=this._trimAlignValue(n+r);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin())return;i=this._trimAlignValue(n-r)}this._slide(t,o,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})}(o),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.0",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],(function(e,i){var r=n.attr(i);void 0!==r&&r.length&&(t[i]=r)})),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e))},mousewheel:function(e,t){if(t)return!(!this.spinning&&!this._start(e))&&(this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay((function(){this.spinning&&this._stop(e)}),100),void e.preventDefault())},"mousedown .ui-spinner-button":function(t){function n(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=i,this._delay((function(){this.previous=i})))}var i;i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,n.call(this)})),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,i=e.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,n.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay((function(){this._repeat(40,t,n)}),e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:n})||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1},_adjustValue:function(e){var t,n,i=this.options;return n=e-(t=null!==i.min?i.min:0),e=t+(n=Math.round(n/i.step)*i.step),e=parseFloat(e.toFixed(this._precision())),null!==i.max&&e>i.max?i.max:null!==i.min&&e<i.min?i.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var n=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(n))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t((function(e){this._super(e),this._value(this.element.val())})),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;""!==e&&(null!==(n=this._parse(e))&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t((function(e){this._stepUp(e)})),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t((function(e){this._stepDown(e)})),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t((function(e){this._stepUp((e||1)*this.options.page)})),pageDown:t((function(e){this._stepDown((e||1)*this.options.page)})),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})}(o),function(e,t){function n(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(r,""))===decodeURIComponent(location.href.replace(r,""))}var i=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.10.0",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,(function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()})).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,(function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()})),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),(function(e){return t.tabs.index(e)})))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(n.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,i=location.hash.substring(1);return null===t&&(i&&this.tabs.each((function(n,r){if(e(r).attr("aria-controls")===i)return t=n,!1})),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&-1!==t||(t=!!this.tabs.length&&0)),!1!==t&&(-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!n&&0)),!n&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),i=this.tabs.index(n),r=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:i++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=!1,i--;break;case e.ui.keyCode.END:i=this.anchors.length-1;break;case e.ui.keyCode.HOME:i=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i!==this.options.active&&i);default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,r),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay((function(){this.option("active",i)}),this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,n){for(var i=this.tabs.length-1;-1!==e.inArray((t>i&&(t=0),t<0&&(t=i),t),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){"active"!==e?"disabled"!==e?(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&!1===this.options.active&&this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t)):this._setupDisabled(t):this._activate(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+ ++i},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),(function(e){return n.index(e)})),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map((function(){return e("a",this)[0]})).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each((function(i,r){var o,a,s,l=e(r).uniqueId().attr("id"),u=e(r).closest("li"),c=u.attr("aria-controls");n(r)?(o=r.hash,a=t.element.find(t._sanitizeSelector(o))):(o="#"+(s=t._tabId(u)),(a=t.element.find(o)).length||(a=t._createPanel(s)).insertAfter(t.panels[i-1]||t.tablist),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),c&&u.data("ui-tabs-aria-controls",c),u.attr({"aria-controls":o.substring(1),"aria-labelledby":l}),a.attr("aria-labelledby",l)})),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n,i=0;n=this.tabs[i];i++)!0===t||-1!==e.inArray(i,t)?e(n).addClass("ui-state-disabled").attr("aria-disabled","true"):e(n).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),(function(e,t){n[t]="_eventHandler"})),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,i=this.element.parent();"fill"===t?(n=i.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each((function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))})),this.element.children().not(this.panels).each((function(){n-=e(this).outerHeight(!0)})),this.panels.each((function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each((function(){n=Math.max(n,e(this).height("").height())})).height(n))},_eventHandler:function(t){var n=this.options,i=this.active,r=e(t.currentTarget).closest("li"),o=r[0]===i[0],a=o&&n.collapsible,s=a?e():this._getPanelForTab(r),l=i.length?this._getPanelForTab(i):e(),u={oldTab:i,oldPanel:l,newTab:a?e():r,newPanel:s};t.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||!1===this._trigger("beforeActivate",t,u)||(n.active=!a&&this.tabs.index(r),this.active=o?e():r,this.xhr&&this.xhr.abort(),!l.length&&!s.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),s.length&&this.load(this.tabs.index(r),t),this._toggle(t,u))},_toggle:function(t,n){function i(){o.running=!1,o._trigger("activate",t,n)}function r(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,i):(a.show(),i())}var o=this,a=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,(function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r()})):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),r()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),a.length&&s.length?n.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter((function(){return 0===e(this).attr("tabIndex")})).attr("tabIndex",-1),a.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),n=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each((function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")})),this.tabs.each((function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")})),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(n){var i=this.options.disabled;!1!==i&&(n===t?i=!1:(n=this._getIndex(n),i=e.isArray(i)?e.map(i,(function(e){return e!==n?e:null})):e.map(this.tabs,(function(e,t){return t!==n?t:null}))),this._setupDisabled(i))},disable:function(n){var i=this.options.disabled;if(!0!==i){if(n===t)i=!0;else{if(n=this._getIndex(n),-1!==e.inArray(n,i))return;i=e.isArray(i)?e.merge([n],i).sort():[n]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var r=this,o=this.tabs.eq(t),a=o.find(".ui-tabs-anchor"),s=this._getPanelForTab(o),l={tab:o,panel:s};n(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.success((function(e){setTimeout((function(){s.html(e),r._trigger("load",i,l)}),1)})).complete((function(e,t){setTimeout((function(){"abort"===t&&r.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),s.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr}),1)}))))},_ajaxSettings:function(t,n,i){var r=this;return{url:t.attr("href"),beforeSend:function(t,o){return r._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:o},i))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}})}(o),function(e){var t=0;e.widget("ui.tooltip",{version:"1.10.0",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var i=this;if("disabled"===t)return this[n?"_disable":"_enable"](),void(this.options[t]=n);this._super(t,n),"content"===t&&e.each(this.tooltips,(function(e,t){i._updateContent(t)}))},_disable:function(){var t=this;e.each(this.tooltips,(function(n,i){var r=e.Event("blur");r.target=r.currentTarget=i[0],t.close(r,!0)})),this.element.find(this.options.items).addBack().each((function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")}))},_enable:function(){this.element.find(this.options.items).addBack().each((function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}))},open:function(t){var n=this,i=e(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each((function(){var t,i=e(this);i.data("ui-tooltip-open")&&((t=e.Event("blur")).target=t.currentTarget=this,n.close(t,!0)),i.attr("title")&&(i.uniqueId(),n.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))})),this._updateContent(i,t))},_updateContent:function(e,t){var n,i=this.options.content,r=this,o=t?t.type:null;if("string"==typeof i)return this._open(t,e,i);(n=i.call(e[0],(function(n){e.data("ui-tooltip-open")&&r._delay((function(){t&&(t.type=o),this._open(t,e,n)}))})))&&this._open(t,e,n)},_open:function(t,n,i){function r(e){l.of=e,o.is(":hidden")||o.position(l)}var o,a,s,l=e.extend({},this.options.position);i&&((o=this._find(n)).length?o.find(".ui-tooltip-content").html(i):(n.is("[title]")&&(t&&"mouseover"===t.type?n.attr("title",""):n.removeAttr("title")),o=this._tooltip(n),function(t,n){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(i.join(" ")))}(n,o.attr("id")),o.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:r}),r(t)):o.position(e.extend({of:n},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(s=this.delayedShow=setInterval((function(){o.is(":visible")&&(r(l.of),clearInterval(s))}),e.fx.interval)),this._trigger("open",t,{tooltip:o}),a={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(o)}},t&&"mouseover"!==t.type||(a.mouseleave="close"),t&&"focusin"!==t.type||(a.focusout="close"),this._on(!0,n,a)))},close:function(t){var n=this,i=e(t?t.currentTarget:this.element),r=this._find(i);this.closing||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&i.attr("title",i.data("ui-tooltip-title")),function(t){var n=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),r=e.inArray(n,i);-1!==r&&i.splice(r,1),t.removeData("ui-tooltip-id"),(i=e.trim(i.join(" ")))?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")}(i),r.stop(!0),this._hide(r,this.options.hide,(function(){n._removeTooltip(e(this))})),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,(function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]})),this.closing=!0,this._trigger("close",t,{tooltip:r}),this.closing=!1)},_tooltip:function(n){var i="ui-tooltip-"+t++,r=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(r),r.appendTo(this.document[0].body),this.tooltips[i]=n,r},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,(function(n,i){var r=e.Event("blur");r.target=r.currentTarget=i[0],t.close(r,!0),e("#"+n).remove(),i.data("ui-tooltip-title")&&(i.attr("title",i.data("ui-tooltip-title")),i.removeData("ui-tooltip-title"))}))}})}(o),o.effects||function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function n(e,t,n){var i=c[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function i(t){var n=l(),i=n._rgba=[];return t=t.toLowerCase(),h(s,(function(e,r){var o,a=r.re.exec(t),s=a&&r.parse(a),l=r.space||"rgba";if(s)return o=n[l](s),n[u[l].cache]=o[u[l].cache],i=n._rgba=o._rgba,!1})),i.length?("0,0,0,0"===i.join()&&e.extend(i,o.transparent),n):o[t]}function r(e,t,n){return 6*(n=(n+1)%1)<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}var o,a=/^([\-+])=\s*(\d+\.?\d*)/,s=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,n,i,r){return new e.Color.fn.parse(t,n,i,r)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},f=e("<p>")[0],h=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=f.style.backgroundColor.indexOf("rgba")>-1,h(u,(function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}})),l.fn=e.extend(l.prototype,{parse:function(r,a,s,c){if(r===t)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=e(r).css(a),a=t);var d=this,f=e.type(r),p=this._rgba=[];return a!==t&&(r=[r,a,s,c],f="array"),"string"===f?this.parse(i(r)||o._default):"array"===f?(h(u.rgba.props,(function(e,t){p[t.idx]=n(r[t.idx],t)})),this):"object"===f?(h(u,r instanceof l?function(e,t){r[t.cache]&&(d[t.cache]=r[t.cache].slice())}:function(t,i){var o=i.cache;h(i.props,(function(e,t){if(!d[o]&&i.to){if("alpha"===e||null==r[e])return;d[o]=i.to(d._rgba)}d[o][t.idx]=n(r[e],t,!0)})),d[o]&&e.inArray(null,d[o].slice(0,3))<0&&(d[o][3]=1,i.from&&(d._rgba=i.from(d[o])))}),this):void 0},is:function(e){var t=l(e),n=!0,i=this;return h(u,(function(e,r){var o,a=t[r.cache];return a&&(o=i[r.cache]||r.to&&r.to(i._rgba)||[],h(r.props,(function(e,t){if(null!=a[t.idx])return n=a[t.idx]===o[t.idx]}))),n})),n},_space:function(){var e=[],t=this;return h(u,(function(n,i){t[i.cache]&&e.push(n)})),e.pop()},transition:function(e,t){var i=l(e),r=i._space(),o=u[r],a=0===this.alpha()?l("transparent"):this,s=a[o.cache]||o.to(a._rgba),d=s.slice();return i=i[o.cache],h(o.props,(function(e,r){var o=r.idx,a=s[o],l=i[o],u=c[r.type]||{};null!==l&&(null===a?d[o]=l:(u.mod&&(l-a>u.mod/2?a+=u.mod:a-l>u.mod/2&&(a-=u.mod)),d[o]=n((l-a)*t+a,r)))})),this[r](d)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=l(t)._rgba;return l(e.map(n,(function(e,t){return(1-i)*r[t]+i*e})))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,(function(e,t){return null==e?t>2?1:0:e}));return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),(function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e}));return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,(function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,r=e[1]/255,o=e[2]/255,a=e[3],s=Math.max(i,r,o),l=Math.min(i,r,o),u=s-l,c=s+l,d=.5*c;return t=l===s?0:i===s?60*(r-o)/u+360:r===s?60*(o-i)/u+120:60*(i-r)/u+240,n=0===u?0:d<=.5?u/c:u/(2-c),[Math.round(t)%360,n,d,null==a?1:a]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],o=e[3],a=i<=.5?i*(1+n):i+n-i*n,s=2*i-a;return[Math.round(255*r(s,a,t+1/3)),Math.round(255*r(s,a,t)),Math.round(255*r(s,a,t-1/3)),o]},h(u,(function(i,r){var o=r.props,s=r.cache,u=r.to,c=r.from;l.fn[i]=function(i){if(u&&!this[s]&&(this[s]=u(this._rgba)),i===t)return this[s].slice();var r,a=e.type(i),d="array"===a||"object"===a?i:arguments,f=this[s].slice();return h(o,(function(e,t){var i=d["object"===a?e:t.idx];null==i&&(i=f[t.idx]),f[t.idx]=n(i,t)})),c?((r=l(c(f)))[s]=f,r):l(f)},h(o,(function(t,n){l.fn[t]||(l.fn[t]=function(r){var o,s=e.type(r),l="alpha"===t?this._hsla?"hsla":"rgba":i,u=this[l](),c=u[n.idx];return"undefined"===s?c:("function"===s&&(r=r.call(this,c),s=e.type(r)),null==r&&n.empty?this:("string"===s&&((o=a.exec(r))&&(r=c+parseFloat(o[2])*("+"===o[1]?1:-1))),u[n.idx]=r,this[l](u)))})}))})),l.hook=function(t){var n=t.split(" ");h(n,(function(t,n){e.cssHooks[n]={set:function(t,r){var o,a,s="";if("transparent"!==r&&("string"!==e.type(r)||(o=i(r)))){if(r=l(o||r),!d.rgba&&1!==r._rgba[3]){for(a="backgroundColor"===n?t.parentNode:t;(""===s||"transparent"===s)&&a&&a.style;)try{s=e.css(a,"backgroundColor"),a=a.parentNode}catch(e){}r=r.blend(s&&"transparent"!==s?s:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(e){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=l(t.elem,n),t.end=l(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}}))},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),e.cssHooks.borderColor={expand:function(e){var t={};return h(["Top","Right","Bottom","Left"],(function(n,i){t["border"+i+"Color"]=e})),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(o),function(){function n(t){var n,i,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(r&&r.length&&r[0]&&r[r[0]])for(i=r.length;i--;)"string"==typeof r[n=r[i]]&&(o[e.camelCase(n)]=r[n]);else for(n in r)"string"==typeof r[n]&&(o[n]=r[n]);return o}function i(t,n){var i,r,o={};for(i in n)r=n[i],t[i]!==r&&!a[i]&&(e.fx.step[i]||!isNaN(parseFloat(r)))&&(o[i]=r);return o}var r=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(o.style(e.elem,n,e.end),e.setAttr=!0)}})),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,o,a,s){var l=e.speed(o,a,s);return this.queue((function(){var o,a=e(this),s=a.attr("class")||"",u=l.children?a.find("*").addBack():a;u=u.map((function(){return{el:e(this),start:n(this)}})),o=function(){e.each(r,(function(e,n){t[n]&&a[n+"Class"](t[n])}))},o(),u=u.map((function(){return this.end=n(this.el[0]),this.diff=i(this.start,this.end),this})),a.attr("class",s),u=u.map((function(){var t=this,n=e.Deferred(),i=e.extend({},l,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()})),e.when.apply(e,u.get()).done((function(){o(),e.each(arguments,(function(){var t=this.el;e.each(this.diff,(function(e){t.css(e,"")}))})),l.complete.call(a[0])}))}))},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,i,r){return n?e.effects.animateClass.call(this,{add:t},n,i,r):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,i,r){return n?e.effects.animateClass.call(this,{remove:t},n,i,r):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,i,r,o,a){return"boolean"==typeof i||i===t?r?e.effects.animateClass.call(this,i?{add:n}:{remove:n},r,o,a):this._toggleClass(n,i):e.effects.animateClass.call(this,{toggle:n},i,r,o)},switchClass:function(t,n,i,r,o){return e.effects.animateClass.call(this,{add:n,remove:t},i,r,o)}})}(),function(){function i(t,n,i,r){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(r=i,i=n,n={}),e.isFunction(i)&&(r=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=r||n.complete,t}function r(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||"string"==typeof t&&!e.effects.effect[t]}e.extend(e.effects,{version:"1.10.0",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,i){var r,o;for(o=0;o<i.length;o++)null!==i[o]&&((r=e.data(n+i[o]))===t&&(r=""),e.css(i[o],r))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(e){o=document.body}return t.wrap(i),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],(function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")})),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,r){return r=r||{},e.each(n,(function(e,n){var o=t.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])})),r}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(o)&&o.call(r[0]),e.isFunction(t)&&t()}var r=e(this),o=n.complete,s=n.mode;(r.is(":hidden")?"hide"===s:"show"===s)?i():a.call(r[0],n,i)}var n=i.apply(this,arguments),r=n.mode,o=n.queue,a=e.effects.effect[n.effect];return e.fx.off||!a?r?this[r](n.duration,n.complete):this.each((function(){n.complete&&n.complete.call(this)})):!1===o?this.each(t):this.queue(o||"fx",t)},_show:e.fn.show,show:function(e){if(r(e))return this._show.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(r(e))return this._hide.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(r(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],(function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])})),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],(function(e,n){t[n]=function(t){return Math.pow(t,e+2)}})),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,(function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(2*e)/2:1-n(-2*e+2)/2}}))}()}(o),function(e,t){var n=/up|down|vertical/,i=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,r){var o,a,s,l=e(this),u=["position","top","bottom","left","right","height","width"],c=e.effects.setMode(l,t.mode||"hide"),d=t.direction||"up",f=n.test(d),h=f?"height":"width",p=f?"top":"left",m=i.test(d),g={},v="show"===c;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),u):e.effects.save(l,u),l.show(),a=(o=e.effects.createWrapper(l).css({overflow:"hidden"}))[h](),s=parseFloat(o.css(p))||0,g[h]=v?a:0,m||(l.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),g[p]=v?s:a+s),v&&(o.css(h,0),m||o.css(p,s+a)),o.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===c&&l.hide(),e.effects.restore(l,u),e.effects.removeWrapper(l),r()}})}}(o),function(e,t){e.effects.effect.bounce=function(t,n){var i,r,o,a=e(this),s=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"effect"),u="hide"===l,c="show"===l,d=t.direction||"up",f=t.distance,h=t.times||5,p=2*h+(c||u?1:0),m=t.duration/p,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=a.queue(),w=b.length;for((c||u)&&s.push("opacity"),e.effects.save(a,s),a.show(),e.effects.createWrapper(a),f||(f=a["top"===v?"outerHeight":"outerWidth"]()/3),c&&((o={opacity:1})[v]=0,a.css("opacity",0).css(v,y?2*-f:2*f).animate(o,m,g)),u&&(f/=Math.pow(2,h-1)),(o={})[v]=0,i=0;i<h;i++)(r={})[v]=(y?"-=":"+=")+f,a.animate(r,m,g).animate(o,m,g),f=u?2*f:f/2;u&&((r={opacity:0})[v]=(y?"-=":"+=")+f,a.animate(r,m,g)),a.queue((function(){u&&a.hide(),e.effects.restore(a,s),e.effects.removeWrapper(a),n()})),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,p+1))),a.dequeue()}}(o),function(e,t){e.effects.effect.clip=function(t,n){var i,r,o,a=e(this),s=["position","top","bottom","left","right","height","width"],l="show"===e.effects.setMode(a,t.mode||"hide"),u="vertical"===(t.direction||"vertical"),c=u?"height":"width",d=u?"top":"left",f={};e.effects.save(a,s),a.show(),i=e.effects.createWrapper(a).css({overflow:"hidden"}),o=(r="IMG"===a[0].tagName?i:a)[c](),l&&(r.css(c,0),r.css(d,o/2)),f[c]=l?o:0,f[d]=l?0:o/2,r.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||a.hide(),e.effects.restore(a,s),e.effects.removeWrapper(a),n()}})}}(o),function(e,t){e.effects.effect.drop=function(t,n){var i,r=e(this),o=["position","top","bottom","left","right","opacity","height","width"],a=e.effects.setMode(r,t.mode||"hide"),s="show"===a,l=t.direction||"left",u="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l?"pos":"neg",d={opacity:s?1:0};e.effects.save(r,o),r.show(),e.effects.createWrapper(r),i=t.distance||r["top"===u?"outerHeight":"outerWidth"](!0)/2,s&&r.css("opacity",0).css(u,"pos"===c?-i:i),d[u]=(s?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+i,r.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),n()}})}}(o),function(e,t){e.effects.effect.explode=function(t,n){function i(){v.push(this),v.length===c*d&&(f.css({visibility:"visible"}),e(v).remove(),h||f.hide(),n())}var r,o,a,s,l,u,c=t.pieces?Math.round(Math.sqrt(t.pieces)):3,d=c,f=e(this),h="show"===e.effects.setMode(f,t.mode||"hide"),p=f.show().css("visibility","hidden").offset(),m=Math.ceil(f.outerWidth()/d),g=Math.ceil(f.outerHeight()/c),v=[];for(r=0;r<c;r++)for(s=p.top+r*g,u=r-(c-1)/2,o=0;o<d;o++)a=p.left+o*m,l=o-(d-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*m,top:-r*g}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:m,height:g,left:a+(h?l*m:0),top:s+(h?u*g:0),opacity:h?0:1}).animate({left:a+(h?0:l*m),top:s+(h?0:u*g),opacity:h?1:0},t.duration||500,t.easing,i)}}(o),function(e,t){e.effects.effect.fade=function(t,n){var i=e(this),r=e.effects.setMode(i,t.mode||"toggle");i.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(o),function(e,t){e.effects.effect.fold=function(t,n){var i,r,o=e(this),a=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(o,t.mode||"hide"),l="show"===s,u="hide"===s,c=t.size||15,d=/([0-9]+)%/.exec(c),f=!!t.horizFirst,h=l!==f,p=h?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(o,a),o.show(),i=e.effects.createWrapper(o).css({overflow:"hidden"}),r=h?[i.width(),i.height()]:[i.height(),i.width()],d&&(c=parseInt(d[1],10)/100*r[u?0:1]),l&&i.css(f?{height:0,width:c}:{height:c,width:0}),g[p[0]]=l?r[0]:c,v[p[1]]=l?r[1]:0,i.animate(g,m,t.easing).animate(v,m,t.easing,(function(){u&&o.hide(),e.effects.restore(o,a),e.effects.removeWrapper(o),n()}))}}(o),function(e,t){e.effects.effect.highlight=function(t,n){var i=e(this),r=["backgroundImage","backgroundColor","opacity"],o=e.effects.setMode(i,t.mode||"show"),a={backgroundColor:i.css("backgroundColor")};"hide"===o&&(a.opacity=0),e.effects.save(i,r),i.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&i.hide(),e.effects.restore(i,r),n()}})}}(o),function(e,t){e.effects.effect.pulsate=function(t,n){var i,r=e(this),o=e.effects.setMode(r,t.mode||"show"),a="show"===o,s="hide"===o,l=a||"hide"===o,u=2*(t.times||5)+(l?1:0),c=t.duration/u,d=0,f=r.queue(),h=f.length;for(!a&&r.is(":visible")||(r.css("opacity",0).show(),d=1),i=1;i<u;i++)r.animate({opacity:d},c,t.easing),d=1-d;r.animate({opacity:d},c,t.easing),r.queue((function(){s&&r.hide(),n()})),h>1&&f.splice.apply(f,[1,0].concat(f.splice(h,u+1))),r.dequeue()}}(o),function(e,t){e.effects.effect.puff=function(t,n){var i=e(this),r=e.effects.setMode(i,t.mode||"hide"),o="hide"===r,a=parseInt(t.percent,10)||150,s=a/100,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:r,complete:n,percent:o?a:100,from:o?l:{height:l.height*s,width:l.width*s,outerHeight:l.outerHeight*s,outerWidth:l.outerWidth*s}}),i.effect(t)},e.effects.effect.scale=function(t,n){var i=e(this),r=e.extend(!0,{},t),o=e.effects.setMode(i,t.mode||"effect"),a=parseInt(t.percent,10)||(0===parseInt(t.percent,10)||"hide"===o?0:100),s=t.direction||"both",l=t.origin,u={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},c="horizontal"!==s?a/100:1,d="vertical"!==s?a/100:1;r.effect="size",r.queue=!1,r.complete=n,"effect"!==o&&(r.origin=l||["middle","center"],r.restore=!0),r.from=t.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:u),r.to={height:u.height*c,width:u.width*d,outerHeight:u.outerHeight*c,outerWidth:u.outerWidth*d},r.fade&&("show"===o&&(r.from.opacity=0,r.to.opacity=1),"hide"===o&&(r.from.opacity=1,r.to.opacity=0)),i.effect(r)},e.effects.effect.size=function(t,n){var i,r,o,a=e(this),s=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["width","height","overflow"],u=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=e.effects.setMode(a,t.mode||"effect"),h=t.restore||"effect"!==f,p=t.scale||"both",m=t.origin||["middle","center"],g=a.css("position"),v=h?s:["position","top","bottom","left","right","overflow","opacity"],y={height:0,width:0,outerHeight:0,outerWidth:0};"show"===f&&a.show(),i={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===t.mode&&"show"===f?(a.from=t.to||y,a.to=t.from||i):(a.from=t.from||("show"===f?y:i),a.to=t.to||("hide"===f?y:i)),o={from:{y:a.from.height/i.height,x:a.from.width/i.width},to:{y:a.to.height/i.height,x:a.to.width/i.width}},"box"!==p&&"both"!==p||(o.from.y!==o.to.y&&(v=v.concat(c),a.from=e.effects.setTransition(a,c,o.from.y,a.from),a.to=e.effects.setTransition(a,c,o.to.y,a.to)),o.from.x!==o.to.x&&(v=v.concat(d),a.from=e.effects.setTransition(a,d,o.from.x,a.from),a.to=e.effects.setTransition(a,d,o.to.x,a.to))),("content"===p||"both"===p)&&o.from.y!==o.to.y&&(v=v.concat(u).concat(l),a.from=e.effects.setTransition(a,u,o.from.y,a.from),a.to=e.effects.setTransition(a,u,o.to.y,a.to)),e.effects.save(a,v),a.show(),e.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),m&&(r=e.effects.getBaseline(m,i),a.from.top=(i.outerHeight-a.outerHeight())*r.y,a.from.left=(i.outerWidth-a.outerWidth())*r.x,a.to.top=(i.outerHeight-a.to.outerHeight)*r.y,a.to.left=(i.outerWidth-a.to.outerWidth)*r.x),a.css(a.from),"content"!==p&&"both"!==p||(c=c.concat(["marginTop","marginBottom"]).concat(u),d=d.concat(["marginLeft","marginRight"]),l=s.concat(c).concat(d),a.find("*[width]").each((function(){var n=e(this),i=n.height(),r=n.width(),a=n.outerHeight(),s=n.outerWidth();h&&e.effects.save(n,l),n.from={height:i*o.from.y,width:r*o.from.x,outerHeight:a*o.from.y,outerWidth:s*o.from.x},n.to={height:i*o.to.y,width:r*o.to.x,outerHeight:i*o.to.y,outerWidth:r*o.to.x},o.from.y!==o.to.y&&(n.from=e.effects.setTransition(n,c,o.from.y,n.from),n.to=e.effects.setTransition(n,c,o.to.y,n.to)),o.from.x!==o.to.x&&(n.from=e.effects.setTransition(n,d,o.from.x,n.from),n.to=e.effects.setTransition(n,d,o.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,(function(){h&&e.effects.restore(n,l)}))}))),a.animate(a.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===f&&a.hide(),e.effects.restore(a,v),h||("static"===g?a.css({position:"relative",top:a.to.top,left:a.to.left}):e.each(["top","left"],(function(e,t){a.css(t,(function(t,n){var i=parseInt(n,10),r=e?a.to.left:a.to.top;return"auto"===n?r+"px":i+r+"px"}))}))),e.effects.removeWrapper(a),n()}})}}(o),function(e,t){e.effects.effect.shake=function(t,n){var i,r=e(this),o=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(r,t.mode||"effect"),s=t.direction||"left",l=t.distance||20,u=t.times||3,c=2*u+1,d=Math.round(t.duration/c),f="up"===s||"down"===s?"top":"left",h="up"===s||"left"===s,p={},m={},g={},v=r.queue(),y=v.length;for(e.effects.save(r,o),r.show(),e.effects.createWrapper(r),p[f]=(h?"-=":"+=")+l,m[f]=(h?"+=":"-=")+2*l,g[f]=(h?"-=":"+=")+2*l,r.animate(p,d,t.easing),i=1;i<u;i++)r.animate(m,d,t.easing).animate(g,d,t.easing);r.animate(m,d,t.easing).animate(p,d/2,t.easing).queue((function(){"hide"===a&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),n()})),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,c+1))),r.dequeue()}}(o),function(e,t){e.effects.effect.slide=function(t,n){var i,r=e(this),o=["position","top","bottom","left","right","width","height"],a=e.effects.setMode(r,t.mode||"show"),s="show"===a,l=t.direction||"left",u="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,d={};e.effects.save(r,o),r.show(),i=t.distance||r["top"===u?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),s&&r.css(u,c?isNaN(i)?"-"+i:-i:i),d[u]=(s?c?"+=":"-=":c?"-=":"+=")+i,r.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),n()}})}}(o),function(e,t){e.effects.effect.transfer=function(t,n){var i=e(this),r=e(t.to),o="fixed"===r.css("position"),a=e("body"),s=o?a.scrollTop():0,l=o?a.scrollLeft():0,u=r.offset(),c={top:u.top-s,left:u.left-l,height:r.innerHeight(),width:r.innerWidth()},d=i.offset(),f=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-s,left:d.left-l,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(c,t.duration,t.easing,(function(){f.remove(),n()}))}}(o)},2337:(e,t,n)=>{var i,r,o=n(20428);r=(i=o)({}),i.ajaxQueue=function(e){var t,n=i.Deferred(),o=n.promise();function a(r){(t=i.ajax(e)).done(n.resolve).fail(n.reject).then(r,r)}return r.queue(a),o.abort=function(s){if(t)return t.abort(s);var l=r.queue(),u=i.inArray(a,l);return u>-1&&l.splice(u,1),n.rejectWith(e.context||e,[o,s,""]),o},o}},28920:(e,t,n)=>{var i,r,o;r=[n(20428)],i=function(e){var t=/\+/g;function n(e){return s.raw?e:encodeURIComponent(e)}function i(e){return s.raw?e:decodeURIComponent(e)}function r(e){return n(s.json?JSON.stringify(e):String(e))}function o(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),s.json?JSON.parse(e):e}catch(e){}}function a(t,n){var i=s.raw?t:o(t);return e.isFunction(n)?n(i):i}var s=e.cookie=function(t,o,l){if(arguments.length>1&&!e.isFunction(o)){if("number"==typeof(l=e.extend({},s.defaults,l)).expires){var u=l.expires,c=l.expires=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*u)}return document.cookie=[n(t),"=",r(o),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var d=t?void 0:{},f=document.cookie?document.cookie.split("; "):[],h=0,p=f.length;h<p;h++){var m=f[h].split("="),g=i(m.shift()),v=m.join("=");if(t===g){d=a(v,o);break}t||void 0===(v=a(v))||(d[g]=v)}return d};s.defaults={},e.removeCookie=function(t,n){return e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t)}},void 0===(o="function"==typeof i?i.apply(t,r):i)||(e.exports=o)},61280:(e,t,n)=>{var i=n(20428);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}!function(e){"use strict";var t={};function n(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(n))}function o(t){var n=t.target,i=e(n);if(!i.is(":submit,input:image")){var r=i.closest(":submit");if(0===r.length)return;n=r[0]}var o=this;if(o.clk=n,"image"==n.type)if(void 0!==t.offsetX)o.clk_x=t.offsetX,o.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var a=i.offset();o.clk_x=t.pageX-a.left,o.clk_y=t.pageY-a.top}else o.clk_x=t.pageX-n.offsetLeft,o.clk_y=t.pageY-n.offsetTop;setTimeout((function(){o.clk=o.clk_x=o.clk_y=null}),100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}t.fileapi=void 0!==e("<input type='file'/>").get(0).files,t.formdata=void 0!==window.FormData,e.fn.ajaxSubmit=function(n){if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var r,o,s,l=this;"function"==typeof n&&(n={success:n}),r=this.attr("method"),(s=(s="string"==typeof(o=this.attr("action"))?e.trim(o):"")||window.location.href||"")&&(s=(s.match(/^([^#]+)/)||[])[1]),n=e.extend(!0,{url:s,success:e.ajaxSettings.success,type:r||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},n);var u={};if(this.trigger("form-pre-serialize",[this,n,u]),u.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(n.beforeSerialize&&!1===n.beforeSerialize(this,n))return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var c=n.traditional;void 0===c&&(c=e.ajaxSettings.traditional);var d,f=[],h=this.formToArray(n.semantic,f);if(n.data&&(n.extraData=n.data,d=e.param(n.data,c)),n.beforeSubmit&&!1===n.beforeSubmit(h,this,n))return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[h,this,n,u]),u.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var p=e.param(h,c);d&&(p=p?p+"&"+d:d),"GET"==n.type.toUpperCase()?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+p,n.data=null):n.data=p;var m=[];if(n.resetForm&&m.push((function(){l.resetForm()})),n.clearForm&&m.push((function(){l.clearForm(n.includeHidden)})),!n.dataType&&n.target){var g=n.success||function(){};m.push((function(t){var i=n.replaceTarget?"replaceWith":"html";e(n.target)[i](t).each(g,arguments)}))}else n.success&&m.push(n.success);n.success=function(e,t,i){for(var r=n.context||this,o=0,a=m.length;o<a;o++)m[o].apply(r,[e,t,i||l,l])};var v=e("input:file:enabled[value]",this).length>0,y="multipart/form-data",b=l.attr("enctype")==y||l.attr("encoding")==y,w=t.fileapi&&t.formdata;a("fileAPI :"+w);var x,C=(v||b)&&!w;!1!==n.iframe&&(n.iframe||C)?n.closeKeepAlive?e.get(n.closeKeepAlive,(function(){x=_(h)})):x=_(h):x=(v||b)&&w?function(t){for(var o=new FormData,a=0;a<t.length;a++)o.append(t[a].name,t[a].value);if(n.extraData){var s=function(t){var n,i,r=e.param(t).split("&"),o=r.length,a={};for(n=0;n<o;n++)i=r[n].split("="),a[decodeURIComponent(i[0])]=decodeURIComponent(i[1]);return a}(n.extraData);for(var l in s)s.hasOwnProperty(l)&&o.append(l,s[l])}n.data=null;var u=e.extend(!0,{},e.ajaxSettings,n,{contentType:!1,processData:!1,cache:!1,type:r||"POST"});n.uploadProgress&&(u.xhr=function(){var e=i.ajaxSettings.xhr();return e.upload&&(e.upload.onprogress=function(e){var t=0,i=e.loaded||e.position,r=e.total;e.lengthComputable&&(t=Math.ceil(i/r*100)),n.uploadProgress(e,i,r,t)}),e});u.data=null;var c=u.beforeSend;return u.beforeSend=function(e,t){t.data=o,c&&c.call(this,e,t)},e.ajax(u)}(h):e.ajax(n),l.removeData("jqxhr").data("jqxhr",x);for(var k=0;k<f.length;k++)f[k]=null;return this.trigger("form-submit-notify",[this,n]),this;function _(t){var i,o,s,u,c,d,h,p,m,g,v,y,b=l[0],w=!!e.fn.prop,x=e.Deferred();if(e(":input[name=submit],:input[id=submit]",b).length)return alert('Error: Form elements must not have name or id of "submit".'),x.reject(),x;if(t)for(o=0;o<f.length;o++)i=e(f[o]),w?i.prop("disabled",!1):i.removeAttr("disabled");if((s=e.extend(!0,{},e.ajaxSettings,n)).context=s.context||s,c="jqFormIO"+(new Date).getTime(),s.iframeTarget?(g=(d=e(s.iframeTarget)).attr("name"))?c=g:d.attr("name",c):(d=e('<iframe name="'+c+'" src="'+s.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),h=d[0],p={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n="timeout"===t?"timeout":"aborted";if(a("aborting upload... "+n),this.aborted=1,h.contentWindow.document.execCommand)try{h.contentWindow.document.execCommand("Stop")}catch(e){}d.attr("src",s.iframeSrc),p.error=n,s.error&&s.error.call(s.context,p,n,t),u&&e.event.trigger("ajaxError",[p,s,n]),s.complete&&s.complete.call(s.context,p,n)}},(u=s.global)&&0==e.active++&&e.event.trigger("ajaxStart"),u&&e.event.trigger("ajaxSend",[p,s]),s.beforeSend&&!1===s.beforeSend.call(s.context,p,s))return s.global&&e.active--,x.reject(),x;if(p.aborted)return x.reject(),x;(m=b.clk)&&(g=m.name)&&!m.disabled&&(s.extraData=s.extraData||{},s.extraData[g]=m.value,"image"==m.type&&(s.extraData[g+".x"]=b.clk_x,s.extraData[g+".y"]=b.clk_y));var C=1,k=2;function _(e){return e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document}var S=e("meta[name=csrf-token]").attr("content"),T=e("meta[name=csrf-param]").attr("content");function D(){var t=l.attr("target"),n=l.attr("action");b.setAttribute("target",c),r||b.setAttribute("method","POST"),n!=s.url&&b.setAttribute("action",s.url),s.skipEncodingOverride||r&&!/post/i.test(r)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),s.timeout&&(y=setTimeout((function(){v=!0,P(C)}),s.timeout));var i=[];try{if(s.extraData)for(var o in s.extraData)s.extraData.hasOwnProperty(o)&&(e.isPlainObject(s.extraData[o])&&s.extraData[o].hasOwnProperty("name")&&s.extraData[o].hasOwnProperty("value")?i.push(e('<input type="hidden" name="'+s.extraData[o].name+'">').attr("value",s.extraData[o].value).appendTo(b)[0]):i.push(e('<input type="hidden" name="'+o+'">').attr("value",s.extraData[o]).appendTo(b)[0]));s.iframeTarget||(d.appendTo("body"),h.attachEvent?h.attachEvent("onload",P):h.addEventListener("load",P,!1)),setTimeout((function e(){try{var t=_(h).readyState;a("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(e){a("Server abort: ",e," (",e.name,")"),P(k),y&&clearTimeout(y),y=void 0}}),15),b.submit()}finally{b.setAttribute("action",n),t?b.setAttribute("target",t):l.removeAttr("target"),e(i).remove()}}T&&S&&(s.extraData=s.extraData||{},s.extraData[T]=S),s.forceSync?D():setTimeout(D,10);var M,E,N,A=50;function P(t){if(!p.aborted&&!N){try{E=_(h)}catch(e){a("cannot access response document: ",e),t=k}if(t===C&&p)return p.abort("timeout"),void x.reject(p,"timeout");if(t==k&&p)return p.abort("server abort"),void x.reject(p,"error","server abort");if(E&&E.location.href!=s.iframeSrc||v){h.detachEvent?h.detachEvent("onload",P):h.removeEventListener("load",P,!1);var n,i="success";try{if(v)throw"timeout";var r="xml"==s.dataType||E.XMLDocument||e.isXMLDoc(E);if(a("isXml="+r),!r&&window.opera&&(null===E.body||!E.body.innerHTML)&&--A)return a("requeing onLoad callback, DOM not available"),void setTimeout(P,250);var o=E.body?E.body:E.documentElement;p.responseText=o?o.innerHTML:null,p.responseXML=E.XMLDocument?E.XMLDocument:E,r&&(s.dataType="xml"),p.getResponseHeader=function(e){return{"content-type":s.dataType}[e]},o&&(p.status=Number(o.getAttribute("status"))||p.status,p.statusText=o.getAttribute("statusText")||p.statusText);var l=(s.dataType||"").toLowerCase(),c=/(json|script|text)/.test(l);if(c||s.textarea){var f=E.getElementsByTagName("textarea")[0];if(f)p.responseText=f.value,p.status=Number(f.getAttribute("status"))||p.status,p.statusText=f.getAttribute("statusText")||p.statusText;else if(c){var m=E.getElementsByTagName("pre")[0],g=E.getElementsByTagName("body")[0];m?p.responseText=m.textContent?m.textContent:m.innerText:g&&(p.responseText=g.textContent?g.textContent:g.innerText)}}else"xml"==l&&!p.responseXML&&p.responseText&&(p.responseXML=L(p.responseText));try{M=I(p,l,s)}catch(t){i="parsererror",p.error=n=t||i}}catch(t){a("error caught: ",t),i="error",p.error=n=t||i}p.aborted&&(a("upload aborted"),i=null),p.status&&(i=p.status>=200&&p.status<300||304===p.status?"success":"error"),"success"===i?(s.success&&s.success.call(s.context,M,"success",p),x.resolve(p.responseText,"success",p),u&&e.event.trigger("ajaxSuccess",[p,s])):i&&(void 0===n&&(n=p.statusText),s.error&&s.error.call(s.context,p,i,n),x.reject(p,"error",n),u&&e.event.trigger("ajaxError",[p,s,n])),u&&e.event.trigger("ajaxComplete",[p,s]),u&&! --e.active&&e.event.trigger("ajaxStop"),s.complete&&s.complete.call(s.context,p,i),N=!0,s.timeout&&clearTimeout(y),setTimeout((function(){s.iframeTarget||d.remove(),p.responseXML=null}),100)}}}var L=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},O=e.parseJSON||function(e){return window.eval("("+e+")")},I=function(t,n,i){var r=t.getResponseHeader("content-type")||"",o="xml"===n||!n&&r.indexOf("xml")>=0,a=o?t.responseXML:t.responseText;return o&&"parsererror"===a.documentElement.nodeName&&e.error&&e.error("parsererror"),i&&i.dataFilter&&(a=i.dataFilter(a,n)),"string"==typeof a&&("json"===n||!n&&r.indexOf("json")>=0?a=O(a):("script"===n||!n&&r.indexOf("javascript")>=0)&&e.globalEval(a)),a};return x}},e.fn.ajaxForm=function(t){if((t=t||{}).delegation=t.delegation&&e.isFunction(e.fn.on),!t.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(a("DOM not ready, queuing ajaxForm"),e((function(){e(i.s,i.c).ajaxForm(t)})),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,n).off("click.form-plugin",this.selector,o).on("submit.form-plugin",this.selector,t,n).on("click.form-plugin",this.selector,t,o),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,n).bind("click.form-plugin",t,o)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(n,i){var r=[];if(0===this.length)return r;var o,a,s,l,u,c,d,f=this[0],h=n?f.getElementsByTagName("*"):f.elements;if(!h)return r;for(o=0,c=h.length;o<c;o++)if(s=(u=h[o]).name)if(n&&f.clk&&"image"==u.type)u.disabled||f.clk!=u||(r.push({name:s,value:e(u).val(),type:u.type}),r.push({name:s+".x",value:f.clk_x},{name:s+".y",value:f.clk_y}));else if((l=e.fieldValue(u,!0))&&l.constructor==Array)for(i&&i.push(u),a=0,d=l.length;a<d;a++)r.push({name:s,value:l[a]});else if(t.fileapi&&"file"==u.type&&!u.disabled){i&&i.push(u);var p=u.files;if(p.length)for(a=0;a<p.length;a++)r.push({name:s,value:p[a],type:u.type});else r.push({name:s,value:"",type:u.type})}else null!=l&&(i&&i.push(u),r.push({name:s,value:l,type:u.type,required:u.required}));if(!n&&f.clk){var m=e(f.clk),g=m[0];(s=g.name)&&!g.disabled&&"image"==g.type&&(r.push({name:s,value:m.val()}),r.push({name:s+".x",value:f.clk_x},{name:s+".y",value:f.clk_y}))}return r},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each((function(){var i=this.name;if(i){var r=e.fieldValue(this,t);if(r&&r.constructor==Array)for(var o=0,a=r.length;o<a;o++)n.push({name:i,value:r[o]});else null!=r&&n.push({name:this.name,value:r})}})),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],i=0,r=this.length;i<r;i++){var o=this[i],a=e.fieldValue(o,t);null==a||a.constructor==Array&&!a.length||(a.constructor==Array?e.merge(n,a):n.push(a))}return n},e.fieldValue=function(t,n){var i=t.name,r=t.type,o=t.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||t.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!t.checked||("submit"==r||"image"==r)&&t.form&&t.form.clk!=t||"select"==o&&-1==t.selectedIndex))return null;if("select"==o){var a=t.selectedIndex;if(a<0)return null;for(var s=[],l=t.options,u="select-one"==r,c=u?a+1:l.length,d=u?a:0;d<c;d++){var f=l[d];if(f.selected){var h=f.value;if(h||(h=f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value),u)return h;s.push(h)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each((function(){e("input,select,textarea",this).clearFields(t)}))},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each((function(){var i=this.type,r=this.tagName.toLowerCase();n.test(i)||"textarea"==r?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==r?this.selectedIndex=-1:t&&(!0===t&&/hidden/.test(i)||"string"==typeof t&&e(this).is(t))&&(this.value="")}))},e.fn.resetForm=function(){return this.each((function(){("function"==typeof this.reset||"object"==r(this.reset)&&!this.reset.nodeType)&&this.reset()}))},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each((function(){this.disabled=!e}))},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each((function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var i=e(this).parent("select");t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t}}))},e.fn.ajaxSubmit.debug=!1}(i)},98573:(e,t,n)=>{var i,r=n(20428);(i=r).fn.extend({leanModal:function(e){if(0==i("#lean_overlay").length){var t=i("<div id='lean_overlay'></div>");i("body").append(t)}return e=i.extend({top:100,overlay:.5,closeButton:null},e),this.each((function(){var t=e;i(this).click((function(e){var r=i(this).attr("href");i("#lean_overlay").click((function(){n(r)})),i(t.closeButton).click((function(){n(r)})),i(r).outerHeight();var o=i(r).outerWidth();i("#lean_overlay").css({display:"block",opacity:0}),i("#lean_overlay").fadeTo(200,t.overlay),i(r).css({display:"block",position:"fixed",opacity:0,"z-index":11e3,left:"50%","margin-left":-o/2+"px",top:t.top+"px"}),i(r).fadeTo(200,1),e.preventDefault()}))}));function n(e){i("#lean_overlay").fadeOut(200),i(e).css({display:"none"})}}})},40496:(e,t,n)=>{var i,r,o;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}r=[n(20428)],i=function(e){function t(t){var n,i=this,r=t.elements.tooltip,o=t.options.content.ajax,a=".qtip-ajax",s=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,l=h;t.checks.ajax={"^content.ajax":function(e,t,n){"ajax"===t&&(o=n),"once"===t?i.init():o&&o.url?i.load():r.unbind(a)}},e.extend(i,{init:function(){return o&&o.url&&r.unbind(a)[o.once?"one":"bind"]("tooltipshow"+a,i.load),i},load:function(r,a){function u(e,n,i){!l&&0!==e.status&&t.set("content.text",n+": "+i)}function c(n){l||(f&&(n=e("<div/>").append(n.replace(s,"")).find(f)),t.set("content.text",n))}function d(){l||(g&&(t.show(r.originalEvent),a=h),e.isFunction(o.complete)&&o.complete.apply(this,arguments))}var f,p=o.url.indexOf(" "),m=o.url,g=o.once&&!o.loading&&a;if(g)try{r.preventDefault()}catch(e){}else if(r&&r.isDefaultPrevented())return i;n&&n.abort&&n.abort(),p>-1&&(f=m.substr(p),m=m.substr(0,p)),n=e.ajax(e.extend({success:c,error:u,context:t},o,{url:m,complete:d}))},destroy:function(){n&&n.abort&&n.abort(),l=f}}),i.init()}function n(t,n){var s,c,d,m,g,v=e(this),y=e(document.body),b=this===document?y:v,w=v.metadata?v.metadata(n.metadata):p,x="html5"===n.metadata.type&&w?w[n.metadata.name]:p,C=v.data(n.metadata.name||"qtipopts");try{C="string"==typeof C?new Function("return "+C)():C}catch(e){o("Unable to parse HTML5 attribute data: "+C)}if(c=(m=e.extend(f,{},l.defaults,n,"object"===a(C)?r(C):p,r(x||w))).position,m.id=t,"boolean"==typeof m.content.text){if(d=v.attr(m.content.attr),m.content.attr===h||!d)return o("Unable to locate content for tooltip! Aborting render of tooltip on element: ",v),h;m.content.text=d}if(c.container.length||(c.container=y),c.target===h&&(c.target=b),m.show.target===h&&(m.show.target=b),m.show.solo===f&&(m.show.solo=c.container.closest("body")),m.hide.target===h&&(m.hide.target=b),m.position.viewport===f&&(m.position.viewport=c.container),c.container=c.container.eq(0),c.at=new u.Corner(c.at),c.my=new u.Corner(c.my),e.data(this,"qtip"))if(m.overwrite)v.qtip("destroy");else if(m.overwrite===h)return h;return m.suppress&&(g=e.attr(this,"title"))&&e(this).removeAttr("title").attr(S,g),s=new i(v,m,t,!!d),e.data(this,"qtip",s),v.bind("remove.qtip-"+t+" removeqtip.qtip-"+t,(function(){s.destroy()})),s}function i(t,n,i,o){function _(){var t=[n.show.target[0],n.hide.target[0],B.rendered&&I.tooltip[0],n.position.container[0],n.position.viewport[0],window,document];B.rendered?e([]).pushStack(e.grep(t,(function(e){return"object"===a(e)}))).unbind(U):n.show.target.unbind(U+"-create")}function T(){function r(e){j.is(":visible")&&B.reposition(e)}function o(e){if(j.hasClass(y))return h;clearTimeout(B.timers.inactive),B.timers.inactive=setTimeout((function(){B.hide(e)}),n.hide.inactive)}function a(t){if(j.hasClass(y)||H||W)return h;var i=e(t.relatedTarget||t.target),r=i.closest(b)[0]===j[0],o=i[0]===d.show[0];if(clearTimeout(B.timers.show),clearTimeout(B.timers.hide),"mouse"===u.target&&r||n.hide.fixed&&/mouse(out|leave|move)/.test(t.type)&&(r||o))try{t.preventDefault(),t.stopImmediatePropagation()}catch(e){}else n.hide.delay>0?B.timers.hide=setTimeout((function(){B.hide(t)}),n.hide.delay):B.hide(t)}function s(e){if(j.hasClass(y))return h;clearTimeout(B.timers.show),clearTimeout(B.timers.hide);var t=function(){B.toggle(f,e)};n.show.delay>0?B.timers.show=setTimeout(t,n.show.delay):t()}var u=n.position,d={show:n.show.target,hide:n.hide.target,viewport:e(u.viewport),document:e(document),body:e(document.body),window:e(window)},p={show:e.trim(""+n.show.event).split(" "),hide:e.trim(""+n.hide.event).split(" ")},m=e.browser.msie&&6===parseInt(e.browser.version,10);j.bind("mouseenter"+U+" mouseleave"+U,(function(e){var t="mouseenter"===e.type;t&&B.focus(e),j.toggleClass(C,t)})),n.hide.fixed&&(d.hide=d.hide.add(j),j.bind("mouseover"+U,(function(){j.hasClass(y)||clearTimeout(B.timers.hide)}))),/mouse(out|leave)/i.test(n.hide.event)?"window"===n.hide.leave&&d.window.bind("mouseout"+U+" blur"+U,(function(e){/select|option/.test(e.target)&&!e.relatedTarget&&B.hide(e)})):/mouse(over|enter)/i.test(n.show.event)&&d.hide.bind("mouseleave"+U,(function(e){clearTimeout(B.timers.show)})),(""+n.hide.event).indexOf("unfocus")>-1&&u.container.closest("html").bind("mousedown"+U,(function(n){var i=e(n.target),r=(!j.hasClass(y)&&j.is(":visible"),i.parents(b).filter(j[0]).length>0);i[0]!==t[0]&&i[0]!==j[0]&&!r&&!t.has(i[0]).length&&!i.attr("disabled")&&B.hide(n)})),"number"==typeof n.hide.inactive&&(d.show.bind("qtip-"+i+"-inactive",o),e.each(l.inactiveEvents,(function(e,t){d.hide.add(I.tooltip).bind(t+U+"-inactive",o)}))),e.each(p.hide,(function(t,n){var i=e.inArray(n,p.show),r=e(d.hide);i>-1&&r.add(d.show).length===r.length||"unfocus"===n?(d.show.bind(n+U,(function(e){j.is(":visible")?a(e):s(e)})),delete p.show[i]):d.hide.bind(n+U,a)})),e.each(p.show,(function(e,t){d.show.bind(t+U,s)})),"number"==typeof n.hide.distance&&d.show.add(j).bind("mousemove"+U,(function(e){var t=R.origin||{},i=n.hide.distance,r=Math.abs;(r(e.pageX-t.pageX)>=i||r(e.pageY-t.pageY)>=i)&&B.hide(e)})),"mouse"===u.target&&(d.show.bind("mousemove"+U,(function(e){c={pageX:e.pageX,pageY:e.pageY,type:"mousemove"}})),u.adjust.mouse&&(n.hide.event&&(j.bind("mouseleave"+U,(function(e){(e.relatedTarget||e.target)!==d.show[0]&&B.hide(e)})),I.target.bind("mouseenter"+U+" mouseleave"+U,(function(e){R.onTarget="mouseenter"===e.type}))),d.document.bind("mousemove"+U,(function(e){R.onTarget&&!j.hasClass(y)&&j.is(":visible")&&B.reposition(e||c)})))),(u.adjust.resize||d.viewport.length)&&(e.event.special.resize?d.viewport:d.window).bind("resize"+U,r),(d.viewport.length||m&&"fixed"===j.css("position"))&&d.viewport.bind("scroll"+U,r)}function D(n,i){function r(t){function n(n){n&&(delete a[n.src],clearTimeout(B.timers.img[n.src]),e(n).unbind(U)),e.isEmptyObject(a)&&(B.redraw(),i!==h&&B.reposition(R.event),t())}var r,a={};if(0===(r=o.find("img[src]:not([height]):not([width])")).length)return n();r.each((function(t,i){if(a[i.src]===s){var r=0,o=3;(function e(){if(i.height||i.width||r>o)return n(i);r+=1,B.timers.img[i.src]=setTimeout(e,700)})(),e(i).bind("error"+U+" load"+U,(function(){n(this)})),a[i.src]=i}}))}var o=I.content;return B.rendered&&n?(e.isFunction(n)&&(n=n.call(t,R.event,B)||""),n.jquery&&n.length>0?o.empty().append(n.css({display:"block"})):o.html(n),B.rendered<0?j.queue("fx",r):(W=0,r(e.noop)),B):h}function M(n,i){var r=I.title;return B.rendered&&n?(e.isFunction(n)&&(n=n.call(t,R.event,B)),n===h||!n&&""!==n?P(h):(n.jquery&&n.length>0?r.empty().append(n.css({display:"block"})):r.html(n),B.redraw(),void(i!==h&&B.rendered&&j.is(":visible")&&B.reposition(R.event)))):h}function E(e){var t=I.button,n=I.title;if(!B.rendered)return h;e?(n||N(),A()):t.remove()}function N(){var t=F+"-title";I.titlebar&&P(),I.titlebar=e("<div />",{class:g+"-titlebar "+(n.style.widget?"ui-widget-header":"")}).append(I.title=e("<div />",{id:t,class:g+"-title","aria-atomic":f})).insertBefore(I.content).delegate(".ui-tooltip-close","mousedown keydown mouseup keyup mouseout",(function(t){e(this).toggleClass("ui-state-active ui-state-focus","down"===t.type.substr(-4))})).delegate(".ui-tooltip-close","mouseover mouseout",(function(t){e(this).toggleClass("ui-state-hover","mouseover"===t.type)})),n.content.title.button?A():B.rendered&&B.redraw()}function A(){var t=n.content.title.button,i="string"==typeof t?t:"Close tooltip";I.button&&I.button.remove(),t.jquery?I.button=t:I.button=e("<a />",{class:"ui-state-default ui-tooltip-close "+(n.style.widget?"":g+"-icon"),title:i,"aria-label":i}).prepend(e("<span />",{class:"ui-icon ui-icon-close",html:"&times;"})),I.button.appendTo(I.titlebar).attr("role","button").click((function(e){return j.hasClass(y)||B.hide(e),h})),B.redraw()}function P(e){I.title&&(I.titlebar.remove(),I.titlebar=I.title=I.button=p,e!==h&&B.reposition())}function L(){var e=n.style.widget;j.toggleClass(v,e).toggleClass(w,n.style.def&&!e),I.content.toggleClass(v+"-content",e),I.titlebar&&I.titlebar.toggleClass(v+"-header",e),I.button&&I.button.toggleClass(g+"-icon",!e)}function O(e){for(var t,i=0,r=n,o=e.split(".");r=r[o[i++]];)i<o.length&&(t=r);return[t||n,o.pop()]}var I,R,B=this,z=document.body,F=g+"-"+i,H=0,W=0,j=e(),U=".qtip-"+i;B.id=i,B.rendered=h,B.elements=I={target:t},B.timers={img:{}},B.options=n,B.checks={},B.plugins={},B.cache=R={event:{},target:e(),disabled:h,attr:o,onTarget:h},B.checks.builtin={"^id$":function(t,n,i){var r=i===f?l.nextid:i,o=g+"-"+r;r!==h&&r.length>0&&!e("#"+o).length&&(j[0].id=o,I.content[0].id=o+"-content",I.title[0].id=o+"-title")},"^content.text$":function(e,t,n){D(n)},"^content.title.text$":function(e,t,n){if(!n)return P();!I.title&&n&&N(),M(n)},"^content.title.button$":function(e,t,n){E(n)},"^position.(my|at)$":function(e,t,n){"string"==typeof n&&(e[t]=new u.Corner(n))},"^position.container$":function(e,t,n){B.rendered&&j.appendTo(n)},"^show.ready$":function(){B.rendered?B.toggle(f):B.render(1)},"^style.classes$":function(e,t,n){j.attr("class",g+" qtip ui-helper-reset "+n)},"^style.widget|content.title":L,"^events.(render|show|move|hide|focus|blur)$":function(t,n,i){j[(e.isFunction(i)?"":"un")+"bind"]("tooltip"+n,i)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var e=n.position;j.attr("tracking","mouse"===e.target&&e.adjust.mouse),_(),T()}},e.extend(B,{render:function(i){if(B.rendered)return B;var r=n.content.text,o=n.content.title.text,a=n.position,s=e.Event("tooltiprender");return e.attr(t[0],"aria-describedby",F),j=I.tooltip=e("<div/>",{id:F,class:g+" qtip ui-helper-reset "+w+" "+n.style.classes+" "+g+"-pos-"+n.position.my.abbrev(),width:n.style.width||"",height:n.style.height||"",tracking:"mouse"===a.target&&a.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":h,"aria-describedby":F+"-content","aria-hidden":f}).toggleClass(y,R.disabled).data("qtip",B).appendTo(n.position.container).append(I.content=e("<div />",{class:g+"-content",id:F+"-content","aria-atomic":f})),B.rendered=-1,H=W=1,o&&(N(),e.isFunction(o)||M(o,h)),e.isFunction(r)||D(r,h),B.rendered=f,L(),e.each(n.events,(function(t,n){e.isFunction(n)&&j.bind("toggle"===t?"tooltipshow tooltiphide":"tooltip"+t,n)})),e.each(u,(function(){"render"===this.initialize&&this(B)})),T(),j.queue("fx",(function(e){s.originalEvent=R.event,j.trigger(s,[B]),H=W=0,B.redraw(),(n.show.ready||i)&&B.toggle(f,R.event,h),e()})),B},get:function(e){var t,i;switch(e.toLowerCase()){case"dimensions":t={height:j.outerHeight(),width:j.outerWidth()};break;case"offset":t=u.offset(j,n.position.container);break;default:t=(t=(i=O(e.toLowerCase()))[0][i[1]]).precedance?t.string():t}return t},set:function(t,i){function o(e,t){var n,i,r;for(n in m)for(i in m[n])(r=new RegExp(i,"i").exec(e))&&(t.push(r),m[n][i].apply(B,t))}var s,l=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,u=/^content\.(title|attr)|style/i,c=h,d=h,m=B.checks;return"string"==typeof t?(s=t,(t={})[s]=i):t=e.extend(f,{},t),e.each(t,(function(n,i){var r,o=O(n.toLowerCase());r=o[0][o[1]],o[0][o[1]]="object"===a(i)&&i.nodeType?e(i):i,t[n]=[o[0],o[1],i,r],c=l.test(n)||c,d=u.test(n)||d})),r(n),H=W=1,e.each(t,o),H=W=0,j.is(":visible")&&B.rendered&&(c&&B.reposition("mouse"===n.position.target?p:R.event),d&&B.redraw()),B},toggle:function(t,r){function o(){t?(e.browser.msie&&j[0].style.removeAttribute("filter"),j.css("overflow",""),"string"==typeof u.autofocus&&e(u.autofocus,j).focus(),u.target.trigger("qtip-"+i+"-inactive")):j.css({display:"",visibility:"",opacity:"",left:"",top:""}),(s=e.Event("tooltip"+(t?"visible":"hidden"))).originalEvent=r?R.event:p,j.trigger(s,[B])}if(!B.rendered)return t?B.render(1):B;var s,l=t?"show":"hide",u=n[l],m=j.is(":visible"),g=!r||u.target.length<2||R.target[0]===r.target,v=r&&u.target.add(r.target).length!==u.target.length,y=n.position,w=n.content;if(a(t).search("boolean|number")&&(t=!m),!j.is(":animated")&&m===t&&g)return B;if(r){if(/over|enter/.test(r.type)&&/out|leave/.test(R.event.type)&&n.show.target.add(r.target).length===n.show.target.length&&j.has(r.relatedTarget).length)return B;R.event=e.extend({},r)}return(s=e.Event("tooltip"+l)).originalEvent=r?R.event:p,j.trigger(s,[B,90]),s.isDefaultPrevented()||(e.attr(j[0],"aria-hidden",!t),t?(R.origin=e.extend({},c),B.focus(r),e.isFunction(w.text)&&D(w.text,h),e.isFunction(w.title.text)&&M(w.title.text,h),!d&&"mouse"===y.target&&y.adjust.mouse&&(e(document).bind("mousemove.qtip",(function(e){c={pageX:e.pageX,pageY:e.pageY,type:"mousemove"}})),d=f),B.reposition(r,arguments[2]),(s.solo=!!u.solo)&&e(b,u.solo).not(j).qtip("hide",s)):(clearTimeout(B.timers.show),delete R.origin,d&&!e(b+'[tracking="true"]:visible',u.solo).not(j).length&&(e(document).unbind("mousemove.qtip"),d=h),B.blur(r)),j.stop(v,!v),u.effect===h?(j[l](),o.call(j)):e.isFunction(u.effect)?(u.effect.call(j,B),j.queue("fx",(function(e){o(),e()}))):j.fadeTo(90,t?1:0,o),t&&u.target.trigger("qtip-"+i+"-inactive")),B},show:function(e){return B.toggle(f,e)},hide:function(e){return B.toggle(h,e)},focus:function(t){if(!B.rendered)return B;var n,i=e(b),r=parseInt(j[0].style.zIndex,10),o=l.zindex+i.length,a=e.extend({},t);return j.hasClass(x)||((n=e.Event("tooltipfocus")).originalEvent=a,j.trigger(n,[B,o]),n.isDefaultPrevented()||(r!==o&&(i.each((function(){this.style.zIndex>r&&(this.style.zIndex=this.style.zIndex-1)})),i.filter("."+x).qtip("blur",a)),j.addClass(x)[0].style.zIndex=o)),B},blur:function(t){var n,i=e.extend({},t);return j.removeClass(x),(n=e.Event("tooltipblur")).originalEvent=i,j.trigger(n,[B]),B},reposition:function(t,i){if(!B.rendered||H)return B;H=1;var r,o=n.position.target,a=n.position,s=a.my,l=a.at,d=a.adjust,f=d.method.split(" "),p=j.outerWidth(),m=j.outerHeight(),v=0,y=0,b=e.Event("tooltipmove"),w="fixed"===j.css("position"),x=a.viewport,C={left:0,top:0},k=a.container,_=h,S=B.plugins.tip,T={horizontal:f[0],vertical:f[1]=f[1]||f[0],enabled:x.jquery&&o[0]!==window&&o[0]!==z&&"none"!==d.method,left:function(e){var t="shift"===T.horizontal,n=-k.offset.left+x.offset.left+x.scrollLeft,i="left"===s.x?p:"right"===s.x?-p:-p/2,r="left"===l.x?v:"right"===l.x?-v:-v/2,o=S&&S.size&&S.size.width||0,a=S&&S.corner&&"x"===S.corner.precedance&&!t?o:0,u=n-e+a,c=e+p-x.width-n+a,f=i-("x"===s.precedance||s.x===s.y?r:0)-("center"===l.x?v/2:0),h="center"===s.x;return t?(a=S&&S.corner&&"y"===S.corner.precedance?o:0,f=("left"===s.x?1:-1)*i-a,C.left+=u>0?u:c>0?-c:0,C.left=Math.max(-k.offset.left+x.offset.left+(a&&"center"===S.corner.x?S.offset:0),e-f,Math.min(Math.max(-k.offset.left+x.offset.left+x.width,e+f),C.left))):(u>0&&("left"!==s.x||c>0)?C.left-=f:c>0&&("right"!==s.x||u>0)&&(C.left-=h?-f:f),C.left!==e&&h&&(C.left-=d.x),C.left<n&&-C.left>c&&(C.left=e)),C.left-e},top:function(e){var t="shift"===T.vertical,n=-k.offset.top+x.offset.top+x.scrollTop,i="top"===s.y?m:"bottom"===s.y?-m:-m/2,r="top"===l.y?y:"bottom"===l.y?-y:-y/2,o=S&&S.size&&S.size.height||0,a=S&&S.corner&&"y"===S.corner.precedance&&!t?o:0,u=n-e+a,c=e+m-x.height-n+a,f=i-("y"===s.precedance||s.x===s.y?r:0)-("center"===l.y?y/2:0),h="center"===s.y;return t?(a=S&&S.corner&&"x"===S.corner.precedance?o:0,f=("top"===s.y?1:-1)*i-a,C.top+=u>0?u:c>0?-c:0,C.top=Math.max(-k.offset.top+x.offset.top+(a&&"center"===S.corner.x?S.offset:0),e-f,Math.min(Math.max(-k.offset.top+x.offset.top+x.height,e+f),C.top))):(u>0&&("top"!==s.y||c>0)?C.top-=f:c>0&&("bottom"!==s.y||u>0)&&(C.top-=h?-f:f),C.top!==e&&h&&(C.top-=d.y),C.top<0&&-C.top>c&&(C.top=e)),C.top-e}};if(e.isArray(o)&&2===o.length)l={x:"left",y:"top"},C={left:o[0],top:o[1]};else if("mouse"===o&&(t&&t.pageX||R.event.pageX))l={x:"left",y:"top"},t=(!t||"resize"!==t.type&&"scroll"!==t.type?t&&t.pageX&&"mousemove"===t.type?t:!c||!c.pageX||!d.mouse&&t&&t.pageX?!d.mouse&&R.origin&&R.origin.pageX&&n.show.distance?R.origin:t:{pageX:c.pageX,pageY:c.pageY}:R.event)||t||R.event||c||{},C={top:t.pageY,left:t.pageX};else{if(o="event"===o?t&&t.target&&"scroll"!==t.type&&"resize"!==t.type?R.target=e(t.target):R.target:R.target=e(o.jquery?o:I.target),0===(o=e(o).eq(0)).length)return B;o[0]===document||o[0]===window?(v=u.iOS?window.innerWidth:o.width(),y=u.iOS?window.innerHeight:o.height(),o[0]===window&&(C={top:(x||o).scrollTop(),left:(x||o).scrollLeft()})):o.is("area")&&u.imagemap?C=u.imagemap(o,l,T.enabled?f:h):"http://www.w3.org/2000/svg"===o[0].namespaceURI&&u.svg?C=u.svg(o,l):(v=o.outerWidth(),y=o.outerHeight(),C=u.offset(o,k)),C.offset&&(v=C.width,y=C.height,_=C.flipoffset,C=C.offset),(u.iOS<4.1&&u.iOS>3.1||4.3==u.iOS||!u.iOS&&w)&&(r=e(window),C.left-=r.scrollLeft(),C.top-=r.scrollTop()),C.left+="right"===l.x?v:"center"===l.x?v/2:0,C.top+="bottom"===l.y?y:"center"===l.y?y/2:0}return C.left+=d.x+("right"===s.x?-p:"center"===s.x?-p/2:0),C.top+=d.y+("bottom"===s.y?-m:"center"===s.y?-m/2:0),T.enabled?(x={elem:x,height:x[(x[0]===window?"h":"outerH")+"eight"](),width:x[(x[0]===window?"w":"outerW")+"idth"](),scrollLeft:w?0:x.scrollLeft(),scrollTop:w?0:x.scrollTop(),offset:x.offset()||{left:0,top:0}},k={elem:k,scrollLeft:k.scrollLeft(),scrollTop:k.scrollTop(),offset:k.offset()||{left:0,top:0}},C.adjusted={left:"none"!==T.horizontal?T.left(C.left):0,top:"none"!==T.vertical?T.top(C.top):0},C.adjusted.left+C.adjusted.top&&j.attr("class",j[0].className.replace(/ui-tooltip-pos-\w+/i,g+"-pos-"+s.abbrev())),_&&C.adjusted.left&&(C.left+=_.left),_&&C.adjusted.top&&(C.top+=_.top)):C.adjusted={left:0,top:0},b.originalEvent=e.extend({},t),j.trigger(b,[B,C,x.elem||x]),b.isDefaultPrevented()||(delete C.adjusted,i===h||isNaN(C.left)||isNaN(C.top)||"mouse"===o||!e.isFunction(a.effect)?j.css(C):e.isFunction(a.effect)&&(a.effect.call(j,B,e.extend({},C)),j.queue((function(t){e(this).css({opacity:"",height:""}),e.browser.msie&&this.style.removeAttribute("filter"),t()}))),H=0),B},redraw:function(){if(B.rendered<1||W)return B;var e,t,i,r,o=n.position.container;return W=1,n.style.height&&j.css("height",n.style.height),n.style.width?j.css("width",n.style.width):(j.css("width","").addClass(k),t=j.width()+1,e=((i=j.css("max-width")||"")+(r=j.css("min-width")||"")).indexOf("%")>-1?o.width()/100:0,t=(i=(i.indexOf("%")>-1?e:1)*parseInt(i,10)||t)+(r=(r.indexOf("%")>-1?e:1)*parseInt(r,10)||0)?Math.min(Math.max(t,r),i):t,j.css("width",Math.round(t)).removeClass(k)),W=0,B},disable:function(t){return"boolean"!=typeof t&&(t=!j.hasClass(y)&&!R.disabled),B.rendered?(j.toggleClass(y,t),e.attr(j[0],"aria-disabled",t)):R.disabled=!!t,B},enable:function(){return B.disable(h)},destroy:function(){var r=t[0],o=e.attr(r,S),a=t.data("qtip");return B.rendered&&(j.stop(1,0).remove(),e.each(B.plugins,(function(){this.destroy&&this.destroy()}))),clearTimeout(B.timers.show),clearTimeout(B.timers.hide),_(),a&&B!==a||(e.removeData(r,"qtip"),n.suppress&&o&&(e.attr(r,"title",o),t.removeAttr(S)),t.removeAttr("aria-describedby")),t.unbind(".qtip-"+i),delete m[B.id],t}})}function r(t){var n;return t&&"object"===a(t)?(t.metadata!==p&&"object"===a(t.metadata)||(t.metadata={type:t.metadata}),"content"in t&&((t.content===p||"object"!==a(t.content)||t.content.jquery)&&(t.content={text:t.content}),n=t.content.text||h,!e.isFunction(n)&&(!n&&!n.attr||n.length<1||"object"===a(n)&&!n.jquery)&&(t.content.text=h),"title"in t.content&&(t.content.title!==p&&"object"===a(t.content.title)||(t.content.title={text:t.content.title}),n=t.content.title.text||h,!e.isFunction(n)&&(!n&&!n.attr||n.length<1||"object"===a(n)&&!n.jquery)&&(t.content.title.text=h))),"position"in t&&(t.position!==p&&"object"===a(t.position)||(t.position={my:t.position,at:t.position})),"show"in t&&(t.show!==p&&"object"===a(t.show)||(t.show.jquery?t.show={target:t.show}:t.show={event:t.show})),"hide"in t&&(t.hide!==p&&"object"===a(t.hide)||(t.hide.jquery?t.hide={target:t.hide}:t.hide={event:t.hide})),"style"in t&&(t.style!==p&&"object"===a(t.style)||(t.style={classes:t.style})),e.each(u,(function(){this.sanitize&&this.sanitize(t)})),t):h}function o(){if(o.history=o.history||[],o.history.push(arguments),"object"===("undefined"==typeof console?"undefined":a(console))){var e=console[console.warn?"warn":"log"],t=Array.prototype.slice.call(arguments);"string"==typeof arguments[0]&&(t[0]="qTip2: "+t[0]),e.apply?e.apply(console,t):e(t)}}var s,l,u,c,d,f=!0,h=!1,p=null,m={},g="ui-tooltip",v="ui-widget",y="ui-state-disabled",b="div.qtip."+g,w=g+"-default",x=g+"-focus",C=g+"-hover",k=g+"-fluid",_="_replacedByqTip",S="oldtitle";l=e.fn.qtip=function(t,n,i){var o=(""+t).toLowerCase(),u=p,c=e.makeArray(arguments).slice(1),d=c[c.length-1],m=this[0]?e.data(this[0],"qtip"):p;return!arguments.length&&m||"api"===o?m:"string"==typeof t?(this.each((function(){var t=e.data(this,"qtip");if(!t)return f;if(d&&d.timeStamp&&(t.cache.event=d),"option"!==o&&"options"!==o||!n)t[o]&&t[o].apply(t[o],c);else{if(!e.isPlainObject(n)&&i===s)return u=t.get(n),h;t.set(n,i)}})),u!==p?u:this):"object"!==a(t)&&arguments.length?void 0:(m=r(e.extend(f,{},t)),l.bind.call(this,m,d))},l.bind=function(t,i){return this.each((function(r){function o(t){function n(){y.render("object"===a(t)||d.show.ready),p.show.add(p.hide).unbind(v)}if(y.cache.disabled)return h;y.cache.event=e.extend({},t),y.cache.target=t?e(t.target):[s],d.show.delay>0?(clearTimeout(y.timers.show),y.timers.show=setTimeout(n,d.show.delay),g.show!==g.hide&&p.hide.bind(g.hide,(function(){clearTimeout(y.timers.show)}))):n()}var d,p,g,v,y,b;if(b=!(b=e.isArray(t.id)?t.id[r]:t.id)||b===h||b.length<1||m[b]?l.nextid++:m[b]=b,v=".qtip-"+b+"-create",(y=n.call(this,b,t))===h)return f;d=y.options,e.each(u,(function(){"initialize"===this.initialize&&this(y)})),p={show:d.show.target,hide:d.hide.target},g={show:e.trim(""+d.show.event).replace(/ /g,v+" ")+v,hide:e.trim(""+d.hide.event).replace(/ /g,v+" ")+v},/mouse(over|enter)/i.test(g.show)&&!/mouse(out|leave)/i.test(g.hide)&&(g.hide+=" mouseleave"+v),p.show.bind("mousemove"+v,(function(e){c={pageX:e.pageX,pageY:e.pageY,type:"mousemove"},y.cache.onTarget=f})),p.show.bind(g.show,o),(d.show.ready||d.prerender)&&o(i)}))},u=l.plugins={Corner:function(e){e=(""+e).replace(/([A-Z])/," $1").replace(/middle/gi,"center").toLowerCase(),this.x=(e.match(/left|right/i)||e.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(e.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();var t=e.charAt(0);this.precedance="t"===t||"b"===t?"y":"x",this.string=function(){return"y"===this.precedance?this.y+this.x:this.x+this.y},this.abbrev=function(){var e=this.x.substr(0,1),t=this.y.substr(0,1);return e===t?e:"c"===e||"c"!==e&&"c"!==t?t+e:e+t},this.clone=function(){return{x:this.x,y:this.y,precedance:this.precedance,string:this.string,abbrev:this.abbrev,clone:this.clone}}},offset:function(t,n){function i(e,t){s.left+=t*e.scrollLeft(),s.top+=t*e.scrollTop()}var r,o,a,s=t.offset(),l=t.closest("body")[0],u=n;if(u){do{"static"!==u.css("position")&&(o=u.position(),s.left-=o.left+(parseInt(u.css("borderLeftWidth"),10)||0)+(parseInt(u.css("marginLeft"),10)||0),s.top-=o.top+(parseInt(u.css("borderTopWidth"),10)||0)+(parseInt(u.css("marginTop"),10)||0),!r&&"hidden"!==(a=u.css("overflow"))&&"visible"!==a&&(r=u))}while((u=e(u[0].offsetParent)).length);r&&r[0]!==l&&i(r,1)}return s},iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,3})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_","."))||h,fn:{attr:function(t,n){if(this.length){var i=this[0],r="title",o=e.data(i,"qtip");if(t===r&&o&&"object"===a(o)&&o.options.suppress)return arguments.length<2?e.attr(i,S):(o&&o.options.content.attr===r&&o.cache.attr&&o.set("content.text",n),this.attr(S,n))}return e.fn["attr"+_].apply(this,arguments)},clone:function(t){e([]);var n=e.fn["clone"+_].apply(this,arguments);return t||n.filter("["+S+"]").attr("title",(function(){return e.attr(this,S)})).removeAttr(S),n}}},e.each(u.fn,(function(t,n){if(!n||e.fn[t+_])return f;var i=e.fn[t+_]=e.fn[t];e.fn[t]=function(){return n.apply(this,arguments)||i.apply(this,arguments)}})),e.ui||(e["cleanData"+_]=e.cleanData,e.cleanData=function(t){for(var n,i=0;(n=t[i])!==s;i++)try{e(n).triggerHandler("removeqtip")}catch(e){}e["cleanData"+_](t)}),l.version="nightly",l.nextid=0,l.inactiveEvents="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),l.zindex=15e3,l.defaults={prerender:h,id:h,overwrite:f,suppress:f,content:{text:f,attr:"title",title:{text:h,button:h}},position:{my:"top left",at:"bottom right",target:h,container:h,viewport:h,adjust:{x:0,y:0,mouse:f,resize:f,method:"flip flip"},effect:function(t,n,i){e(this).animate(n,{duration:200,queue:h})}},show:{target:h,event:"mouseenter",effect:f,delay:90,solo:h,ready:h,autofocus:h},hide:{target:h,event:"mouseleave",effect:f,delay:0,fixed:h,inactive:h,leave:"window",distance:h},style:{classes:"",widget:h,width:h,height:h,def:f},events:{render:p,move:p,show:p,hide:p,toggle:p,visible:p,hidden:p,focus:p,blur:p}},u.ajax=function(e){var n=e.plugins.ajax;return"object"===a(n)?n:e.plugins.ajax=new t(e)},u.ajax.initialize="render",u.ajax.sanitize=function(e){var t,n=e.content;n&&"ajax"in n&&("object"!==a(t=n.ajax)&&(t=e.content.ajax={url:t}),"boolean"!=typeof t.once&&t.once&&(t.once=!!t.once))},e.extend(f,l.defaults,{content:{ajax:{loading:f,once:f}}})},void 0===(o="function"==typeof i?i.apply(t,r):i)||(e.exports=o)},8970:(e,t,n)=>{!function(e){function t(e){return e.replace(/(:|\.)/g,"\\$1")}var n=function(t){var n=[],i=t.dir&&"left"==t.dir?"scrollLeft":"scrollTop";return this.each((function(){if(this!=document&&this!=window){var t=e(this);t[i]()>0?n.push(this):(t[i](1),t[i]()>0&&n.push(this),t[i](0))}})),n.length||this.each((function(){"BODY"===this.nodeName&&(n=[this])})),"first"===t.el&&n.length>1&&(n=[n[0]]),n};e.fn.extend({scrollable:function(e){var t=n.call(this,{dir:e});return this.pushStack(t)},firstScrollable:function(e){var t=n.call(this,{el:"first",dir:e});return this.pushStack(t)},smoothScroll:function(n){n=n||{};var i=e.extend({},e.fn.smoothScroll.defaults,n),r=e.smoothScroll.filterPath(location.pathname);return this.unbind("click.smoothscroll").bind("click.smoothscroll",(function(n){var o=this,a=e(this),s=i.exclude,l=i.excludeWithin,u=0,c=0,d=!0,f={},h=location.hostname===o.hostname||!o.hostname,p=i.scrollTarget||(e.smoothScroll.filterPath(o.pathname)||r)===r,m=t(o.hash);if(i.scrollTarget||h&&p&&m){for(;d&&s.length>u;)a.is(t(s[u++]))&&(d=!1);for(;d&&l.length>c;)a.closest(l[c++]).length&&(d=!1)}else d=!1;d&&(n.preventDefault(),e.extend(f,i,{scrollTarget:i.scrollTarget||m,link:o}),e.smoothScroll(f))})),this}}),e.smoothScroll=function(t,n){var i,r,o,a,s=0,l="offset",u="scrollTop",c={},d={};"number"==typeof t?(i=e.fn.smoothScroll.defaults,o=t):(i=e.extend({},e.fn.smoothScroll.defaults,t||{})).scrollElement&&(l="position","static"==i.scrollElement.css("position")&&i.scrollElement.css("position","relative")),u="left"==(i=e.extend({link:null},i)).direction?"scrollLeft":u,i.scrollElement?s=(r=i.scrollElement)[u]():r=e("html, body").firstScrollable(),i.beforeScroll.call(r,i),o="number"==typeof t?t:n||e(i.scrollTarget)[l]()&&e(i.scrollTarget)[l]()[i.direction]||0,c[u]=o+s+i.offset,"auto"===(a=i.speed)&&(a=c[u]||r.scrollTop(),a/=i.autoCoefficent),d={duration:a,easing:i.easing,complete:function(){i.afterScroll.call(i.link,i)}},i.step&&(d.step=i.step),r.length?r.stop().animate(c,d):i.afterScroll.call(i.link,i)},e.smoothScroll.version="1.4.10",e.smoothScroll.filterPath=function(e){return e.replace(/^\//,"").replace(/(index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")},e.fn.smoothScroll.defaults={exclude:[],excludeWithin:[],offset:0,direction:"top",scrollElement:null,scrollTarget:null,beforeScroll:function(){},afterScroll:function(){},easing:"swing",speed:400,autoCoefficent:2}}(n(20428))},25874:(e,t,n)=>{var i,r;i=[n(20428),n(78759),n(60903)],r=function(e){e((function(){function t(){var t=e(this);if(""!=t.val()){var n=t.closest(".datepair");t.hasClass("date")?function(e,t){var n=t.find("input.start.date"),i=t.find("input.end.date");if(!n.length||!i.length)return;var r=new Date(n.val()),o=new Date(i.val()),a=t.data("dateDelta");if(a&&e.hasClass("start")){var s=new Date(r.getTime()+a);return i.val(s.format("m/d/Y")),void i.datepicker("update")}var l=o.getTime()-r.getTime();if(l<0&&(l=0,e.hasClass("start")?(i.val(r.format("m/d/Y")),i.datepicker("update")):e.hasClass("end")&&(n.val(o.format("m/d/Y")),n.datepicker("update"))),l<864e5){var u=t.find("input.start.time").val();u&&t.find("input.end.time").timepicker("option",{minTime:u})}else t.find("input.end.time").timepicker("option",{minTime:null});t.data("dateDelta",l)}(t,n):t.hasClass("time")&&function(e,t){var n=t.find("input.start.time"),i=t.find("input.end.time");if(!n.length||!i.length)return;var r=n.timepicker("getSecondsFromMidnight"),o=i.timepicker("getSecondsFromMidnight"),a=t.data("timeDelta"),s=t.data("dateDelta");e.hasClass("start")&&(!s||s<864e5)&&i.timepicker("option","minTime",r);var l,u=0;if(a&&e.hasClass("start")){(h=(r+a)%86400)<0&&(h+=86400),i.timepicker("setTime",h),l=h-r}else{if(null===r||null===o)return;l=o-r}if(t.data("timeDelta",l),l<0&&(!a||a>0))u=864e5;else if(l>0&&a<0)u=-864e5;var c=t.find(".start.date"),d=t.find(".end.date");c.val()&&!d.val()&&(d.val(c.val()),d.datepicker("update"),s=0,t.data("dateDelta",0));if(0!=u&&(s||0===s)){var f=new Date(d.val()),h=new Date(f.getTime()+u);d.val(h.format("m/d/Y")),d.datepicker("update"),t.data("dateDelta",s+u)}}(t,n)}}e(".datepair input.date").each((function(){var n=e(this);n.datepicker({dateFormat:"m/d/yy"}),(n.hasClass("start")||n.hasClass("end"))&&n.on("changeDate change",t)})),e(".datepair input.time").each((function(){var n=e(this),i={showDuration:!0,timeFormat:"H:i",scrollDefaultNow:!0};(n.hasClass("start")||n.hasClass("end"))&&(i.onSelect=t),n.timepicker(i)})),e(".datepair").each((function(){var t=e(this),n=t.find("input.start.date"),i=t.find("input.end.date"),r=0;if(n.length&&i.length){var o=new Date(n.val());r=new Date(i.val()).getTime()-o.getTime(),t.data("dateDelta",r)}var a=t.find("input.start.time"),s=t.find("input.end.time");if(a.length&&s.length){var l=a.timepicker("getSecondsFromMidnight"),u=s.timepicker("getSecondsFromMidnight");t.data("timeDelta",u-l),r<864e5&&s.timepicker("option","minTime",l)}}))})),Date.prototype.format=function(e){for(var t="",n=Date.replaceChars,i=0;i<e.length;i++){var r=e.charAt(i);n[r]?t+=n[r].call(this):t+=r}return t},Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return this.getDate()%10==1&&11!=this.getDate()?"st":this.getDate()%10==2&&12!=this.getDate()?"nd":this.getDate()%10==3&&13!=this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){return"Not Yet Supported"},W:function(){return"Not Yet Supported"},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){return"Not Yet Supported"},L:function(){return this.getFullYear()%4==0&&this.getFullYear()%100!=0||this.getFullYear()%400==0?"1":"0"},o:function(){return"Not Supported"},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return"Not Yet Supported"},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},e:function(){return"Not Yet Supported"},I:function(){return"Not Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":"+(Math.abs(this.getTimezoneOffset()%60)<10?"0":"")+Math.abs(this.getTimezoneOffset()%60)},T:function(){var e=this.getMonth();this.setMonth(0);var t=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return this.setMonth(e),t},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d")+"T"+this.format("H:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}}}.apply(t,i),void 0===r||(e.exports=r)},60903:(e,t,n)=>{var i,r,o;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}r=[n(20428)],i=function(e){var t=c(),n=86400,i="ontouchstart"in document?"touchstart":"mousedown",r={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,timeFormat:"g:ia",scrollDefaultNow:!1,scrollDefaultTime:!1,selectOnBlur:!1,forceRoundTime:!1,appendTo:"body"},o={decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},s=!1,l={init:function(t){return this.each((function(){var n=e(this);if("SELECT"==n[0].tagName){for(var a=e("<input />"),u={type:"text",value:n.val()},c=n[0].attributes,d=0;d<c.length;d++)u[c[d].nodeName]=c[d].nodeValue;a.attr(u),n.replaceWith(a),n=a}var f=e.extend({},r);t&&(f=e.extend(f,t)),f.minTime&&(f.minTime=y(f.minTime)),f.maxTime&&(f.maxTime=y(f.maxTime)),f.durationTime&&(f.durationTime=y(f.durationTime)),f.lang&&(o=e.extend(o,f.lang)),n.data("timepicker-settings",f),n.attr("autocomplete","off"),n.on("click.timepicker focus.timepicker",l.show),n.on("blur.timepicker",h),n.on("keydown.timepicker",p),n.addClass("ui-timepicker-input"),h.call(n.get(0)),s||(e("body").on(i,(function(t){var n=e(t.target);0===n.closest(".ui-timepicker-input").length&&0===n.closest(".ui-timepicker-list").length&&l.hide()})),s=!0)}))},show:function(t){var n=e(this);"ontouchstart"in document&&n.blur();var i=n.data("timepicker-list");if(!n.attr("readonly")){if(i&&0!==i.length||(u(n),i=n.data("timepicker-list")),n.hasClass("ui-timepicker-hideme"))return n.removeClass("ui-timepicker-hideme"),void i.hide();if(!i.is(":visible")){l.hide(),n.offset().top+n.outerHeight(!0)+i.outerHeight()>e(window).height()+e(window).scrollTop()?i.css({left:n.offset().left,top:n.offset().top-i.outerHeight()}):i.css({left:n.offset().left,top:n.offset().top+n.outerHeight()}),i.show();var r=n.data("timepicker-settings"),o=i.find(".ui-timepicker-selected");if(o.length||(n.val()?o=d(n,i,y(n.val())):r.scrollDefaultNow?o=d(n,i,y(new Date)):!1!==r.scrollDefaultTime&&(o=d(n,i,y(r.scrollDefaultTime)))),o&&o.length){var a=i.scrollTop()+o.position().top-o.outerHeight();i.scrollTop(a)}else i.scrollTop(0);n.trigger("showTimepicker")}}},hide:function(t){e(".ui-timepicker-list:visible").each((function(){var t=e(this),n=t.data("timepicker-input"),i=n.data("timepicker-settings");i&&i.selectOnBlur&&m(n),t.hide(),n.trigger("hideTimepicker")}))},option:function(t,n){var i=e(this),r=i.data("timepicker-settings"),o=i.data("timepicker-list");if("object"==a(t))r=e.extend(r,t);else if("string"==typeof t&&void 0!==n)r[t]=n;else if("string"==typeof t)return r[t];r.minTime&&(r.minTime=y(r.minTime)),r.maxTime&&(r.maxTime=y(r.maxTime)),r.durationTime&&(r.durationTime=y(r.durationTime)),i.data("timepicker-settings",r),o&&(o.remove(),i.data("timepicker-list",!1))},getSecondsFromMidnight:function(){return y(e(this).val())},getTime:function(){return new Date(t.valueOf()+1e3*y(e(this).val()))},setTime:function(t){var n=e(this),i=v(y(t),n.data("timepicker-settings").timeFormat);n.val(i)},remove:function(){var t=e(this);t.hasClass("ui-timepicker-input")&&(t.removeAttr("autocomplete","off"),t.removeClass("ui-timepicker-input"),t.removeData("timepicker-settings"),t.off(".timepicker"),t.data("timepicker-list")&&t.data("timepicker-list").remove(),t.removeData("timepicker-list"))}};function u(t){var i=t.data("timepicker-settings"),r=t.data("timepicker-list");r&&r.length&&(r.remove(),t.data("timepicker-list",!1)),(r=e("<ul />")).attr("tabindex",-1),r.addClass("ui-timepicker-list"),i.className&&r.addClass(i.className),r.css({display:"none",position:"absolute"}),null===i.minTime&&null===i.durationTime||!i.showDuration||r.addClass("ui-timepicker-with-duration");var o=null!==i.durationTime?i.durationTime:i.minTime,a=null!==i.minTime?i.minTime:0,s=null!==i.maxTime?i.maxTime:a+n-1;s<=a&&(s+=n);for(var l=a;l<=s;l+=60*i.step){var u=l,c=e("<li />");if(c.data("time",u),c.text(v(u,i.timeFormat)),(null!==i.minTime||null!==i.durationTime)&&i.showDuration){var d=e("<span />");d.addClass("ui-timepicker-duration"),d.text(" ("+g(l-o)+")"),c.append(d)}r.append(c)}r.data("timepicker-input",t),t.data("timepicker-list",r);var h=i.appendTo;"string"==typeof h?h=e(h):"function"==typeof h&&(h=h(t)),h.append(r),f(t,r),r.on("click","li",(function(n){t.addClass("ui-timepicker-hideme"),t[0].focus(),r.find("li").removeClass("ui-timepicker-selected"),e(this).addClass("ui-timepicker-selected"),m(t),r.hide()}))}function c(){var e=new Date,t=6e4*e.getTimezoneOffset();e.setHours(0),e.setMinutes(0),e.setSeconds(0);var n=6e4*e.getTimezoneOffset();return new Date(e.valueOf()-n+t)}function d(t,n,i){if(!i&&0!==i)return!1;var r=t.data("timepicker-settings"),o=!1,a=30*r.step;return n.find("li").each((function(t,n){var r=e(n),s=r.data("time")-i;if(Math.abs(s)<a||s==a)return o=r,!1})),o}function f(e,t){var n=y(e.val()),i=d(e,t,n);i&&i.addClass("ui-timepicker-selected")}function h(){if(""!==this.value){var t=e(this),n=y(this.value);if(null!==n){var i=t.data("timepicker-settings");if(i.forceRoundTime){var r=n%(60*i.step);r>=30*i.step?n+=60*i.step-r:n-=r}var o=v(n,i.timeFormat);t.val(o)}else t.trigger("timeFormatError")}}function p(t){var n=e(this),i=n.data("timepicker-list");if(!i.is(":visible")){if(40!=t.keyCode)return!0;n.focus()}switch(t.keyCode){case 13:return m(n),l.hide.apply(this),t.preventDefault(),!1;case 38:var r=i.find(".ui-timepicker-selected");r.length?r.is(":first-child")||(r.removeClass("ui-timepicker-selected"),r.prev().addClass("ui-timepicker-selected"),r.prev().position().top<r.outerHeight()&&i.scrollTop(i.scrollTop()-r.outerHeight())):(i.children().each((function(t,n){if(e(n).position().top>0)return r=e(n),!1})),r.addClass("ui-timepicker-selected"));break;case 40:0===(r=i.find(".ui-timepicker-selected")).length?(i.children().each((function(t,n){if(e(n).position().top>0)return r=e(n),!1})),r.addClass("ui-timepicker-selected")):r.is(":last-child")||(r.removeClass("ui-timepicker-selected"),r.next().addClass("ui-timepicker-selected"),r.next().position().top+2*r.outerHeight()>i.outerHeight()&&i.scrollTop(i.scrollTop()+r.outerHeight()));break;case 27:i.find("li").removeClass("ui-timepicker-selected"),i.hide();break;case 9:l.hide();break;case 16:case 17:case 18:case 19:case 20:case 33:case 34:case 35:case 36:case 37:case 39:case 45:return;default:return void i.find("li").removeClass("ui-timepicker-selected")}}function m(e){var t=e.data("timepicker-settings"),n=e.data("timepicker-list"),i=null,r=n.find(".ui-timepicker-selected");if(r.length?i=r.data("time"):e.val()&&(i=y(e.val()),f(e,n)),null!==i){var o=v(i,t.timeFormat);e.attr("value",o)}e.trigger("change").trigger("changeTime")}function g(e){var t,n=Math.round(e/60);if(Math.abs(n)<60)t=[n,o.mins];else if(60==n)t=["1",o.hr];else{var i=(n/60).toFixed(1);"."!=o.decimal&&(i=i.replace(".",o.decimal)),t=[i,o.hrs]}return t.join(" ")}function v(e,i){if(null!==e){for(var r,o,a=new Date(t.valueOf()+1e3*e),s="",l=0;l<i.length;l++)switch(o=i.charAt(l)){case"a":s+=a.getHours()>11?"pm":"am";break;case"A":s+=a.getHours()>11?"PM":"AM";break;case"g":s+=0==(r=a.getHours()%12)?"12":r;break;case"G":s+=a.getHours();break;case"h":0!=(r=a.getHours()%12)&&r<10&&(r="0"+r),s+=0===r?"12":r;break;case"H":r=a.getHours(),e>=n&&(r=Math.floor(e/3600)),s+=r>9?r:"0"+r;break;case"i":var u=a.getMinutes();s+=u>9?u:"0"+u;break;case"s":s+=(e=a.getSeconds())>9?e:"0"+e;break;default:s+=o}return s}}function y(e){if(""===e)return null;if(e+0==e)return e;"object"==a(e)&&(e=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()),new Date(0);var t=e.toLowerCase().match(/(\d{1,2})(?::(\d{1,2}))?(?::(\d{2}))?\s*([pa]?)/);if(!t)return null;var n=parseInt(1*t[1],10);return 3600*(t[4]?12==n?"p"==t[4]?12:0:n+("p"==t[4]?12:0):n)+60*(1*t[2]||0)+(1*t[3]||0)}e.fn.timepicker=function(t){return l[t]?l[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==a(t)&&t?void e.error("Method "+t+" does not exist on jQuery.timepicker"):l.init.apply(this,arguments)}},void 0===(o="function"==typeof i?i.apply(t,r):i)||(e.exports=o)},25799:function(e,t,n){var i=n(20428);(function(){this.AjaxPrefix={addAjaxPrefix:function(e,t){return e.postWithPrefix=function(e,n,r,o){return i.post(""+t()+e,n,r,o)},e.getWithPrefix=function(e,n,r,o){return i.get(""+t()+e,n,r,o)},e.ajaxWithPrefix=function(e,n){return null!=n?i.ajax(""+t()+e,n):((n=e).url=""+t()+n.url,i.ajax(n))}}}}).call(this),e.exports=this.AjaxPrefix},51583:function(e,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}window.CodeMirror=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,i=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),a=/Edge\/(\d+)/.exec(e),s=r||o||a,l=s&&(r?document.documentMode||6:+(a||o)[1]),u=!a&&/WebKit\//.test(e),c=u&&/Qt\/\d+\.\d+/.test(e),d=!a&&/Chrome\//.test(e),f=/Opera\//.test(e),h=/Apple Computer/.test(navigator.vendor),p=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),m=/PhantomJS/.test(e),g=!a&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),v=/Android/.test(e),y=g||v||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=g||/Mac/.test(t),w=/\bCrOS\b/.test(e),x=/win/i.test(t),C=f&&e.match(/Version\/(\d*\.\d*)/);C&&(C=Number(C[1])),C&&C>=15&&(f=!1,u=!0);var k=b&&(c||f&&(null==C||C<12.11)),_=i||s&&l>=9;function S(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var T,D=function(e,t){var n=e.className,i=S(t).exec(n);if(i){var r=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(r?i[1]+r:"")}};function M(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function E(e,t){return M(e).appendChild(t)}function N(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)r.appendChild(t[o]);return r}function A(e,t,n,i){var r=N(e,t,n,i);return r.setAttribute("role","presentation"),r}function P(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function L(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function O(e,t){var n=e.className;S(t).test(n)||(e.className+=(n?" ":"")+t)}function I(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!S(n[i]).test(t)&&(t+=" "+n[i]);return t}T=document.createRange?function(e,t,n,i){var r=document.createRange();return r.setEnd(i||e,n),r.setStart(e,t),r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(e){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var R=function(e){e.select()};function B(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function z(e,t,n){for(var i in t||(t={}),e)!e.hasOwnProperty(i)||!1===n&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function F(e,t,n,i,r){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=i||0,a=r||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return a+(t-o);a+=s-o,a+=n-a%n,o=s+1}}g?R=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(R=function(e){try{e.select()}catch(e){}});var H=function(){this.id=null,this.f=null,this.time=0,this.handler=B(this.onTimeout,this)};function W(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}H.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},H.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var j=30,U={toString:function(){return"CodeMirror.Pass"}},V={scroll:!1},$={origin:"*mouse"},q={origin:"+move"};function X(e,t,n){for(var i=0,r=0;;){var o=e.indexOf("\t",i);-1==o&&(o=e.length);var a=o-i;if(o==e.length||r+a>=t)return i+Math.min(a,t-r);if(r+=o-i,i=o+1,(r+=n-r%n)>=t)return i}}var Y=[""];function K(e){for(;Y.length<=e;)Y.push(G(Y)+" ");return Y[e]}function G(e){return e[e.length-1]}function J(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function Z(){}function Q(e,t){var n;return Object.create?n=Object.create(e):(Z.prototype=e,n=new Z),t&&z(t,n),n}var ee=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function te(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ee.test(e))}function ne(e,t){return t?!!(t.source.indexOf("\\w")>-1&&te(e))||t.test(e):te(e)}function ie(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function oe(e){return e.charCodeAt(0)>=768&&re.test(e)}function ae(e,t,n){for(;(n<0?t>0:t<e.length)&&oe(e.charAt(t));)t+=n;return t}function se(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var r=(t+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+i}}var le=null;function ue(e,t,n){var i;le=null;for(var r=0;r<e.length;++r){var o=e[r];if(o.from<t&&o.to>t)return r;o.to==t&&(o.from!=o.to&&"before"==n?i=r:le=r),o.from==t&&(o.from!=o.to&&"before"!=n?i=r:le=r)}return null!=i?i:le}var ce=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,n=/[LRr]/,i=/[Lb1n]/,r=/[1n]/;function o(e,t,n){this.level=e,this.from=t,this.to=n}return function(a,s){var l="ltr"==s?"L":"R";if(0==a.length||"ltr"==s&&!e.test(a))return!1;for(var u,c=a.length,d=[],f=0;f<c;++f)d.push((u=a.charCodeAt(f))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L");for(var h=0,p=l;h<c;++h){var m=d[h];"m"==m?d[h]=p:p=m}for(var g=0,v=l;g<c;++g){var y=d[g];"1"==y&&"r"==v?d[g]="n":n.test(y)&&(v=y,"r"==y&&(d[g]="R"))}for(var b=1,w=d[0];b<c-1;++b){var x=d[b];"+"==x&&"1"==w&&"1"==d[b+1]?d[b]="1":","!=x||w!=d[b+1]||"1"!=w&&"n"!=w||(d[b]=w),w=x}for(var C=0;C<c;++C){var k=d[C];if(","==k)d[C]="N";else if("%"==k){var _=void 0;for(_=C+1;_<c&&"%"==d[_];++_);for(var S=C&&"!"==d[C-1]||_<c&&"1"==d[_]?"1":"N",T=C;T<_;++T)d[T]=S;C=_-1}}for(var D=0,M=l;D<c;++D){var E=d[D];"L"==M&&"1"==E?d[D]="L":n.test(E)&&(M=E)}for(var N=0;N<c;++N)if(t.test(d[N])){var A=void 0;for(A=N+1;A<c&&t.test(d[A]);++A);for(var P="L"==(N?d[N-1]:l),L=P==("L"==(A<c?d[A]:l))?P?"L":"R":l,O=N;O<A;++O)d[O]=L;N=A-1}for(var I,R=[],B=0;B<c;)if(i.test(d[B])){var z=B;for(++B;B<c&&i.test(d[B]);++B);R.push(new o(0,z,B))}else{var F=B,H=R.length;for(++B;B<c&&"L"!=d[B];++B);for(var W=F;W<B;)if(r.test(d[W])){F<W&&R.splice(H,0,new o(1,F,W));var j=W;for(++W;W<B&&r.test(d[W]);++W);R.splice(H,0,new o(2,j,W)),F=W}else++W;F<B&&R.splice(H,0,new o(1,F,B))}return"ltr"==s&&(1==R[0].level&&(I=a.match(/^\s+/))&&(R[0].from=I[0].length,R.unshift(new o(0,0,I[0].length))),1==G(R).level&&(I=a.match(/\s+$/))&&(G(R).to-=I[0].length,R.push(new o(0,c-I[0].length,c)))),"rtl"==s?R.reverse():R}}();function de(e,t){var n=e.order;return null==n&&(n=e.order=ce(e.text,t)),n}var fe=[],he=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||fe).concat(n)}};function pe(e,t){return e._handlers&&e._handlers[t]||fe}function me(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,r=i&&i[t];if(r){var o=W(r,n);o>-1&&(i[t]=r.slice(0,o).concat(r.slice(o+1)))}}}function ge(e,t){var n=pe(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function ve(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),ge(e,n||t.type,e,t),ke(t)||t.codemirrorIgnore}function ye(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==W(n,t[i])&&n.push(t[i])}function be(e,t){return pe(e,t).length>0}function we(e){e.prototype.on=function(e,t){he(this,e,t)},e.prototype.off=function(e,t){me(this,e,t)}}function xe(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Ce(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ke(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function _e(e){xe(e),Ce(e)}function Se(e){return e.target||e.srcElement}function Te(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var De,Me,Ee=function(){if(s&&l<9)return!1;var e=N("div");return"draggable"in e||"dragDrop"in e}();function Ne(e){if(null==De){var t=N("span","");E(e,N("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(De=t.offsetWidth<=1&&t.offsetHeight>2&&!(s&&l<8))}var n=De?N("span",""):N("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Ae(e){if(null!=Me)return Me;var t=E(e,document.createTextNode("AA")),n=T(t,0,1).getBoundingClientRect(),i=T(t,1,2).getBoundingClientRect();return M(e),!(!n||n.left==n.right)&&(Me=i.right-n.right<3)}var Pe,Le=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var o=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Oe=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Ie="oncopy"in(Pe=N("div"))||(Pe.setAttribute("oncopy","return;"),"function"==typeof Pe.oncopy),Re=null;var Be={},ze={};function Fe(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Be[e]=t}function He(e){if("string"==typeof e&&ze.hasOwnProperty(e))e=ze[e];else if(e&&"string"==typeof e.name&&ze.hasOwnProperty(e.name)){var t=ze[e.name];"string"==typeof t&&(t={name:t}),(e=Q(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return He("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return He("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function We(e,t){t=He(t);var n=Be[t.name];if(!n)return We(e,"text/plain");var i=n(e,t);if(je.hasOwnProperty(t.name)){var r=je[t.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=r[o])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)i[a]=t.modeProps[a];return i}var je={};function Ue(e,t){z(t,je.hasOwnProperty(e)?je[e]:je[e]={})}function Ve(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function $e(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function qe(e,t,n){return!e.startState||e.startState(t,n)}var Xe=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Ye(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(t<o){n=r;break}t-=o}return n.lines[t]}function Ke(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,(function(e){var o=e.text;r==n.line&&(o=o.slice(0,n.ch)),r==t.line&&(o=o.slice(t.ch)),i.push(o),++r})),i}function Ge(e,t,n){var i=[];return e.iter(t,n,(function(e){i.push(e.text)})),i}function Je(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function Ze(e){if(null==e.parent)return null;for(var t=e.parent,n=W(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function Qe(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],o=r.height;if(t<o){e=r;continue e}t-=o,n+=r.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var s=e.lines[a].height;if(t<s)break;t-=s}return n+a}function et(e,t){return t>=e.first&&t<e.first+e.size}function tt(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function nt(e,t,n){if(void 0===n&&(n=null),!(this instanceof nt))return new nt(e,t,n);this.line=e,this.ch=t,this.sticky=n}function it(e,t){return e.line-t.line||e.ch-t.ch}function rt(e,t){return e.sticky==t.sticky&&0==it(e,t)}function ot(e){return nt(e.line,e.ch)}function at(e,t){return it(e,t)<0?t:e}function st(e,t){return it(e,t)<0?e:t}function lt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ut(e,t){if(t.line<e.first)return nt(e.first,0);var n=e.first+e.size-1;return t.line>n?nt(n,Ye(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?nt(e.line,t):n<0?nt(e.line,0):e}(t,Ye(e,t.line).text.length)}function ct(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=ut(e,t[i]);return n}Xe.prototype.eol=function(){return this.pos>=this.string.length},Xe.prototype.sol=function(){return this.pos==this.lineStart},Xe.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Xe.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Xe.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Xe.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Xe.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Xe.prototype.skipToEnd=function(){this.pos=this.string.length},Xe.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Xe.prototype.backUp=function(e){this.pos-=e},Xe.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=F(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},Xe.prototype.indentation=function(){return F(this.string,null,this.tabSize)-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},Xe.prototype.match=function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},Xe.prototype.current=function(){return this.string.slice(this.start,this.pos)},Xe.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Xe.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Xe.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var dt=function(e,t){this.state=e,this.lookAhead=t},ft=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function ht(e,t,n,i){var r=[e.state.modeGen],o={};Ct(e,t.text,e.doc.mode,n,(function(e,t){return r.push(e,t)}),o,i);for(var a=n.state,s=function(i){n.baseTokens=r;var s=e.state.overlays[i],l=1,u=0;n.state=!0,Ct(e,t.text,s.mode,n,(function(e,t){for(var n=l;u<e;){var i=r[l];i>e&&r.splice(l,1,e,r[l+1],i),l+=2,u=Math.min(e,i)}if(t)if(s.opaque)r.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"overlay "+t}}),o),n.state=a,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)s(l);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function pt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=mt(e,Ze(t)),r=t.text.length>e.options.maxHighlightLength&&Ve(e.doc.mode,i.state),o=ht(e,t,i);r&&(i.state=r),t.stateAfter=i.save(!r),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function mt(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return new ft(i,!0,t);var o=function(e,t,n){for(var i,r,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var l=Ye(o,s-1),u=l.stateAfter;if(u&&(!n||s+(u instanceof dt?u.lookAhead:0)<=o.modeFrontier))return s;var c=F(l.text,null,e.options.tabSize);(null==r||i>c)&&(r=s-1,i=c)}return r}(e,t,n),a=o>i.first&&Ye(i,o-1).stateAfter,s=a?ft.fromSaved(i,a,o):new ft(i,qe(i.mode),o);return i.iter(o,t,(function(n){gt(e,n.text,s);var i=s.line;n.stateAfter=i==t-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?s.save():null,s.nextLine()})),n&&(i.modeFrontier=s.line),s}function gt(e,t,n,i){var r=e.doc.mode,o=new Xe(t,e.options.tabSize,n);for(o.start=o.pos=i||0,""==t&&vt(r,n.state);!o.eol();)yt(r,o,n.state),o.start=o.pos}function vt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=$e(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function yt(e,t,n,i){for(var r=0;r<10;r++){i&&(i[0]=$e(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}ft.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},ft.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ft.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ft.fromSaved=function(e,t,n){return t instanceof dt?new ft(e,Ve(e.mode,t.state),n,t.lookAhead):new ft(e,Ve(e.mode,t),n)},ft.prototype.save=function(e){var t=!1!==e?Ve(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new dt(t,this.maxLookAhead):t};var bt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function wt(e,t,n,i){var r,o,a=e.doc,s=a.mode,l=Ye(a,(t=ut(a,t)).line),u=mt(e,t.line,n),c=new Xe(l.text,e.options.tabSize,u);for(i&&(o=[]);(i||c.pos<t.ch)&&!c.eol();)c.start=c.pos,r=yt(s,c,u.state),i&&o.push(new bt(c,r,Ve(a.mode,u.state)));return i?o:new bt(c,r,u.state)}function xt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[i])||(t[i]+=" "+n[2])}return e}function Ct(e,t,n,i,r,o,a){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,u=0,c=null,d=new Xe(t,e.options.tabSize,i),f=e.options.addModeClass&&[null];for(""==t&&xt(vt(n,i.state),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(s=!1,a&&gt(e,t,i,d.pos),d.pos=t.length,l=null):l=xt(yt(n,d,i.state,f),o),f){var h=f[0].name;h&&(l="m-"+(l?h+" "+l:h))}if(!s||c!=l){for(;u<d.start;)r(u=Math.min(d.start,u+5e3),c);c=l}d.start=d.pos}for(;u<d.pos;){var p=Math.min(d.pos,u+5e3);r(p,c),u=p}}var kt=!1,_t=!1;function St(e,t,n){this.marker=e,this.from=t,this.to=n}function Tt(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function Dt(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Mt(e,t){if(t.full)return null;var n=et(e,t.from.line)&&Ye(e,t.from.line).markedSpans,i=et(e,t.to.line)&&Ye(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,o=t.to.ch,a=0==it(t.from,t.to),s=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(i||(i=[])).push(new St(a,o.from,s?null:o.to))}}return i}(n,r,a),l=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(i||(i=[])).push(new St(a,s?null:o.from-t,null==o.to?null:o.to-t))}}return i}(i,o,a),u=1==t.text.length,c=G(t.text).length+(u?r:0);if(s)for(var d=0;d<s.length;++d){var f=s[d];if(null==f.to){var h=Tt(l,f.marker);h?u&&(f.to=null==h.to?null:h.to+c):f.to=r}}if(l)for(var p=0;p<l.length;++p){var m=l[p];if(null!=m.to&&(m.to+=c),null==m.from)Tt(s,m.marker)||(m.from=c,u&&(s||(s=[])).push(m));else m.from+=c,u&&(s||(s=[])).push(m)}s&&(s=Et(s)),l&&l!=s&&(l=Et(l));var g=[s];if(!u){var v,y=t.text.length-2;if(y>0&&s)for(var b=0;b<s.length;++b)null==s[b].to&&(v||(v=[])).push(new St(s[b].marker,null,null));for(var w=0;w<y;++w)g.push(v);g.push(l)}return g}function Et(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Nt(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function At(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Pt(e){return e.inclusiveLeft?-1:0}function Lt(e){return e.inclusiveRight?1:0}function Ot(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),r=t.find(),o=it(i.from,r.from)||Pt(e)-Pt(t);if(o)return-o;var a=it(i.to,r.to)||Lt(e)-Lt(t);return a||t.id-e.id}function It(e,t){var n,i=_t&&e.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)(r=i[o]).marker.collapsed&&null==(t?r.from:r.to)&&(!n||Ot(n,r.marker)<0)&&(n=r.marker);return n}function Rt(e){return It(e,!0)}function Bt(e){return It(e,!1)}function zt(e,t){var n,i=_t&&e.markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||Ot(n,o.marker)<0)&&(n=o.marker)}return n}function Ft(e,t,n,i,r){var o=Ye(e,t),a=_t&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var u=l.marker.find(0),c=it(u.from,n)||Pt(l.marker)-Pt(r),d=it(u.to,i)||Lt(l.marker)-Lt(r);if(!(c>=0&&d<=0||c<=0&&d>=0)&&(c<=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?it(u.to,n)>=0:it(u.to,n)>0)||c>=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?it(u.from,i)<=0:it(u.from,i)<0)))return!0}}}function Ht(e){for(var t;t=Rt(e);)e=t.find(-1,!0).line;return e}function Wt(e,t){var n=Ye(e,t),i=Ht(n);return n==i?t:Ze(i)}function jt(e,t){if(t>e.lastLine())return t;var n,i=Ye(e,t);if(!Ut(e,i))return t;for(;n=Bt(i);)i=n.find(1,!0).line;return Ze(i)+1}function Ut(e,t){var n=_t&&t.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&Vt(e,t,i))return!0}}function Vt(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return Vt(e,i.line,Tt(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var r=void 0,o=0;o<t.markedSpans.length;++o)if((r=t.markedSpans[o]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&Vt(e,t,r))return!0}function $t(e){for(var t=0,n=(e=Ht(e)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var s=o.children[a];if(s==n)break;t+=s.height}return t}function qt(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=Rt(i);){var r=t.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=e;t=Bt(i);){var o=t.find(0,!0);n-=i.text.length-o.from.ch,n+=(i=o.to.line).text.length-o.to.ch}return n}function Xt(e){var t=e.display,n=e.doc;t.maxLine=Ye(n,n.first),t.maxLineLength=qt(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=qt(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}var Yt=function(e,t,n){this.text=e,At(this,t),this.height=n?n(this):1};function Kt(e){e.parent=null,Nt(e)}Yt.prototype.lineNo=function(){return Ze(this)},we(Yt);var Gt={},Jt={};function Zt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Jt:Gt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Qt(e,t){var n=A("span",null,null,u?"padding-right: .1px":null),i={pre:A("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var o=r?t.rest[r-1]:t.line,a=void 0;i.pos=0,i.addToken=tn,Ae(e.display.measure)&&(a=de(o,e.doc.direction))&&(i.addToken=nn(i.addToken,a)),i.map=[],on(o,i,pt(e,o,t!=e.display.externalMeasured&&Ze(o))),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=I(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=I(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Ne(e.display.measure))),0==r?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(u){var s=i.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return ge(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=I(i.pre.className,i.textClass||"")),i}function en(e){var t=N("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function tn(e,t,n,i,r,o,a){if(t){var u,c=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",r=0;r<e.length;r++){var o=e.charAt(r);" "!=o||!n||r!=e.length-1&&32!=e.charCodeAt(r+1)||(o=""),i+=o,n=" "==o}return i}(t,e.trailingSpace):t,d=e.cm.state.specialChars,f=!1;if(d.test(t)){u=document.createDocumentFragment();for(var h=0;;){d.lastIndex=h;var p=d.exec(t),m=p?p.index-h:t.length-h;if(m){var g=document.createTextNode(c.slice(h,h+m));s&&l<9?u.appendChild(N("span",[g])):u.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!p)break;h+=m+1;var v=void 0;if("\t"==p[0]){var y=e.cm.options.tabSize,b=y-e.col%y;(v=u.appendChild(N("span",K(b),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=b}else"\r"==p[0]||"\n"==p[0]?((v=u.appendChild(N("span","\r"==p[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",p[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),s&&l<9?u.appendChild(N("span",[v])):u.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,u=document.createTextNode(c),e.map.push(e.pos,e.pos+t.length,u),s&&l<9&&(f=!0),e.pos+=t.length;if(e.trailingSpace=32==c.charCodeAt(t.length-1),n||i||r||f||o){var w=n||"";i&&(w+=i),r&&(w+=r);var x=N("span",[u],w,o);if(a)for(var C in a)a.hasOwnProperty(C)&&"style"!=C&&"class"!=C&&x.setAttribute(C,a[C]);return e.content.appendChild(x)}e.content.appendChild(u)}}function nn(e,t){return function(n,i,r,o,a,s,l){r=r?r+" cm-force-border":"cm-force-border";for(var u=n.pos,c=u+i.length;;){for(var d=void 0,f=0;f<t.length&&!((d=t[f]).to>u&&d.from<=u);f++);if(d.to>=c)return e(n,i,r,o,a,s,l);e(n,i.slice(0,d.to-u),r,o,null,s,l),o=null,i=i.slice(d.to-u),u=d.to}}}function rn(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!i&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t,e.trailingSpace=!1}function on(e,t,n){var i=e.markedSpans,r=e.text,o=0;if(i)for(var a,s,l,u,c,d,f,h=r.length,p=0,m=1,g="",v=0;;){if(v==p){l=u=c=s="",f=null,d=null,v=1/0;for(var y=[],b=void 0,w=0;w<i.length;++w){var x=i[w],C=x.marker;if("bookmark"==C.type&&x.from==p&&C.widgetNode)y.push(C);else if(x.from<=p&&(null==x.to||x.to>p||C.collapsed&&x.to==p&&x.from==p)){if(null!=x.to&&x.to!=p&&v>x.to&&(v=x.to,u=""),C.className&&(l+=" "+C.className),C.css&&(s=(s?s+";":"")+C.css),C.startStyle&&x.from==p&&(c+=" "+C.startStyle),C.endStyle&&x.to==v&&(b||(b=[])).push(C.endStyle,x.to),C.title&&((f||(f={})).title=C.title),C.attributes)for(var k in C.attributes)(f||(f={}))[k]=C.attributes[k];C.collapsed&&(!d||Ot(d.marker,C)<0)&&(d=x)}else x.from>p&&v>x.from&&(v=x.from)}if(b)for(var _=0;_<b.length;_+=2)b[_+1]==v&&(u+=" "+b[_]);if(!d||d.from==p)for(var S=0;S<y.length;++S)rn(t,0,y[S]);if(d&&(d.from||0)==p){if(rn(t,(null==d.to?h+1:d.to)-p,d.marker,null==d.from),null==d.to)return;d.to==p&&(d=!1)}}if(p>=h)break;for(var T=Math.min(h,v);;){if(g){var D=p+g.length;if(!d){var M=D>T?g.slice(0,T-p):g;t.addToken(t,M,a?a+l:l,c,p+M.length==v?u:"",s,f)}if(D>=T){g=g.slice(T-p),p=T;break}p=D,c=""}g=r.slice(o,o=n[m++]),a=Zt(n[m++],t.cm.options)}}else for(var E=1;E<n.length;E+=2)t.addToken(t,r.slice(o,o=n[E]),Zt(n[E+1],t.cm.options))}function an(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=Bt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?Ze(G(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Ut(e,t)}function sn(e,t,n){for(var i,r=[],o=t;o<n;o=i){var a=new an(e.doc,Ye(e.doc,o),o);i=o+a.size,r.push(a)}return r}var ln=null;var un=null;function cn(e,t){var n=pe(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);ln?i=ln.delayedCallbacks:un?i=un:(i=un=[],setTimeout(dn,0));for(var o=function(e){i.push((function(){return n[e].apply(null,r)}))},a=0;a<n.length;++a)o(a)}}function dn(){var e=un;un=null;for(var t=0;t<e.length;++t)e[t]()}function fn(e,t,n,i){for(var r=0;r<t.changes.length;r++){var o=t.changes[r];"text"==o?mn(e,t):"gutter"==o?vn(e,t,n,i):"class"==o?gn(e,t):"widget"==o&&yn(e,t,i)}t.changes=null}function hn(e){return e.node==e.text&&(e.node=N("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&l<8&&(e.node.style.zIndex=2)),e.node}function pn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Qt(e,t)}function mn(e,t){var n=t.text.className,i=pn(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,gn(e,t)):n&&(t.text.className=n)}function gn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=hn(t);t.background=i.insertBefore(N("div",null,n),i.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?hn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function vn(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var r=hn(t);t.gutterBackground=N("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),r.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var a=hn(t),s=t.gutter=N("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),a.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(N("div",tt(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.display.gutterSpecs.length;++l){var u=e.display.gutterSpecs[l].className,c=o.hasOwnProperty(u)&&o[u];c&&s.appendChild(N("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[u]+"px; width: "+i.gutterWidth[u]+"px"))}}}function yn(e,t,n){t.alignable&&(t.alignable=null);for(var i=t.node.firstChild,r=void 0;i;i=r)r=i.nextSibling,"CodeMirror-linewidget"==i.className&&t.node.removeChild(i);wn(e,t,n)}function bn(e,t,n,i){var r=pn(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),gn(e,t),vn(e,t,n,i),wn(e,t,i),t.node}function wn(e,t,n){if(xn(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)xn(e,t.rest[i],t,n,!1)}function xn(e,t,n,i,r){if(t.widgets)for(var o=hn(n),a=0,s=t.widgets;a<s.length;++a){var l=s[a],u=N("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),Cn(l,u,n,i),e.display.input.setUneditable(u),r&&l.above?o.insertBefore(u,n.gutter||n.text):o.appendChild(u),cn(l,"redraw")}}function Cn(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function kn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!P(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),E(t.display.measure,N("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function _n(e,t){for(var n=Se(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Sn(e){return e.lineSpace.offsetTop}function Tn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Dn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=E(e.measure,N("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function Mn(e){return j-e.display.nativeBarWidth}function En(e){return e.display.scroller.clientWidth-Mn(e)-e.display.barWidth}function Nn(e){return e.display.scroller.clientHeight-Mn(e)-e.display.barHeight}function An(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var r=0;r<e.rest.length;r++)if(Ze(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function Pn(e,t,n,i){return In(e,On(e,t),n,i)}function Ln(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[fi(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function On(e,t){var n=Ze(t),i=Ln(e,n);i&&!i.text?i=null:i&&i.changes&&(fn(e,i,n,si(e)),e.curOp.forceUpdate=!0),i||(i=function(e,t){var n=Ze(t=Ht(t)),i=e.display.externalMeasured=new an(e.doc,t,n);i.lineN=n;var r=i.built=Qt(e,i);return i.text=r.pre,E(e.display.lineMeasure,r.pre),i}(e,t));var r=An(i,t,n);return{line:t,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function In(e,t,n,i,r){t.before&&(n=-1);var o,a=n+(i||"");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,n){var i=e.options.lineWrapping,r=i&&En(e);if(!t.measure.heights||i&&t.measure.width!=r){var o=t.measure.heights=[];if(i){t.measure.width=r;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],u=a[s+1];Math.abs(l.bottom-u.bottom)>2&&o.push((l.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),o=function(e,t,n,i){var r,o=zn(t.map,n,i),a=o.node,u=o.start,c=o.end,d=o.collapse;if(3==a.nodeType){for(var f=0;f<4;f++){for(;u&&oe(t.line.text.charAt(o.coverStart+u));)--u;for(;o.coverStart+c<o.coverEnd&&oe(t.line.text.charAt(o.coverStart+c));)++c;if((r=s&&l<9&&0==u&&c==o.coverEnd-o.coverStart?a.parentNode.getBoundingClientRect():Fn(T(a,u,c).getClientRects(),i)).left||r.right||0==u)break;c=u,u-=1,d="right"}s&&l<11&&(r=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Re)return Re;var t=E(e,N("span","x")),n=t.getBoundingClientRect(),i=T(t,0,1).getBoundingClientRect();return Re=Math.abs(n.left-i.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}(e.display.measure,r))}else{var h;u>0&&(d=i="right"),r=e.options.lineWrapping&&(h=a.getClientRects()).length>1?h["right"==i?h.length-1:0]:a.getBoundingClientRect()}if(s&&l<9&&!u&&(!r||!r.left&&!r.right)){var p=a.parentNode.getClientRects()[0];r=p?{left:p.left,right:p.left+ai(e.display),top:p.top,bottom:p.bottom}:Bn}for(var m=r.top-t.rect.top,g=r.bottom-t.rect.top,v=(m+g)/2,y=t.view.measure.heights,b=0;b<y.length-1&&!(v<y[b]);b++);var w=b?y[b-1]:0,x=y[b],C={left:("right"==d?r.right:r.left)-t.rect.left,right:("left"==d?r.left:r.right)-t.rect.left,top:w,bottom:x};r.left||r.right||(C.bogus=!0);e.options.singleCursorHeightPerLine||(C.rtop=m,C.rbottom=g);return C}(e,t,n,i),o.bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}var Rn,Bn={left:0,right:0,top:0,bottom:0};function zn(e,t,n){for(var i,r,o,a,s,l,u=0;u<e.length;u+=3)if(s=e[u],l=e[u+1],t<s?(r=0,o=1,a="left"):t<l?o=(r=t-s)+1:(u==e.length-3||t==l&&e[u+3]>t)&&(r=(o=l-s)-1,t>=l&&(a="right")),null!=r){if(i=e[u+2],s==l&&n==(i.insertLeft?"left":"right")&&(a=n),"left"==n&&0==r)for(;u&&e[u-2]==e[u-3]&&e[u-1].insertLeft;)i=e[2+(u-=3)],a="left";if("right"==n&&r==l-s)for(;u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft;)i=e[(u+=3)+2],a="right";break}return{node:i,start:r,end:o,collapse:a,coverStart:s,coverEnd:l}}function Fn(e,t){var n=Bn;if("left"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var r=e.length-1;r>=0&&(n=e[r]).left==n.right;r--);return n}function Hn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Wn(e){e.display.externalMeasure=null,M(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Hn(e.display.view[t])}function jn(e){Wn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Un(){return d&&v?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Vn(){return d&&v?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function $n(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=kn(e.widgets[n]));return t}function qn(e,t,n,i,r){if(!r){var o=$n(t);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var a=$t(t);if("local"==i?a+=Sn(e.display):a-=e.display.viewOffset,"page"==i||"window"==i){var s=e.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==i?0:Vn());var l=s.left+("window"==i?0:Un());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function Xn(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;if("page"==n)i-=Un(),r-=Vn();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:i-a.left,top:r-a.top}}function Yn(e,t,n,i,r){return i||(i=Ye(e.doc,t.line)),qn(e,i,Pn(e,i,t.ch,r),n)}function Kn(e,t,n,i,r,o){function a(t,a){var s=In(e,r,t,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,qn(e,i,s,n)}i=i||Ye(e.doc,t.line),r||(r=On(e,i));var s=de(i,e.doc.direction),l=t.ch,u=t.sticky;if(l>=i.text.length?(l=i.text.length,u="before"):l<=0&&(l=0,u="after"),!s)return a("before"==u?l-1:l,"before"==u);function c(e,t,n){return a(n?e-1:e,1==s[t].level!=n)}var d=ue(s,l,u),f=le,h=c(l,d,"before"==u);return null!=f&&(h.other=c(l,f,"before"!=u)),h}function Gn(e,t){var n=0;t=ut(e.doc,t),e.options.lineWrapping||(n=ai(e.display)*t.ch);var i=Ye(e.doc,t.line),r=$t(i)+Sn(e.display);return{left:n,right:n,top:r,bottom:r+i.height}}function Jn(e,t,n,i,r){var o=nt(e,t,n);return o.xRel=r,i&&(o.outside=i),o}function Zn(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return Jn(i.first,0,null,-1,-1);var r=Qe(i,n),o=i.first+i.size-1;if(r>o)return Jn(i.first+i.size-1,Ye(i,o).text.length,null,1,1);t<0&&(t=0);for(var a=Ye(i,r);;){var s=ni(e,a,r,t,n),l=zt(a,s.ch+(s.xRel>0||s.outside>0?1:0));if(!l)return s;var u=l.find(1);if(u.line==r)return u;a=Ye(i,r=u.line)}}function Qn(e,t,n,i){i-=$n(t);var r=t.text.length,o=se((function(t){return In(e,n,t-1).bottom<=i}),r,0);return{begin:o,end:r=se((function(t){return In(e,n,t).top>i}),o,r)}}function ei(e,t,n,i){return n||(n=On(e,t)),Qn(e,t,n,qn(e,t,In(e,n,i),"line").top)}function ti(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function ni(e,t,n,i,r){r-=$t(t);var o=On(e,t),a=$n(t),s=0,l=t.text.length,u=!0,c=de(t,e.doc.direction);if(c){var d=(e.options.lineWrapping?ri:ii)(e,t,n,o,c,i,r);s=(u=1!=d.level)?d.from:d.to-1,l=u?d.to:d.from-1}var f,h,p=null,m=null,g=se((function(t){var n=In(e,o,t);return n.top+=a,n.bottom+=a,!!ti(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(p=t,m=n),!0)}),s,l),v=!1;if(m){var y=i-m.left<m.right-i,b=y==u;g=p+(b?0:1),h=b?"after":"before",f=y?m.left:m.right}else{u||g!=l&&g!=s||g++,h=0==g?"after":g==t.text.length?"before":In(e,o,g-(u?1:0)).bottom+a<=r==u?"after":"before";var w=Kn(e,nt(n,g,h),"line",t,o);f=w.left,v=r<w.top?-1:r>=w.bottom?1:0}return Jn(n,g=ae(t.text,g,1),h,v,i-f)}function ii(e,t,n,i,r,o,a){var s=se((function(s){var l=r[s],u=1!=l.level;return ti(Kn(e,nt(n,u?l.to:l.from,u?"before":"after"),"line",t,i),o,a,!0)}),0,r.length-1),l=r[s];if(s>0){var u=1!=l.level,c=Kn(e,nt(n,u?l.from:l.to,u?"after":"before"),"line",t,i);ti(c,o,a,!0)&&c.top>a&&(l=r[s-1])}return l}function ri(e,t,n,i,r,o,a){var s=Qn(e,t,i,a),l=s.begin,u=s.end;/\s/.test(t.text.charAt(u-1))&&u--;for(var c=null,d=null,f=0;f<r.length;f++){var h=r[f];if(!(h.from>=u||h.to<=l)){var p=In(e,i,1!=h.level?Math.min(u,h.to)-1:Math.max(l,h.from)).right,m=p<o?o-p+1e9:p-o;(!c||d>m)&&(c=h,d=m)}}return c||(c=r[r.length-1]),c.from<l&&(c={from:l,to:c.to,level:c.level}),c.to>u&&(c={from:c.from,to:u,level:c.level}),c}function oi(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Rn){Rn=N("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Rn.appendChild(document.createTextNode("x")),Rn.appendChild(N("br"));Rn.appendChild(document.createTextNode("x"))}E(e.measure,Rn);var n=Rn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),M(e.measure),n||1}function ai(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=N("span","xxxxxxxxxx"),n=N("pre",[t],"CodeMirror-line-like");E(e.measure,n);var i=t.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(e.cachedCharWidth=r),r||10}function si(e){for(var t=e.display,n={},i={},r=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a){var s=e.display.gutterSpecs[a].className;n[s]=o.offsetLeft+o.clientLeft+r,i[s]=o.clientWidth}return{fixedPos:li(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function li(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ui(e){var t=oi(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/ai(e.display)-3);return function(r){if(Ut(e.doc,r))return 0;var o=0;if(r.widgets)for(var a=0;a<r.widgets.length;a++)r.widgets[a].height&&(o+=r.widgets[a].height);return n?o+(Math.ceil(r.text.length/i)||1)*t:o+t}}function ci(e){var t=e.doc,n=ui(e);t.iter((function(e){var t=n(e);t!=e.height&&Je(e,t)}))}function di(e,t,n,i){var r=e.display;if(!n&&"true"==Se(t).getAttribute("cm-not-content"))return null;var o,a,s=r.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,a=t.clientY-s.top}catch(t){return null}var l,u=Zn(e,o,a);if(i&&1==u.xRel&&(l=Ye(e.doc,u.line).text).length==u.ch){var c=F(l,l.length,e.options.tabSize)-l.length;u=nt(u.line,Math.max(0,Math.round((o-Dn(e.display).left)/ai(e.display))-c))}return u}function fi(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function hi(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var r=e.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)_t&&Wt(e.doc,t)<r.viewTo&&mi(e);else if(n<=r.viewFrom)_t&&jt(e.doc,n+i)>r.viewFrom?mi(e):(r.viewFrom+=i,r.viewTo+=i);else if(t<=r.viewFrom&&n>=r.viewTo)mi(e);else if(t<=r.viewFrom){var o=gi(e,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):mi(e)}else if(n>=r.viewTo){var a=gi(e,t,t,-1);a?(r.view=r.view.slice(0,a.index),r.viewTo=a.lineN):mi(e)}else{var s=gi(e,t,t,-1),l=gi(e,n,n+i,1);s&&l?(r.view=r.view.slice(0,s.index).concat(sn(e,s.lineN,l.lineN)).concat(r.view.slice(l.index)),r.viewTo+=i):mi(e)}var u=r.externalMeasured;u&&(n<u.lineN?u.lineN+=i:t<u.lineN+u.size&&(r.externalMeasured=null))}function pi(e,t,n){e.curOp.viewChanged=!0;var i=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var o=i.view[fi(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==W(a,n)&&a.push(n)}}}function mi(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function gi(e,t,n,i){var r,o=fi(e,t),a=e.display.view;if(!_t||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var s=e.display.viewFrom,l=0;l<o;l++)s+=a[l].size;if(s!=t){if(i>0){if(o==a.length-1)return null;r=s+a[o].size-t,o++}else r=s-t;t+=r,n+=r}for(;Wt(e.doc,n)!=n;){if(o==(i<0?0:a.length-1))return null;n+=i*a[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function vi(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var r=t[i];r.hidden||r.node&&!r.changes||++n}return n}function yi(e){e.display.input.showSelection(e.display.input.prepareSelection())}function bi(e,t){void 0===t&&(t=!0);for(var n=e.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(t||a!=n.sel.primIndex){var s=n.sel.ranges[a];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var l=s.empty();(l||e.options.showCursorWhenSelecting)&&wi(e,s.head,r),l||Ci(e,s,o)}}return i}function wi(e,t,n){var i=Kn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),r=n.appendChild(N("div","","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var o=n.appendChild(N("div","","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=i.other.left+"px",o.style.top=i.other.top+"px",o.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function xi(e,t){return e.top-t.top||e.left-t.left}function Ci(e,t,n){var i=e.display,r=e.doc,o=document.createDocumentFragment(),a=Dn(e.display),s=a.left,l=Math.max(i.sizerWidth,En(e)-i.sizer.offsetLeft)-a.right,u="ltr"==r.direction;function c(e,t,n,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),o.appendChild(N("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(i-t)+"px"))}function d(t,n,i){var o,a,d=Ye(r,t),f=d.text.length;function h(n,i){return Yn(e,nt(t,n),"div",d,i)}function p(t,n,i){var r=ei(e,d,null,t),o="ltr"==n==("after"==i)?"left":"right";return h("after"==i?r.begin:r.end-(/\s/.test(d.text.charAt(r.end-1))?2:1),o)[o]}var m=de(d,r.direction);return function(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var r=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(i(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),r=!0)}r||i(t,n,"ltr")}(m,n||0,null==i?f:i,(function(e,t,r,d){var g="ltr"==r,v=h(e,g?"left":"right"),y=h(t-1,g?"right":"left"),b=null==n&&0==e,w=null==i&&t==f,x=0==d,C=!m||d==m.length-1;if(y.top-v.top<=3){var k=(u?w:b)&&C,_=(u?b:w)&&x?s:(g?v:y).left,S=k?l:(g?y:v).right;c(_,v.top,S-_,v.bottom)}else{var T,D,M,E;g?(T=u&&b&&x?s:v.left,D=u?l:p(e,r,"before"),M=u?s:p(t,r,"after"),E=u&&w&&C?l:y.right):(T=u?p(e,r,"before"):s,D=!u&&b&&x?l:v.right,M=!u&&w&&C?s:y.left,E=u?p(t,r,"after"):l),c(T,v.top,D-T,v.bottom),v.bottom<y.top&&c(s,v.bottom,null,y.top),c(M,y.top,E-M,y.bottom)}(!o||xi(v,o)<0)&&(o=v),xi(y,o)<0&&(o=y),(!a||xi(v,a)<0)&&(a=v),xi(y,a)<0&&(a=y)})),{start:o,end:a}}var f=t.from(),h=t.to();if(f.line==h.line)d(f.line,f.ch,h.ch);else{var p=Ye(r,f.line),m=Ye(r,h.line),g=Ht(p)==Ht(m),v=d(f.line,f.ch,g?p.text.length+1:null).end,y=d(h.line,g?0:null,h.ch).start;g&&(v.top<y.top-2?(c(v.right,v.top,null,v.bottom),c(s,y.top,y.left,y.bottom)):c(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&c(s,v.bottom,null,y.top)}n.appendChild(o)}function ki(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function _i(e){e.state.focused||(e.display.input.focus(),Ti(e))}function Si(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Di(e))}),100)}function Ti(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(ge(e,"focus",e,t),e.state.focused=!0,O(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),u&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),ki(e))}function Di(e,t){e.state.delayingBlurEvent||(e.state.focused&&(ge(e,"blur",e,t),e.state.focused=!1,D(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function Mi(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var r=t.view[i],o=e.options.lineWrapping,a=void 0,u=0;if(!r.hidden){if(s&&l<8){var c=r.node.offsetTop+r.node.offsetHeight;a=c-n,n=c}else{var d=r.node.getBoundingClientRect();a=d.bottom-d.top,!o&&r.text.firstChild&&(u=r.text.firstChild.getBoundingClientRect().right-d.left-1)}var f=r.line.height-a;if((f>.005||f<-.005)&&(Je(r.line,a),Ei(r.line),r.rest))for(var h=0;h<r.rest.length;h++)Ei(r.rest[h]);if(u>e.display.sizerWidth){var p=Math.ceil(u/ai(e.display));p>e.display.maxLineLength&&(e.display.maxLineLength=p,e.display.maxLine=r.line,e.display.maxLineChanged=!0)}}}}function Ei(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function Ni(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-Sn(e));var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,o=Qe(t,i),a=Qe(t,r);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<o?(o=s,a=Qe(t,$t(Ye(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=a&&(o=Qe(t,$t(Ye(t,l))-e.wrapper.clientHeight),a=l)}return{from:o,to:Math.max(a,o+1)}}function Ai(e,t){var n=e.display,i=oi(e.display);t.top<0&&(t.top=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=Nn(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var s=e.doc.height+Tn(n),l=t.top<i,u=t.bottom>s-i;if(t.top<r)a.scrollTop=l?0:t.top;else if(t.bottom>r+o){var c=Math.min(t.top,(u?s:t.bottom)-o);c!=r&&(a.scrollTop=c)}var d=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,f=En(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),h=t.right-t.left>f;return h&&(t.right=t.left+f),t.left<10?a.scrollLeft=0:t.left<d?a.scrollLeft=Math.max(0,t.left-(h?0:10)):t.right>f+d-3&&(a.scrollLeft=t.right+(h?0:10)-f),a}function Pi(e,t){null!=t&&(Ii(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Li(e){Ii(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Oi(e,t,n){null==t&&null==n||Ii(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Ii(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Ri(e,Gn(e,t.from),Gn(e,t.to),t.margin))}function Ri(e,t,n,i){var r=Ai(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});Oi(e,r.scrollLeft,r.scrollTop)}function Bi(e,t){Math.abs(e.doc.scrollTop-t)<2||(i||cr(e,{top:t}),zi(e,t,!0),i&&cr(e),or(e,100))}function zi(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Fi(e,t,n,i){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i||(e.doc.scrollLeft=t,hr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Hi(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+Tn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Mn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Wi=function(e,t,n){this.cm=n;var i=this.vert=N("div",[N("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=N("div",[N("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=r.tabIndex=-1,e(i),e(r),he(i,"scroll",(function(){i.clientHeight&&t(i.scrollTop,"vertical")})),he(r,"scroll",(function(){r.clientWidth&&t(r.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,s&&l<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Wi.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var r=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},Wi.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Wi.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Wi.prototype.zeroWidthHack=function(){var e=b&&!p?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new H,this.disableVert=new H},Wi.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,(function i(){var r=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,i)}))},Wi.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var ji=function(){};function Ui(e,t){t||(t=Hi(e));var n=e.display.barWidth,i=e.display.barHeight;Vi(e,t);for(var r=0;r<4&&n!=e.display.barWidth||i!=e.display.barHeight;r++)n!=e.display.barWidth&&e.options.lineWrapping&&Mi(e),Vi(e,Hi(e)),n=e.display.barWidth,i=e.display.barHeight}function Vi(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}ji.prototype.update=function(){return{bottom:0,right:0}},ji.prototype.setScrollLeft=function(){},ji.prototype.setScrollTop=function(){},ji.prototype.clear=function(){};var $i={native:Wi,null:ji};function qi(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&D(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new $i[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),he(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,n){"horizontal"==n?Fi(e,t):Bi(e,t)}),e),e.display.scrollbars.addClass&&O(e.display.wrapper,e.display.scrollbars.addClass)}var Xi=0;function Yi(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Xi},t=e.curOp,ln?ln.ops.push(t):t.ownsGroup=ln={ops:[t],delayedCallbacks:[]}}function Ki(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var r=e.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<t.length)}(n)}finally{ln=null,t(n)}}(t,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Gi(t[n]);for(var i=0;i<t.length;i++)Ji(t[i]);for(var r=0;r<t.length;r++)Zi(t[r]);for(var o=0;o<t.length;o++)Qi(t[o]);for(var a=0;a<t.length;a++)er(t[a])}(e)}))}function Gi(e){var t=e.cm,n=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Mn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Mn(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&Xt(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new sr(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Ji(e){e.updatedDisplay=e.mustUpdate&&lr(e.cm,e.update)}function Zi(e){var t=e.cm,n=t.display;e.updatedDisplay&&Mi(t),e.barMeasure=Hi(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Pn(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Mn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-En(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Qi(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Fi(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==L();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Ui(t,e.barMeasure),e.updatedDisplay&&fr(t,e.barMeasure),e.selectionChanged&&ki(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&_i(e.cm)}function er(e){var t=e.cm,n=t.display,i=t.doc;if(e.updatedDisplay&&ur(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&zi(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Fi(t,e.scrollLeft,!0,!0),e.scrollToPos){var r=function(e,t,n,i){var r;null==i&&(i=0),e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?nt(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?nt(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var a=!1,s=Kn(e,t),l=n&&n!=t?Kn(e,n):s,u=Ai(e,r={left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-i,right:Math.max(s.left,l.left),bottom:Math.max(s.bottom,l.bottom)+i}),c=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=u.scrollTop&&(Bi(e,u.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(a=!0)),null!=u.scrollLeft&&(Fi(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(a=!0)),!a)break}return r}(t,ut(i,e.scrollToPos.from),ut(i,e.scrollToPos.to),e.scrollToPos.margin);!function(e,t){if(!ve(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),r=null;if(t.top+i.top<0?r=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!m){var o=N("div","",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Sn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Mn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(r),e.display.lineSpace.removeChild(o)}}}(t,r)}var o=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||ge(o[s],"hide");if(a)for(var l=0;l<a.length;++l)a[l].lines.length&&ge(a[l],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&ge(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function tr(e,t){if(e.curOp)return t();Yi(e);try{return t()}finally{Ki(e)}}function nr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Yi(e);try{return t.apply(e,arguments)}finally{Ki(e)}}}function ir(e){return function(){if(this.curOp)return e.apply(this,arguments);Yi(this);try{return e.apply(this,arguments)}finally{Ki(this)}}}function rr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Yi(t);try{return e.apply(this,arguments)}finally{Ki(t)}}}function or(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,B(ar,e))}function ar(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=mt(e,t.highlightFrontier),r=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(o){if(i.line>=e.display.viewFrom){var a=o.styles,s=o.text.length>e.options.maxHighlightLength?Ve(t.mode,i.state):null,l=ht(e,o,i,!0);s&&(i.state=s),o.styles=l.styles;var u=o.styleClasses,c=l.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var d=!a||a.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),f=0;!d&&f<a.length;++f)d=a[f]!=o.styles[f];d&&r.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=e.options.maxHighlightLength&&gt(e,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return or(e,e.options.workDelay),!0})),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),r.length&&tr(e,(function(){for(var t=0;t<r.length;t++)pi(e,r[t],"text")}))}}var sr=function(e,t,n){var i=e.display;this.viewport=t,this.visible=Ni(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=En(e),this.force=n,this.dims=si(e),this.events=[]};function lr(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return mi(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==vi(e))return!1;pr(e)&&(mi(e),t.dims=si(e));var r=i.first+i.size,o=Math.max(t.visible.from-e.options.viewportMargin,i.first),a=Math.min(r,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(r,n.viewTo)),_t&&(o=Wt(e.doc,o),a=jt(e.doc,a));var s=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=sn(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=sn(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(fi(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(sn(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,fi(e,n)))),i.viewTo=n}(e,o,a),n.viewOffset=$t(Ye(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var l=vi(e);if(!s&&0==l&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=function(e){if(e.hasFocus())return null;var t=L();if(!t||!P(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&P(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(e);return l>4&&(n.lineDiv.style.display="none"),function(e,t,n){var i=e.display,r=e.options.lineNumbers,o=i.lineDiv,a=o.firstChild;function s(t){var n=t.nextSibling;return u&&b&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var l=i.view,c=i.viewFrom,d=0;d<l.length;d++){var f=l[d];if(f.hidden);else if(f.node&&f.node.parentNode==o){for(;a!=f.node;)a=s(a);var h=r&&null!=t&&t<=c&&f.lineNumber;f.changes&&(W(f.changes,"gutter")>-1&&(h=!1),fn(e,f,c,n)),h&&(M(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(tt(e.options,c)))),a=f.node.nextSibling}else{var p=bn(e,f,c,n);o.insertBefore(p,a)}c+=f.size}for(;a;)a=s(a)}(e,n.updateLineNumbers,t.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=L()&&(e.activeElt.focus(),e.anchorNode&&P(document.body,e.anchorNode)&&P(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(c),M(n.cursorDiv),M(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,or(e,400)),n.updateLineNumbers=null,!0}function ur(e,t){for(var n=t.viewport,i=!0;(i&&e.options.lineWrapping&&t.oldDisplayWidth!=En(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Tn(e.display)-Nn(e),n.top)}),t.visible=Ni(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&lr(e,t);i=!1){Mi(e);var r=Hi(e);yi(e),Ui(e,r),fr(e,r),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function cr(e,t){var n=new sr(e,t);if(lr(e,n)){Mi(e),ur(e,n);var i=Hi(e);yi(e),Ui(e,i),fr(e,i),n.finish()}}function dr(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function fr(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Mn(e)+"px"}function hr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=li(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,o=i+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=i+r+"px")}}function pr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=tt(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(N("div",[N("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,a=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-a)+1,i.lineNumWidth=i.lineNumInnerWidth+a,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",dr(e.display),!0}return!1}function mr(e,t){for(var n=[],i=!1,r=0;r<e.length;r++){var o=e[r],a=null;if("string"!=typeof o&&(a=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;i=!0}n.push({className:o,style:a})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function gr(e){var t=e.gutters,n=e.gutterSpecs;M(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],o=r.className,a=r.style,s=t.appendChild(N("div",null,"CodeMirror-gutter "+o));a&&(s.style.cssText=a),"CodeMirror-linenumbers"==o&&(e.lineGutter=s,s.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",dr(e)}function vr(e){gr(e.display),hi(e),hr(e)}function yr(e,t,n,r){var o=this;this.input=n,o.scrollbarFiller=N("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=N("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=A("div",null,"CodeMirror-code"),o.selectionDiv=N("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=N("div",null,"CodeMirror-cursors"),o.measure=N("div",null,"CodeMirror-measure"),o.lineMeasure=N("div",null,"CodeMirror-measure"),o.lineSpace=A("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var a=A("div",[o.lineSpace],"CodeMirror-lines");o.mover=N("div",[a],null,"position: relative"),o.sizer=N("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=N("div",null,null,"position: absolute; height: "+j+"px; width: 1px;"),o.gutters=N("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=N("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=N("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),s&&l<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),u||i&&y||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=mr(r.gutters,r.lineNumbers),gr(o),n.init(o)}sr.prototype.signal=function(e,t){be(e,t)&&this.events.push(arguments)},sr.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ge.apply(null,this.events[e])};var br=0,wr=null;function xr(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function Cr(e){var t=xr(e);return t.x*=wr,t.y*=wr,t}function kr(e,t){var n=xr(t),r=n.x,o=n.y,a=e.display,s=a.scroller,l=s.scrollWidth>s.clientWidth,c=s.scrollHeight>s.clientHeight;if(r&&l||o&&c){if(o&&b&&u)e:for(var d=t.target,h=a.view;d!=s;d=d.parentNode)for(var p=0;p<h.length;p++)if(h[p].node==d){e.display.currentWheelTarget=d;break e}if(r&&!i&&!f&&null!=wr)return o&&c&&Bi(e,Math.max(0,s.scrollTop+o*wr)),Fi(e,Math.max(0,s.scrollLeft+r*wr)),(!o||o&&c)&&xe(t),void(a.wheelStartX=null);if(o&&null!=wr){var m=o*wr,g=e.doc.scrollTop,v=g+a.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):v=Math.min(e.doc.height,v+m+50),cr(e,{top:g,bottom:v})}br<20&&(null==a.wheelStartX?(a.wheelStartX=s.scrollLeft,a.wheelStartY=s.scrollTop,a.wheelDX=r,a.wheelDY=o,setTimeout((function(){if(null!=a.wheelStartX){var e=s.scrollLeft-a.wheelStartX,t=s.scrollTop-a.wheelStartY,n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(wr=(wr*br+n)/(br+1),++br)}}),200)):(a.wheelDX+=r,a.wheelDY+=o))}}s?wr=-.53:i?wr=15:d?wr=-.7:h&&(wr=-1/3);var _r=function(e,t){this.ranges=e,this.primIndex=t};_r.prototype.primary=function(){return this.ranges[this.primIndex]},_r.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!rt(n.anchor,i.anchor)||!rt(n.head,i.head))return!1}return!0},_r.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Sr(ot(this.ranges[t].anchor),ot(this.ranges[t].head));return new _r(e,this.primIndex)},_r.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},_r.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(it(t,i.from())>=0&&it(e,i.to())<=0)return n}return-1};var Sr=function(e,t){this.anchor=e,this.head=t};function Tr(e,t,n){var i=e&&e.options.selectionsMayTouch,r=t[n];t.sort((function(e,t){return it(e.from(),t.from())})),n=W(t,r);for(var o=1;o<t.length;o++){var a=t[o],s=t[o-1],l=it(s.to(),a.from());if(i&&!a.empty()?l>0:l>=0){var u=st(s.from(),a.from()),c=at(s.to(),a.to()),d=s.empty()?a.from()==a.head:s.from()==s.head;o<=n&&--n,t.splice(--o,2,new Sr(d?c:u,d?u:c))}}return new _r(t,n)}function Dr(e,t){return new _r([new Sr(e,t||e)],0)}function Mr(e){return e.text?nt(e.from.line+e.text.length-1,G(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Er(e,t){if(it(e,t.from)<0)return e;if(it(e,t.to)<=0)return Mr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Mr(t).ch-t.to.ch),nt(n,i)}function Nr(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new Sr(Er(r.anchor,t),Er(r.head,t)))}return Tr(e.cm,n,e.sel.primIndex)}function Ar(e,t,n){return e.line==t.line?nt(n.line,e.ch-t.ch+n.ch):nt(n.line+(e.line-t.line),e.ch)}function Pr(e){e.doc.mode=We(e.options,e.doc.modeOption),Lr(e)}function Lr(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,or(e,100),e.state.modeGen++,e.curOp&&hi(e)}function Or(e,t){return 0==t.from.ch&&0==t.to.ch&&""==G(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ir(e,t,n,i){function r(e){return n?n[e]:null}function o(e,n,r){!function(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Nt(e),At(e,n);var r=i?i(e):1;r!=e.height&&Je(e,r)}(e,n,r,i),cn(e,"change",e,t)}function a(e,t){for(var n=[],o=e;o<t;++o)n.push(new Yt(u[o],r(o),i));return n}var s=t.from,l=t.to,u=t.text,c=Ye(e,s.line),d=Ye(e,l.line),f=G(u),h=r(u.length-1),p=l.line-s.line;if(t.full)e.insert(0,a(0,u.length)),e.remove(u.length,e.size-u.length);else if(Or(e,t)){var m=a(0,u.length-1);o(d,d.text,h),p&&e.remove(s.line,p),m.length&&e.insert(s.line,m)}else if(c==d)if(1==u.length)o(c,c.text.slice(0,s.ch)+f+c.text.slice(l.ch),h);else{var g=a(1,u.length-1);g.push(new Yt(f+c.text.slice(l.ch),h,i)),o(c,c.text.slice(0,s.ch)+u[0],r(0)),e.insert(s.line+1,g)}else if(1==u.length)o(c,c.text.slice(0,s.ch)+u[0]+d.text.slice(l.ch),r(0)),e.remove(s.line+1,p);else{o(c,c.text.slice(0,s.ch)+u[0],r(0)),o(d,f+d.text.slice(l.ch),h);var v=a(1,u.length-1);p>1&&e.remove(s.line+1,p-1),e.insert(s.line+1,v)}cn(e,"change",e,t)}function Rr(e,t,n){!function e(i,r,o){if(i.linked)for(var a=0;a<i.linked.length;++a){var s=i.linked[a];if(s.doc!=r){var l=o&&s.sharedHist;n&&!l||(t(s.doc,l),e(s.doc,i,l))}}}(e,null,!0)}function Br(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,ci(e),Pr(e),zr(e),e.options.lineWrapping||Xt(e),e.options.mode=t.modeOption,hi(e)}function zr(e){("rtl"==e.doc.direction?O:D)(e.display.lineDiv,"CodeMirror-rtl")}function Fr(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Hr(e,t){var n={from:ot(t.from),to:Mr(t),text:Ke(e,t.from,t.to)};return $r(e,n,t.from.line,t.to.line+1),Rr(e,(function(e){return $r(e,n,t.from.line,t.to.line+1)}),!0),n}function Wr(e){for(;e.length;){if(!G(e).ranges)break;e.pop()}}function jr(e,t,n,i){var r=e.history;r.undone.length=0;var o,a,s=+new Date;if((r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&r.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Wr(e.done),G(e.done)):e.done.length&&!G(e.done).ranges?G(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),G(e.done)):void 0}(r,r.lastOp==i)))a=G(o.changes),0==it(t.from,t.to)&&0==it(t.from,a.to)?a.to=Mr(t):o.changes.push(Hr(e,t));else{var l=G(r.done);for(l&&l.ranges||Vr(e.sel,r.done),o={changes:[Hr(e,t)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=s,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=t.origin,a||ge(e,"historyAdded")}function Ur(e,t,n,i){var r=e.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||function(e,t,n,i){var r=t.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,G(r.done),t))?r.done[r.done.length-1]=t:Vr(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&Wr(r.undone)}function Vr(e,t){var n=G(t);n&&n.ranges&&n.equals(e)||t.push(e)}function $r(e,t,n,i){var r=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),(function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[o]=n.markedSpans),++o}))}function qr(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Xr(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],r=0;r<t.text.length;++r)i.push(qr(n[r]));return i}(e,t),i=Mt(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],a=i[r];if(o&&a)e:for(var s=0;s<a.length;++s){for(var l=a[s],u=0;u<o.length;++u)if(o[u].marker==l.marker)continue e;o.push(l)}else a&&(n[r]=a)}return n}function Yr(e,t,n){for(var i=[],r=0;r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?_r.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];i.push({changes:s});for(var l=0;l<a.length;++l){var u=a[l],c=void 0;if(s.push({from:u.from,to:u.to,text:u.text}),t)for(var d in u)(c=d.match(/^spans_(\d+)$/))&&W(t,Number(c[1]))>-1&&(G(s)[d]=u[d],delete u[d])}}}return i}function Kr(e,t,n,i){if(i){var r=e.anchor;if(n){var o=it(t,r)<0;o!=it(n,r)<0?(r=t,t=n):o!=it(t,n)<0&&(t=n)}return new Sr(r,t)}return new Sr(n||t,t)}function Gr(e,t,n,i,r){null==r&&(r=e.cm&&(e.cm.display.shift||e.extend)),to(e,new _r([Kr(e.sel.primary(),t,n,r)],0),i)}function Jr(e,t,n){for(var i=[],r=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)i[o]=Kr(e.sel.ranges[o],t[o],null,r);to(e,Tr(e.cm,i,e.sel.primIndex),n)}function Zr(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n,to(e,Tr(e.cm,r,e.sel.primIndex),i)}function Qr(e,t,n,i){to(e,Dr(t,n),i)}function eo(e,t,n){var i=e.history.done,r=G(i);r&&r.ranges?(i[i.length-1]=t,no(e,t,n)):to(e,t,n)}function to(e,t,n){no(e,t,n),Ur(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function no(e,t,n){(be(e,"beforeSelectionChange")||e.cm&&be(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new Sr(ut(e,t[n].anchor),ut(e,t[n].head))},origin:n&&n.origin};return ge(e,"beforeSelectionChange",e,i),e.cm&&ge(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?Tr(e.cm,i.ranges,i.ranges.length-1):t}(e,t,n));var i=n&&n.bias||(it(t.primary().head,e.sel.primary().head)<0?-1:1);io(e,oo(e,t,i,!0)),n&&!1===n.scroll||!e.cm||Li(e.cm)}function io(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,ye(e.cm)),cn(e,"cursorActivity",e))}function ro(e){io(e,oo(e,e.sel,null,!1))}function oo(e,t,n,i){for(var r,o=0;o<t.ranges.length;o++){var a=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=so(e,a.anchor,s&&s.anchor,n,i),u=so(e,a.head,s&&s.head,n,i);(r||l!=a.anchor||u!=a.head)&&(r||(r=t.ranges.slice(0,o)),r[o]=new Sr(l,u))}return r?Tr(e.cm,r,t.primIndex):t}function ao(e,t,n,i,r){var o=Ye(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],l=s.marker,u="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,c="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==s.from||(u?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(c?s.to>=t.ch:s.to>t.ch))){if(r&&(ge(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!l.atomic)continue;if(n){var d=l.find(i<0?1:-1),f=void 0;if((i<0?c:u)&&(d=lo(e,d,-i,d&&d.line==t.line?o:null)),d&&d.line==t.line&&(f=it(d,n))&&(i<0?f<0:f>0))return ao(e,d,t,i,r)}var h=l.find(i<0?-1:1);return(i<0?u:c)&&(h=lo(e,h,i,h.line==t.line?o:null)),h?ao(e,h,t,i,r):null}}return t}function so(e,t,n,i,r){var o=i||1,a=ao(e,t,n,o,r)||!r&&ao(e,t,n,o,!0)||ao(e,t,n,-o,r)||!r&&ao(e,t,n,-o,!0);return a||(e.cantEdit=!0,nt(e.first,0))}function lo(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?ut(e,nt(t.line-1)):null:n>0&&t.ch==(i||Ye(e,t.line)).text.length?t.line<e.first+e.size-1?nt(t.line+1,0):null:new nt(t.line,t.ch+n)}function uo(e){e.setSelection(nt(e.firstLine(),0),nt(e.lastLine()),V)}function co(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(t,n,r,o){t&&(i.from=ut(e,t)),n&&(i.to=ut(e,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),ge(e,"beforeChange",e,i),e.cm&&ge(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function fo(e,t,n){if(e.cm){if(!e.cm.curOp)return nr(e.cm,fo)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(be(e,"beforeChange")||e.cm&&be(e.cm,"beforeChange"))||(t=co(e,t,!0))){var i=kt&&!n&&function(e,t,n){var i=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=W(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var r=[{from:t,to:n}],o=0;o<i.length;++o)for(var a=i[o],s=a.find(0),l=0;l<r.length;++l){var u=r[l];if(!(it(u.to,s.from)<0||it(u.from,s.to)>0)){var c=[l,1],d=it(u.from,s.from),f=it(u.to,s.to);(d<0||!a.inclusiveLeft&&!d)&&c.push({from:u.from,to:s.from}),(f>0||!a.inclusiveRight&&!f)&&c.push({from:s.to,to:u.to}),r.splice.apply(r,c),l+=c.length-3}}return r}(e,t.from,t.to);if(i)for(var r=i.length-1;r>=0;--r)ho(e,{from:i[r].from,to:i[r].to,text:r?[""]:t.text,origin:t.origin});else ho(e,t)}}function ho(e,t){if(1!=t.text.length||""!=t.text[0]||0!=it(t.from,t.to)){var n=Nr(e,t);jr(e,t,n,e.cm?e.cm.curOp.id:NaN),go(e,t,n,Mt(e,t));var i=[];Rr(e,(function(e,n){n||-1!=W(i,e.history)||(wo(e.history,t),i.push(e.history)),go(e,t,null,Mt(e,t))}))}}function po(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!i||n){for(var r,o=e.history,a=e.sel,s="undo"==t?o.done:o.undone,l="undo"==t?o.undone:o.done,u=0;u<s.length&&(r=s[u],n?!r.ranges||r.equals(e.sel):r.ranges);u++);if(u!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(r=s.pop()).ranges){if(i)return void s.push(r);break}if(Vr(r,l),n&&!r.equals(e.sel))return void to(e,r,{clearRedo:!1});a=r}var c=[];Vr(a,l),l.push({changes:c,generation:o.generation}),o.generation=r.generation||++o.maxGeneration;for(var d=be(e,"beforeChange")||e.cm&&be(e.cm,"beforeChange"),f=function(n){var i=r.changes[n];if(i.origin=t,d&&!co(e,i,!1))return s.length=0,{};c.push(Hr(e,i));var o=n?Nr(e,i):G(s);go(e,i,o,Xr(e,i)),!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:Mr(i)});var a=[];Rr(e,(function(e,t){t||-1!=W(a,e.history)||(wo(e.history,i),a.push(e.history)),go(e,i,null,Xr(e,i))}))},h=r.changes.length-1;h>=0;--h){var p=f(h);if(p)return p.v}}}}function mo(e,t){if(0!=t&&(e.first+=t,e.sel=new _r(J(e.sel.ranges,(function(e){return new Sr(nt(e.anchor.line+t,e.anchor.ch),nt(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){hi(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)pi(e.cm,i,"gutter")}}function go(e,t,n,i){if(e.cm&&!e.cm.curOp)return nr(e.cm,go)(e,t,n,i);if(t.to.line<e.first)mo(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);mo(e,r),t={from:nt(e.first,0),to:nt(t.to.line+r,t.to.ch),text:[G(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:nt(o,Ye(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ke(e,t.from,t.to),n||(n=Nr(e,t)),e.cm?function(e,t,n){var i=e.doc,r=e.display,o=t.from,a=t.to,s=!1,l=o.line;e.options.lineWrapping||(l=Ze(Ht(Ye(i,o.line))),i.iter(l,a.line+1,(function(e){if(e==r.maxLine)return s=!0,!0})));i.sel.contains(t.from,t.to)>-1&&ye(e);Ir(i,t,n,ui(e)),e.options.lineWrapping||(i.iter(l,o.line+t.text.length,(function(e){var t=qt(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,s=!1)})),s&&(e.curOp.updateMaxLine=!0));(function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var r=Ye(e,i).stateAfter;if(r&&(!(r instanceof dt)||i+r.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}})(i,o.line),or(e,400);var u=t.text.length-(a.line-o.line)-1;t.full?hi(e):o.line!=a.line||1!=t.text.length||Or(e.doc,t)?hi(e,o.line,a.line+1,u):pi(e,o.line,"text");var c=be(e,"changes"),d=be(e,"change");if(d||c){var f={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};d&&cn(e,"change",e,f),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}(e.cm,t,i):Ir(e,t,i),no(e,n,V),e.cantEdit&&so(e,nt(e.firstLine(),0))&&(e.cantEdit=!1)}}function vo(e,t,n,i,r){var o;i||(i=n),it(i,n)<0&&(n=(o=[i,n])[0],i=o[1]),"string"==typeof t&&(t=e.splitLines(t)),fo(e,{from:n,to:i,text:t,origin:r})}function yo(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function bo(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r],a=!0;if(o.ranges){o.copied||((o=e[r]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)yo(o.ranges[s].anchor,t,n,i),yo(o.ranges[s].head,t,n,i)}else{for(var l=0;l<o.changes.length;++l){var u=o.changes[l];if(n<u.from.line)u.from=nt(u.from.line+i,u.from.ch),u.to=nt(u.to.line+i,u.to.ch);else if(t<=u.to.line){a=!1;break}}a||(e.splice(0,r+1),r=0)}}}function wo(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;bo(e.done,n,i,r),bo(e.undone,n,i,r)}function xo(e,t,n,i){var r=t,o=t;return"number"==typeof t?o=Ye(e,lt(e,t)):r=Ze(t),null==r?null:(i(o,r)&&e.cm&&pi(e.cm,r,n),o)}function Co(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function ko(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}Sr.prototype.from=function(){return st(this.anchor,this.head)},Sr.prototype.to=function(){return at(this.anchor,this.head)},Sr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Co.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var r=this.lines[n];this.height-=r.height,Kt(r),cn(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},ko.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(e<r){var o=Math.min(t,r-e),a=i.height;if(i.removeInner(e,o),this.height-=a-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(t-=o))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Co))){var s=[];this.collapse(s),this.children=[new Co(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<=o){if(r.insertInner(e,t,n),r.lines&&r.lines.length>50){for(var a=r.lines.length%25+25,s=a;s<r.lines.length;){var l=new Co(r.lines.slice(s,s+=25));r.height-=l.height,this.children.splice(++i,0,l),l.parent=this}r.lines=r.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new ko(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=W(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var i=new ko(e.children);i.parent=e,e.children=[i,t],e=i}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<o){var a=Math.min(t,o-e);if(r.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var _o=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};function So(e,t,n){$t(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Pi(e,n)}_o.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=Ze(n);if(null!=i&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(n.widgets=null);var o=kn(this);Je(n,Math.max(0,n.height-o)),e&&(tr(e,(function(){So(e,n,-o),pi(e,i,"widget")})),cn(e,"lineWidgetCleared",e,this,i))}},_o.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=kn(this)-t;r&&(Ut(this.doc,i)||Je(i,i.height+r),n&&tr(n,(function(){n.curOp.forceUpdate=!0,So(n,i,r),cn(n,"lineWidgetChanged",n,e,Ze(i))})))},we(_o);var To=0,Do=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++To};function Mo(e,t,n,i,r){if(i&&i.shared)return function(e,t,n,i,r){i=z(i),i.shared=!1;var o=[Mo(e,t,n,i,r)],a=o[0],s=i.widgetNode;return Rr(e,(function(e){s&&(i.widgetNode=s.cloneNode(!0)),o.push(Mo(e,ut(e,t),ut(e,n),i,r));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=G(o)})),new Eo(o,a)}(e,t,n,i,r);if(e.cm&&!e.cm.curOp)return nr(e.cm,Mo)(e,t,n,i,r);var o=new Do(e,r),a=it(t,n);if(i&&z(i,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=A("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Ft(e,t.line,t,n,o)||t.line!=n.line&&Ft(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");_t=!0}o.addToHistory&&jr(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var s,l=t.line,u=e.cm;if(e.iter(l,n.line+1,(function(e){u&&o.collapsed&&!u.options.lineWrapping&&Ht(e)==u.display.maxLine&&(s=!0),o.collapsed&&l!=t.line&&Je(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new St(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l})),o.collapsed&&e.iter(t.line,n.line+1,(function(t){Ut(e,t)&&Je(t,0)})),o.clearOnEnter&&he(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(kt=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++To,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)hi(u,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=t.line;c<=n.line;c++)pi(u,c,"text");o.atomic&&ro(u.doc),cn(u,"markerAdded",u,o)}return o}Do.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Yi(e),be(this,"clear")){var n=this.find();n&&cn(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=Tt(a.markedSpans,this);e&&!this.collapsed?pi(e,Ze(a),"text"):e&&(null!=s.to&&(r=Ze(a)),null!=s.from&&(i=Ze(a))),a.markedSpans=Dt(a.markedSpans,s),null==s.from&&this.collapsed&&!Ut(this.doc,a)&&e&&Je(a,oi(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var u=Ht(this.lines[l]),c=qt(u);c>e.display.maxLineLength&&(e.display.maxLine=u,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&hi(e,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ro(e.doc)),e&&cn(e,"markerCleared",e,this,i,r),t&&Ki(e),this.parent&&this.parent.clear()}},Do.prototype.find=function(e,t){var n,i;null==e&&"bookmark"==this.type&&(e=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],a=Tt(o.markedSpans,this);if(null!=a.from&&(n=nt(t?o:Ze(o),a.from),-1==e))return n;if(null!=a.to&&(i=nt(t?o:Ze(o),a.to),1==e))return i}return n&&{from:n,to:i}},Do.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;t&&i&&tr(i,(function(){var r=t.line,o=Ze(t.line),a=Ln(i,o);if(a&&(Hn(a),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!Ut(n.doc,r)&&null!=n.height){var s=n.height;n.height=null;var l=kn(n)-s;l&&Je(r,r.height+l)}cn(i,"markerChanged",i,e)}))},Do.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=W(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Do.prototype.detachLine=function(e){if(this.lines.splice(W(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},we(Do);var Eo=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function No(e){return e.findMarks(nt(e.first,0),e.clipPos(nt(e.lastLine())),(function(e){return e.parent}))}function Ao(e){for(var t=function(t){var n=e[t],i=[n.primary.doc];Rr(n.primary.doc,(function(e){return i.push(e)}));for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==W(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}},n=0;n<e.length;n++)t(n)}Eo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();cn(this,"clear")}},Eo.prototype.find=function(e,t){return this.primary.find(e,t)},we(Eo);var Po=0,Lo=function e(t,n,i,r,o){if(!(this instanceof e))return new e(t,n,i,r,o);null==i&&(i=0),ko.call(this,[new Co([new Yt("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var a=nt(i,0);this.sel=Dr(a),this.history=new Fr(null),this.id=++Po,this.modeOption=n,this.lineSep=r,this.direction="rtl"==o?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Ir(this,{from:a,to:a,text:t}),to(this,Dr(a),V)};Lo.prototype=Q(ko.prototype,{constructor:Lo,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ge(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:rr((function(e){var t=nt(this.first,0),n=this.first+this.size-1;fo(this,{from:t,to:nt(n,Ye(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Oi(this.cm,0,0),to(this,Dr(t),V)})),replaceRange:function(e,t,n,i){vo(this,e,t=ut(this,t),n=n?ut(this,n):t,i)},getRange:function(e,t,n){var i=Ke(this,ut(this,e),ut(this,t));return!1===n?i:i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},setLine:function(e,t){et(this,e)&&vo(this,t,nt(e,0),ut(this,nt(e)))},getLineHandle:function(e){if(et(this,e))return Ye(this,e)},getLineNumber:function(e){return Ze(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Ye(this,e)),Ht(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ut(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:rr((function(e,t,n){Qr(this,ut(this,"number"==typeof e?nt(e,t||0):e),null,n)})),setSelection:rr((function(e,t,n){Qr(this,ut(this,e),ut(this,t||e),n)})),extendSelection:rr((function(e,t,n){Gr(this,ut(this,e),t&&ut(this,t),n)})),extendSelections:rr((function(e,t){Jr(this,ct(this,e),t)})),extendSelectionsBy:rr((function(e,t){Jr(this,ct(this,J(this.sel.ranges,e)),t)})),setSelections:rr((function(e,t,n){if(e.length){for(var i=[],r=0;r<e.length;r++)i[r]=new Sr(ut(this,e[r].anchor),ut(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),to(this,Tr(this.cm,i,t),n)}})),addSelection:rr((function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new Sr(ut(this,e),ut(this,t||e))),to(this,Tr(this.cm,i,i.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var r=Ke(this,n[i].from(),n[i].to());t=t?t.concat(r):r}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=Ke(this,n[i].from(),n[i].to());!1!==e&&(r=r.join(e||this.lineSeparator())),t[i]=r}return t},replaceSelection:function(e,t,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:rr((function(e,t,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var a=r.ranges[o];i[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:n}}for(var s=t&&"end"!=t&&function(e,t,n){for(var i=[],r=nt(e.first,0),o=r,a=0;a<t.length;a++){var s=t[a],l=Ar(s.from,r,o),u=Ar(Mr(s),r,o);if(r=s.to,o=u,"around"==n){var c=e.sel.ranges[a],d=it(c.head,c.anchor)<0;i[a]=new Sr(d?u:l,d?l:u)}else i[a]=new Sr(l,l)}return new _r(i,e.sel.primIndex)}(this,i,t),l=i.length-1;l>=0;l--)fo(this,i[l]);s?eo(this,s):this.cm&&Li(this.cm)})),undo:rr((function(){po(this,"undo")})),redo:rr((function(){po(this,"redo")})),undoSelection:rr((function(){po(this,"undo",!0)})),redoSelection:rr((function(){po(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Fr(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Yr(this.history.done),undone:Yr(this.history.undone)}},setHistory:function(e){var t=this.history=new Fr(this.history.maxGeneration);t.done=Yr(e.done.slice(0),null,!0),t.undone=Yr(e.undone.slice(0),null,!0)},setGutterMarker:rr((function(e,t,n){return xo(this,e,"gutter",(function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&ie(i)&&(e.gutterMarkers=null),!0}))})),clearGutter:rr((function(e){var t=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&xo(t,n,"gutter",(function(){return n.gutterMarkers[e]=null,ie(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!et(this,e))return null;if(t=e,!(e=Ye(this,e)))return null}else if(null==(t=Ze(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:rr((function(e,t,n){return xo(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(S(n).test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0}))})),removeLineClass:rr((function(e,t,n){return xo(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",r=e[i];if(!r)return!1;if(null==n)e[i]=null;else{var o=r.match(S(n));if(!o)return!1;var a=o.index+o[0].length;e[i]=r.slice(0,o.index)+(o.index&&a!=r.length?" ":"")+r.slice(a)||null}return!0}))})),addLineWidget:rr((function(e,t,n){return function(e,t,n,i){var r=new _o(e,n,i),o=e.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),xo(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length-1,Math.max(0,r.insertAt)),0,r),r.line=t,o&&!Ut(e,t)){var i=$t(t)<e.scrollTop;Je(t,t.height+kn(r)),i&&Pi(o,r.height),o.curOp.forceUpdate=!0}return!0})),o&&cn(o,"lineWidgetAdded",o,r,"number"==typeof t?t:Ze(t)),r}(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Mo(this,ut(this,e),ut(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Mo(this,e=ut(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=Ye(this,(e=ut(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,n){e=ut(this,e),t=ut(this,t);var i=[],r=e.line;return this.iter(e.line,t.line+1,(function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&r==e.line&&e.ch>=l.to||null==l.from&&r!=e.line||null!=l.from&&r==t.line&&l.from>=t.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r})),i},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)})),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter((function(r){var o=r.text.length+i;if(o>e)return t=e,!0;e-=o,++n})),ut(this,nt(n,t))},indexFromPos:function(e){var t=(e=ut(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Lo(Ge(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new Lo(Ge(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.find(),o=e.clipPos(r.from),a=e.clipPos(r.to);if(it(o,a)){var s=Mo(e,o,a,i.primary,i.primary.type);i.markers.push(s),s.parent=i}}}(i,No(this)),i},unlinkDoc:function(e){if(e instanceof Ea&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Ao(No(this));break}}if(e.history==this.history){var n=[e.id];Rr(e,(function(e){return n.push(e.id)}),!0),e.history=new Fr(null),e.history.done=Yr(this.history.done,n),e.history.undone=Yr(this.history.undone,n)}},iterLinkedDocs:function(e){Rr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Le(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:rr((function(e){var t;("rtl"!=e&&(e="ltr"),e!=this.direction)&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&tr(t=this.cm,(function(){zr(t),hi(t)})))}))}),Lo.prototype.eachLine=Lo.prototype.iter;var Oo=0;function Io(e){var t=this;if(Ro(t),!ve(t,e)&&!_n(t.display,e)){xe(e),s&&(Oo=+new Date);var n=di(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),a=0,l=function(e,i){if(!t.options.allowDropFileTypes||-1!=W(t.options.allowDropFileTypes,e.type)){var s=new FileReader;s.onload=nr(t,(function(){var e=s.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[i]=e,++a==r){var l={from:n=ut(t.doc,n),to:n,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};fo(t.doc,l),eo(t.doc,Dr(n,Mr(l)))}})),s.readAsText(e)}},u=0;u<r;++u)l(i[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var c=e.dataTransfer.getData("Text");if(c){var d;if(t.state.draggingText&&!t.state.draggingText.copy&&(d=t.listSelections()),no(t.doc,Dr(n,n)),d)for(var f=0;f<d.length;++f)vo(t.doc,"",d[f].anchor,d[f].head,"drag");t.replaceSelection(c,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Ro(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Bo(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var r=t[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation((function(){for(var t=0;t<n.length;t++)e(n[t])}))}}var zo=!1;function Fo(){var e;zo||(he(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Bo(Ho)}),100))})),he(window,"blur",(function(){return Bo(Di)})),zo=!0)}function Ho(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Wo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},jo=0;jo<10;jo++)Wo[jo+48]=Wo[jo+96]=String(jo);for(var Uo=65;Uo<=90;Uo++)Wo[Uo]=String.fromCharCode(Uo);for(var Vo=1;Vo<=12;Vo++)Wo[Vo+111]=Wo[Vo+63235]="F"+Vo;var $o={};function qo(e){var t,n,i,r,o=e.split(/-(?!$)/);e=o[o.length-1];for(var a=0;a<o.length-1;a++){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))r=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);i=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),r&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Xo(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var r=J(n.split(" "),qo),o=0;o<r.length;o++){var a=void 0,s=void 0;o==r.length-1?(s=r.join(" "),a=i):(s=r.slice(0,o+1).join(" "),a="...");var l=t[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else t[s]=a}delete e[n]}for(var u in t)e[u]=t[u];return e}function Yo(e,t,n,i){var r=(t=Zo(t)).call?t.call(e,i):t[e];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Yo(e,t.fallthrough,n,i);for(var o=0;o<t.fallthrough.length;o++){var a=Yo(e,t.fallthrough[o],n,i);if(a)return a}}}function Ko(e){var t="string"==typeof e?e:Wo[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Go(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(k?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(k?t.ctrlKey:t.metaKey)&&"Cmd"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function Jo(e,t){if(f&&34==e.keyCode&&e.char)return!1;var n=Wo[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Go(n,e,t))}function Zo(e){return"string"==typeof e?$o[e]:e}function Qo(e,t){for(var n=e.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=t(n[r]);i.length&&it(o.from,G(i).to)<=0;){var a=i.pop();if(it(a.from,o.from)<0){o.from=a.from;break}}i.push(o)}tr(e,(function(){for(var t=i.length-1;t>=0;t--)vo(e.doc,"",i[t].from,i[t].to,"+delete");Li(e)}))}function ea(e,t,n){var i=ae(e.text,t+n,n);return i<0||i>e.text.length?null:i}function ta(e,t,n){var i=ea(e,t.ch,n);return null==i?null:new nt(t.line,i,n<0?"after":"before")}function na(e,t,n,i,r){if(e){var o=de(n,t.doc.direction);if(o){var a,s=r<0?G(o):o[0],l=r<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var u=On(t,n);a=r<0?n.text.length-1:0;var c=In(t,u,a).top;a=se((function(e){return In(t,u,e).top==c}),r<0==(1==s.level)?s.from:s.to-1,a),"before"==l&&(a=ea(n,a,1))}else a=r<0?s.to:s.from;return new nt(i,a,l)}}return new nt(i,r<0?n.text.length:0,r<0?"before":"after")}$o.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},$o.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},$o.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},$o.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},$o.default=b?$o.macDefault:$o.pcDefault;var ia={selectAll:uo,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),V)},killLine:function(e){return Qo(e,(function(t){if(t.empty()){var n=Ye(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:nt(t.head.line+1,0)}:{from:t.head,to:nt(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Qo(e,(function(t){return{from:nt(t.from().line,0),to:ut(e.doc,nt(t.to().line+1,0))}}))},delLineLeft:function(e){return Qo(e,(function(e){return{from:nt(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Qo(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Qo(e,(function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(nt(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(nt(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return ra(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return oa(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return function(e,t){var n=Ye(e.doc,t),i=function(e){for(var t;t=Bt(e);)e=t.find(1,!0).line;return e}(n);i!=n&&(t=Ze(i));return na(!0,e,n,t,-1)}(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),q)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),q)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?oa(e,t.head):i}),q)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),a=F(e.getLine(o.line),o.ch,i);t.push(K(i-a%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return tr(e,(function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var r=t[i].head,o=Ye(e.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new nt(r.line,r.ch-1)),r.ch>0)r=new nt(r.line,r.ch+1),e.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),nt(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var a=Ye(e.doc,r.line-1).text;a&&(r=new nt(r.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),nt(r.line-1,a.length-1),r,"+transpose"))}n.push(new Sr(r,r))}e.setSelections(n)}))},newlineAndIndent:function(e){return tr(e,(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);Li(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function ra(e,t){var n=Ye(e.doc,t),i=Ht(n);return i!=n&&(t=Ze(i)),na(!0,e,i,t,1)}function oa(e,t){var n=ra(e,t.line),i=Ye(e.doc,n.line),r=de(i,e.doc.direction);if(!r||0==r[0].level){var o=Math.max(0,i.text.search(/\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;return nt(n.line,a?0:o,n.sticky)}return n}function aa(e,t,n){if("string"==typeof t&&!(t=ia[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),r=t(e)!=U}finally{e.display.shift=i,e.state.suppressEdits=!1}return r}var sa=new H;function la(e,t,n,i){var r=e.state.keySeq;if(r){if(Ko(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:sa.set(50,(function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())})),ua(e,r+" "+t,n,i))return!0}return ua(e,t,n,i)}function ua(e,t,n,i){var r=function(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var r=Yo(t,e.state.keyMaps[i],n,e);if(r)return r}return e.options.extraKeys&&Yo(t,e.options.extraKeys,n,e)||Yo(t,e.options.keyMap,n,e)}(e,t,i);return"multi"==r&&(e.state.keySeq=t),"handled"==r&&cn(e,"keyHandled",e,t,n),"handled"!=r&&"multi"!=r||(xe(n),ki(e)),!!r}function ca(e,t){var n=Jo(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?la(e,"Shift-"+n,t,(function(t){return aa(e,t,!0)}))||la(e,n,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return aa(e,t)})):la(e,n,t,(function(t){return aa(e,t)})))}var da=null;function fa(e){var t=this;if(t.curOp.focus=L(),!ve(t,e)){s&&l<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var i=ca(t,e);f&&(da=i?n:null,i||88!=n||Ie||!(b?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(D(t,"CodeMirror-crosshair"),me(document,"keyup",n),me(document,"mouseover",n))}O(t,"CodeMirror-crosshair"),he(document,"keyup",n),he(document,"mouseover",n)}(t)}}function ha(e){16==e.keyCode&&(this.doc.sel.shift=!1),ve(this,e)}function pa(e){var t=this;if(!(_n(t.display,e)||ve(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(f&&n==da)return da=null,void xe(e);if(!f||e.which&&!(e.which<10)||!ca(t,e)){var r=String.fromCharCode(null==i?n:i);"\b"!=r&&(function(e,t,n){return la(e,"'"+n+"'",t,(function(t){return aa(e,t,!0)}))}(t,e,r)||t.display.input.onKeyPress(e))}}}var ma,ga,va=function(e,t,n){this.time=e,this.pos=t,this.button=n};function ya(e){var t=this,n=t.display;if(!(ve(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,_n(n,e))u||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!xa(t,e)){var i=di(t,e),r=Te(e),o=i?function(e,t){var n=+new Date;return ga&&ga.compare(n,e,t)?(ma=ga=null,"triple"):ma&&ma.compare(n,e,t)?(ga=new va(n,e,t),ma=null,"double"):(ma=new va(n,e,t),ga=null,"single")}(i,r):"single";window.focus(),1==r&&t.state.selectingText&&t.state.selectingText(e),i&&function(e,t,n,i,r){var o="Click";"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o);return o=(1==t?"Left":2==t?"Middle":"Right")+o,la(e,Go(o,r),r,(function(t){if("string"==typeof t&&(t=ia[t]),!t)return!1;var i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i=t(e,n)!=U}finally{e.state.suppressEdits=!1}return i}))}(t,r,i,o,e)||(1==r?i?function(e,t,n,i){s?setTimeout(B(_i,e),0):e.curOp.focus=L();var r,o=function(e,t,n){var i=e.getOption("configureMouse"),r=i?i(e,t,n):{};if(null==r.unit){var o=w?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}(null==r.extend||e.doc.extend)&&(r.extend=e.doc.extend||n.shiftKey);null==r.addNew&&(r.addNew=b?n.metaKey:n.ctrlKey);null==r.moveOnDrag&&(r.moveOnDrag=!(b?n.altKey:n.ctrlKey));return r}(e,n,i),a=e.doc.sel;e.options.dragDrop&&Ee&&!e.isReadOnly()&&"single"==n&&(r=a.contains(t))>-1&&(it((r=a.ranges[r]).from(),t)<0||t.xRel>0)&&(it(r.to(),t)>0||t.xRel<0)?function(e,t,n,i){var r=e.display,o=!1,a=nr(e,(function(t){u&&(r.scroller.draggable=!1),e.state.draggingText=!1,me(r.wrapper.ownerDocument,"mouseup",a),me(r.wrapper.ownerDocument,"mousemove",c),me(r.scroller,"dragstart",d),me(r.scroller,"drop",a),o||(xe(t),i.addNew||Gr(e.doc,n,null,null,i.extend),u||s&&9==l?setTimeout((function(){r.wrapper.ownerDocument.body.focus(),r.input.focus()}),20):r.input.focus())})),c=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},d=function(){return o=!0};u&&(r.scroller.draggable=!0);e.state.draggingText=a,a.copy=!i.moveOnDrag,r.scroller.dragDrop&&r.scroller.dragDrop();he(r.wrapper.ownerDocument,"mouseup",a),he(r.wrapper.ownerDocument,"mousemove",c),he(r.scroller,"dragstart",d),he(r.scroller,"drop",a),Si(e),setTimeout((function(){return r.input.focus()}),20)}(e,i,t,o):function(e,t,n,i){var r=e.display,o=e.doc;xe(t);var a,s,l=o.sel,u=l.ranges;i.addNew&&!i.extend?(s=o.sel.contains(n),a=s>-1?u[s]:new Sr(n,n)):(a=o.sel.primary(),s=o.sel.primIndex);if("rectangle"==i.unit)i.addNew||(a=new Sr(n,n)),n=di(e,t,!0,!0),s=-1;else{var c=ba(e,n,i.unit);a=i.extend?Kr(a,c.anchor,c.head,i.extend):c}i.addNew?-1==s?(s=u.length,to(o,Tr(e,u.concat([a]),s),{scroll:!1,origin:"*mouse"})):u.length>1&&u[s].empty()&&"char"==i.unit&&!i.extend?(to(o,Tr(e,u.slice(0,s).concat(u.slice(s+1)),0),{scroll:!1,origin:"*mouse"}),l=o.sel):Zr(o,s,a,$):(s=0,to(o,new _r([a],0),$),l=o.sel);var d=n;function f(t){if(0!=it(d,t))if(d=t,"rectangle"==i.unit){for(var r=[],u=e.options.tabSize,c=F(Ye(o,n.line).text,n.ch,u),f=F(Ye(o,t.line).text,t.ch,u),h=Math.min(c,f),p=Math.max(c,f),m=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=g;m++){var v=Ye(o,m).text,y=X(v,h,u);h==p?r.push(new Sr(nt(m,y),nt(m,y))):v.length>y&&r.push(new Sr(nt(m,y),nt(m,X(v,p,u))))}r.length||r.push(new Sr(n,n)),to(o,Tr(e,l.ranges.slice(0,s).concat(r),s),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,w=a,x=ba(e,t,i.unit),C=w.anchor;it(x.anchor,C)>0?(b=x.head,C=st(w.from(),x.anchor)):(b=x.anchor,C=at(w.to(),x.head));var k=l.ranges.slice(0);k[s]=function(e,t){var n=t.anchor,i=t.head,r=Ye(e.doc,n.line);if(0==it(n,i)&&n.sticky==i.sticky)return t;var o=de(r);if(!o)return t;var a=ue(o,n.ch,n.sticky),s=o[a];if(s.from!=n.ch&&s.to!=n.ch)return t;var l,u=a+(s.from==n.ch==(1!=s.level)?0:1);if(0==u||u==o.length)return t;if(i.line!=n.line)l=(i.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var c=ue(o,i.ch,i.sticky),d=c-a||(i.ch-n.ch)*(1==s.level?-1:1);l=c==u-1||c==u?d<0:d>0}var f=o[u+(l?-1:0)],h=l==(1==f.level),p=h?f.from:f.to,m=h?"after":"before";return n.ch==p&&n.sticky==m?t:new Sr(new nt(n.line,p,m),i)}(e,new Sr(ut(o,C),b)),to(o,Tr(e,k,s),$)}}var h=r.wrapper.getBoundingClientRect(),p=0;function m(t){var n=++p,a=di(e,t,!0,"rectangle"==i.unit);if(a)if(0!=it(a,d)){e.curOp.focus=L(),f(a);var s=Ni(r,o);(a.line>=s.to||a.line<s.from)&&setTimeout(nr(e,(function(){p==n&&m(t)})),150)}else{var l=t.clientY<h.top?-20:t.clientY>h.bottom?20:0;l&&setTimeout(nr(e,(function(){p==n&&(r.scroller.scrollTop+=l,m(t))})),50)}}function g(t){e.state.selectingText=!1,p=1/0,t&&(xe(t),r.input.focus()),me(r.wrapper.ownerDocument,"mousemove",v),me(r.wrapper.ownerDocument,"mouseup",y),o.history.lastSelOrigin=null}var v=nr(e,(function(e){0!==e.buttons&&Te(e)?m(e):g(e)})),y=nr(e,g);e.state.selectingText=y,he(r.wrapper.ownerDocument,"mousemove",v),he(r.wrapper.ownerDocument,"mouseup",y)}(e,i,t,o)}(t,i,o,e):Se(e)==n.scroller&&xe(e):2==r?(i&&Gr(t.doc,i),setTimeout((function(){return n.input.focus()}),20)):3==r&&(_?t.display.input.onContextMenu(e):Si(t)))}}function ba(e,t,n){if("char"==n)return new Sr(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new Sr(nt(t.line,0),ut(e.doc,nt(t.line+1,0)));var i=n(e,t);return new Sr(i.from,i.to)}function wa(e,t,n,i){var r,o;if(t.touches)r=t.touches[0].clientX,o=t.touches[0].clientY;else try{r=t.clientX,o=t.clientY}catch(t){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&xe(t);var a=e.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!be(e,n))return ke(t);o-=s.top-a.viewOffset;for(var l=0;l<e.display.gutterSpecs.length;++l){var u=a.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=r)return ge(e,n,e,Qe(e.doc,o),e.display.gutterSpecs[l].className,t),ke(t)}}function xa(e,t){return wa(e,t,"gutterClick",!0)}function Ca(e,t){_n(e.display,t)||function(e,t){if(!be(e,"gutterContextMenu"))return!1;return wa(e,t,"gutterContextMenu",!1)}(e,t)||ve(e,t,"contextmenu")||_||e.display.input.onContextMenu(t)}function ka(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),jn(e)}va.prototype.compare=function(e,t,n){return this.time+400>e&&0==it(t,this.pos)&&n==this.button};var _a={toString:function(){return"CodeMirror.Init"}},Sa={},Ta={};function Da(e,t,n){if(!t!=!(n&&n!=_a)){var i=e.display.dragFunctions,r=t?he:me;r(e.display.scroller,"dragstart",i.start),r(e.display.scroller,"dragenter",i.enter),r(e.display.scroller,"dragover",i.over),r(e.display.scroller,"dragleave",i.leave),r(e.display.scroller,"drop",i.drop)}}function Ma(e){e.options.lineWrapping?(O(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(D(e.display.wrapper,"CodeMirror-wrap"),Xt(e)),ci(e),hi(e),jn(e),setTimeout((function(){return Ui(e)}),100)}function Ea(e,t){var n=this;if(!(this instanceof Ea))return new Ea(e,t);this.options=t=t?z(t):{},z(Sa,t,!1);var i=t.value;"string"==typeof i?i=new Lo(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var r=new Ea.inputStyles[t.inputStyle](this),o=this.display=new yr(e,i,r,t);for(var a in o.wrapper.CodeMirror=this,ka(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),qi(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new H,keySeq:null,specialChars:null},t.autofocus&&!y&&o.input.focus(),s&&l<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(e){var t=e.display;he(t.scroller,"mousedown",nr(e,ya)),he(t.scroller,"dblclick",s&&l<11?nr(e,(function(t){if(!ve(e,t)){var n=di(e,t);if(n&&!xa(e,t)&&!_n(e.display,t)){xe(t);var i=e.findWordAt(n);Gr(e.doc,i.anchor,i.head)}}})):function(t){return ve(e,t)||xe(t)});he(t.scroller,"contextmenu",(function(t){return Ca(e,t)}));var n,i={end:0};function r(){t.activeTouch&&(n=setTimeout((function(){return t.activeTouch=null}),1e3),(i=t.activeTouch).end=+new Date)}function o(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function a(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}he(t.scroller,"touchstart",(function(r){if(!ve(e,r)&&!o(r)&&!xa(e,r)){t.input.ensurePolled(),clearTimeout(n);var a=+new Date;t.activeTouch={start:a,moved:!1,prev:a-i.end<=300?i:null},1==r.touches.length&&(t.activeTouch.left=r.touches[0].pageX,t.activeTouch.top=r.touches[0].pageY)}})),he(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),he(t.scroller,"touchend",(function(n){var i=t.activeTouch;if(i&&!_n(t,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var o,s=e.coordsChar(t.activeTouch,"page");o=!i.prev||a(i,i.prev)?new Sr(s,s):!i.prev.prev||a(i,i.prev.prev)?e.findWordAt(s):new Sr(nt(s.line,0),ut(e.doc,nt(s.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),xe(n)}r()})),he(t.scroller,"touchcancel",r),he(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(Bi(e,t.scroller.scrollTop),Fi(e,t.scroller.scrollLeft,!0),ge(e,"scroll",e))})),he(t.scroller,"mousewheel",(function(t){return kr(e,t)})),he(t.scroller,"DOMMouseScroll",(function(t){return kr(e,t)})),he(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){ve(e,t)||_e(t)},over:function(t){ve(e,t)||(!function(e,t){var n=di(e,t);if(n){var i=document.createDocumentFragment();wi(e,n,i),e.display.dragCursor||(e.display.dragCursor=N("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),E(e.display.dragCursor,i)}}(e,t),_e(t))},start:function(t){return function(e,t){if(s&&(!e.state.draggingText||+new Date-Oo<100))_e(t);else if(!ve(e,t)&&!_n(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!h)){var n=N("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",f&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),f&&n.parentNode.removeChild(n)}}(e,t)},drop:nr(e,Io),leave:function(t){ve(e,t)||Ro(e)}};var u=t.input.getField();he(u,"keyup",(function(t){return ha.call(e,t)})),he(u,"keydown",nr(e,fa)),he(u,"keypress",nr(e,pa)),he(u,"focus",(function(t){return Ti(e,t)})),he(u,"blur",(function(t){return Di(e,t)}))}(this),Fo(),Yi(this),this.curOp.forceUpdate=!0,Br(this,i),t.autofocus&&!y||this.hasFocus()?setTimeout(B(Ti,this),20):Di(this),Ta)Ta.hasOwnProperty(a)&&Ta[a](this,t[a],_a);pr(this),t.finishInit&&t.finishInit(this);for(var c=0;c<Na.length;++c)Na[c](this);Ki(this),u&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Ea.defaults=Sa,Ea.optionHandlers=Ta;var Na=[];function Aa(e,t,n,i){var r,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=mt(e,t).state:n="prev");var a=e.options.tabSize,s=Ye(o,t),l=F(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(i||/\S/.test(s.text)){if("smart"==n&&((u=o.mode.indent(r,s.text.slice(c.length),s.text))==U||u>150)){if(!i)return;n="prev"}}else u=0,n="not";"prev"==n?u=t>o.first?F(Ye(o,t-1).text,null,a):0:"add"==n?u=l+e.options.indentUnit:"subtract"==n?u=l-e.options.indentUnit:"number"==typeof n&&(u=l+n),u=Math.max(0,u);var d="",f=0;if(e.options.indentWithTabs)for(var h=Math.floor(u/a);h;--h)f+=a,d+="\t";if(f<u&&(d+=K(u-f)),d!=c)return vo(o,d,nt(t,0),nt(t,c.length),"+input"),s.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var m=o.sel.ranges[p];if(m.head.line==t&&m.head.ch<c.length){var g=nt(t,c.length);Zr(o,p,new Sr(g,g));break}}}Ea.defineInitHook=function(e){return Na.push(e)};var Pa=null;function La(e){Pa=e}function Oa(e,t,n,i,r){var o=e.doc;e.display.shift=!1,i||(i=o.sel);var a=+new Date-200,s="paste"==r||e.state.pasteIncoming>a,l=Le(t),u=null;if(s&&i.ranges.length>1)if(Pa&&Pa.text.join("\n")==t){if(i.ranges.length%Pa.text.length==0){u=[];for(var c=0;c<Pa.text.length;c++)u.push(o.splitLines(Pa.text[c]))}}else l.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(u=J(l,(function(e){return[e]})));for(var d=e.curOp.updateInput,f=i.ranges.length-1;f>=0;f--){var h=i.ranges[f],p=h.from(),m=h.to();h.empty()&&(n&&n>0?p=nt(p.line,p.ch-n):e.state.overwrite&&!s?m=nt(m.line,Math.min(Ye(o,m.line).text.length,m.ch+G(l).length)):s&&Pa&&Pa.lineWise&&Pa.text.join("\n")==t&&(p=m=nt(p.line,0)));var g={from:p,to:m,text:u?u[f%u.length]:l,origin:r||(s?"paste":e.state.cutIncoming>a?"cut":"+input")};fo(e.doc,g),cn(e,"inputRead",e,g)}t&&!s&&Ra(e,t),Li(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Ia(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||tr(t,(function(){return Oa(t,n,0,null,"paste")})),!0}function Ra(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=e.getModeAt(r.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){a=Aa(e,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Ye(e.doc,r.head.line).text.slice(0,r.head.ch))&&(a=Aa(e,r.head.line,"smart"));a&&cn(e,"electricInput",e,r.head.line)}}}function Ba(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line,o={anchor:nt(r,0),head:nt(r+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function za(e,t,n,i){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",i?"":"off"),e.setAttribute("spellcheck",!!t)}function Fa(){var e=N("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=N("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return u?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),za(e),t}function Ha(e,t,n,i,r){var o=t,a=n,s=Ye(e,t.line);function l(i){var o,a;if(o=r?function(e,t,n,i){var r=de(t,e.doc.direction);if(!r)return ta(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=ue(r,n.ch,n.sticky),a=r[o];if("ltr"==e.doc.direction&&a.level%2==0&&(i>0?a.to>n.ch:a.from<n.ch))return ta(t,n,i);var s,l=function(e,n){return ea(t,e instanceof nt?e.ch:e,n)},u=function(n){return e.options.lineWrapping?(s=s||On(e,t),ei(e,t,s,n)):{begin:0,end:t.text.length}},c=u("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==a.level){var d=1==a.level==i<0,f=l(n,d?1:-1);if(null!=f&&(d?f<=a.to&&f<=c.end:f>=a.from&&f>=c.begin)){var h=d?"before":"after";return new nt(n.line,f,h)}}var p=function(e,t,i){for(var o=function(e,t){return t?new nt(n.line,l(e,1),"before"):new nt(n.line,e,"after")};e>=0&&e<r.length;e+=t){var a=r[e],s=t>0==(1!=a.level),u=s?i.begin:l(i.end,-1);if(a.from<=u&&u<a.to)return o(u,s);if(u=s?a.from:l(a.to,-1),i.begin<=u&&u<i.end)return o(u,s)}},m=p(o+i,i,c);if(m)return m;var g=i>0?c.end:l(c.begin,-1);return null==g||i>0&&g==t.text.length||!(m=p(i>0?0:r.length-1,i,u(g)))?null:m}(e.cm,s,t,n):ta(s,t,n),null==o){if(i||(a=t.line+n)<e.first||a>=e.first+e.size||(t=new nt(a,t.ch,t.sticky),!(s=Ye(e,a))))return!1;t=na(r,e.cm,s,t.line,n)}else t=o;return!0}if("char"==i)l();else if("column"==i)l(!0);else if("word"==i||"group"==i)for(var u=null,c="group"==i,d=e.cm&&e.cm.getHelper(t,"wordChars"),f=!0;!(n<0)||l(!f);f=!1){var h=s.text.charAt(t.ch)||"\n",p=ne(h,d)?"w":c&&"\n"==h?"n":!c||/\s/.test(h)?null:"p";if(!c||f||p||(p="s"),u&&u!=p){n<0&&(n=1,l(),t.sticky="after");break}if(p&&(u=p),n>0&&!l(!f))break}var m=so(e,t,o,a,!0);return rt(o,m)&&(m.hitSide=!0),m}function Wa(e,t,n,i){var r,o,a=e.doc,s=t.left;if("page"==i){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(l-.5*oi(e.display),3);r=(n>0?t.bottom:t.top)+n*u}else"line"==i&&(r=n>0?t.bottom+3:t.top-3);for(;(o=Zn(e,s,r)).outside;){if(n<0?r<=0:r>=a.height){o.hitSide=!0;break}r+=5*n}return o}var ja=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new H,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ua(e,t){var n=Ln(e,t.line);if(!n||n.hidden)return null;var i=Ye(e.doc,t.line),r=An(n,i,t.line),o=de(i,e.doc.direction),a="left";o&&(a=ue(o,t.ch)%2?"right":"left");var s=zn(r.map,t.ch,a);return s.offset="right"==s.collapse?s.end:s.start,s}function Va(e,t){return t&&(e.bad=!0),e}function $a(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return Va(e.clipPos(nt(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var o=e.display.view[r];if(o.node==i)return qa(o,t,n)}}function qa(e,t,n){var i=e.text.firstChild,r=!1;if(!t||!P(i,t))return Va(nt(Ze(e.line),0),!0);if(t==i&&(r=!0,t=i.childNodes[n],n=0,!t)){var o=e.rest?G(e.rest):e.line;return Va(nt(Ze(o),o.text.length),r)}var a=3==t.nodeType?t:null,s=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));s.parentNode!=i;)s=s.parentNode;var l=e.measure,u=l.maps;function c(t,n,i){for(var r=-1;r<(u?u.length:0);r++)for(var o=r<0?l.map:u[r],a=0;a<o.length;a+=3){var s=o[a+2];if(s==t||s==n){var c=Ze(r<0?e.line:e.rest[r]),d=o[a]+i;return(i<0||s!=t)&&(d=o[a+(i?1:0)]),nt(c,d)}}}var d=c(a,s,n);if(d)return Va(d,r);for(var f=s.nextSibling,h=a?a.nodeValue.length-n:0;f;f=f.nextSibling){if(d=c(f,f.firstChild,0))return Va(nt(d.line,d.ch-h),r);h+=f.textContent.length}for(var p=s.previousSibling,m=n;p;p=p.previousSibling){if(d=c(p,p.firstChild,-1))return Va(nt(d.line,d.ch+m),r);m+=p.textContent.length}}ja.prototype.init=function(e){var t=this,n=this,i=n.cm,r=n.div=e.lineDiv;function o(e){if(!ve(i,e)){if(i.somethingSelected())La({lineWise:!1,text:i.getSelections()}),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=Ba(i);La({lineWise:!0,text:t.text}),"cut"==e.type&&i.operation((function(){i.setSelections(t.ranges,0,V),i.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var o=Pa.text.join("\n");if(e.clipboardData.setData("Text",o),e.clipboardData.getData("Text")==o)return void e.preventDefault()}var a=Fa(),s=a.firstChild;i.display.lineSpace.insertBefore(a,i.display.lineSpace.firstChild),s.value=Pa.text.join("\n");var l=document.activeElement;R(s),setTimeout((function(){i.display.lineSpace.removeChild(a),l.focus(),l==r&&n.showPrimarySelection()}),50)}}za(r,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),he(r,"paste",(function(e){ve(i,e)||Ia(e,i)||l<=11&&setTimeout(nr(i,(function(){return t.updateFromDOM()})),20)})),he(r,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),he(r,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),he(r,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),he(r,"touchstart",(function(){return n.forceCompositionEnd()})),he(r,"input",(function(){t.composing||t.readFromDOMSoon()})),he(r,"copy",o),he(r,"cut",o)},ja.prototype.prepareSelection=function(){var e=bi(this.cm,!1);return e.focus=this.cm.state.focused,e},ja.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},ja.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ja.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),r=n.from(),o=n.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var a=$a(t,e.anchorNode,e.anchorOffset),s=$a(t,e.focusNode,e.focusOffset);if(!a||a.bad||!s||s.bad||0!=it(st(a,s),r)||0!=it(at(a,s),o)){var l=t.display.view,u=r.line>=t.display.viewFrom&&Ua(t,r)||{node:l[0].measure.map[2],offset:0},c=o.line<t.display.viewTo&&Ua(t,o);if(!c){var d=l[l.length-1].measure,f=d.maps?d.maps[d.maps.length-1]:d.map;c={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(u&&c){var h,p=e.rangeCount&&e.getRangeAt(0);try{h=T(u.node,u.offset,c.offset,c.node)}catch(e){}h&&(!i&&t.state.focused?(e.collapse(u.node,u.offset),h.collapsed||(e.removeAllRanges(),e.addRange(h))):(e.removeAllRanges(),e.addRange(h)),p&&null==e.anchorNode?e.addRange(p):i&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},ja.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},ja.prototype.showMultipleSelections=function(e){E(this.cm.display.cursorDiv,e.cursors),E(this.cm.display.selectionDiv,e.selection)},ja.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},ja.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return P(this.div,t)},ja.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},ja.prototype.blur=function(){this.div.blur()},ja.prototype.getField=function(){return this.div},ja.prototype.supportsTouch=function(){return!0},ja.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():tr(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))},ja.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},ja.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(v&&d&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=$a(t,e.anchorNode,e.anchorOffset),i=$a(t,e.focusNode,e.focusOffset);n&&i&&tr(t,(function(){to(t.doc,Dr(n,i),V),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)}))}}},ja.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,i=this.cm,r=i.display,o=i.doc.sel.primary(),a=o.from(),s=o.to();if(0==a.ch&&a.line>i.firstLine()&&(a=nt(a.line-1,Ye(i.doc,a.line-1).length)),s.ch==Ye(i.doc,s.line).text.length&&s.line<i.lastLine()&&(s=nt(s.line+1,0)),a.line<r.viewFrom||s.line>r.viewTo-1)return!1;a.line==r.viewFrom||0==(e=fi(i,a.line))?(t=Ze(r.view[0].line),n=r.view[0].node):(t=Ze(r.view[e].line),n=r.view[e-1].node.nextSibling);var l,u,c=fi(i,s.line);if(c==r.view.length-1?(l=r.viewTo-1,u=r.lineDiv.lastChild):(l=Ze(r.view[c+1].line)-1,u=r.view[c+1].node.previousSibling),!n)return!1;for(var d=i.doc.splitLines(function(e,t,n,i,r){var o="",a=!1,s=e.doc.lineSeparator(),l=!1;function u(e){return function(t){return t.id==e}}function c(){a&&(o+=s,l&&(o+=s),a=l=!1)}function d(e){e&&(c(),o+=e)}function f(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void d(n);var o,h=t.getAttribute("cm-marker");if(h){var p=e.findMarks(nt(i,0),nt(r+1,0),u(+h));return void(p.length&&(o=p[0].find(0))&&d(Ke(e.doc,o.from,o.to).join(s)))}if("false"==t.getAttribute("contenteditable"))return;var m=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;m&&c();for(var g=0;g<t.childNodes.length;g++)f(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),m&&(a=!0)}else 3==t.nodeType&&d(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;f(t),t!=n;)t=t.nextSibling,l=!1;return o}(i,n,u,t,l)),f=Ke(i.doc,nt(t,0),nt(l,Ye(i.doc,l).text.length));d.length>1&&f.length>1;)if(G(d)==G(f))d.pop(),f.pop(),l--;else{if(d[0]!=f[0])break;d.shift(),f.shift(),t++}for(var h=0,p=0,m=d[0],g=f[0],v=Math.min(m.length,g.length);h<v&&m.charCodeAt(h)==g.charCodeAt(h);)++h;for(var y=G(d),b=G(f),w=Math.min(y.length-(1==d.length?h:0),b.length-(1==f.length?h:0));p<w&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==d.length&&1==f.length&&t==a.line)for(;h&&h>a.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)h--,p++;d[d.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),d[0]=d[0].slice(h).replace(/\u200b+$/,"");var x=nt(t,h),C=nt(l,f.length?G(f).length-p:0);return d.length>1||d[0]||it(x,C)?(vo(i.doc,d,x,C,"+input"),!0):void 0},ja.prototype.ensurePolled=function(){this.forceCompositionEnd()},ja.prototype.reset=function(){this.forceCompositionEnd()},ja.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ja.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},ja.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||tr(this.cm,(function(){return hi(e.cm)}))},ja.prototype.setUneditable=function(e){e.contentEditable="false"},ja.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||nr(this.cm,Oa)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},ja.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},ja.prototype.onContextMenu=function(){},ja.prototype.resetPosition=function(){},ja.prototype.needsContentAttribute=!0;var Xa=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new H,this.hasSelection=!1,this.composing=null};Xa.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var r=this.textarea;function o(e){if(!ve(i,e)){if(i.somethingSelected())La({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var t=Ba(i);La({lineWise:!0,text:t.text}),"cut"==e.type?i.setSelections(t.ranges,null,V):(n.prevInput="",r.value=t.text.join("\n"),R(r))}"cut"==e.type&&(i.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),g&&(r.style.width="0px"),he(r,"input",(function(){s&&l>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()})),he(r,"paste",(function(e){ve(i,e)||Ia(e,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())})),he(r,"cut",o),he(r,"copy",o),he(e.scroller,"paste",(function(t){if(!_n(e,t)&&!ve(i,t)){if(!r.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=t.clipboardData,r.dispatchEvent(o)}})),he(e.lineSpace,"selectstart",(function(t){_n(e,t)||xe(t)})),he(r,"compositionstart",(function(){var e=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}})),he(r,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},Xa.prototype.createField=function(e){this.wrapper=Fa(),this.textarea=this.wrapper.firstChild},Xa.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=bi(e);if(e.options.moveInputWithCursor){var r=Kn(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+a.top-o.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+a.left-o.left))}return i},Xa.prototype.showSelection=function(e){var t=this.cm.display;E(t.cursorDiv,e.cursors),E(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Xa.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&R(this.textarea),s&&l>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",s&&l>=9&&(this.hasSelection=null))}},Xa.prototype.getField=function(){return this.textarea},Xa.prototype.supportsTouch=function(){return!1},Xa.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!y||L()!=this.textarea))try{this.textarea.focus()}catch(e){}},Xa.prototype.blur=function(){this.textarea.blur()},Xa.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Xa.prototype.receivedFocus=function(){this.slowPoll()},Xa.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},Xa.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,(function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}))},Xa.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||Oe(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var r=n.value;if(r==i&&!t.somethingSelected())return!1;if(s&&l>=9&&this.hasSelection===r||b&&/[\uf700-\uf7ff]/.test(r))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i=""),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var a=0,u=Math.min(i.length,r.length);a<u&&i.charCodeAt(a)==r.charCodeAt(a);)++a;return tr(t,(function(){Oa(t,r.slice(a),i.length-a,null,e.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=r,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Xa.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Xa.prototype.onKeyPress=function(){s&&l>=9&&(this.hasSelection=null),this.fastPoll()},Xa.prototype.onContextMenu=function(e){var t=this,n=t.cm,i=n.display,r=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=di(n,e),a=i.scroller.scrollTop;if(o&&!f){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&nr(n,to)(n.doc,Dr(o),V);var c,d=r.style.cssText,h=t.wrapper.style.cssText,p=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-p.top-5)+"px; left: "+(e.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",u&&(c=window.scrollY),i.input.focus(),u&&window.scrollTo(null,c),i.input.reset(),n.somethingSelected()||(r.value=t.prevInput=" "),t.contextMenuPending=g,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),s&&l>=9&&m(),_){_e(e);he(window,"mouseup",(function e(){me(window,"mouseup",e),setTimeout(g,20)}))}else setTimeout(g,50)}function m(){if(null!=r.selectionStart){var e=n.somethingSelected(),o=""+(e?r.value:"");r.value="",r.value=o,t.prevInput=e?"":"",r.selectionStart=1,r.selectionEnd=o.length,i.selForContextMenu=n.doc.sel}}function g(){if(t.contextMenuPending==g&&(t.contextMenuPending=!1,t.wrapper.style.cssText=h,r.style.cssText=d,s&&l<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=a),null!=r.selectionStart)){(!s||s&&l<9)&&m();var e=0;i.detectingSelectAll=setTimeout((function o(){i.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&""==t.prevInput?nr(n,uo)(n):e++<10?i.detectingSelectAll=setTimeout(o,500):(i.selForContextMenu=null,i.input.reset())}),200)}}},Xa.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Xa.prototype.setUneditable=function(){},Xa.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,i,r,o){e.defaults[n]=i,r&&(t[n]=o?function(e,t,n){n!=_a&&r(e,t,n)}:r)}e.defineOption=n,e.Init=_a,n("value","",(function(e,t){return e.setValue(t)}),!0),n("mode",null,(function(e,t){e.doc.modeOption=t,Pr(e)}),!0),n("indentUnit",2,Pr,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(e){Lr(e),jn(e),hi(e)}),!0),n("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],i=e.doc.first;e.doc.iter((function(e){for(var r=0;;){var o=e.text.indexOf(t,r);if(-1==o)break;r=o+t.length,n.push(nt(i,o))}i++}));for(var r=n.length-1;r>=0;r--)vo(e.doc,t,n[r],nt(n[r].line,n[r].ch+t.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=_a&&e.refresh()})),n("specialCharPlaceholder",en,(function(e){return e.refresh()}),!0),n("electricChars",!0),n("inputStyle",y?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),n("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),n("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),n("rtlMoveVisually",!x),n("wholeLineUpdateBefore",!0),n("theme","default",(function(e){ka(e),vr(e)}),!0),n("keyMap","default",(function(e,t,n){var i=Zo(t),r=n!=_a&&Zo(n);r&&r.detach&&r.detach(e,i),i.attach&&i.attach(e,r||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Ma,!0),n("gutters",[],(function(e,t){e.display.gutterSpecs=mr(t,e.options.lineNumbers),vr(e)}),!0),n("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?li(e.display)+"px":"0",e.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(e){return Ui(e)}),!0),n("scrollbarStyle","native",(function(e){qi(e),Ui(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=mr(e.options.gutters,t),vr(e)}),!0),n("firstLineNumber",1,vr,!0),n("lineNumberFormatter",(function(e){return e}),vr,!0),n("showCursorWhenSelecting",!1,yi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(e,t){"nocursor"==t&&(Di(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),n("dragDrop",!0,Da),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,yi,!0),n("singleCursorHeightPerLine",!0,yi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Lr,!0),n("addModeClass",!1,Lr,!0),n("pollInterval",100),n("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),n("historyEventDelay",1250),n("viewportMargin",10,(function(e){return e.refresh()}),!0),n("maxHighlightLength",1e4,Lr,!0),n("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),n("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),n("autofocus",null),n("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),n("phrases",null)}(Ea),function(e){var t=e.optionHandlers,i=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var i=this.options,r=i[e];i[e]==n&&"mode"!=e||(i[e]=n,t.hasOwnProperty(e)&&nr(this,t[e])(this,n,r),ge(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Zo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:ir((function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var i=0,r=n(t);i<e.length&&n(e[i])<=r;)i++;e.splice(i,0,t)}(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(e){return e.priority})),this.state.modeGen++,hi(this)})),removeOverlay:ir((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void hi(this)}})),indentLine:ir((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),et(this.doc,e)&&Aa(this,e,t,n)})),indentSelection:ir((function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var r=t[i];if(r.empty())r.head.line>n&&(Aa(this,r.head.line,e,!0),n=r.head.line,i==this.doc.sel.primIndex&&Li(this));else{var o=r.from(),a=r.to(),s=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=s;l<n;++l)Aa(this,l,e);var u=this.doc.sel.ranges;0==o.ch&&t.length==u.length&&u[i].from().ch>0&&Zr(this.doc,i,new Sr(o,u[i].to()),V)}}})),getTokenAt:function(e,t){return wt(this,e,t)},getLineTokens:function(e,t){return wt(this,nt(e),t,!0)},getTokenTypeAt:function(e){e=ut(this.doc,e);var t,n=pt(this,Ye(this.doc,e.line)),i=0,r=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=i+r>>1;if((a?n[2*a-1]:0)>=o)r=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}i=a+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!i.hasOwnProperty(t))return n;var r=i[t],o=this.getModeAt(e);if("string"==typeof o[t])r[o[t]]&&n.push(r[o[t]]);else if(o[t])for(var a=0;a<o[t].length;a++){var s=r[o[t][a]];s&&n.push(s)}else o.helperType&&r[o.helperType]?n.push(r[o.helperType]):r[o.name]&&n.push(r[o.name]);for(var l=0;l<r._global.length;l++){var u=r._global[l];u.pred(o,this)&&-1==W(n,u.val)&&n.push(u.val)}return n},getStateAfter:function(e,t){var n=this.doc;return mt(this,(e=lt(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var i=this.doc.sel.primary();return Kn(this,null==e?i.head:"object"==n(e)?ut(this.doc,e):e?i.from():i.to(),t||"page")},charCoords:function(e,t){return Yn(this,ut(this.doc,e),t||"page")},coordsChar:function(e,t){return Zn(this,(e=Xn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Xn(this,{top:e,left:0},t||"page").top,Qe(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var i,r=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,r=!0),i=Ye(this.doc,e)}else i=e;return qn(this,i,{top:0,left:0},t||"page",n||r).top+(r?this.doc.height-$t(i):0)},defaultTextHeight:function(){return oi(this.display)},defaultCharWidth:function(){return ai(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var o,a,s,l=this.display,u=(e=Kn(this,ut(this.doc,e))).bottom,c=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),l.sizer.appendChild(t),"over"==i)u=e.top;else if("above"==i||"near"==i){var d=Math.max(l.wrapper.clientHeight,this.doc.height),f=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>d)&&e.top>t.offsetHeight?u=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=d&&(u=e.bottom),c+t.offsetWidth>f&&(c=f-t.offsetWidth)}t.style.top=u+"px",t.style.left=t.style.right="","right"==r?(c=l.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?c=0:"middle"==r&&(c=(l.sizer.clientWidth-t.offsetWidth)/2),t.style.left=c+"px"),n&&(o=this,a={left:c,top:u,right:c+t.offsetWidth,bottom:u+t.offsetHeight},null!=(s=Ai(o,a)).scrollTop&&Bi(o,s.scrollTop),null!=s.scrollLeft&&Fi(o,s.scrollLeft))},triggerOnKeyDown:ir(fa),triggerOnKeyPress:ir(pa),triggerOnKeyUp:ha,triggerOnMouseDown:ir(ya),execCommand:function(e){if(ia.hasOwnProperty(e))return ia[e].call(null,this)},triggerElectric:ir((function(e){Ra(this,e)})),findPosH:function(e,t,n,i){var r=1;t<0&&(r=-1,t=-t);for(var o=ut(this.doc,e),a=0;a<t&&!(o=Ha(this.doc,o,r,n,i)).hitSide;++a);return o},moveH:ir((function(e,t){var n=this;this.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?Ha(n.doc,i.head,e,t,n.options.rtlMoveVisually):e<0?i.from():i.to()}),q)})),deleteH:ir((function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Qo(this,(function(n){var r=Ha(i,n.head,e,t,!1);return e<0?{from:r,to:n.head}:{from:n.head,to:r}}))})),findPosV:function(e,t,n,i){var r=1,o=i;t<0&&(r=-1,t=-t);for(var a=ut(this.doc,e),s=0;s<t;++s){var l=Kn(this,a,"div");if(null==o?o=l.left:l.left=o,(a=Wa(this,l,r,n)).hitSide)break}return a},moveV:ir((function(e,t){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(a){if(o)return e<0?a.from():a.to();var s=Kn(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),r.push(s.left);var l=Wa(n,s,e,t);return"page"==t&&a==i.sel.primary()&&Pi(n,Yn(n,l,"div").top-s.top),l}),q),r.length)for(var a=0;a<i.sel.ranges.length;a++)i.sel.ranges[a].goalColumn=r[a]})),findWordAt:function(e){var t=Ye(this.doc,e.line).text,n=e.ch,i=e.ch;if(t){var r=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=t.length||!n?++i:--n;for(var o=t.charAt(n),a=ne(o,r)?function(e){return ne(e,r)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ne(e)};n>0&&a(t.charAt(n-1));)--n;for(;i<t.length&&a(t.charAt(i));)++i}return new Sr(nt(e.line,n),nt(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?O(this.display.cursorDiv,"CodeMirror-overwrite"):D(this.display.cursorDiv,"CodeMirror-overwrite"),ge(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==L()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ir((function(e,t){Oi(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Mn(this)-this.display.barHeight,width:e.scrollWidth-Mn(this)-this.display.barWidth,clientHeight:Nn(this),clientWidth:En(this)}},scrollIntoView:ir((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:nt(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Ii(e),e.curOp.scrollToPos=t}(this,e):Ri(this,e.from,e.to,e.margin)})),setSize:ir((function(e,t){var n=this,i=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&Wn(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){pi(n,r,"widget");break}++r})),this.curOp.forceUpdate=!0,ge(this,"refresh",this)})),operation:function(e){return tr(this,e)},startOperation:function(){return Yi(this)},endOperation:function(){return Ki(this)},refresh:ir((function(){var e=this.display.cachedTextHeight;hi(this),this.curOp.forceUpdate=!0,jn(this),Oi(this,this.doc.scrollLeft,this.doc.scrollTop),dr(this.display),(null==e||Math.abs(e-oi(this.display))>.5)&&ci(this),ge(this,"refresh",this)})),swapDoc:ir((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Br(this,e),jn(this),this.display.input.reset(),Oi(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,cn(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},we(e),e.registerHelper=function(t,n,r){i.hasOwnProperty(t)||(i[t]=e[t]={_global:[]}),i[t][n]=r},e.registerGlobalHelper=function(t,n,r,o){e.registerHelper(t,n,o),i[t]._global.push({pred:r,val:o})}}(Ea);var Ya="iter insert remove copy getEditor constructor".split(" ");for(var Ka in Lo.prototype)Lo.prototype.hasOwnProperty(Ka)&&W(Ya,Ka)<0&&(Ea.prototype[Ka]=function(e){return function(){return e.apply(this.doc,arguments)}}(Lo.prototype[Ka]));return we(Lo),Ea.inputStyles={textarea:Xa,contenteditable:ja},Ea.defineMode=function(e){Ea.defaults.mode||"null"==e||(Ea.defaults.mode=e),Fe.apply(this,arguments)},Ea.defineMIME=function(e,t){ze[e]=t},Ea.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),Ea.defineMIME("text/plain","null"),Ea.defineExtension=function(e,t){Ea.prototype[e]=t},Ea.defineDocExtension=function(e,t){Lo.prototype[e]=t},Ea.fromTextArea=function(e,t){if((t=t?z(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=L();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function i(){e.value=s.getValue()}var r;if(e.form&&(he(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var o=e.form;r=o.submit;try{var a=o.submit=function(){i(),o.submit=r,o.submit(),o.submit=a}}catch(e){}}t.finishInit=function(n){n.save=i,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,i(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display="",e.form&&(me(e.form,"submit",i),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=r))}},e.style.display="none";var s=Ea((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return s},function(e){e.off=me,e.on=he,e.wheelEventPixels=Cr,e.Doc=Lo,e.splitLines=Le,e.countColumn=F,e.findColumn=X,e.isWordChar=te,e.Pass=U,e.signal=ge,e.Line=Yt,e.changeEnd=Mr,e.scrollbarModel=$i,e.Pos=nt,e.cmpPos=it,e.modes=Be,e.mimeModes=ze,e.resolveMode=He,e.getMode=We,e.modeExtensions=je,e.extendMode=Ue,e.copyState=Ve,e.startState=qe,e.innerMode=$e,e.commands=ia,e.keyMap=$o,e.keyName=Jo,e.isModifierKey=Ko,e.lookupKey=Yo,e.normalizeKeyMap=Xo,e.StringStream=Xe,e.SharedTextMarker=Eo,e.TextMarker=Do,e.LineWidget=_o,e.e_preventDefault=xe,e.e_stopPropagation=Ce,e.e_stop=_e,e.addClass=O,e.contains=P,e.rmClass=D,e.keyNames=Wo}(Ea),Ea.version="5.49.2",Ea}(),function(){CodeMirror.defineOption("autoCloseTags",!1,(function(r,o,a){if(a!=CodeMirror.Init&&a&&r.removeKeyMap("autoCloseTags"),o){var s={name:"autoCloseTags"};("object"!=n(o)||o.whenClosing)&&(s["'/'"]=function(e){return function(e){var t=e.getCursor(),n=e.getTokenAt(t),i=CodeMirror.innerMode(e.getMode(),n.state),r=i.state;if("string"==n.type||"<"!=n.string.charAt(0)||n.start!=t.ch-1||"xml"!=i.mode.name||e.getOption("disableInput"))return CodeMirror.Pass;var o=r.context&&r.context.tagName;o&&e.replaceSelection("/"+o+">","end")}(e)}),("object"!=n(o)||o.whenOpening)&&(s["'>'"]=function(r){return function(r){var o=r.getCursor(),a=r.getTokenAt(o),s=CodeMirror.innerMode(r.getMode(),a.state),l=s.state;if("xml"!=s.mode.name||!l.tagName||r.getOption("disableInput"))return CodeMirror.Pass;var u=r.getOption("autoCloseTags"),c="html"==s.mode.configuration,d="object"==n(u)&&u.dontCloseTags||c&&e,f="object"==n(u)&&u.indentTags||c&&t,h=l.tagName;a.end>o.ch&&(h=h.slice(0,h.length-a.end+o.ch));var p=h.toLowerCase();if(!h||"string"==a.type&&(a.end!=o.ch||!/[\"\']/.test(a.string.charAt(a.string.length-1))||1==a.string.length)||"tag"==a.type&&"closeTag"==l.type||a.string.indexOf("/")==a.string.length-1||d&&i(d,p)>-1||CodeMirror.scanForClosingTag&&CodeMirror.scanForClosingTag(r,o,h,Math.min(r.lastLine()+1,o.line+50)))return CodeMirror.Pass;var m=f&&i(f,p)>-1,g=m?CodeMirror.Pos(o.line+1,0):CodeMirror.Pos(o.line,o.ch+1);r.replaceSelection(">"+(m?"\n\n":"")+"</"+h+">",{head:g,anchor:g}),m&&(r.indentLine(o.line+1,null,!0),r.indentLine(o.line+2,null))}(r)}),r.addKeyMap(s)}}));var e=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],t=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function i(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;++n)if(e[n]==t)return n;return-1}}(),function(){"use strict";var e={},t=/[^\s\u00a0]/,n=CodeMirror.Pos;function i(e){var n=e.search(t);return-1==n?0:n}CodeMirror.commands.toggleComment=function(e){var t=e.getCursor("start"),n=e.getCursor("end");e.uncomment(t,n)||e.lineComment(t,n)},CodeMirror.defineExtension("lineComment",(function(r,o,a){a||(a=e);var s=this,l=s.getModeAt(r),u=a.lineComment||l.lineComment;if(u){var c=s.getLine(r.line);if(null!=c){var d=Math.min(0!=o.ch||o.line==r.line?o.line+1:o.line,s.lastLine()+1),f=null==a.padding?" ":a.padding,h=a.commentBlankLines||r.line==o.line;s.operation((function(){if(a.indent)for(var e=c.slice(0,i(c)),o=r.line;o<d;++o){var l=s.getLine(o),p=e.length;(h||t.test(l))&&(l.slice(0,p)!=e&&(p=i(l)),s.replaceRange(e+u+f,n(o,0),n(o,p)))}else for(o=r.line;o<d;++o)(h||t.test(s.getLine(o)))&&s.replaceRange(u+f,n(o,0))}))}}else(a.blockCommentStart||l.blockCommentStart)&&(a.fullLines=!0,s.blockComment(r,o,a))})),CodeMirror.defineExtension("blockComment",(function(i,r,o){o||(o=e);var a=this,s=a.getModeAt(i),l=o.blockCommentStart||s.blockCommentStart,u=o.blockCommentEnd||s.blockCommentEnd;if(l&&u){var c=Math.min(r.line,a.lastLine());c!=i.line&&0==r.ch&&t.test(a.getLine(c))&&--c;var d=null==o.padding?" ":o.padding;i.line>c||a.operation((function(){if(0!=o.fullLines){var e=t.test(a.getLine(c));a.replaceRange(d+u,n(c)),a.replaceRange(l+d,n(i.line,0));var f=o.blockCommentLead||s.blockCommentLead;if(null!=f)for(var h=i.line+1;h<=c;++h)(h!=c||e)&&a.replaceRange(f+d,n(h,0))}else a.replaceRange(u,r),a.replaceRange(l,i)}))}else(o.lineComment||s.lineComment)&&0!=o.fullLines&&a.lineComment(i,r,o)})),CodeMirror.defineExtension("uncomment",(function(i,r,o){o||(o=e);var a,s=this,l=s.getModeAt(i),u=Math.min(r.line,s.lastLine()),c=Math.min(i.line,u),d=o.lineComment||l.lineComment,f=[],h=null==o.padding?" ":o.padding;e:if(d){for(var p=c;p<=u;++p){var m=s.getLine(p),g=m.indexOf(d);if(g>-1&&!/comment/.test(s.getTokenTypeAt(n(p,g+1)))&&(g=-1),-1==g&&(p!=u||p==c)&&t.test(m))break e;if(g>-1&&t.test(m.slice(0,g)))break e;f.push(m)}if(s.operation((function(){for(var e=c;e<=u;++e){var t=f[e-c],i=t.indexOf(d),r=i+d.length;i<0||(t.slice(r,r+h.length)==h&&(r+=h.length),a=!0,s.replaceRange("",n(e,i),n(e,r)))}})),a)return!0}var v=o.blockCommentStart||l.blockCommentStart,y=o.blockCommentEnd||l.blockCommentEnd;if(!v||!y)return!1;var b=o.blockCommentLead||l.blockCommentLead,w=s.getLine(c),x=u==c?w:s.getLine(u),C=w.indexOf(v),k=x.lastIndexOf(y);return-1==k&&c!=u&&(x=s.getLine(--u),k=x.lastIndexOf(y)),!(-1==C||-1==k||!/comment/.test(s.getTokenTypeAt(n(c,C+1)))||!/comment/.test(s.getTokenTypeAt(n(u,k+1))))&&(s.operation((function(){s.replaceRange("",n(u,k-(h&&x.slice(k-h.length,k)==h?h.length:0)),n(u,k+y.length));var e=C+v.length;if(h&&w.slice(e,e+h.length)==h&&(e+=h.length),s.replaceRange("",n(c,C),n(c,e)),b)for(var i=c+1;i<=u;++i){var r=s.getLine(i),o=r.indexOf(b);if(-1!=o&&!t.test(r.slice(0,o))){var a=o+b.length;h&&r.slice(a,a+h.length)==h&&(a+=h.length),s.replaceRange("",n(i,o),n(i,a))}}})),!0)}))}(),CodeMirror.defineMode("css",(function(e,t){"use strict";t.propertyKeywords||(t=CodeMirror.resolveMode("text/css"));var i,r,o=e.indentUnit,a=t.tokenHooks,s=t.mediaTypes||{},l=t.mediaFeatures||{},u=t.propertyKeywords||{},c=t.colorKeywords||{},d=t.valueKeywords||{},f=t.fontProperties||{},h=t.allowNested;function p(e,t){return i=t,e}function m(e,t){var n=e.next();if(a[n]){var i=a[n](e,t);if(!1!==i)return i}return"@"==n?(e.eatWhile(/[\w\\\-]/),p("def",e.current())):"="==n||("~"==n||"|"==n)&&e.eat("=")?p(null,"compare"):'"'==n||"'"==n?(t.tokenize=g(n),t.tokenize(e,t)):"#"==n?(e.eatWhile(/[\w\\\-]/),p("atom","hash")):"!"==n?(e.match(/^\s*\w*/),p("keyword","important")):/\d/.test(n)||"."==n&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),p("number","unit")):"-"!==n?/[,+>*\/]/.test(n)?p(null,"select-op"):"."==n&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?p("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?p(null,n):"u"==n&&e.match("rl(")?(e.backUp(1),t.tokenize=v,p("property","word")):/[\w\\\-]/.test(n)?(e.eatWhile(/[\w\\\-]/),p("property","word")):p(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),p("number","unit")):e.match(/^[^-]+-/)?p("meta","meta"):void 0}function g(e){return function(t,n){for(var i,r=!1;null!=(i=t.next());){if(i==e&&!r){")"==e&&t.backUp(1);break}r=!r&&"\\"==i}return(i==e||!r&&")"!=e)&&(n.tokenize=null),p("string","string")}}function v(e,t){return e.next(),e.match(/\s*[\"\']/,!1)?t.tokenize=null:t.tokenize=g(")"),p(null,"(")}function y(e,t,n){this.type=e,this.indent=t,this.prev=n}function b(e,t,n){return e.context=new y(n,t.indentation()+o,e.context),n}function w(e){return e.context=e.context.prev,e.context.type}function x(e,t,n){return _[n.context.type](e,t,n)}function C(e,t,n,i){for(var r=i||1;r>0;r--)n.context=n.context.prev;return x(e,t,n)}function k(e){var t=e.current().toLowerCase();r=d.hasOwnProperty(t)?"atom":c.hasOwnProperty(t)?"keyword":"variable"}var _={top:function(e,t,n){if("{"==e)return b(n,t,"block");if("}"==e&&n.context.prev)return w(n);if("@media"==e)return b(n,t,"media");if("@font-face"==e)return"font_face_before";if(e&&"@"==e.charAt(0))return b(n,t,"at");if("hash"==e)r="builtin";else if("word"==e)r="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return b(n,t,"interpolation");if(":"==e)return"pseudo";if(h&&"("==e)return b(n,t,"params")}return n.context.type},block:function(e,t,n){return"word"==e?u.hasOwnProperty(t.current().toLowerCase())?(r="property","maybeprop"):h?(r=t.match(/^\s*:/,!1)?"property":"tag","block"):(r+=" error","maybeprop"):"meta"==e?"block":h||"hash"!=e&&"qualifier"!=e?_.top(e,t,n):(r="error","block")},maybeprop:function(e,t,n){return":"==e?b(n,t,"prop"):x(e,t,n)},prop:function(e,t,n){if(";"==e)return w(n);if("{"==e&&h)return b(n,t,"propBlock");if("}"==e||"{"==e)return C(e,t,n);if("("==e)return b(n,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())){if("word"==e)k(t);else if("interpolation"==e)return b(n,t,"interpolation")}else r+=" error";return"prop"},propBlock:function(e,t,n){return"}"==e?w(n):"word"==e?(r="property","maybeprop"):n.context.type},parens:function(e,t,n){return"{"==e||"}"==e?C(e,t,n):")"==e?w(n):"parens"},pseudo:function(e,t,n){return"word"==e?(r="variable-3",n.context.type):x(e,t,n)},media:function(e,t,n){if("("==e)return b(n,t,"media_parens");if("}"==e)return C(e,t,n);if("{"==e)return w(n)&&b(n,t,h?"block":"top");if("word"==e){var i=t.current().toLowerCase();r="only"==i||"not"==i||"and"==i?"keyword":s.hasOwnProperty(i)?"attribute":l.hasOwnProperty(i)?"property":"error"}return n.context.type},media_parens:function(e,t,n){return")"==e?w(n):"{"==e||"}"==e?C(e,t,n,2):_.media(e,t,n)},font_face_before:function(e,t,n){return"{"==e?b(n,t,"font_face"):x(e,t,n)},font_face:function(e,t,n){return"}"==e?w(n):"word"==e?(r=f.hasOwnProperty(t.current().toLowerCase())?"property":"error","maybeprop"):"font_face"},at:function(e,t,n){return";"==e?w(n):"{"==e||"}"==e?C(e,t,n):("word"==e?r="tag":"hash"==e&&(r="builtin"),"at")},interpolation:function(e,t,n){return"}"==e?w(n):"{"==e||";"==e?C(e,t,n):("variable"!=e&&(r="error"),"interpolation")},params:function(e,t,n){return")"==e?w(n):"{"==e||"}"==e?C(e,t,n):("word"==e&&k(t),"params")}};return{startState:function(e){return{tokenize:null,state:"top",context:new y("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var o=(t.tokenize||m)(e,t);return o&&"object"==n(o)&&(i=o[1],o=o[0]),r=o,t.state=_[t.state](i,e,t),r},indent:function(e,t){var n=e.context,i=t&&t.charAt(0),r=n.indent;return!n.prev||("}"!=i||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"font_face"!=n.type)&&(")"!=i||"parens"!=n.type&&"params"!=n.type&&"media_parens"!=n.type)&&("{"!=i||"at"!=n.type&&"media"!=n.type)||(r=n.indent-o,n=n.prev),r},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}})),function(){function e(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=!0;return t}var t=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],n=e(t),i=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],r=e(i),o=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-inside","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","zoom","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-profile","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","kerning","text-anchor","writing-mode"],a=e(o),s=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],l=e(s),u=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],c=e(u),d=e(["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),f=t.concat(i).concat(o).concat(s).concat(u);function h(e,t){for(var n,i=!1;null!=(n=e.next());){if(i&&"/"==n){t.tokenize=null;break}i="*"==n}return["comment","comment"]}function p(e,t){return e.skipTo("--\x3e")?(e.match("--\x3e"),t.tokenize=null):e.skipToEnd(),["comment","comment"]}CodeMirror.registerHelper("hintWords","css",f),CodeMirror.defineMIME("text/css",{mediaTypes:n,mediaFeatures:r,propertyKeywords:a,colorKeywords:l,valueKeywords:c,fontProperties:d,tokenHooks:{"<":function(e,t){return!!e.match("!--")&&(t.tokenize=p,p(e,t))},"/":function(e,t){return!!e.eat("*")&&(t.tokenize=h,h(e,t))}},name:"css"}),CodeMirror.defineMIME("text/x-scss",{mediaTypes:n,mediaFeatures:r,propertyKeywords:a,colorKeywords:l,valueKeywords:c,fontProperties:d,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=h,h(e,t)):["operator","operator"]},":":function(e){return!!e.match(/\s*{/)&&[null,"{"]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),CodeMirror.defineMIME("text/x-less",{mediaTypes:n,mediaFeatures:r,propertyKeywords:a,colorKeywords:l,valueKeywords:c,fontProperties:d,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=h,h(e,t)):["operator","operator"]},"@":function(e){return!e.match(/^(charset|document|font-face|import|keyframes|media|namespace|page|supports)\b/,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}(),CodeMirror.defineMode("diff",(function(){var e={"+":"positive","-":"negative","@":"meta"};return{token:function(t){var n=t.string.search(/[\t ]+?$/);if(!t.sol()||0===n)return t.skipToEnd(),("error "+(e[t.string.charAt(0)]||"")).replace(/ $/,"");var i=e[t.peek()]||t.skipToEnd();return-1===n?t.skipToEnd():t.pos=n,i}}})),CodeMirror.defineMIME("text/x-diff","diff"),CodeMirror.defineMode("edx_markdown",(function(e,t){var n=CodeMirror.mimeModes.hasOwnProperty("text/html"),i=CodeMirror.getMode(e,n?"text/html":"text/plain"),r="header",o="comment",a="quote",s="string",l="hr",u="link",c="string",d="em",f="strong",h="emstrong",p=/^([*\-=_])(?:\s*\1){2,}\s*$/,m=/^[*\-+]\s+/,g=/^[0-9]+\.\s+/,v=/^(?:\={3,}|-{3,})$/,y=/^[^\[*_\\<>`]+/;function b(e,t,n){return t.f=t.inline=n,n(e,t)}function w(e){return e.em=!1,e.strong=!1,n||e.f!=C||(e.f=S,e.block=x),null}function x(e,t){var n;if(t.indentationDiff>=4)return t.indentation-=t.indentationDiff,e.skipToEnd(),o;if(e.eatSpace())return null;if("#"===e.peek()||e.match(v))t.header=!0;else if(e.eat(">"))t.indentation++,t.quote=!0;else{if("["===e.peek())return b(e,t,M);if(e.match(p,!0))return l;if(n=e.match(m,!0)||e.match(g,!0))return t.indentation+=n[0].length,s}return b(e,t,t.inline)}function C(e,t){var r=i.token(e,t.htmlState);return n&&"tag"===r&&"openTag"!==t.htmlState.type&&!t.htmlState.context&&(t.f=S,t.block=x),t.md_inside&&-1!=e.current().indexOf(">")&&(t.f=S,t.block=x,t.htmlState.context=void 0),r}function k(e){var t=[];return e.strong?t.push(e.em?h:f):e.em&&t.push(d),e.header&&t.push(r),e.quote&&t.push(a),t.length?t.join(" "):null}function _(e,t){if(e.match(y,!0))return k(t)}function S(e,t){var n=t.text(e,t);if(void 0!==n)return n;var i=e.next();if("\\"===i)return e.next(),k(t);if("`"===i)return b(e,t,A(o,"`"));if("["===i)return b(e,t,T);if("<"===i&&e.match(/^\w/,!1)){if(-1!=e.string.indexOf(">")){var r=e.string.substring(1,e.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(r)&&(t.md_inside=!0)}return e.backUp(1),function(e,t,n){return t.f=t.block=n,n(e,t)}(e,t,C)}if("<"===i&&e.match(/^\/\w*?>/))return t.md_inside=!1,"tag";var a=k(t);return"*"===i||"_"===i?e.eat(i)?(t.strong=!t.strong)?k(t):a:(t.em=!t.em)?k(t):a:k(t)}function T(e,t){for(;!e.eol();){var n=e.next();if("\\"===n&&e.next(),"]"===n)return t.inline=t.f=D,u}return u}function D(e,t){e.eatSpace();var n=e.next();return"("===n||"["===n?b(e,t,A(c,"("===n?")":"]")):"error"}function M(e,t){return e.match(/^[^\]]*\]:/,!0)?(t.f=E,u):b(e,t,S)}function E(e,t){return e.eatSpace(),e.match(/^[^\s]+/,!0),t.f=t.inline=S,c}function N(e){return N[e]||(N[e]=new RegExp("^(?:[^\\\\\\"+e+"]|\\\\.)*(?:\\"+e+"|$)")),N[e]}function A(e,t,n){return n=n||S,function(i,r){return i.match(N(t)),r.inline=r.f=n,e}}return{startState:function(){return{f:x,block:x,htmlState:CodeMirror.startState(i),indentation:0,inline:S,text:_,em:!1,strong:!1,header:!1,quote:!1}},copyState:function(e){return{f:e.f,block:e.block,htmlState:CodeMirror.copyState(i,e.htmlState),indentation:e.indentation,inline:e.inline,text:e.text,em:e.em,strong:e.strong,header:e.header,quote:e.quote,md_inside:e.md_inside}},token:function(e,t){if(e.sol()){if(e.match(/^\s*$/,!0))return w(t);t.header=!1,t.quote=!1,t.f=t.block;var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentationDiff=n-t.indentation,t.indentation=n,n>0)return null}return t.f(e,t)},blankLine:w,getType:k}}),"xml"),CodeMirror.defineMIME("text/x-markdown","markdown"),function(){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t){return/^[;{}]$/.test(t)}}),CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t,n,i){return this.jsonMode?/^[\[,{]$/.test(t)||/^}/.test(n):(";"!=t||!i.lexical||")"!=i.lexical.type)&&(/^[;{}]$/.test(t)&&!/^;/.test(n))}});var e=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;CodeMirror.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",newlineAfterToken:function(t,n,i,r){var o=!1;return"html"==this.configuration&&(o=!!r.context&&e.test(r.context.tagName)),!o&&("tag"==t&&/>$/.test(n)&&r.context||/^</.test(i))}}),CodeMirror.defineExtension("commentRange",(function(e,t,n){var i=this,r=CodeMirror.innerMode(i.getMode(),i.getTokenAt(t).state).mode;i.operation((function(){if(e)i.replaceRange(r.commentEnd,n),i.replaceRange(r.commentStart,t),t.line==n.line&&t.ch==n.ch&&i.setCursor(t.line,t.ch+r.commentStart.length);else{var o=i.getRange(t,n),a=o.indexOf(r.commentStart),s=o.lastIndexOf(r.commentEnd);a>-1&&s>-1&&s>a&&(o=o.substr(0,a)+o.substring(a+r.commentStart.length,s)+o.substr(s+r.commentEnd.length)),i.replaceRange(o,t,n)}}))})),CodeMirror.defineExtension("autoIndentRange",(function(e,t){var n=this;this.operation((function(){for(var i=e.line;i<=t.line;i++)n.indentLine(i,"smart")}))})),CodeMirror.defineExtension("autoFormatRange",(function(e,t){var n=this,i=n.getMode(),r=n.getRange(e,t).split("\n"),o=CodeMirror.copyState(i,n.getTokenAt(e).state),a=n.getOption("tabSize"),s="",l=0,u=0==e.ch;function c(){s+="\n",u=!0,++l}for(var d=0;d<r.length;++d){for(var f=new CodeMirror.StringStream(r[d],a);!f.eol();){var h=CodeMirror.innerMode(i,o),p=i.token(f,o),m=f.current();f.start=f.pos,u&&!/\S/.test(m)||(s+=m,u=!1),!u&&h.mode.newlineAfterToken&&h.mode.newlineAfterToken(p,m,f.string.slice(f.pos)||r[d+1]||"",h.state)&&c()}!f.pos&&i.blankLine&&i.blankLine(o),!u&&d<r.length-1&&c()}n.operation((function(){n.replaceRange(s,e,t);for(var i=e.line+1,r=e.line+l;i<=r;++i)n.indentLine(i,"smart");n.setSelection(e,n.getCursor(!1))}))}))}(),CodeMirror.defineMode("htmlembedded",(function(e,t){var n,i,r=t.scriptStartRegex||/^<%/i,o=t.scriptEndRegex||/^%>/i;function a(e,t){return e.match(r,!1)?(t.token=s,n.token(e,t.scriptState)):i.token(e,t.htmlState)}function s(e,t){return e.match(o,!1)?(t.token=a,i.token(e,t.htmlState)):n.token(e,t.scriptState)}return{startState:function(){return n=n||CodeMirror.getMode(e,t.scriptingModeSpec),i=i||CodeMirror.getMode(e,"htmlmixed"),{token:t.startOpen?s:a,htmlState:CodeMirror.startState(i),scriptState:CodeMirror.startState(n)}},token:function(e,t){return t.token(e,t)},indent:function(e,t){return e.token==a?i.indent(e.htmlState,t):n.indent?n.indent(e.scriptState,t):void 0},copyState:function(e){return{token:e.token,htmlState:CodeMirror.copyState(i,e.htmlState),scriptState:CodeMirror.copyState(n,e.scriptState)}},innerMode:function(e){return e.token==s?{state:e.scriptState,mode:n}:{state:e.htmlState,mode:i}}}}),"htmlmixed"),CodeMirror.defineMIME("application/x-ejs",{name:"htmlembedded",scriptingModeSpec:"javascript"}),CodeMirror.defineMIME("application/x-aspx",{name:"htmlembedded",scriptingModeSpec:"text/x-csharp"}),CodeMirror.defineMIME("application/x-jsp",{name:"htmlembedded",scriptingModeSpec:"text/x-java"}),CodeMirror.defineMIME("application/x-erb",{name:"htmlembedded",scriptingModeSpec:"ruby"}),CodeMirror.defineMode("htmlmixed",(function(e,t){var n=CodeMirror.getMode(e,{name:"xml",htmlMode:!0}),i=CodeMirror.getMode(e,"css"),r=[],o=t&&t.scriptTypes;if(r.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:CodeMirror.getMode(e,"javascript")}),o)for(var a=0;a<o.length;++a){var s=o[a];r.push({matches:s.matches,mode:s.mode&&CodeMirror.getMode(e,s.mode)})}function l(e,t){var o=t.htmlState.tagName,a=n.token(e,t.htmlState);if("script"==o&&/\btag\b/.test(a)&&">"==e.current()){var s=e.string.slice(Math.max(0,e.pos-100),e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);(s=s?s[1]:"")&&/[\"\']/.test(s.charAt(0))&&(s=s.slice(1,s.length-1));for(var l=0;l<r.length;++l){var u=r[l];if("string"==typeof u.matches?s==u.matches:u.matches.test(s)){u.mode&&(t.token=c,t.localMode=u.mode,t.localState=u.mode.startState&&u.mode.startState(n.indent(t.htmlState,"")));break}}}else"style"==o&&/\btag\b/.test(a)&&">"==e.current()&&(t.token=d,t.localMode=i,t.localState=i.startState(n.indent(t.htmlState,"")));return a}function u(e,t,n){var i=e.current(),r=i.search(t);return r>-1?e.backUp(i.length-r):i.match(/<\/?$/)&&(e.backUp(i.length),e.match(t,!1)||e.match(i)),n}function c(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=l,t.localState=t.localMode=null,l(e,t)):u(e,/<\/\s*script\s*>/,t.localMode.token(e,t.localState))}function d(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=l,t.localState=t.localMode=null,l(e,t)):u(e,/<\/\s*style\s*>/,i.token(e,t.localState))}return r.push({matches:/./,mode:CodeMirror.getMode(e,"text/plain")}),{startState:function(){return{token:l,localMode:null,localState:null,htmlState:n.startState()}},copyState:function(e){if(e.localState)var t=CodeMirror.copyState(e.localMode,e.localState);return{token:e.token,localMode:e.localMode,localState:t,htmlState:CodeMirror.copyState(n,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,t){return!e.localMode||/^\s*<\//.test(t)?n.indent(e.htmlState,t):e.localMode.indent?e.localMode.indent(e.localState,t):CodeMirror.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||n}}}}),"xml","javascript","css"),CodeMirror.defineMIME("text/html","htmlmixed"),CodeMirror.defineMode("javascript",(function(e,t){var n,i,r=e.indentUnit,o=t.statementIndent,a=t.json,s=t.typescript,l=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),r=e("operator"),o={type:"atom",style:"atom"},a={if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:i,break:i,continue:i,new:i,delete:i,throw:i,debugger:i,var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:r,typeof:r,instanceof:r,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:e("this"),module:e("module"),class:e("class"),super:e("atom"),yield:i,export:e("export"),import:e("import"),extends:i};if(s){var l={type:"variable",style:"variable-3"},u={interface:e("interface"),extends:e("extends"),constructor:e("constructor"),public:e("public"),private:e("private"),protected:e("protected"),static:e("static"),string:l,number:l,bool:l,any:l};for(var c in u)a[c]=u[c]}return a}(),u=/[+\-*&%=<>!?|~^]/;function c(e,t,r){return n=e,i=r,t}function d(e,t){var n=e.next();if('"'==n||"'"==n)return t.tokenize=(i=n,function(e,t){for(var n,r=!1;null!=(n=e.next())&&(n!=i||r);)r=!r&&"\\"==n;return r||(t.tokenize=d),c("string","string")}),t.tokenize(e,t);if("."==n&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return c("number","number");if("."==n&&e.match(".."))return c("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return c(n);if("="==n&&e.eat(">"))return c("=>","operator");if("0"==n&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),c("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),c("number","number");if("/"==n)return e.eat("*")?(t.tokenize=f,f(e,t)):e.eat("/")?(e.skipToEnd(),c("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(function(e){for(var t,n=!1,i=!1;null!=(t=e.next());){if(!n){if("/"==t&&!i)return;"["==t?i=!0:i&&"]"==t&&(i=!1)}n=!n&&"\\"==t}}(e),e.eatWhile(/[gimy]/),c("regexp","string-2")):(e.eatWhile(u),c("operator","operator",e.current()));if("`"==n)return t.tokenize=h,h(e,t);if("#"==n)return e.skipToEnd(),c("error","error");if(u.test(n))return e.eatWhile(u),c("operator","operator",e.current());e.eatWhile(/[\w\$_]/);var i,r=e.current(),o=l.propertyIsEnumerable(r)&&l[r];return o&&"."!=t.lastType?c(o.type,o.style,r):c("variable","variable",r)}function f(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=d;break}i="*"==n}return c("comment","comment")}function h(e,t){for(var n,i=!1;null!=(n=e.next());){if(!i&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=d;break}i=!i&&"\\"==n}return c("quasi","string-2",e.current())}var p="([{}])";function m(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){for(var i=0,r=!1,o=n-1;o>=0;--o){var a=e.string.charAt(o),s=p.indexOf(a);if(s>=0&&s<3){if(!i){++o;break}if(0==--i)break}else if(s>=3&&s<6)++i;else if(/[$\w]/.test(a))r=!0;else if(r&&!i){++o;break}}r&&!i&&(t.fatArrowAt=o)}}var g={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0};function v(e,t,n,i,r,o){this.indented=e,this.column=t,this.type=n,this.prev=r,this.info=o,null!=i&&(this.align=i)}function y(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var i=e.context;i;i=i.prev)for(n=i.vars;n;n=n.next)if(n.name==t)return!0}var b={state:null,column:null,marked:null,cc:null};function w(){for(var e=arguments.length-1;e>=0;e--)b.cc.push(arguments[e])}function x(){return w.apply(null,arguments),!0}function C(e){function n(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var i=b.state;if(i.context){if(b.marked="def",n(i.localVars))return;i.localVars={name:e,next:i.localVars}}else{if(n(i.globalVars))return;t.globalVars&&(i.globalVars={name:e,next:i.globalVars})}}var k={name:"this",next:{name:"arguments"}};function _(){b.state.context={prev:b.state.context,vars:b.state.localVars},b.state.localVars=k}function S(){b.state.localVars=b.state.context.vars,b.state.context=b.state.context.prev}function T(e,t){var n=function(){var n=b.state,i=n.indented;"stat"==n.lexical.type&&(i=n.lexical.indented),n.lexical=new v(i,b.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function D(){var e=b.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function M(e){return function(t){return t==e?x():";"==e?w():x(arguments.callee)}}function E(e,t){return"var"==e?x(T("vardef",t.length),G,M(";"),D):"keyword a"==e?x(T("form"),N,E,D):"keyword b"==e?x(T("form"),E,D):"{"==e?x(T("}"),X,D):";"==e?x():"if"==e?x(T("form"),N,E,D,te):"function"==e?x(se):"for"==e?x(T("form"),ne,E,D):"variable"==e?x(T("stat"),H):"switch"==e?x(T("form"),N,T("}","switch"),M("{"),X,D,D):"case"==e?x(N,M(":")):"default"==e?x(M(":")):"catch"==e?x(T("form"),_,M("("),le,M(")"),E,D,S):"module"==e?x(T("form"),_,fe,S,D):"class"==e?x(T("form"),ue,de,D):"export"==e?x(T("form"),he,D):"import"==e?x(T("form"),pe,D):w(T("stat"),N,M(";"),D)}function N(e){return P(e,!1)}function A(e){return P(e,!0)}function P(e,t){if(b.state.fatArrowAt==b.stream.start){var n=t?F:z;if("("==e)return x(_,T(")"),$(J,")"),D,M("=>"),n,S);if("variable"==e)return w(_,J,M("=>"),n,S)}var i=t?R:I;return g.hasOwnProperty(e)?x(i):"function"==e?x(se):"keyword c"==e?x(t?O:L):"("==e?x(T(")"),L,be,M(")"),D,i):"operator"==e||"spread"==e?x(t?A:N):"["==e?x(T("]"),ve,D,i):"{"==e?q(j,"}",null,i):x()}function L(e){return e.match(/[;\}\)\],]/)?w():w(N)}function O(e){return e.match(/[;\}\)\],]/)?w():w(A)}function I(e,t){return","==e?x(N):R(e,t,!1)}function R(e,t,n){var i=0==n?I:R,r=0==n?N:A;return"=>"==t?x(_,n?F:z,S):"operator"==e?/\+\+|--/.test(t)?x(i):"?"==t?x(N,M(":"),r):x(r):"quasi"==e?(b.cc.push(i),function(e){return"${"!=e.slice(e.length-2)?x():x(N,B)}(t)):";"!=e?"("==e?q(A,")","call",i):"."==e?x(W,i):"["==e?x(T("]"),L,M("]"),D,i):void 0:void 0}function B(e){if("}"==e)return b.marked="string-2",b.state.tokenize=h,x()}function z(e){return m(b.stream,b.state),w("{"==e?E:N)}function F(e){return m(b.stream,b.state),w("{"==e?E:A)}function H(e){return":"==e?x(D,E):w(I,M(";"),D)}function W(e){if("variable"==e)return b.marked="property",x()}function j(e,t){if("variable"==e){if(b.marked="property","get"==t||"set"==t)return x(U)}else if("number"==e||"string"==e)b.marked=e+" property";else if("["==e)return x(N,M("]"),V);if(g.hasOwnProperty(e))return x(V)}function U(e){return"variable"!=e?w(V):(b.marked="property",x(se))}function V(e){return":"==e?x(A):"("==e?w(se):void 0}function $(e,t){function n(i){if(","==i){var r=b.state.lexical;return"call"==r.info&&(r.pos=(r.pos||0)+1),x(e,n)}return i==t?x():x(M(t))}return function(i){return i==t?x():w(e,n)}}function q(e,t,n){for(var i=3;i<arguments.length;i++)b.cc.push(arguments[i]);return x(T(t,n),$(e,t),D)}function X(e){return"}"==e?x():w(E,X)}function Y(e){if(s&&":"==e)return x(K)}function K(e){if("variable"==e)return b.marked="variable-3",x()}function G(){return w(J,Y,Q,ee)}function J(e,t){return"variable"==e?(C(t),x()):"["==e?q(J,"]"):"{"==e?q(Z,"}"):void 0}function Z(e,t){return"variable"!=e||b.stream.match(/^\s*:/,!1)?("variable"==e&&(b.marked="property"),x(M(":"),J,Q)):(C(t),x(Q))}function Q(e,t){if("="==t)return x(A)}function ee(e){if(","==e)return x(G)}function te(e,t){if("keyword b"==e&&"else"==t)return x(T("form"),E,D)}function ne(e){if("("==e)return x(T(")"),ie,M(")"),D)}function ie(e){return"var"==e?x(G,M(";"),oe):";"==e?x(oe):"variable"==e?x(re):w(N,M(";"),oe)}function re(e,t){return"in"==t||"of"==t?(b.marked="keyword",x(N)):x(I,oe)}function oe(e,t){return";"==e?x(ae):"in"==t||"of"==t?(b.marked="keyword",x(N)):w(N,M(";"),ae)}function ae(e){")"!=e&&x(N)}function se(e,t){return"*"==t?(b.marked="keyword",x(se)):"variable"==e?(C(t),x(se)):"("==e?x(_,T(")"),$(le,")"),D,E,S):void 0}function le(e){return"spread"==e?x(le):w(J,Y)}function ue(e,t){if("variable"==e)return C(t),x(ce)}function ce(e,t){if("extends"==t)return x(N)}function de(e){if("{"==e)return q(j,"}")}function fe(e,t){return"string"==e?x(E):"variable"==e?(C(t),x(ge)):void 0}function he(e,t){return"*"==t?(b.marked="keyword",x(ge,M(";"))):"default"==t?(b.marked="keyword",x(N,M(";"))):w(E)}function pe(e){return"string"==e?x():w(me,ge)}function me(e,t){return"{"==e?q(me,"}"):("variable"==e&&C(t),x())}function ge(e,t){if("from"==t)return b.marked="keyword",x(N)}function ve(e){return"]"==e?x():w(A,ye)}function ye(e){return"for"==e?w(be,M("]")):","==e?x($(A,"]")):w($(A,"]"))}function be(e){return"for"==e?x(ne,be):"if"==e?x(N,be):void 0}return D.lex=!0,{startState:function(e){var n={tokenize:d,lastType:"sof",cc:[],lexical:new v((e||0)-r,0,"block",!1),localVars:t.localVars,context:t.localVars&&{vars:t.localVars},indented:0};return t.globalVars&&(n.globalVars=t.globalVars),n},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),m(e,t)),t.tokenize!=f&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==n?r:(t.lastType="operator"!=n||"++"!=i&&"--"!=i?n:"incdec",function(e,t,n,i,r){var o=e.cc;for(b.state=e,b.stream=r,b.marked=null,b.cc=o,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((o.length?o.pop():a?N:E)(n,i)){for(;o.length&&o[o.length-1].lex;)o.pop()();return b.marked?b.marked:"variable"==n&&y(e,i)?"variable-2":t}}(t,r,n,i,e))},indent:function(e,n){if(e.tokenize==f)return CodeMirror.Pass;if(e.tokenize!=d)return 0;for(var i=n&&n.charAt(0),a=e.lexical,s=e.cc.length-1;s>=0;--s){var l=e.cc[s];if(l==D)a=a.prev;else if(l!=te)break}"stat"==a.type&&"}"==i&&(a=a.prev),o&&")"==a.type&&"stat"==a.prev.type&&(a=a.prev);var u=a.type,c=i==u;return"vardef"==u?a.indented+("operator"==e.lastType||","==e.lastType?a.info+1:0):"form"==u&&"{"==i?a.indented:"form"==u?a.indented+r:"stat"==u?a.indented+("operator"==e.lastType||","==e.lastType?o||r:0):"switch"!=a.info||c||0==t.doubleIndentSwitch?a.align?a.column+(c?0:1):a.indented+(c?0:r):a.indented+(/^(?:case|default)\b/.test(n)?r:2*r)},electricChars:":{}",blockCommentStart:a?null:"/*",blockCommentEnd:a?null:"*/",lineComment:a?null:"//",fold:"brace",helperType:a?"json":"javascript",jsonMode:a}})),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("application/x-json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0}),function(){function e(e){"object"==n(e)&&(this.minChars=e.minChars,this.style=e.style,this.showToken=e.showToken,this.delay=e.delay),null==this.style&&(this.style="matchhighlight"),null==this.minChars&&(this.minChars=2),null==this.delay&&(this.delay=100),this.overlay=this.timeout=null}function t(e){var t=e.state.matchHighlighter;clearTimeout(t.timeout),t.timeout=setTimeout((function(){i(e)}),t.delay)}function i(e){e.operation((function(){var t=e.state.matchHighlighter;if(t.overlay&&(e.removeOverlay(t.overlay),t.overlay=null),e.somethingSelected()||!t.showToken){if(e.getCursor("head").line==e.getCursor("anchor").line){var n=e.getSelection().replace(/^\s+|\s+$/g,"");n.length>=t.minChars&&e.addOverlay(t.overlay=r(n,!1,t.style))}}else{for(var i=!0===t.showToken?/[\w$]/:t.showToken,o=e.getCursor(),a=e.getLine(o.line),s=o.ch,l=s;s&&i.test(a.charAt(s-1));)--s;for(;l<a.length&&i.test(a.charAt(l));)++l;s<l&&e.addOverlay(t.overlay=r(a.slice(s,l),i,t.style))}}))}function r(e,t,n){return{token:function(i){if(i.match(e)&&(!t||function(e,t){return!(e.start&&t.test(e.string.charAt(e.start-1))||e.pos!=e.string.length&&t.test(e.string.charAt(e.pos)))}(i,t)))return n;i.next(),i.skipTo(e.charAt(0))||i.skipToEnd()}}}CodeMirror.defineOption("highlightSelectionMatches",!1,(function(n,r,o){if(o&&o!=CodeMirror.Init){var a=n.state.matchHighlighter.overlay;a&&n.removeOverlay(a),clearTimeout(n.state.matchHighlighter.timeout),n.state.matchHighlighter=null,n.off("cursorActivity",t)}r&&(n.state.matchHighlighter=new e(r),i(n),n.on("cursorActivity",t))}))}(),CodeMirror.defineMode("python",(function(e,t){var n="error";function i(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}var r=t.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),o=t.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),a=t.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),s=t.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),l=t.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),u=t.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),c=t.hangingIndent||t.indentUnit,d=i(["and","or","not","is","in"]),f=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"],h=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],p=["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],m=["exec","print"],g=["ascii","bytes","exec","print"],v=["nonlocal","False","True","None"];if(null!=t.extra_keywords&&(f=f.concat(t.extra_keywords)),null!=t.extra_builtins&&(h=h.concat(t.extra_builtins)),t.version&&3===parseInt(t.version,10)){f=f.concat(v),h=h.concat(g);var y=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{f=f.concat(m),h=h.concat(p);y=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var b=i(f),w=i(h),x=null;function C(e,i){if(e.sol()){var c=i.scopes[0].offset;if(e.eatSpace()){var f=e.indentation();return f>c?x="indent":f<c&&(x="dedent"),null}c>0&&_(e,i)}if(e.eatSpace())return null;if("#"===e.peek())return e.skipToEnd(),"comment";if(e.match(/^[0-9\.]/,!1)){var h=!1;if(e.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(h=!0),e.match(/^\d+\.\d*/)&&(h=!0),e.match(/^\.\d+/)&&(h=!0),h)return e.eat(/J/i),"number";var p=!1;if(e.match(/^0x[0-9a-f]+/i)&&(p=!0),e.match(/^0b[01]+/i)&&(p=!0),e.match(/^0o[0-7]+/i)&&(p=!0),e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(e.eat(/J/i),p=!0),e.match(/^0(?![\dx])/i)&&(p=!0),p)return e.eat(/L/i),"number"}return e.match(y)?(i.tokenize=function(e){for(;"rub".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var i=1==e.length,r="string";function o(o,a){for(;!o.eol();)if(o.eatWhile(/[^'"\\]/),o.eat("\\")){if(o.next(),i&&o.eol())return r}else{if(o.match(e))return a.tokenize=C,r;o.eat(/['"]/)}if(i){if(t.singleLineStringErrors)return n;a.tokenize=C}return r}return o.isString=!0,o}(e.current()),i.tokenize(e,i)):e.match(l)||e.match(s)?null:e.match(a)||e.match(r)||e.match(d)?"operator":e.match(o)?null:e.match(b)?"keyword":e.match(w)?"builtin":e.match(u)?"def"==i.lastToken||"class"==i.lastToken?"def":"variable":(e.next(),n)}function k(t,n,i){var r=0;if("py"===(i=i||"py")){if("py"!==n.scopes[0].type)return void(n.scopes[0].offset=t.indentation());for(var o=0;o<n.scopes.length;++o)if("py"===n.scopes[o].type){r=n.scopes[o].offset+e.indentUnit;break}}else r=t.match(/\s*($|#)/,!1)?t.indentation()+c:t.column()+t.current().length;n.scopes.unshift({offset:r,type:i})}function _(e,t,n){if(n=n||"py",1!=t.scopes.length){if("py"===t.scopes[0].type){for(var i=e.indentation(),r=-1,o=0;o<t.scopes.length;++o)if(i===t.scopes[o].offset){r=o;break}if(-1===r)return!0;for(;t.scopes[0].offset!==i;)t.scopes.shift();return!1}return"py"===n?(t.scopes[0].offset=e.indentation(),!1):t.scopes[0].type!=n||(t.scopes.shift(),!1)}}return{startState:function(e){return{tokenize:C,scopes:[{offset:e||0,type:"py"}],lastStyle:null,lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var i=function(e,t){x=null;var i=t.tokenize(e,t),r=e.current();if("."===r)return null===(i=e.match(u,!1)?null:n)&&"meta"===t.lastStyle&&(i="meta"),i;if("@"===r)return e.match(u,!1)?"meta":n;"variable"!==i&&"builtin"!==i||"meta"!==t.lastStyle||(i="meta"),"pass"!==r&&"return"!==r||(t.dedent+=1),"lambda"===r&&(t.lambda=!0),(":"===r&&!t.lambda&&"py"==t.scopes[0].type||"indent"===x)&&k(e,t);var o="[({".indexOf(r);return-1!==o&&k(e,t,"])}".slice(o,o+1)),"dedent"===x&&_(e,t)||-1!==(o="])}".indexOf(r))&&_(e,t,r)?n:(t.dedent>0&&e.eol()&&"py"==t.scopes[0].type&&(t.scopes.length>1&&t.scopes.shift(),t.dedent-=1),i)}(e,t);t.lastStyle=i;var r=e.current();return r&&i&&(t.lastToken=r),e.eol()&&t.lambda&&(t.lambda=!1),i},indent:function(e){return e.tokenize!=C?e.tokenize.isString?CodeMirror.Pass:0:e.scopes[0].offset},lineComment:"#",fold:"indent"}})),CodeMirror.defineMIME("text/x-python","python"),function(){"use strict";var e;CodeMirror.defineMIME("text/x-cython",{name:"python",extra_keywords:(e="by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE",e.split(" "))})}(),function(){var e=CodeMirror.Pos;function t(t,i,r,o){if(this.atOccurrence=!1,this.doc=t,null==o&&"string"==typeof i&&(o=!1),r=r?t.clipPos(r):e(0,0),this.pos={from:r,to:r},"string"!=typeof i)i.global||(i=new RegExp(i.source,i.ignoreCase?"ig":"g")),this.matches=function(n,r){if(n){i.lastIndex=0;for(var o=t.getLine(r.line).slice(0,r.ch),a=0;;){i.lastIndex=a;var s=i.exec(o);if(!s)break;if(u=(l=s).index,(a=l.index+(l[0].length||1))==o.length)break}(c=l&&l[0].length||0)||(0==u&&0==o.length?l=void 0:u!=t.getLine(r.line).length&&c++)}else{i.lastIndex=r.ch;o=t.getLine(r.line);var l,u,c=(l=i.exec(o))&&l[0].length||0;(u=l&&l.index)+c==o.length||c||(c=1)}if(l&&c)return{from:e(r.line,u),to:e(r.line,u+c),match:l}};else{var a=i;o&&(i=i.toLowerCase());var s=o?function(e){return e.toLowerCase()}:function(e){return e},l=i.split("\n");if(1==l.length)i.length?this.matches=function(r,o){if(r){var l=t.getLine(o.line).slice(0,o.ch);if((c=(u=s(l)).lastIndexOf(i))>-1)return c=n(l,u,c),{from:e(o.line,c),to:e(o.line,c+a.length)}}else{var u,c;l=t.getLine(o.line).slice(o.ch);if((c=(u=s(l)).indexOf(i))>-1)return c=n(l,u,c)+o.ch,{from:e(o.line,c),to:e(o.line,c+a.length)}}}:this.matches=function(){};else{var u=a.split("\n");this.matches=function(n,i){var r=l.length-1;if(n){if(i.line-(l.length-1)<t.firstLine())return;if(s(t.getLine(i.line).slice(0,u[r].length))!=l[l.length-1])return;for(var o=e(i.line,u[r].length),a=i.line-1,c=r-1;c>=1;--c,--a)if(l[c]!=s(t.getLine(a)))return;var d=(f=t.getLine(a)).length-u[0].length;if(s(f.slice(d))!=l[0])return;return{from:e(a,d),to:o}}if(!(i.line+(l.length-1)>t.lastLine())){var f;d=(f=t.getLine(i.line)).length-u[0].length;if(s(f.slice(d))==l[0]){var h=e(i.line,d);for(a=i.line+1,c=1;c<r;++c,++a)if(l[c]!=s(t.getLine(a)))return;if(t.getLine(a).slice(0,u[r].length)==l[r])return{from:h,to:e(a,u[r].length)}}}}}}}function n(e,t,n){if(e.length==t.length)return n;for(var i=Math.min(n,e.length);;){var r=e.slice(0,i).toLowerCase().length;if(r<n)++i;else{if(!(r>n))return i;--i}}}t.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){var n=this,i=this.doc.clipPos(t?this.pos.from:this.pos.to);function r(t){var i=e(t,0);return n.pos={from:i,to:i},n.atOccurrence=!1,!1}for(;;){if(this.pos=this.matches(t,i))return this.atOccurrence=!0,this.pos.match||!0;if(t){if(!i.line)return r(0);i=e(i.line-1,this.doc.getLine(i.line-1).length)}else{var o=this.doc.lineCount();if(i.line==o-1)return r(o);i=e(i.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t){if(this.atOccurrence){var n=CodeMirror.splitLines(t);this.doc.replaceRange(n,this.pos.from,this.pos.to),this.pos.to=e(this.pos.from.line+n.length-1,n[n.length-1].length+(1==n.length?this.pos.from.ch:0))}}},CodeMirror.defineExtension("getSearchCursor",(function(e,n,i){return new t(this.doc,e,n,i)})),CodeMirror.defineDocExtension("getSearchCursor",(function(e,n,i){return new t(this,e,n,i)}))}(),function(){function e(){this.posFrom=this.posTo=this.query=null,this.overlay=null}function t(t){return t.state.search||(t.state.search=new e)}function n(e){return"string"==typeof e&&e==e.toLowerCase()}function i(e,t,i){return e.getSearchCursor(t,i,n(t))}function r(e,t,n,i,r){e.openDialog?e.openDialog(t,r,{value:i}):r(prompt(n,i))}function o(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);return t?new RegExp(t[1],-1==t[2].indexOf("i")?"":"i"):e}function a(e,i){var a=t(e);if(a.query)return s(e,i);r(e,'Search: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',"Search for:",e.getSelection(),(function(t){e.operation((function(){t&&!a.query&&(a.query=o(t),e.removeOverlay(a.overlay,n(a.query)),a.overlay=function(e,t){var n;return"string"==typeof e?(n=e.charAt(0),e=new RegExp("^"+e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"i":"")):e=new RegExp("^(?:"+e.source+")",e.ignoreCase?"i":""),"string"==typeof e?{token:function(t){if(t.match(e))return"searching";t.next(),t.skipTo(e.charAt(0))||t.skipToEnd()}}:{token:function(t){if(t.match(e))return"searching";for(;!t.eol()&&(t.next(),n&&(t.skipTo(n)||t.skipToEnd()),!t.match(e,!1)););}}}(a.query),e.addOverlay(a.overlay),a.posFrom=a.posTo=e.getCursor(),s(e,i))}))}))}function s(e,n){e.operation((function(){var r=t(e),o=i(e,r.query,n?r.posFrom:r.posTo);(o.find(n)||(o=i(e,r.query,n?CodeMirror.Pos(e.lastLine()):CodeMirror.Pos(e.firstLine(),0))).find(n))&&(e.setSelection(o.from(),o.to()),e.scrollIntoView({from:o.from(),to:o.to()}),r.posFrom=o.from(),r.posTo=o.to())}))}function l(e){e.operation((function(){var n=t(e);n.query&&(n.query=null,e.removeOverlay(n.overlay))}))}function u(e,t){r(e,'Replace: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',"Replace:",e.getSelection(),(function(n){n&&(n=o(n),r(e,'With: <input type="text" style="width: 10em"/>',"Replace with:","",(function(r){if(t)e.operation((function(){for(var t=i(e,n);t.findNext();)if("string"!=typeof n){var o=e.getRange(t.from(),t.to()).match(n);t.replace(r.replace(/\$(\d)/,(function(e,t){return o[t]})))}else t.replace(r)}));else{l(e);var o=i(e,n,e.getCursor()),a=function t(){var r,a=o.from();!(r=o.findNext())&&(o=i(e,n),!(r=o.findNext())||a&&o.from().line==a.line&&o.from().ch==a.ch)||(e.setSelection(o.from(),o.to()),e.scrollIntoView({from:o.from(),to:o.to()}),function(e,t,n,i){e.openConfirm?e.openConfirm(t,i):confirm(n)&&i[0]()}(e,"Replace? <button>Yes</button> <button>No</button> <button>Stop</button>","Replace?",[function(){s(r)},t]))},s=function(e){o.replace("string"==typeof n?r:r.replace(/\$(\d)/,(function(t,n){return e[n]}))),a()};a()}})))}))}CodeMirror.commands.find=function(e){l(e),a(e)},CodeMirror.commands.findNext=a,CodeMirror.commands.findPrev=function(e){a(e,!0)},CodeMirror.commands.clearSearch=l,CodeMirror.commands.replace=u,CodeMirror.commands.replaceAll=function(e){u(e,!0)}}(),CodeMirror.defineMode("xml",(function(e,t){var n,i,r,o=e.indentUnit,a=t.multilineTagIndentFactor||1,s=t.multilineTagIndentPastTag||!0,l=t.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},u=t.alignCDATA;function c(e,t){function r(n){return t.tokenize=n,n(e,t)}var o=e.next();if("<"==o){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?r(f("atom","]]>")):null:e.match("--")?r(f("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),r(h(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=f("meta","?>"),"meta";var a,s=e.eat("/");for(n="";a=e.eat(/[^\s\u00a0=<>\"\'\/?]/);)n+=a;return n?(i=s?"closeTag":"openTag",t.tokenize=d,"tag"):"tag error"}return"&"==o?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function d(e,t){var n,r,o=e.next();if(">"==o||"/"==o&&e.eat(">"))return t.tokenize=c,i=">"==o?"endTag":"selfcloseTag","tag";if("="==o)return i="equals",null;if("<"==o){t.tokenize=c,t.state=v,t.tagName=t.tagStart=null;var a=t.tokenize(e,t);return a?a+" error":"error"}return/[\'\"]/.test(o)?(t.tokenize=(n=o,r=function(e,t){for(;!e.eol();)if(e.next()==n){t.tokenize=d;break}return"string"},r.isInAttribute=!0,r),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function f(e,t){return function(n,i){for(;!n.eol();){if(n.match(t)){i.tokenize=c;break}n.next()}return e}}function h(e){return function(t,n){for(var i;null!=(i=t.next());){if("<"==i)return n.tokenize=h(e+1),n.tokenize(t,n);if(">"==i){if(1==e){n.tokenize=c;break}return n.tokenize=h(e-1),n.tokenize(t,n)}}return"meta"}}function p(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(l.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function m(e){e.context&&(e.context=e.context.prev)}function g(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName.toLowerCase(),!l.contextGrabbers.hasOwnProperty(n)||!l.contextGrabbers[n].hasOwnProperty(t))return;m(e)}}function v(e,t,i){if("openTag"==e)return i.tagName=n,i.tagStart=t.column(),w;if("closeTag"==e){var o=!1;return i.context?i.context.tagName!=n&&(l.implicitlyClosed.hasOwnProperty(i.context.tagName.toLowerCase())&&m(i),o=!i.context||i.context.tagName!=n):o=!0,o&&(r="error"),o?b:y}return v}function y(e,t,n){return"endTag"!=e?(r="error",y):(m(n),v)}function b(e,t,n){return r="error",y(e,0,n)}function w(e,t,n){if("word"==e)return r="attribute",x;if("endTag"==e||"selfcloseTag"==e){var i=n.tagName,o=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||l.autoSelfClosers.hasOwnProperty(i.toLowerCase())?g(n,i.toLowerCase()):(g(n,i.toLowerCase()),n.context=new p(n,i,o==n.indented)),v}return r="error",w}function x(e,t,n){return"equals"==e?C:(l.allowMissing||(r="error"),w(e,0,n))}function C(e,t,n){return"string"==e?k:"word"==e&&l.allowUnquoted?(r="string",w):(r="error",w(e,0,n))}function k(e,t,n){return"string"==e?k:w(e,0,n)}return{startState:function(){return{tokenize:c,state:v,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;n=i=null;var o=t.tokenize(e,t);return(o||i)&&"comment"!=o&&(r=null,t.state=t.state(i||o,e,t),r&&(o="error"==r?o+" error":r)),o},indent:function(e,t,n){var i=e.context;if(e.tokenize.isInAttribute)return e.stringStartCol+1;if(i&&i.noIndent)return CodeMirror.Pass;if(e.tokenize!=d&&e.tokenize!=c)return n?n.match(/^(\s*)/)[0].length:0;if(e.tagName)return s?e.tagStart+e.tagName.length+2:e.tagStart+o*a;if(u&&/<!\[CDATA\[/.test(t))return 0;for(i&&/^<\//.test(t)&&(i=i.prev);i&&!i.startOfLine;)i=i.prev;return i?i.indent+o:0},electricChars:"/",blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:t.htmlMode?"html":"xml",helperType:t.htmlMode?"html":"xml"}})),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0}),CodeMirror.defineMode("yaml",(function(){var e=new RegExp("\\b(("+["true","false","on","off","yes","no"].join(")|(")+"))$","i");return{token:function(t,n){var i=t.peek(),r=n.escaped;if(n.escaped=!1,"#"==i&&(0==t.pos||/\s/.test(t.string.charAt(t.pos-1))))return t.skipToEnd(),"comment";if(n.literal&&t.indentation()>n.keyCol)return t.skipToEnd(),"string";if(n.literal&&(n.literal=!1),t.sol()){if(n.keyCol=0,n.pair=!1,n.pairStart=!1,t.match(/---/))return"def";if(t.match(/\.\.\./))return"def";if(t.match(/\s*-\s+/))return"meta"}if(t.match(/^(\{|\}|\[|\])/))return"{"==i?n.inlinePairs++:"}"==i?n.inlinePairs--:"["==i?n.inlineList++:n.inlineList--,"meta";if(n.inlineList>0&&!r&&","==i)return t.next(),"meta";if(n.inlinePairs>0&&!r&&","==i)return n.keyCol=0,n.pair=!1,n.pairStart=!1,t.next(),"meta";if(n.pairStart){if(t.match(/^\s*(\||\>)\s*/))return n.literal=!0,"meta";if(t.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable-2";if(0==n.inlinePairs&&t.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(n.inlinePairs>0&&t.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(t.match(e))return"keyword"}return!n.pair&&t.match(/^\s*\S+(?=\s*:($|\s))/i)?(n.pair=!0,n.keyCol=t.indentation(),"atom"):n.pair&&t.match(/^:\s*/)?(n.pairStart=!0,"meta"):(n.pairStart=!1,n.escaped="\\"==i,t.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}}}})),CodeMirror.defineMIME("text/x-yaml","yaml"),function(){function e(e,t,n){var i;return(i=e.getWrapperElement().appendChild(document.createElement("div"))).className=n?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?i.innerHTML=t:i.appendChild(t),i}function t(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}CodeMirror.defineExtension("openDialog",(function(n,i,r){t(this,null);var o=e(this,n,r&&r.bottom),a=!1,s=this;function l(){a||(a=!0,o.parentNode.removeChild(o))}var u,c=o.getElementsByTagName("input")[0];return c?(r&&r.value&&(c.value=r.value),CodeMirror.on(c,"keydown",(function(e){r&&r.onKeyDown&&r.onKeyDown(e,c.value,l)||13!=e.keyCode&&27!=e.keyCode||(CodeMirror.e_stop(e),l(),s.focus(),13==e.keyCode&&i(c.value))})),r&&r.onKeyUp&&CodeMirror.on(c,"keyup",(function(e){r.onKeyUp(e,c.value,l)})),r&&r.value&&(c.value=r.value),c.focus(),CodeMirror.on(c,"blur",l)):(u=o.getElementsByTagName("button")[0])&&(CodeMirror.on(u,"click",(function(){l(),s.focus()})),u.focus(),CodeMirror.on(u,"blur",l)),l})),CodeMirror.defineExtension("openConfirm",(function(n,i,r){t(this,null);var o=e(this,n,r&&r.bottom),a=o.getElementsByTagName("button"),s=!1,l=this,u=1;function c(){s||(s=!0,o.parentNode.removeChild(o),l.focus())}a[0].focus();for(var d=0;d<a.length;++d){var f=a[d];!function(e){CodeMirror.on(f,"click",(function(t){CodeMirror.e_preventDefault(t),c(),e&&e(l)}))}(i[d]),CodeMirror.on(f,"blur",(function(){--u,setTimeout((function(){u<=0&&c()}),200)})),CodeMirror.on(f,"focus",(function(){++u}))}})),CodeMirror.defineExtension("openNotification",(function(n,i){t(this,l);var r,o=e(this,n,i&&i.bottom),a=i&&(void 0===i.duration?5e3:i.duration),s=!1;function l(){s||(s=!0,clearTimeout(r),o.parentNode.removeChild(o))}CodeMirror.on(o,"click",(function(e){CodeMirror.e_preventDefault(e),l()})),a&&(r=setTimeout(l,i.duration))}))}(),e.exports=window.CodeMirror},14930:(e,t,n)=>{var i=n(20428);n(38566);(function(){(function(){"use strict";this.XBlock.Runtime.v1=function(){function e(){var t=this;this.childMap=function(){return e.prototype.childMap.apply(t,arguments)},this.children=function(){return e.prototype.children.apply(t,arguments)}}return e.prototype.children=function(e){return i(e).prop("xblock_children")},e.prototype.childMap=function(e,t){var n,i,r,o;for(i=0,r=(o=this.children(e)).length;i<r;i++)if((n=o[i]).name===t)return n;return null},e.prototype.notify=function(){},e}()}).call(this)}).call(window),e.exports=window.XBlock},38566:(e,t,n)=>{var i=n(20428);(n(20428)||{}).immediateDescendents=n(73705),function(){(function(e,t){"use strict";var n;function i(t,n,i,r){var o;return o=(r=r||e(i).data("request-token"))?"."+t+'[data-request-token="'+r+'"]':"."+t,o+=":not(.xblock-initialized)",e(i).immediateDescendents(o).map((function(e,t){return n(t,r)})).toArray()}function r(n){var i=e(n).children(".xblock-json-init-args").remove().text();return i?t.parse(i):{}}function o(t,n){var i,r=e(t),o=function(t){var n=e(t),i=n.data("runtime-class"),r=n.data("runtime-version"),o=n.data("init");return i&&r&&o?new window[i]["v"+r]:((i||r||o)&&console.log("Block "+n.outerHTML+" is missing data-runtime, data-runtime-version or data-init, and can't be initialized"),null)}(t);return n.unshift(t),n.unshift(o),o?(i=function(){var e=window[r.data("init")];function t(){return e.apply(this,n)}return t.prototype=e.prototype,new t}()).runtime=o:i={},i.element=t,i.name=r.data("name"),i.type=r.data("block-type"),r.trigger("xblock-initialized"),r.data("initialized",!0),r.addClass("xblock-initialized"),i}n={Runtime:{},initializeBlock:function(t,i){var a,s,l=e(t);return i=i||l.data("request-token"),a=n.initializeXBlocks(l,i),(s=n.initializeXBlockAsides(l,i))&&(a=a.concat(s)),l.prop("xblock_children",a),o(t,[r(t)])},initializeAside:function(t){var n=e(t).data("block-id");return o(t,[e(t).siblings('[data-usage-id="'+n+'"]')[0],r(t)])},initializeXBlocks:function(e,t){return i("xblock",n.initializeBlock,e,t)},initializeXBlockAsides:function(e,t){return i("xblock_asides-v1",n.initializeAside,e,t)},initializeBlocks:function(e,t){var i=n.initializeXBlockAsides(e,t),r=n.initializeXBlocks(e,t);return i&&(r=r.concat(i)),r}},this.XBlock=n}).call(this,i,JSON)}.call(window),e.exports=window.XBlock},46041:(e,t,n)=>{var i=n(20428);(function(){(function(){"use strict";var e,t,n,r=(n={},e=function(e,t){return(i.ajaxWithPrefix?i.ajaxWithPrefix:i.ajax)(t=i.extend(!0,{url:"/event",type:"POST",data:e,async:!0},t))},t=function(e,t){return{}.hasOwnProperty.call(e,t)},{log:function(r,o,a,s){var l;return a||(a=null),t(n,r)&&t(n[r],a)&&(l=n[r][a],i.each(l,(function(e,t){try{t(r,o,a)}catch(e){console.error({eventType:r,data:o,element:a,error:e})}}))),e({event_type:r,event:JSON.stringify(o),courserun_key:"undefined"!=typeof $$course_id?$$course_id:null,page:window.location.href},s)},listen:function(e,t,i){n[e]=n[e]||{},n[e][t]=n[e][t]||[],n[e][t].push(i)},bind:function(){window.onunload=function(){e({event_type:"page_close",event:"",page:window.location.href},{type:"GET",async:!1})}}});this.Logger=r,this.log_event=r.log}).call(this)}).call(window)},92:function(e,t){(function(){!function(){var e,t,n,i=[],r="undefined"!=typeof global?global:window,o=r.jQuery,a=function(){return r.tinymce};o.fn.tinymce=function(e){var l,u,c,d=this,f="";if(!d.length)return d;if(!e)return a()?a().get(d[0].id):null;d.css("visibility","hidden");var h,p=function(){var t=[],i=0;n||(s(),n=!0),d.each((function(n,r){var o,s=r.id,l=e.oninit;s||(r.id=s=a().DOM.uniqueId()),a().get(s)||(o=a().createEditor(s,e),t.push(o),o.on("init",(function(){var e,n=l;d.css("visibility",""),l&&++i==t.length&&("string"==typeof n&&(e=-1===n.indexOf(".")?null:a().resolve(n.replace(/\.\w+$/,"")),n=a().resolve(n)),n.apply(e||a(),t))})))})),o.each(t,(function(e,t){t.render()}))};return r.tinymce||t||!(l=e.script_url)?1===t?i.push(p):p():(t=1,u=l.substring(0,l.lastIndexOf("/")),-1!=l.indexOf(".min")&&(f=".min"),r.tinymce=r.tinyMCEPreInit||{base:u,suffix:f},-1!=l.indexOf("gzip")&&(c=e.language||"en",l=l+(/\?/.test(l)?"&":"?")+"js=true&core=true&suffix="+escape(f)+"&themes="+escape(e.theme||"modern")+"&plugins="+escape(e.plugins||"")+"&languages="+(c||""),r.tinyMCE_GZ||(r.tinyMCE_GZ={start:function(){var t=function(e){a().ScriptLoader.markDone(a().baseURI.toAbsolute(e))};t("langs/"+c+".js"),t("themes/"+e.theme+"/theme"+f+".js"),t("themes/"+e.theme+"/langs/"+c+".js"),o.each(e.plugins.split(","),(function(e,n){n&&(t("plugins/"+n+"/plugin"+f+".js"),t("plugins/"+n+"/langs/"+c+".js"))}))},end:function(){}})),(h=document.createElement("script")).type="text/javascript",h.onload=h.onreadystatechange=function(n){n=n||window.event,2===t||"load"!=n.type&&!/complete|loaded/.test(h.readyState)||(a().dom.Event.domLoaded=1,t=2,e.script_loaded&&e.script_loaded(),p(),o.each(i,(function(e,t){t()})))},h.src=l,document.body.appendChild(h)),d},o.extend(o.expr[":"],{tinymce:function(e){var t;return!!(e.id&&"tinymce"in r&&(t=a().get(e.id))&&t.editorManager===a())}});var s=function(){var t=function(e){"remove"===e&&this.each((function(e,t){var n=i(t);n&&n.remove()})),this.find("span.mceEditor,div.mceEditor").each((function(e,t){var n=a().get(t.id.replace(/_parent$/,""));n&&n.remove()}))},n=function(e){var n,i=this;if(null!=e)t.call(i),i.each((function(t,n){var i;(i=a().get(n.id))&&i.setContent(e)}));else if(0<i.length&&(n=a().get(i[0].id)))return n.getContent()},i=function(e){var t=null;return e&&e.id&&r.tinymce&&(t=a().get(e.id)),t},s=function(e){return!!(e&&e.length&&r.tinymce&&e.is(":tinymce"))},l={};o.each(["text","html","val"],(function(t,r){var a=l[r]=o.fn[r],u="text"===r;o.fn[r]=function(t){var r=this;if(!s(r))return a.apply(r,arguments);if(t!==e)return n.call(r.filter(":tinymce"),t),a.apply(r.not(":tinymce"),arguments),r;var l="",c=arguments;return(u?r:r.eq(0)).each((function(e,t){var n=i(t);l+=n?u?n.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):n.getContent({save:!0}):a.apply(o(t),c)})),l}})),o.each(["append","prepend"],(function(t,n){var r=l[n]=o.fn[n],a="prepend"===n;o.fn[n]=function(t){var n=this;return s(n)?t!==e?("string"==typeof t&&n.filter(":tinymce").each((function(e,n){var r=i(n);r&&r.setContent(a?t+r.getContent():r.getContent()+t)})),r.apply(n.not(":tinymce"),arguments),n):void 0:r.apply(n,arguments)}})),o.each(["remove","replaceWith","replaceAll","empty"],(function(e,n){var i=l[n]=o.fn[n];o.fn[n]=function(){return t.call(this,n),i.apply(this,arguments)}})),l.attr=o.fn.attr,o.fn.attr=function(t,r){var a=this,u=arguments;if(!t||"value"!==t||!s(a))return l.attr.apply(a,u);if(r!==e)return n.call(a.filter(":tinymce"),r),l.attr.apply(a.not(":tinymce"),u),a;var c=a[0],d=i(c);return d?d.getContent({save:!0}):l.attr.apply(o(c),u)}}}()}).call(window)},70126:function(e,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}(function(){!function(){"use strict";var t=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=n(e);return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},i=function(e){return{eq:e}},r=i((function(e,t){return e===t})),o=function(e){return i((function(t,n){if(t.length!==n.length)return!1;for(var i=t.length,r=0;r<i;r++)if(!e.eq(t[r],n[r]))return!1;return!0}))},a=function(e,t){return function(e,t){return i((function(n,i){return e.eq(t(n),t(i))}))}(o(e),(function(e){return function(e,t){return Array.prototype.slice.call(e).sort(t)}(e,t)}))},s=function(e){return i((function(t,n){var i=Object.keys(t),o=Object.keys(n);if(!a(r).eq(i,o))return!1;for(var s=i.length,l=0;l<s;l++){var u=i[l];if(!e.eq(t[u],n[u]))return!1}return!0}))},l=i((function(e,n){if(e===n)return!0;var i=t(e);return i===t(n)&&(function(e){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(e)}(i)?e===n:"array"===i?o(l).eq(e,n):"object"===i&&s(l).eq(e,n))})),u=function(){},c=function(e,t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e(t.apply(null,n))}},d=function(e){return function(){return e}},f=function(e){return e};function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=t.concat(n);return e.apply(null,r)}}var p=function(e){return function(t){return!e(t)}},m=function(e){return function(){throw new Error(e)}},g=d(!1),v=d(!0),y=function(){return b},b=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e};return{fold:function(e,t){return e()},is:g,isSome:g,isNone:v,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:d(null),getOrUndefined:d(void 0),or:n,orThunk:t,map:y,each:u,bind:y,exists:g,forall:v,filter:y,equals:e,equals_:e,toArray:function(){return[]},toString:d("none()")}}(),w=function e(t){var n=d(t),i=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:v,isNone:g,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:i,orThunk:i,map:function(n){return e(n(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?o:b},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(g,(function(e){return n(t,e)}))}};return o},x={some:w,none:y,from:function(e){return null==e?b:w(e)}},C=function(e){return function(t){return r=n(i=t),(null===i?"null":"object"===r&&(Array.prototype.isPrototypeOf(i)||i.constructor&&"Array"===i.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(i)||i.constructor&&"String"===i.constructor.name)?"string":r)===e;var i,r}},k=function(e){return function(t){return n(t)===e}},_=function(e){return function(t){return e===t}},S=C("string"),T=C("object"),D=C("array"),M=_(null),E=k("boolean"),N=_(void 0),A=function(e){return!function(e){return null==e}(e)},P=k("function"),L=k("number"),O=Array.prototype.slice,I=Array.prototype.indexOf,R=Array.prototype.push,B=function(e,t){return I.call(e,t)},z=function(e,t){return B(e,t)>-1},F=function(e,t){for(var n=0,i=e.length;n<i;n++){if(t(e[n],n))return!0}return!1},H=function(e,t){for(var n=e.length,i=new Array(n),r=0;r<n;r++){var o=e[r];i[r]=t(o,r)}return i},W=function(e,t){for(var n=0,i=e.length;n<i;n++){t(e[n],n)}},j=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n)}},U=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i)&&n.push(o)}return n},V=function(e,t,n){return j(e,(function(e){n=t(n,e)})),n},$=function(e,t,n){return W(e,(function(e){n=t(n,e)})),n},q=function(e,t){return function(e,t,n){for(var i=0,r=e.length;i<r;i++){var o=e[i];if(t(o,i))return x.some(o);if(n(o,i))break}return x.none()}(e,t,g)},X=function(e,t){for(var n=0,i=e.length;n<i;n++){if(t(e[n],n))return x.some(n)}return x.none()},Y=function(e,t){return function(e){for(var t=[],n=0,i=e.length;n<i;++n){if(!D(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);R.apply(t,e[n])}return t}(H(e,t))},K=function(e,t){for(var n=0,i=e.length;n<i;++n){if(!0!==t(e[n],n))return!1}return!0},G=function(e){var t=O.call(e,0);return t.reverse(),t},J=function(e,t){return U(e,(function(e){return!z(t,e)}))},Z=function(e){return 0===e.length?x.none():x.some(e[0])},Q=function(e){return 0===e.length?x.none():x.some(e[e.length-1])},ee=P(Array.from)?Array.from:function(e){return O.call(e)},te=Object.keys,ne=Object.hasOwnProperty,ie=function(e,t){for(var n=te(e),i=0,r=n.length;i<r;i++){var o=n[i];t(e[o],o)}},re=function(e,t){return oe(e,(function(e,n){return{k:n,v:t(e,n)}}))},oe=function(e,t){var n={};return ie(e,(function(e,i){var r=t(e,i);n[r.k]=r.v})),n},ae=function(e){return function(t,n){e[n]=t}},se=function(e,t,n,i){return ie(e,(function(e,r){(t(e,r)?n:i)(e,r)})),{}},le=function(e,t){var n={},i={};return se(e,t,ae(n),ae(i)),{t:n,f:i}},ue=function(e,t){var n={};return se(e,t,ae(n),u),n},ce=function(e){return function(e,t){var n=[];return ie(e,(function(e,i){n.push(t(e,i))})),n}(e,(function(e){return e}))},de=function(e,t){return fe(e,t)?x.from(e[t]):x.none()},fe=function(e,t){return ne.call(e,t)},he=Array.isArray,pe=function(e,t,n){var i,r;if(!e)return!1;if(n=n||e,void 0!==e.length){for(i=0,r=e.length;i<r;i++)if(!1===t.call(n,e[i],i,e))return!1}else for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(n,e[i],i,e))return!1;return!0},me=function(e,t){var n=[];return pe(e,(function(i,r){n.push(t(i,r,e))})),n},ge=function(e,t){var n=[];return pe(e,(function(i,r){t&&!t(i,r,e)||n.push(i)})),n},ve=function(e,t){if(e)for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},ye=function(e,t,n,i){for(var r=N(n)?e[0]:n,o=0;o<e.length;o++)r=t.call(i,r,e[o],o);return r},be=function(e,t,n){var i,r;for(i=0,r=e.length;i<r;i++)if(t.call(n,e[i],i,e))return i;return-1},we=function(e){return e[e.length-1]},xe=function(){return xe=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},xe.apply(this,arguments)};function Ce(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}var ke=function(){return _e(0,0)},_e=function(e,t){return{major:e,minor:t}},Se={nu:_e,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?ke():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.test(t))return i}}(e,t);if(!n)return{major:0,minor:0};var i=function(e){return Number(t.replace(n,"$"+e))};return _e(i(1),i(2))}(e,n)},unknown:ke},Te=function(e,t){var n=String(t).toLowerCase();return q(e,(function(e){return e.search(n)}))},De=function(e,t){return Te(e,t).map((function(e){var n=Se.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},Me=function(e,t){return Te(e,t).map((function(e){var n=Se.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},Ee=function(e,t){return-1!==e.indexOf(t)},Ne=function(e,t){return function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t}(e,t,0)},Ae=function(e){return function(t){return t.replace(e,"")}},Pe=Ae(/^\s+|\s+$/g),Le=Ae(/^\s+/g),Oe=Ae(/\s+$/g),Ie=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Re=function(e){return function(t){return Ee(t,e)}},Be=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Ee(e,"edge/")&&Ee(e,"chrome")&&Ee(e,"safari")&&Ee(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ie],search:function(e){return Ee(e,"chrome")&&!Ee(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Ee(e,"msie")||Ee(e,"trident")}},{name:"Opera",versionRegexes:[Ie,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Re("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Re("firefox")},{name:"Safari",versionRegexes:[Ie,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Ee(e,"safari")||Ee(e,"mobile/"))&&Ee(e,"applewebkit")}}],ze=[{name:"Windows",search:Re("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Ee(e,"iphone")||Ee(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Re("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Re("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Re("linux"),versionRegexes:[]},{name:"Solaris",search:Re("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Re("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Re("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Fe={browsers:d(Be),oses:d(ze)},He="Edge",We="Chrome",je="Opera",Ue="Firefox",Ve="Safari",$e=function(e){var t=e.current,n=e.version,i=function(e){return function(){return t===e}};return{current:t,version:n,isEdge:i(He),isChrome:i(We),isIE:i("IE"),isOpera:i(je),isFirefox:i(Ue),isSafari:i(Ve)}},qe={unknown:function(){return $e({current:void 0,version:Se.unknown()})},nu:$e,edge:d(He),chrome:d(We),ie:d("IE"),opera:d(je),firefox:d(Ue),safari:d(Ve)},Xe="Windows",Ye="Android",Ke="Linux",Ge="Solaris",Je="FreeBSD",Ze="ChromeOS",Qe=function(e){var t=e.current,n=e.version,i=function(e){return function(){return t===e}};return{current:t,version:n,isWindows:i(Xe),isiOS:i("iOS"),isAndroid:i(Ye),isOSX:i("OSX"),isLinux:i(Ke),isSolaris:i(Ge),isFreeBSD:i(Je),isChromeOS:i(Ze)}},et={unknown:function(){return Qe({current:void 0,version:Se.unknown()})},nu:Qe,windows:d(Xe),ios:d("iOS"),android:d(Ye),linux:d(Ke),osx:d("OSX"),solaris:d(Ge),freebsd:d(Je),chromeos:d(Ze)},tt=function(e,t){var n=Fe.browsers(),i=Fe.oses(),r=De(n,e).fold(qe.unknown,qe.nu),o=Me(i,e).fold(et.unknown,et.nu),a=function(e,t,n,i){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,a=e.isiOS()||e.isAndroid(),s=a||i("(pointer:coarse)"),l=r||!o&&a&&i("(min-device-width:768px)"),u=o||a&&!l,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),f=!u&&!l&&!c;return{isiPad:d(r),isiPhone:d(o),isTablet:d(l),isPhone:d(u),isTouch:d(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:d(c),isDesktop:d(f)}}(o,r,e,t);return{browser:r,os:o,deviceType:a}},nt=function(e){return window.matchMedia(e).matches},it=function(e){var t,n=!1;return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return n||(n=!0,t=e.apply(null,i)),t}}((function(){return tt(navigator.userAgent,nt)})),rt=function(){return it()},ot=navigator.userAgent,at=rt(),st=at.browser,lt=at.os,ut=at.deviceType,ct=/WebKit/.test(ot)&&!st.isEdge(),dt="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,ft=-1!==ot.indexOf("Windows Phone"),ht={opera:st.isOpera(),webkit:ct,ie:!(!st.isIE()&&!st.isEdge())&&st.version.major,gecko:st.isFirefox(),mac:lt.isOSX()||lt.isiOS(),iOS:ut.isiPad()||ut.isiPhone(),android:lt.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:st.isIE()?document.documentMode||7:10,fileApi:dt,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!st.isIE(),desktop:ut.isDesktop(),windowsPhone:ft,browser:{current:st.current,version:st.version,isChrome:st.isChrome,isEdge:st.isEdge,isFirefox:st.isFirefox,isIE:st.isIE,isOpera:st.isOpera,isSafari:st.isSafari},os:{current:lt.current,version:lt.version,isAndroid:lt.isAndroid,isChromeOS:lt.isChromeOS,isFreeBSD:lt.isFreeBSD,isiOS:lt.isiOS,isLinux:lt.isLinux,isOSX:lt.isOSX,isSolaris:lt.isSolaris,isWindows:lt.isWindows},deviceType:{isDesktop:ut.isDesktop,isiPad:ut.isiPad,isiPhone:ut.isiPhone,isPhone:ut.isPhone,isTablet:ut.isTablet,isTouch:ut.isTouch,isWebView:ut.isWebView}},pt=/^\s*|\s*$/g,mt=function(e){return null==e?"":(""+e).replace(pt,"")},gt=function(e,t){return t?!("array"!==t||!he(e))||n(e)===t:void 0!==e},vt={trim:mt,isArray:he,is:gt,toArray:function(e){if(he(e))return e;for(var t=[],n=0,i=e.length;n<i;n++)t[n]=e[n];return t},makeMap:function(e,t,n){var i;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},i=e.length;i--;)n[e[i]]={};return n},each:pe,map:me,grep:ge,inArray:ve,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0;i<t.length;i++){var r=t[i];for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];void 0!==a&&(e[o]=a)}}return e},create:function(e,t,n){var i,r,o,a=this,s=0,l=(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e))[3].match(/(^|\.)(\w+)$/i)[2],u=a.createNS(e[3].replace(/\.\w+$/,""),n);if(!u[l]){if("static"===e[2])return u[l]=t,void(this.onCreate&&this.onCreate(e[2],e[3],u[l]));t[l]||(t[l]=function(){},s=1),u[l]=t[l],a.extend(u[l].prototype,t),e[5]&&(i=a.resolve(e[5]).prototype,r=e[5].match(/\.(\w+)$/i)[1],o=u[l],u[l]=s?function(){return i[r].apply(this,arguments)}:function(){return this.parent=i[r],o.apply(this,arguments)},u[l].prototype[l]=u[l],a.each(i,(function(e,t){u[l].prototype[t]=i[t]})),a.each(t,(function(e,t){i[t]?u[l].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!==l&&(u[l].prototype[t]=e)}))),a.each(t.static,(function(e,t){u[l][t]=e}))}},walk:function e(t,n,i,r){r=r||this,t&&(i&&(t=t[i]),pe(t,(function(t,o){if(!1===n.call(r,t,o,i))return!1;e(t,n,i,r)})))},createNS:function(e,t){var n,i;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)t[i=e[n]]||(t[i]={}),t=t[i];return t},resolve:function(e,t){var n,i;for(t=t||window,n=0,i=(e=e.split(".")).length;n<i&&(t=t[e[n]]);n++);return t},explode:function(e,t){return!e||gt(e,"array")?e:me(e.split(t||","),mt)},_addCacheSuffix:function(e){var t=ht.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},yt=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},bt={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return yt(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return yt(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return yt(n)},fromDom:yt,fromPoint:function(e,t,n){return x.from(e.dom.elementFromPoint(t,n)).map(yt)}},wt=function(e,t){var n=[],i=function(e){return n.push(e),t(e)},r=t(e);do{r=r.bind(i)}while(r.isSome());return n},xt=function(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var i=n;if(void 0!==i.matches)return i.matches(t);if(void 0!==i.msMatchesSelector)return i.msMatchesSelector(t);if(void 0!==i.webkitMatchesSelector)return i.webkitMatchesSelector(t);if(void 0!==i.mozMatchesSelector)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Ct=function(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount},kt=function(e,t){return e.dom===t.dom},_t=function(e,t){return n=e.dom,i=t.dom,function(e,t,n){return!!(e.compareDocumentPosition(t)&n)}(n,i,Node.DOCUMENT_POSITION_CONTAINED_BY);var n,i},St=function(e,t){return rt().browser.isIE()?_t(e,t):function(e,t){var n=e.dom,i=t.dom;return n!==i&&n.contains(i)}(e,t)},Tt=("undefined"!=typeof window?window:Function("return this;")(),function(e){return e.dom.nodeName.toLowerCase()}),Dt=function(e){return e.dom.nodeType},Mt=function(e){return function(t){return Dt(t)===e}},Et=Mt(1),Nt=Mt(3),At=Mt(9),Pt=Mt(11),Lt=function(e){return bt.fromDom(e.dom.ownerDocument)},Ot=function(e){return At(e)?e:Lt(e)},It=function(e){return bt.fromDom(Ot(e).dom.defaultView)},Rt=function(e){return x.from(e.dom.parentNode).map(bt.fromDom)},Bt=function(e){return x.from(e.dom.previousSibling).map(bt.fromDom)},zt=function(e){return x.from(e.dom.nextSibling).map(bt.fromDom)},Ft=function(e){return G(wt(e,Bt))},Ht=function(e){return wt(e,zt)},Wt=function(e){return H(e.dom.childNodes,bt.fromDom)},jt=function(e,t){var n=e.dom.childNodes;return x.from(n[t]).map(bt.fromDom)},Ut=function(e){return jt(e,0)},Vt=function(e){return jt(e,e.dom.childNodes.length-1)},$t=function(e){return Pt(e)},qt=P(Element.prototype.attachShadow)&&P(Node.prototype.getRootNode),Xt=d(qt),Yt=qt?function(e){return bt.fromDom(e.dom.getRootNode())}:Ot,Kt=function(e){return $t(e)?e:function(e){var t=e.dom.head;if(null==t)throw new Error("Head is not available yet");return bt.fromDom(t)}(Ot(e))},Gt=function(e){return bt.fromDom(e.dom.host)},Jt=function(e){return A(e.dom.shadowRoot)},Zt=function(e,t){Rt(e).each((function(n){n.dom.insertBefore(t.dom,e.dom)}))},Qt=function(e,t){zt(e).fold((function(){Rt(e).each((function(e){tn(e,t)}))}),(function(e){Zt(e,t)}))},en=function(e,t){Ut(e).fold((function(){tn(e,t)}),(function(n){e.dom.insertBefore(t.dom,n.dom)}))},tn=function(e,t){e.dom.appendChild(t.dom)},nn=function(e,t){W(t,(function(t){tn(e,t)}))},rn=function(e){e.dom.textContent="",W(Wt(e),(function(e){on(e)}))},on=function(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},an=function(e){var t,n=Wt(e);n.length>0&&(t=e,W(n,(function(e){Zt(t,e)}))),on(e)},sn=function e(t){var n=Nt(t)?t.dom.parentNode:t.dom;if(null==n||null===n.ownerDocument)return!1;var i,r,o=n.ownerDocument;return function(e){var t=Yt(e);return $t(t)?x.some(t):x.none()}(bt.fromDom(n)).fold((function(){return o.body.contains(n)}),(i=e,r=Gt,function(e){return i(r(e))}))},ln=function e(t,n){return{left:t,top:n,translate:function(i,r){return e(t+i,n+r)}}},un=function(e,t){return void 0!==e?e:void 0!==t?t:0},cn=function(e){var t=e.dom,n=t.ownerDocument.body;return n===t?ln(n.offsetLeft,n.offsetTop):sn(e)?function(e){var t=e.getBoundingClientRect();return ln(t.left,t.top)}(t):ln(0,0)},dn=function(e){var t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,i=t.body.scrollTop||t.documentElement.scrollTop;return ln(n,i)},fn=function(e,t,n){var i=(void 0!==n?n.dom:document).defaultView;i&&i.scrollTo(e,t)},hn=function(e,t){rt().browser.isSafari()&&P(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},pn=function(e,t,n,i){return{x:e,y:t,width:n,height:i,right:e+n,bottom:t+i}},mn=function(e){var t=void 0===e?window:e,n=t.document,i=dn(bt.fromDom(n));return function(e){var t=void 0===e?window:e;return x.from(t.visualViewport)}(t).fold((function(){var e=t.document.documentElement,n=e.clientWidth,r=e.clientHeight;return pn(i.left,i.top,n,r)}),(function(e){return pn(Math.max(e.pageLeft,i.left),Math.max(e.pageTop,i.top),e.width,e.height)}))},gn=function(e){return function(t){return!!t&&t.nodeType===e}},vn=function(e){return!!e&&!Object.getPrototypeOf(e)},yn=gn(1),bn=function(e){var t=e.map((function(e){return e.toLowerCase()}));return function(e){if(e&&e.nodeName){var n=e.nodeName.toLowerCase();return z(t,n)}return!1}},wn=function(e,t){var n=t.toLowerCase().split(" ");return function(t){var i;if(yn(t))for(i=0;i<n.length;i++){var r=t.ownerDocument.defaultView.getComputedStyle(t,null);if((r?r.getPropertyValue(e):null)===n[i])return!0}return!1}},xn=function(e){return function(t){return yn(t)&&t.hasAttribute(e)}},Cn=function(e){return yn(e)&&e.hasAttribute("data-mce-bogus")},kn=function(e){return yn(e)&&"TABLE"===e.tagName},_n=function(e){return function(t){if(yn(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Sn=bn(["textarea","input"]),Tn=gn(3),Dn=gn(8),Mn=gn(9),En=gn(11),Nn=bn(["br"]),An=bn(["img"]),Pn=_n("true"),Ln=_n("false"),On=bn(["td","th"]),In=bn(["video","audio","object","embed"]),Rn=function(e){return void 0!==e.style&&P(e.style.getPropertyValue)},Bn=function(e,t,n){if(!(S(n)||E(n)||L(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},zn=function(e,t,n){Bn(e.dom,t,n)},Fn=function(e,t){var n=e.dom;ie(t,(function(e,t){Bn(n,t,e)}))},Hn=function(e,t){var n=e.dom.getAttribute(t);return null===n?void 0:n},Wn=function(e,t){e.dom.removeAttribute(t)},jn=function(e,t){var n=e.dom;ie(t,(function(e,t){!function(e,t,n){if(!S(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Rn(e)&&e.style.setProperty(t,n)}(n,t,e)}))},Un=function(e,t){var n=e.dom,i=window.getComputedStyle(n).getPropertyValue(t);return""!==i||sn(e)?i:Vn(n,t)},Vn=function(e,t){return Rn(e)?e.style.getPropertyValue(t):""},$n=function(e,t){var n=e.dom,i=Vn(n,t);return x.from(i).filter((function(e){return e.length>0}))},qn=function(e){var t={},n=e.dom;if(Rn(n))for(var i=0;i<n.style.length;i++){var r=n.style.item(i);t[r]=n.style[r]}return t},Xn=rt().browser,Yn=function(e){return q(e,Et)},Kn=function(e,t){return e.children&&z(e.children,t)},Gn=function(e,t,n){var i,r,o=0,a=0,s=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===Un(bt.fromDom(e),"position"))return{x:o=(r=t.getBoundingClientRect()).left+(s.documentElement.scrollLeft||e.scrollLeft)-s.documentElement.clientLeft,y:a=r.top+(s.documentElement.scrollTop||e.scrollTop)-s.documentElement.clientTop};for(i=t;i&&i!==n&&i.nodeType&&!Kn(i,n);)o+=i.offsetLeft||0,a+=i.offsetTop||0,i=i.offsetParent;for(i=t.parentNode;i&&i!==n&&i.nodeType&&!Kn(i,n);)o-=i.scrollLeft||0,a-=i.scrollTop||0,i=i.parentNode;a+=function(e){return Xn.isFirefox()&&"table"===Tt(e)?Yn(Wt(e)).filter((function(e){return"caption"===Tt(e)})).bind((function(e){return Yn(Ht(e)).map((function(t){var n=t.dom.offsetTop,i=e.dom.offsetTop,r=e.dom.offsetHeight;return n<=i?-r:0}))})).getOr(0):0}(bt.fromDom(t))}return{x:o,y:a}},Jn={},Zn={exports:Jn};!function(e,t,i,r){!function(r){if("object"===n(t)&&void 0!==i)i.exports=r();else if("function"==typeof e&&e.amd)e([],r);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=r()}}((function(){return function e(t,n,i){function o(s,l){if(!n[s]){if(!t[s]){var u="function"==typeof r&&r;if(!l&&u)return u(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};t[s][0].call(d.exports,(function(e){return o(t[s][1][e]||e)}),d,d.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){var i,r,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(e){i=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],d=!1,f=-1;function h(){d&&u&&(d=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!d){var e=l(h);d=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||d||l(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],2:[function(e,t,i){(function(e){!function(i){var r=setTimeout;function o(){}function a(e){if("object"!==n(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void u(t.promise,e)}l(t.promise,i)}else(1===e._state?l:u)(t.promise,e._value)}))):e._deferreds.push(t)}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===n(t)||"function"==typeof t)){var i=t.then;if(t instanceof a)return e._state=3,e._value=t,void c(e);if("function"==typeof i)return void f((r=i,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){u(e,t)}var r,o}function u(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&a._immediateFn((function(){e._handled||a._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e((function(e){n||(n=!0,l(t,e))}),(function(e){n||(n=!0,u(t,e))}))}catch(e){if(n)return;n=!0,u(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(o);return s(this,new d(e,t,n)),n},a.all=function(e){var t=Array.prototype.slice.call(e);return new a((function(e,i){if(0===t.length)return e([]);var r=t.length;function o(a,s){try{if(s&&("object"===n(s)||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,(function(e){o(a,e)}),i)}t[a]=s,0==--r&&e(t)}catch(e){i(e)}}for(var a=0;a<t.length;a++)o(a,t[a])}))},a.resolve=function(e){return e&&"object"===n(e)&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,n){n(e)}))},a.race=function(e){return new a((function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)}))},a._immediateFn="function"==typeof e?function(t){e(t)}:function(e){r(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},a._setImmediateFn=function(e){a._immediateFn=e},a._setUnhandledRejectionFn=function(e){a._unhandledRejectionFn=e},void 0!==t&&t.exports?t.exports=a:i.Promise||(i.Promise=a)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,i){var r=e("process/browser.js").nextTick,o=Function.prototype.apply,a=Array.prototype.slice,s={},l=0;function u(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new u(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new u(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=l++,i=!(arguments.length<2)&&a.call(arguments,1);return s[t]=!0,r((function(){s[t]&&(i?e.apply(null,i):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof i?i:function(e){delete s[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var i=e("promise-polyfill"),r="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:r.Promise||i}},{"promise-polyfill":2}]},{},[4])(4)}))}(void 0,Jn,Zn,void 0);var Qn=Zn.exports.boltExport,ei=function e(t){var n=x.none(),i=[],r=function(e){o()?s(e):i.push(e)},o=function(){return n.isSome()},a=function(e){W(e,s)},s=function(e){n.each((function(t){setTimeout((function(){e(t)}),0)}))};return t((function(e){o()||(n=x.some(e),a(i),i=[])})),{get:r,map:function(t){return e((function(e){r((function(n){e(t(n))}))}))},isReady:o}},ti=ei,ni=function(e){setTimeout((function(){throw e}),0)},ii=function e(t){var n=function(e){t().then(e,ni)};return{map:function(n){return e((function(){return t().then(n)}))},bind:function(n){return e((function(){return t().then((function(e){return n(e).toPromise()}))}))},anonBind:function(n){return e((function(){return t().then((function(){return n.toPromise()}))}))},toLazy:function(){return ti(n)},toCached:function(){var n=null;return e((function(){return null===n&&(n=t()),n}))},toPromise:t,get:n}},ri=function(e){return ii((function(){return new Qn(e)}))},oi=function(e,t){return t((function(t){var n=[],i=0;0===e.length?t([]):W(e,(function(r,o){r.get(function(r){return function(o){n[r]=o,++i>=e.length&&t(n)}}(o))}))}))},ai=function e(t){return{is:function(e){return t===e},isValue:v,isError:g,getOr:d(t),getOrThunk:d(t),getOrDie:d(t),or:function(n){return e(t)},orThunk:function(n){return e(t)},fold:function(e,n){return n(t)},map:function(n){return e(n(t))},mapError:function(n){return e(t)},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOptional:function(){return x.some(t)}}},si=function e(t){return{is:g,isValue:g,isError:v,getOr:f,getOrThunk:function(e){return e()},getOrDie:function(){return m(String(t))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,n){return e(t)},map:function(n){return e(t)},mapError:function(n){return e(n(t))},each:u,bind:function(n){return e(t)},exists:g,forall:v,toOptional:x.none}},li=ai,ui=si,ci=function(e){if(!D(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return W(e,(function(i,r){var o=te(i);if(1!==o.length)throw new Error("one and only one name per case");var a=o[0],s=i[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!D(s))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var i=new Array(n),o=0;o<i.length;o++)i[o]=arguments[o];return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[r].apply(null,i)},match:function(e){var n=te(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!K(t,(function(e){return z(n,e)})))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,i)},log:function(e){console.log(e,{constructors:t,constructor:a,params:i})}}}})),n},di=(ci([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(e){return e.fold(f,f)});function fi(e,t,n,i,r){return e(n,i)?x.some(n):P(r)&&r(n)?x.none():t(n,i,r)}var hi,pi=function(e,t,n){for(var i=e.dom,r=P(n)?n:g;i.parentNode;){i=i.parentNode;var o=bt.fromDom(i);if(t(o))return x.some(o);if(r(o))break}return x.none()},mi=function(e,t,n){return fi((function(e,t){return t(e)}),pi,e,t,n)},gi=function(e,t,n){return pi(e,(function(e){return xt(e,t)}),n)},vi=function(e,t){return function(e,t){var n=void 0===t?document:t.dom;return Ct(n)?x.none():x.from(n.querySelector(e)).map(bt.fromDom)}(t,e)},yi=function(e,t,n){return fi((function(e,t){return xt(e,t)}),gi,e,t,n)},bi=window.Promise?window.Promise:function(){function e(e,t){return function(){e.apply(t,arguments)}}var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=function(t){if("object"!==n(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(t,e(a,this),e(s,this))},r=i.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};function o(e){var t=this;null!==this._state?r((function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void e.reject(t)}e.resolve(i)}else(t._state?e.resolve:e.reject)(t._value)})):this._deferreds.push(e)}function a(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===n(t)||"function"==typeof t)){var i=t.then;if("function"==typeof i)return void c(e(i,t),e(a,this),e(s,this))}this._state=!0,this._value=t,l.call(this)}catch(e){s.call(this,e)}}function s(e){this._state=!1,this._value=e,l.call(this)}function l(){for(var e=0,t=this._deferreds.length;e<t;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function u(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function c(e,t,n){var i=!1;try{e((function(e){i||(i=!0,t(e))}),(function(e){i||(i=!0,n(e))}))}catch(e){if(i)return;i=!0,n(e)}}return i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=this;return new i((function(i,r){o.call(n,new u(e,t,i,r))}))},i.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&t(arguments[0])?arguments[0]:arguments);return new i((function(t,i){if(0===e.length)return t([]);var r=e.length;function o(a,s){try{if(s&&("object"===n(s)||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,(function(e){o(a,e)}),i)}e[a]=s,0==--r&&t(e)}catch(e){i(e)}}for(var a=0;a<e.length;a++)o(a,e[a])}))},i.resolve=function(e){return e&&"object"===n(e)&&e.constructor===i?e:new i((function(t){t(e)}))},i.reject=function(e){return new i((function(t,n){n(e)}))},i.race=function(e){return new i((function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)}))},i}(),wi=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},xi=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},Ci=function(e,t){var n,i=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];clearTimeout(n),n=wi((function(){e.apply(this,i)}),t)};return i.stop=function(){clearTimeout(n)},i},ki={requestAnimationFrame:function(e,t){hi?hi.then(e):hi=new bi((function(e){t||(t=document.body),function(e,t){var n,i=window.requestAnimationFrame,r=["ms","moz","webkit"];for(n=0;n<r.length&&!i;n++)i=window[r[n]+"RequestAnimationFrame"];i||(i=function(e){window.setTimeout(e,0)}),i(e,t)}(e,t)})).then(e)},setTimeout:wi,setInterval:xi,setEditorTimeout:function(e,t,n){return wi((function(){e.removed||t()}),n)},setEditorInterval:function(e,t,n){var i=xi((function(){e.removed?clearInterval(i):t()}),n);return i},debounce:Ci,throttle:Ci,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}};function _i(e,t){void 0===t&&(t={});var n=0,i={},r=bt.fromDom(e),o=Ot(r),a=t.maxLoadTime||5e3,s=function(s,l,u){var c,d=vt._addCacheSuffix(s),f=function(e){return de(i,e).getOrThunk((function(){return{id:"mce-u"+n++,passed:[],failed:[],count:0}}))}(d);i[d]=f,f.count++;var h=function(e,t){for(var n=e.length;n--;)e[n]();f.status=t,f.passed=[],f.failed=[],c&&(c.onload=null,c.onerror=null,c=null)},p=function(){return h(f.passed,2)},m=function(){return h(f.failed,3)};if(l&&f.passed.push(l),u&&f.failed.push(u),1!==f.status)if(2!==f.status)if(3!==f.status){f.status=1;var g=bt.fromTag("link",o.dom);Fn(g,{rel:"stylesheet",type:"text/css",id:f.id});var v,y=Date.now();t.contentCssCors&&zn(g,"crossOrigin","anonymous"),t.referrerPolicy&&zn(g,"referrerpolicy",t.referrerPolicy),(c=g.dom).onload=function t(){var n,i;n=function(){for(var t=e.styleSheets,n=t.length;n--;){var i=t[n].ownerNode;if(i&&i.id===c.id)return p(),!0}return!1},i=t,n()||(Date.now()-y<a?ki.setTimeout(i):m())},c.onerror=m,v=g,tn(Kt(r),v),zn(g,"href",d)}else m();else p()},l=function(e){return ri((function(t){s(e,c(t,d(li(e))),c(t,d(ui(e))))}))},u=function(e){var t=vt._addCacheSuffix(e);de(i,t).each((function(e){var n,o;0===--e.count&&(delete i[t],n=e.id,o=Kt(r),vi(o,"#"+n).each(on))}))};return{load:s,loadAll:function(e,t,n){var i;(i=H(e,l),oi(i,ri)).get((function(e){var i=function(e,t){for(var n=[],i=[],r=0,o=e.length;r<o;r++){var a=e[r];(t(a,r)?n:i).push(a)}return{pass:n,fail:i}}(e,(function(e){return e.isValue()}));i.fail.length>0?n(i.fail.map(di)):t(i.pass.map(di))}))},unload:u,unloadAll:function(e){W(e,(function(e){u(e)}))},_setReferrerPolicy:function(e){t.referrerPolicy=e}}}var Si,Ti,Di=function(){var e=new WeakMap;return{forElement:function(t,n){var i=Yt(t).dom;return x.from(e.get(i)).getOrThunk((function(){var t=_i(i,n);return e.set(i,t),t}))}}}(),Mi=function(){function e(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}return e.prototype.current=function(){return this.node},e.prototype.next=function(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node},e.prototype.prev=function(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node},e.prototype.prev2=function(e){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",e),this.node},e.prototype.findSibling=function(e,t,n,i){var r,o;if(e){if(!i&&e[t])return e[t];if(e!==this.rootNode){if(r=e[n])return r;for(o=e.parentNode;o&&o!==this.rootNode;o=o.parentNode)if(r=o[n])return r}}},e.prototype.findPreviousNode=function(e,t,n,i){var r,o,a;if(e){if(r=e[n],this.rootNode&&r===this.rootNode)return;if(r){if(!i)for(a=r[t];a;a=a[t])if(!a[t])return a;return r}if((o=e.parentNode)&&o!==this.rootNode)return o}},e}(),Ei=function(e){var t;return function(n){return t=t||function(e,t){for(var n={},i=0,r=e.length;i<r;i++){var o=e[i];n[String(o)]=t(o,i)}return n}(e,v),t.hasOwnProperty(Tt(n))}},Ni=Ei(["h1","h2","h3","h4","h5","h6"]),Ai=Ei(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Pi=function(e){return Et(e)&&!Ai(e)},Li=function(e){return Et(e)&&"br"===Tt(e)},Oi=Ei(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Ii=Ei(["ul","ol","dl"]),Ri=Ei(["li","dd","dt"]),Bi=Ei(["thead","tbody","tfoot"]),zi=Ei(["td","th"]),Fi=Ei(["pre","script","textarea","style"]),Hi="",Wi="\ufeff",ji=function(e){return"\ufeff"===e},Ui=function(e){return e.replace(/\uFEFF/g,"")},Vi=yn,$i=Tn,qi=function(e){return $i(e)&&(e=e.parentNode),Vi(e)&&e.hasAttribute("data-mce-caret")},Xi=function(e){return $i(e)&&ji(e.data)},Yi=function(e){return qi(e)||Xi(e)},Ki=function(e){return e.firstChild!==e.lastChild||!Nn(e.firstChild)},Gi=function(e){var t=e.container();return!!Tn(t)&&(t.data.charAt(e.offset())===Wi||e.isAtStart()&&Xi(t.previousSibling))},Ji=function(e){var t=e.container();return!!Tn(t)&&(t.data.charAt(e.offset()-1)===Wi||e.isAtEnd()&&Xi(t.nextSibling))},Zi=function(e,t,n){var i,r=t.ownerDocument.createElement(e);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(((i=document.createElement("br")).setAttribute("data-mce-bogus","1"),i));var o=t.parentNode;return n?o.insertBefore(r,t):t.nextSibling?o.insertBefore(r,t.nextSibling):o.appendChild(r),r},Qi=function(e){return $i(e)&&e.data[0]===Wi},er=function(e){return $i(e)&&e.data[e.data.length-1]===Wi},tr=function(e){return e&&e.hasAttribute("data-mce-caret")?(t=e.getElementsByTagName("br"),n=t[t.length-1],Cn(n)&&n.parentNode.removeChild(n),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null;var t,n},nr=Pn,ir=Ln,rr=Nn,or=Tn,ar=bn(["script","style","textarea"]),sr=bn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),lr=bn(["table"]),ur=Yi,cr=function(e){return!ur(e)&&(or(e)?!ar(e.parentNode):sr(e)||rr(e)||lr(e)||dr(e))},dr=function(e){return!1===function(e){return yn(e)&&"true"===e.getAttribute("unselectable")}(e)&&ir(e)},fr=function(e,t){return cr(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(dr(e))return!1;if(nr(e))return!0}return!0}(e,t)},hr=/^[ \t\r\n]*$/,pr=function(e){return hr.test(e)},mr=function(e,t){var n,i,r,o=bt.fromDom(t),a=bt.fromDom(e);return n=a,i="pre,code",r=h(kt,o),gi(n,i,r).isSome()},gr=function(e,t){return cr(e)&&!1===function(e,t){return Tn(e)&&pr(e.data)&&!1===mr(e,t)}(e,t)||function(e){return yn(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id"))}(e)||vr(e)},vr=xn("data-mce-bookmark"),yr=xn("data-mce-bogus"),br=(Si="data-mce-bogus",Ti="all",function(e){return yn(e)&&e.getAttribute(Si)===Ti}),wr=function(e,t){return void 0===t&&(t=!0),function(e,t){var n,i=0;if(gr(e,e))return!1;if(!(n=e.firstChild))return!0;var r=new Mi(n,e);do{if(t){if(br(n)){n=r.next(!0);continue}if(yr(n)){n=r.next();continue}}if(Nn(n))i++,n=r.next();else{if(gr(n,e))return!1;n=r.next()}}while(n);return i<=1}(e.dom,t)},xr=function(e,t){return A(e)&&(gr(e,t)||Pi(bt.fromDom(e)))},Cr=function(e){return function(e){return"span"===e.nodeName.toLowerCase()}(e)&&"bookmark"===e.getAttribute("data-mce-type")},kr=function(e,t){return Tn(e)&&e.data.length>0&&function(e,t){var n=new Mi(e,t).prev(!1),i=new Mi(e,t).next(!1),r=N(n)||xr(n,t),o=N(i)||xr(i,t);return r&&o}(e,t)},_r=function e(t,n,i){var r=i||n;if(yn(n)&&Cr(n))return n;for(var o=n.childNodes,a=o.length-1;a>=0;a--)e(t,o[a],r);if(yn(n)){var s=n.childNodes;1===s.length&&Cr(s[0])&&n.parentNode.insertBefore(s[0],n)}return function(e){return En(e)||Mn(e)}(n)||gr(n,r)||function(e){return!!yn(e)&&e.childNodes.length>0}(n)||kr(n,r)||t.remove(n),n},Sr=vt.makeMap,Tr=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Dr=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Mr=/[<>&\"\']/g,Er=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Nr={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},Ar={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Pr={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Lr=function(e,t){var n,i,r,o={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)i=String.fromCharCode(parseInt(e[n],t)),Ar[i]||(r="&"+e[n+1]+";",o[i]=r,o[r]=i);return o}},Or=Lr("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Ir=function(e,t){return e.replace(t?Tr:Dr,(function(e){return Ar[e]||e}))},Rr=function(e,t){return e.replace(t?Tr:Dr,(function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Ar[e]||"&#"+e.charCodeAt(0)+";"}))},Br=function(e,t,n){return n=n||Or,e.replace(t?Tr:Dr,(function(e){return Ar[e]||n[e]||e}))},zr={encodeRaw:Ir,encodeAllRaw:function(e){return(""+e).replace(Mr,(function(e){return Ar[e]||e}))},encodeNumeric:Rr,encodeNamed:Br,getEncodeFunc:function(e,t){var n=Lr(t)||Or,i=Sr(e.replace(/\+/g,","));return i.named&&i.numeric?function(e,t){return e.replace(t?Tr:Dr,(function(e){return void 0!==Ar[e]?Ar[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"}))}:i.named?t?function(e,t){return Br(e,t,n)}:Br:i.numeric?Rr:Ir},decode:function(e){return e.replace(Er,(function(e,t){return t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Nr[t]||String.fromCharCode(t):Pr[e]||Or[e]||function(e){var t=bt.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e}(e)}))}},Fr={},Hr={},Wr=vt.makeMap,jr=vt.each,Ur=vt.extend,Vr=vt.explode,$r=vt.inArray,qr=function(e,t){return(e=vt.trim(e))?e.split(t||" "):[]},Xr=function(e){var t,n,i,r,o,a,s={},l=function(e,n,i){var r,o,a,l=function(e,t){var n,i,r={};for(n=0,i=e.length;n<i;n++)r[e[n]]=t||{};return r};n=n||"","string"==typeof(i=i||[])&&(i=qr(i));var u=qr(e);for(r=u.length;r--;)a={attributes:l(o=qr([t,n].join(" "))),attributesOrder:o,children:l(i,Hr)},s[u[r]]=a},u=function(e,t){var n,i,r,o,a=qr(e);n=a.length;for(var l=qr(t);n--;)for(i=s[a[n]],r=0,o=l.length;r<o;r++)i.attributes[l[r]]={},i.attributesOrder.push(l[r])};return Fr[e]?Fr[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",i="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav",i+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",i=[i,a="acronym applet basefont big font strike tt"].join(" "),jr(qr(a),(function(e){l(e,"",i)})),n=[n,o="center dir isindex noframes"].join(" "),r=[n,i].join(" "),jr(qr(o),(function(e){l(e,"",r)}))),r=r||[n,i].join(" "),l("html","manifest","head body"),l("head","","base command link meta noscript script style title"),l("title hr noscript br"),l("base","href target"),l("link","href rel media hreflang type sizes hreflang"),l("meta","name http-equiv content charset"),l("style","media type scoped"),l("script","src async defer type charset"),l("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),l("address dt dd div caption","",r),l("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",i),l("blockquote","cite",r),l("ol","reversed start type","li"),l("ul","","li"),l("li","value",r),l("dl","","dt dd"),l("a","href target rel media hreflang type",i),l("q","cite",i),l("ins del","cite datetime",r),l("img","src sizes srcset alt usemap ismap width height"),l("iframe","src name width height",r),l("embed","src type width height"),l("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),l("param","name value"),l("map","name",[r,"area"].join(" ")),l("area","alt coords shape href target rel media hreflang type"),l("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),l("colgroup","span","col"),l("col","span"),l("tbody thead tfoot","","tr"),l("tr","","td th"),l("td","colspan rowspan headers",r),l("th","colspan rowspan headers scope abbr",r),l("form","accept-charset action autocomplete enctype method name novalidate target",r),l("fieldset","disabled form name",[r,"legend"].join(" ")),l("label","form for",i),l("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),l("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?r:i),l("select","disabled form multiple name required size","option optgroup"),l("optgroup","disabled label","option"),l("option","disabled label selected value"),l("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),l("menu","type label",[r,"li"].join(" ")),l("noscript","",r),"html4"!==e&&(l("wbr"),l("ruby","",[i,"rt rp"].join(" ")),l("figcaption","",r),l("mark rt rp summary bdi","",i),l("canvas","width height",r),l("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),l("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),l("picture","","img source"),l("source","src srcset type media sizes"),l("track","kind src srclang label default"),l("datalist","",[i,"option"].join(" ")),l("article section nav aside main header footer","",r),l("hgroup","","h1 h2 h3 h4 h5 h6"),l("figure","",[r,"figcaption"].join(" ")),l("time","datetime",i),l("dialog","open",r),l("command","type label icon disabled checked radiogroup command"),l("output","for form name",i),l("progress","value max",i),l("meter","value min max low high optimum",i),l("details","open",[r,"summary"].join(" ")),l("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(u("script","language xml:space"),u("style","xml:space"),u("object","declare classid code codebase codetype archive standby align border hspace vspace"),u("embed","align name hspace vspace"),u("param","valuetype type"),u("a","charset name rev shape coords"),u("br","clear"),u("applet","codebase archive code object alt name width height align hspace vspace"),u("img","name longdesc align border hspace vspace"),u("iframe","longdesc frameborder marginwidth marginheight scrolling align"),u("font basefont","size color face"),u("input","usemap align"),u("select"),u("textarea"),u("h1 h2 h3 h4 h5 h6 div p legend caption","align"),u("ul","type compact"),u("li","type"),u("ol dl menu dir","compact"),u("pre","width xml:space"),u("hr","align noshade size width"),u("isindex","prompt"),u("table","summary width frame rules cellspacing cellpadding align bgcolor"),u("col","width align char charoff valign"),u("colgroup","width align char charoff valign"),u("thead","align char charoff valign"),u("tr","align char charoff valign bgcolor"),u("th","axis align char charoff valign nowrap bgcolor width height"),u("form","accept"),u("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),u("tfoot","align char charoff valign"),u("tbody","align char charoff valign"),u("area","nohref"),u("body","background bgcolor text link vlink alink")),"html4"!==e&&(u("input button select textarea","autofocus"),u("input textarea","placeholder"),u("a","download"),u("link script img","crossorigin"),u("img","loading"),u("iframe","sandbox seamless allowfullscreen loading")),jr(qr("a form meter progress dfn"),(function(e){s[e]&&delete s[e].children[e]})),delete s.caption.children.table,delete s.script,Fr[e]=s,s)},Yr=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),jr(e,(function(e,i){n[i]=n[i.toUpperCase()]="map"===t?Wr(e,/[, ]/):Vr(e,/[, ]/)}))),n};function Kr(e){var t={},n={},i=[],r={},o={},a=function(t,n,i){var r=e[t];return r?r=Wr(r,/[, ]/,Wr(r.toUpperCase(),/[, ]/)):(r=Fr[t])||(r=Wr(n," ",Wr(n.toUpperCase()," ")),r=Ur(r,i),Fr[t]=r),r},s=Xr((e=e||{}).schema);!1===e.verify_html&&(e.valid_elements="*[*]");var l=Yr(e.valid_styles),u=Yr(e.invalid_styles,"map"),c=Yr(e.valid_classes,"map"),d=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=a("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),p=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),m="td th iframe video audio object script code",g=a("non_empty_elements",m+" pre",h),v=a("move_caret_before_on_enter_elements",m+" table",h),y=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),b=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",y),w=a("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");jr((e.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),(function(e){o[e]=new RegExp("</"+e+"[^>]*>","gi")}));var x=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},C=function(e){var n,r,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b,w,C=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,k=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,_=/[*?+]/;if(e){var S=qr(e,",");for(t["@"]&&(y=t["@"].attributes,b=t["@"].attributesOrder),n=0,r=S.length;n<r;n++)if(s=C.exec(S[n])){if(g=s[1],d=s[2],v=s[3],c=s[5],l={attributes:p={},attributesOrder:m=[]},"#"===g&&(l.paddEmpty=!0),"-"===g&&(l.removeEmpty=!0),"!"===s[4]&&(l.removeEmptyAttrs=!0),y&&(ie(y,(function(e,t){p[t]=e})),m.push.apply(m,b)),c)for(o=0,a=(c=qr(c,"|")).length;o<a;o++)if(s=k.exec(c[o])){if(u={},h=s[1],f=s[2].replace(/[\\:]:/g,":"),g=s[3],w=s[4],"!"===h&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(f),u.required=!0),"-"===h){delete p[f],m.splice($r(m,f),1);continue}g&&("="===g&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:f,value:w}),u.defaultValue=w),":"===g&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:f,value:w}),u.forcedValue=w),"<"===g&&(u.validValues=Wr(w,"?"))),_.test(f)?(l.attributePatterns=l.attributePatterns||[],u.pattern=x(f),l.attributePatterns.push(u)):(p[f]||m.push(f),p[f]=u)}y||"@"!==d||(y=p,b=m),v&&(l.outputName=d,t[v]=l),_.test(d)?(l.pattern=x(d),i.push(l)):t[d]=l}}},k=function(e){t={},i=[],C(e),jr(s,(function(e,t){n[t]=e.children}))},_=function(e){var i=/^(~)?(.+)$/;e&&(Fr.text_block_elements=Fr.block_elements=null,jr(qr(e,","),(function(e){var o=i.exec(e),a="~"===o[1],s=a?"span":"div",l=o[2];if(n[l]=n[s],r[l]=s,a||(b[l.toUpperCase()]={},b[l]={}),!t[l]){var u=t[s];delete(u=Ur({},u)).removeEmptyAttrs,delete u.removeEmpty,t[l]=u}jr(n,(function(e,t){e[s]&&(n[t]=e=Ur({},n[t]),e[l]=e[s])}))})))},S=function(t){var i=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;Fr[e.schema]=null,t&&jr(qr(t,","),(function(e){var t,r,o=i.exec(e);o&&(r=o[1],t=r?n[o[2]]:n[o[2]]={"#comment":{}},t=n[o[2]],jr(qr(o[3],"|"),(function(e){"-"===r?delete t[e]:t[e]={}})))}))},T=function(e){var n,r=t[e];if(r)return r;for(n=i.length;n--;)if((r=i[n]).pattern.test(e))return r};e.valid_elements?k(e.valid_elements):(jr(s,(function(e,i){t[i]={attributes:e.attributes,attributesOrder:e.attributesOrder},n[i]=e.children})),"html5"!==e.schema&&jr(qr("strong/b em/i"),(function(e){var n=qr(e,"/");t[n[1]].outputName=n[0]})),jr(qr("ol ul sub sup blockquote span font a table tbody tr strong em b i"),(function(e){t[e]&&(t[e].removeEmpty=!0)})),jr(qr("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),(function(e){t[e].paddEmpty=!0})),jr(qr("span"),(function(e){t[e].removeEmptyAttrs=!0}))),_(e.custom_elements),S(e.valid_children),C(e.extended_valid_elements),S("+ol[ul|ol],+ul[ul|ol]"),jr({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(function(e,n){t[n]&&(t[n].parentsRequired=qr(e))})),e.invalid_elements&&jr(Vr(e.invalid_elements),(function(e){t[e]&&delete t[e]})),T("span")||C("span[!data-mce-type|*]");return{children:n,elements:t,getValidStyles:function(){return l},getValidClasses:function(){return c},getBlockElements:function(){return b},getInvalidStyles:function(){return u},getShortEndedElements:function(){return h},getTextBlockElements:function(){return y},getTextInlineElements:function(){return w},getBoolAttrs:function(){return p},getElementRule:T,getSelfClosingElements:function(){return f},getNonEmptyElements:function(){return g},getMoveCaretBeforeOnEnterElements:function(){return v},getWhiteSpaceElements:function(){return d},getSpecialElements:function(){return o},isValidChild:function(e,t){var i=n[e.toLowerCase()];return!(!i||!i[t.toLowerCase()])},isValid:function(e,t){var n,i,r=T(e);if(r){if(!t)return!0;if(r.attributes[t])return!0;if(n=r.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(e))return!0}return!1},getCustomElements:function(){return r},addValidElements:C,setValidElements:k,addCustomElements:_,addValidChildren:S}}var Gr,Jr,Zr,Qr,eo,to,no,io,ro,oo,ao,so,lo,uo,co,fo,ho,po=function(e,t,n,i){var r=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+r(t)+r(n)+r(i)},mo=function(e,t){var n,i,r,o=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,a=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,u={},c="\ufeff";e=e||{},t&&(i=t.getValidStyles(),r=t.getInvalidStyles());var d="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(n=0;n<d.length;n++)u[d[n]]=c+n,u[c+n]=d[n];return{toHex:function(e){return e.replace(o,po)},parse:function(t){var i,r,d,f,h,p,m,g,v={},y=e.url_converter,b=e.url_converter_scope||this,w=function(e,t,i){var r=v[e+"-top"+t];if(r){var o=v[e+"-right"+t];if(o){var a=v[e+"-bottom"+t];if(a){var s=v[e+"-left"+t];if(s){var l=[r,o,a,s];for(n=l.length-1;n--&&l[n]===l[n+1];);n>-1&&i||(v[e+t]=-1===n?l[0]:l.join(" "),delete v[e+"-top"+t],delete v[e+"-right"+t],delete v[e+"-bottom"+t],delete v[e+"-left"+t])}}}}},x=function(e){var t,n=v[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return v[e]=n[0],!0}},C=function(e){return f=!0,u[e]},k=function(e,t){return f&&(e=e.replace(/\uFEFF[0-9]/g,(function(e){return u[e]}))),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},_=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},S=function(e){return e.replace(/\\[0-9a-f]+/gi,_)},T=function(t,n,i,r,o,a){if(o=o||a)return"'"+(o=k(o)).replace(/\'/g,"\\'")+"'";if(n=k(n||i||r),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return y&&(n=y.call(b,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,C).replace(/\"[^\"]+\"|\'[^\']+\'/g,(function(e){return e.replace(/[;:]/g,C)}));i=s.exec(t);)if(s.lastIndex=i.index+i[0].length,r=i[1].replace(l,"").toLowerCase(),d=i[2].replace(l,""),r&&d){if(r=S(r),d=S(d),-1!==r.indexOf(c)||-1!==r.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===r||/expression\s*\(|\/\*|\*\//.test(d)))continue;"font-weight"===r&&"700"===d?d="bold":"color"!==r&&"background-color"!==r||(d=d.toLowerCase()),d=(d=d.replace(o,po)).replace(a,T),v[r]=f?k(d,!0):d}w("border","",!0),w("border","-width"),w("border","-color"),w("border","-style"),w("padding",""),w("margin",""),h="border",m="border-style",g="border-color",x(p="border-width")&&x(m)&&x(g)&&(v[h]=v[p]+" "+v[m]+" "+v[g],delete v[p],delete v[m],delete v[g]),"medium none"===v.border&&delete v.border,"none"===v["border-image"]&&delete v["border-image"]}return v},serialize:function(e,t){var n="",o=function(t){var r,o=i[t];if(o)for(var a=0,s=o.length;a<s;a++)t=o[a],(r=e[t])&&(n+=(n.length>0?" ":"")+t+": "+r+";")};return t&&i?(o("*"),o(t)):ie(e,(function(e,i){!e||r&&!function(e,t){var n=r["*"];return!(n&&n[e]||(n=r[t])&&n[e])}(i,t)||(n+=(n.length>0?" ":"")+i+": "+e+";")})),n}}},go=/^(?:mouse|contextmenu)|click/,vo={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1,mozPressure:1},yo=function(){return!1},bo=function(){return!0},wo=function(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n)},xo=function(e,t,n,i){e.removeEventListener?e.removeEventListener(t,n,i||!1):e.detachEvent&&e.detachEvent("on"+t,n)},Co=function(e,t){var n,i=t||{};for(n in e)vo[n]||(i[n]=e[n]);if(i.target||(i.target=i.srcElement||document),i.composedPath&&(i.composedPath=function(){return e.composedPath()}),e&&function(e){return go.test(e.type)}(e)&&void 0===e.pageX&&void 0!==e.clientX){var r=i.target.ownerDocument||document,o=r.documentElement,a=r.body;i.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),i.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}return i.preventDefault=function(){i.isDefaultPrevented=bo,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},i.stopPropagation=function(){i.isPropagationStopped=bo,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=bo,i.stopPropagation()},!1===function(e){return e.isDefaultPrevented===bo||e.isDefaultPrevented===yo}(i)&&(i.isDefaultPrevented=yo,i.isPropagationStopped=yo,i.isImmediatePropagationStopped=yo),void 0===i.metaKey&&(i.metaKey=!1),i},ko=function(e,t,n){var i=e.document,r={type:"ready"};if(n.domLoaded)t(r);else{var o=function i(){xo(e,"DOMContentLoaded",i),xo(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(r))};"complete"===i.readyState||"interactive"===i.readyState&&i.body?o():wo(e,"DOMContentLoaded",o),wo(e,"load",o)}},_o=function(){function e(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}return e.prototype.bind=function(e,t,n,i){var r,o,a,s,l,u,c,d=this,f=window,h=function(e){d.executeHandlers(Co(e||f.event),r)};if(e&&3!==e.nodeType&&8!==e.nodeType){e[d.expando]?r=e[d.expando]:(r=d.count++,e[d.expando]=r,d.events[r]={}),i=i||e;var p=t.split(" ");for(a=p.length;a--;)u=h,l=c=!1,"DOMContentLoaded"===(s=p[a])&&(s="ready"),d.domLoaded&&"ready"===s&&"complete"===e.readyState?n.call(i,Co({type:s})):(d.hasMouseEnterLeave||(l=d.mouseEnterLeave[s])&&(u=function(e){var t=e.currentTarget,n=e.relatedTarget;if(n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=Co(e||f.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,d.executeHandlers(e,r))}),d.hasFocusIn||"focusin"!==s&&"focusout"!==s||(c=!0,l="focusin"===s?"focus":"blur",u=function(e){(e=Co(e||f.event)).type="focus"===e.type?"focusin":"focusout",d.executeHandlers(e,r)}),(o=d.events[r][s])?"ready"===s&&d.domLoaded?n(Co({type:s})):o.push({func:n,scope:i}):(d.events[r][s]=o=[{func:n,scope:i}],o.fakeName=l,o.capture=c,o.nativeHandler=u,"ready"===s?ko(e,u,d):wo(e,l||s,u,c)));return e=o=null,n}},e.prototype.unbind=function(e,t,n){var i,r,o,a,s;if(!e||3===e.nodeType||8===e.nodeType)return this;var l=e[this.expando];if(l){if(s=this.events[l],t){var u=t.split(" ");for(r=u.length;r--;)if(i=s[a=u[r]]){if(n)for(o=i.length;o--;)if(i[o].func===n){var c=i.nativeHandler,d=i.fakeName,f=i.capture;(i=i.slice(0,o).concat(i.slice(o+1))).nativeHandler=c,i.fakeName=d,i.capture=f,s[a]=i}n&&0!==i.length||(delete s[a],xo(e,i.fakeName||a,i.nativeHandler,i.capture))}}else ie(s,(function(t,n){xo(e,t.fakeName||n,t.nativeHandler,t.capture)})),s={};for(a in s)if(fe(s,a))return this;delete this.events[l];try{delete e[this.expando]}catch(t){e[this.expando]=null}}return this},e.prototype.fire=function(e,t,n){var i;if(!e||3===e.nodeType||8===e.nodeType)return this;var r=Co(null,n);r.type=t,r.target=e;do{(i=e[this.expando])&&this.executeHandlers(r,i),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return this},e.prototype.clean=function(e){var t,n;if(!e||3===e.nodeType||8===e.nodeType)return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(this.unbind(e),t=(n=e.getElementsByTagName("*")).length;t--;)(e=n[t])[this.expando]&&this.unbind(e);return this},e.prototype.destroy=function(){this.events={}},e.prototype.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1},e.prototype.executeHandlers=function(e,t){var n=this.events[t],i=n&&n[e.type];if(i)for(var r=0,o=i.length;r<o;r++){var a=i[r];if(a&&!1===a.func.call(a.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}},e.Event=new e,e}(),So="sizzle"+-new Date,To=window.document,Do=0,Mo=0,Eo=la(),No=la(),Ao=la(),Po=function(e,t){return e===t&&(oo=!0),0},Lo="undefined",Oo=1<<31,Io={}.hasOwnProperty,Ro=[],Bo=Ro.pop,zo=Ro.push,Fo=Ro.push,Ho=Ro.slice,Wo=Ro.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},jo="[\\x20\\t\\r\\n\\f]",Uo="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Vo="\\["+jo+"*("+Uo+")(?:"+jo+"*([*^$|!~]?=)"+jo+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Uo+"))|)"+jo+"*\\]",$o=":("+Uo+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Vo+")*)|.*)\\)|)",qo=new RegExp("^"+jo+"+|((?:^|[^\\\\])(?:\\\\.)*)"+jo+"+$","g"),Xo=new RegExp("^"+jo+"*,"+jo+"*"),Yo=new RegExp("^"+jo+"*([>+~]|"+jo+")"+jo+"*"),Ko=new RegExp("="+jo+"*([^\\]'\"]*?)"+jo+"*\\]","g"),Go=new RegExp($o),Jo=new RegExp("^"+Uo+"$"),Zo={ID:new RegExp("^#("+Uo+")"),CLASS:new RegExp("^\\.("+Uo+")"),TAG:new RegExp("^("+Uo+"|[*])"),ATTR:new RegExp("^"+Vo),PSEUDO:new RegExp("^"+$o),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+jo+"*(even|odd|(([+-]|)(\\d*)n|)"+jo+"*(?:([+-]|)"+jo+"*(\\d+)|))"+jo+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+jo+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+jo+"*((?:-\\d)?\\d*)"+jo+"*\\)|)(?=[^-]|$)","i")},Qo=/^(?:input|select|textarea|button)$/i,ea=/^h\d$/i,ta=/^[^{]+\{\s*\[native \w/,na=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ia=/[+~]/,ra=/'|\\/g,oa=new RegExp("\\\\([\\da-f]{1,6}"+jo+"?|("+jo+")|.)","ig"),aa=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Fo.apply(Ro=Ho.call(To.childNodes),To.childNodes),Ro[To.childNodes.length].nodeType}catch(e){Fo={apply:Ro.length?function(e,t){zo.apply(e,Ho.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}var sa=function(e,t,n,i){var r,o,a,s,l,u,c,d,f,h;if((t?t.ownerDocument||t:To)!==so&&ao(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=(t=t||so).nodeType)&&9!==s)return[];if(uo&&!i){if(r=na.exec(e))if(a=r[1]){if(9===s){if(!(o=t.getElementById(a))||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&ho(t,o)&&o.id===a)return n.push(o),n}else{if(r[2])return Fo.apply(n,t.getElementsByTagName(e)),n;if((a=r[3])&&Gr.getElementsByClassName)return Fo.apply(n,t.getElementsByClassName(a)),n}if(Gr.qsa&&(!co||!co.test(e))){if(d=c=So,f=t,h=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=eo(e),(c=t.getAttribute("id"))?d=c.replace(ra,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",l=u.length;l--;)u[l]=d+pa(u[l]);f=ia.test(e)&&fa(t.parentNode)||t,h=u.join(",")}if(h)try{return Fo.apply(n,f.querySelectorAll(h)),n}catch(e){}finally{c||t.removeAttribute("id")}}}return no(e.replace(qo,"$1"),t,n,i)};function la(){var e=[];return function t(n,i){return e.push(n+" ")>Jr.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ua(e){return e[So]=!0,e}function ca(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Oo)-(~e.sourceIndex||Oo);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function da(e){return ua((function(t){return t=+t,ua((function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))}))}))}function fa(e){return e&&n(e.getElementsByTagName)!==Lo&&e}function ha(){}function pa(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function ma(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=Mo++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,l,u=[Do,o];if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if((s=(l=t[So]||(t[So]={}))[i])&&s[0]===Do&&s[1]===o)return u[2]=s[2];if(l[i]=u,u[2]=e(t,n,a))return!0}}}function ga(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function va(e,t,n,i,r){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),u&&t.push(s)));return a}function ya(e,t,n,i,r,o){return i&&!i[So]&&(i=ya(i)),r&&!r[So]&&(r=ya(r,o)),ua((function(o,a,s,l){var u,c,d,f=[],h=[],p=a.length,m=o||function(e,t,n){for(var i=0,r=t.length;i<r;i++)sa(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!o&&t?m:va(m,f,e,s,l),v=n?r||(o?e:p||i)?[]:a:g;if(n&&n(g,v,s,l),i)for(u=va(v,h),i(u,[],s,l),c=u.length;c--;)(d=u[c])&&(v[h[c]]=!(g[h[c]]=d));if(o){if(r||e){if(r){for(u=[],c=v.length;c--;)(d=v[c])&&u.push(g[c]=d);r(null,v=[],u,l)}for(c=v.length;c--;)(d=v[c])&&(u=r?Wo.call(o,d):f[c])>-1&&(o[u]=!(a[u]=d))}}else v=va(v===a?v.splice(p,v.length):v),r?r(null,a,v,l):Fo.apply(a,v)}))}function ba(e){for(var t,n,i,r=e.length,o=Jr.relative[e[0].type],a=o||Jr.relative[" "],s=o?1:0,l=ma((function(e){return e===t}),a,!0),u=ma((function(e){return Wo.call(t,e)>-1}),a,!0),c=[function(e,n,i){return!o&&(i||n!==io)||((t=n).nodeType?l(e,n,i):u(e,n,i))}];s<r;s++)if(n=Jr.relative[e[s].type])c=[ma(ga(c),n)];else{if((n=Jr.filter[e[s].type].apply(null,e[s].matches))[So]){for(i=++s;i<r&&!Jr.relative[e[i].type];i++);return ya(s>1&&ga(c),s>1&&pa(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(qo,"$1"),n,s<i&&ba(e.slice(s,i)),i<r&&ba(e=e.slice(i)),i<r&&pa(e))}c.push(n)}return ga(c)}Gr=sa.support={},Qr=sa.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},ao=sa.setDocument=function(e){var t,i=e?e.ownerDocument||e:To,r=i.defaultView;return i!==so&&9===i.nodeType&&i.documentElement?(so=i,lo=i.documentElement,uo=!Qr(i),r&&r!==function(e){try{return e.top}catch(e){}return null}(r)&&(r.addEventListener?r.addEventListener("unload",(function(){ao()}),!1):r.attachEvent&&r.attachEvent("onunload",(function(){ao()}))),Gr.attributes=!0,Gr.getElementsByTagName=!0,Gr.getElementsByClassName=ta.test(i.getElementsByClassName),Gr.getById=!0,Jr.find.ID=function(e,t){if(n(t.getElementById)!==Lo&&uo){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},Jr.filter.ID=function(e){var t=e.replace(oa,aa);return function(e){return e.getAttribute("id")===t}},Jr.find.TAG=Gr.getElementsByTagName?function(e,t){if(n(t.getElementsByTagName)!==Lo)return t.getElementsByTagName(e)}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},Jr.find.CLASS=Gr.getElementsByClassName&&function(e,t){if(uo)return t.getElementsByClassName(e)},fo=[],co=[],Gr.disconnectedMatch=!0,co=co.length&&new RegExp(co.join("|")),fo=fo.length&&new RegExp(fo.join("|")),t=ta.test(lo.compareDocumentPosition),ho=t||ta.test(lo.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Po=t?function(e,t){if(e===t)return oo=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!Gr.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===To&&ho(To,e)?-1:t===i||t.ownerDocument===To&&ho(To,t)?1:ro?Wo.call(ro,e)-Wo.call(ro,t):0:4&n?-1:1)}:function(e,t){if(e===t)return oo=!0,0;var n,r=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(!o||!a)return e===i?-1:t===i?1:o?-1:a?1:ro?Wo.call(ro,e)-Wo.call(ro,t):0;if(o===a)return ca(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?ca(s[r],l[r]):s[r]===To?-1:l[r]===To?1:0},i):so},sa.matches=function(e,t){return sa(e,null,null,t)},sa.matchesSelector=function(e,t){if((e.ownerDocument||e)!==so&&ao(e),t=t.replace(Ko,"='$1']"),Gr.matchesSelector&&uo&&(!fo||!fo.test(t))&&(!co||!co.test(t)))try{var n=undefined.call(e,t);if(n||Gr.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return sa(t,so,null,[e]).length>0},sa.contains=function(e,t){return(e.ownerDocument||e)!==so&&ao(e),ho(e,t)},sa.attr=function(e,t){(e.ownerDocument||e)!==so&&ao(e);var n=Jr.attrHandle[t.toLowerCase()],i=n&&Io.call(Jr.attrHandle,t.toLowerCase())?n(e,t,!uo):void 0;return void 0!==i?i:Gr.attributes||!uo?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},sa.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},sa.uniqueSort=function(e){var t,n=[],i=0,r=0;if(oo=!Gr.detectDuplicates,ro=!Gr.sortStable&&e.slice(0),e.sort(Po),oo){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return ro=null,e},Zr=sa.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=Zr(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=Zr(t);return n},Jr=sa.selectors={cacheLength:50,createPseudo:ua,match:Zo,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(oa,aa),e[3]=(e[3]||e[4]||e[5]||"").replace(oa,aa),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||sa.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&sa.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Zo.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Go.test(n)&&(t=eo(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(oa,aa).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Eo[e+" "];return t||(t=new RegExp("(^|"+jo+")"+e+"("+jo+"|$)"))&&Eo(e,(function(e){return t.test("string"==typeof e.className&&e.className||n(e.getAttribute)!==Lo&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var r=sa.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,f,h,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&y){for(h=(u=(c=g[So]||(g[So]={}))[e]||[])[0]===Do&&u[1],f=u[0]===Do&&u[2],d=h&&g.childNodes[h];d=++h&&d&&d[m]||(f=h=0)||p.pop();)if(1===d.nodeType&&++f&&d===t){c[e]=[Do,h,f];break}}else if(y&&(u=(t[So]||(t[So]={}))[e])&&u[0]===Do)f=u[1];else for(;(d=++h&&d&&d[m]||(f=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[So]||(d[So]={}))[e]=[Do,f]),d!==t)););return(f-=r)===i||f%i==0&&f/i>=0}}},PSEUDO:function(e,t){var n,i=Jr.pseudos[e]||Jr.setFilters[e.toLowerCase()]||sa.error("unsupported pseudo: "+e);return i[So]?i(t):i.length>1?(n=[e,e,"",t],Jr.setFilters.hasOwnProperty(e.toLowerCase())?ua((function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=Wo.call(e,o[a])]=!(n[r]=o[a])})):function(e){return i(e,0,n)}):i}},pseudos:{not:ua((function(e){var t=[],n=[],i=to(e.replace(qo,"$1"));return i[So]?ua((function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}})),has:ua((function(e){return function(t){return sa(e,t).length>0}})),contains:ua((function(e){return e=e.replace(oa,aa),function(t){return(t.textContent||t.innerText||Zr(t)).indexOf(e)>-1}})),lang:ua((function(e){return Jo.test(e||"")||sa.error("unsupported lang: "+e),e=e.replace(oa,aa).toLowerCase(),function(t){var n;do{if(n=uo?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===lo},focus:function(e){return e===so.activeElement&&(!so.hasFocus||so.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!Jr.pseudos.empty(e)},header:function(e){return ea.test(e.nodeName)},input:function(e){return Qo.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:da((function(){return[0]})),last:da((function(e,t){return[t-1]})),eq:da((function(e,t,n){return[n<0?n+t:n]})),even:da((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:da((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:da((function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e})),gt:da((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}},Jr.pseudos.nth=Jr.pseudos.eq,W(["radio","checkbox","file","password","image"],(function(e){Jr.pseudos[e]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(e)})),W(["submit","reset"],(function(e){Jr.pseudos[e]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(e)})),ha.prototype=Jr.filters=Jr.pseudos,Jr.setFilters=new ha,eo=sa.tokenize=function(e,t){var n,i,r,o,a,s,l,u=No[e+" "];if(u)return t?0:u.slice(0);for(a=e,s=[],l=Jr.preFilter;a;){for(o in n&&!(i=Xo.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(r=[])),n=!1,(i=Yo.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(qo," ")}),a=a.slice(n.length)),Jr.filter)Jr.filter.hasOwnProperty(o)&&(!(i=Zo[o].exec(a))||l[o]&&!(i=l[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),a=a.slice(n.length)));if(!n)break}return t?a.length:a?sa.error(e):No(e,s).slice(0)},to=sa.compile=function(e,t){var n,i=[],r=[],o=Ao[e+" "];if(!o){for(t||(t=eo(e)),n=t.length;n--;)(o=ba(t[n]))[So]?i.push(o):r.push(o);o=Ao(e,function(e,t){var n=t.length>0,i=e.length>0,r=function(r,o,a,s,l){var u,c,d,f=0,h="0",p=r&&[],m=[],g=io,v=r||i&&Jr.find.TAG("*",l),y=Do+=null==g?1:Math.random()||.1,b=v.length;for(l&&(io=o!==so&&o);h!==b&&null!=(u=v[h]);h++){if(i&&u){for(c=0;d=e[c++];)if(d(u,o,a)){s.push(u);break}l&&(Do=y)}n&&((u=!d&&u)&&f--,r&&p.push(u))}if(f+=h,n&&h!==f){for(c=0;d=t[c++];)d(p,m,o,a);if(r){if(f>0)for(;h--;)p[h]||m[h]||(m[h]=Bo.call(s));m=va(m)}Fo.apply(s,m),l&&!r&&m.length>0&&f+t.length>1&&sa.uniqueSort(s)}return l&&(Do=y,io=g),p};return n?ua(r):r}(r,i)),o.selector=e}return o},no=sa.select=function(e,t,n,i){var r,o,a,s,l,u="function"==typeof e&&e,c=!i&&eo(e=u.selector||e);if(n=n||[],1===c.length){if((o=c[0]=c[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&Gr.getById&&9===t.nodeType&&uo&&Jr.relative[o[1].type]){if(!(t=(Jr.find.ID(a.matches[0].replace(oa,aa),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=Zo.needsContext.test(e)?0:o.length;r--&&(a=o[r],!Jr.relative[s=a.type]);)if((l=Jr.find[s])&&(i=l(a.matches[0].replace(oa,aa),ia.test(o[0].type)&&fa(t.parentNode)||t))){if(o.splice(r,1),!(e=i.length&&pa(o)))return Fo.apply(n,i),n;break}}return(u||to(e,c))(i,t,!uo,n,ia.test(e)&&fa(t.parentNode)||t),n},Gr.sortStable=So.split("").sort(Po).join("")===So,Gr.detectDuplicates=!!oo,ao(),Gr.sortDetached=!0;var wa=document,xa=Array.prototype.push,Ca=Array.prototype.slice,ka=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,_a=_o.Event,Sa=vt.makeMap("children,contents,next,prev"),Ta=function(e){return void 0!==e},Da=function(e){return"string"==typeof e},Ma=function(e,t){var n,i=(t=t||wa).createElement("div"),r=t.createDocumentFragment();for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return r},Ea=function e(t,n,i,r){var o;if(Da(n))n=Ma(n,Ua(t[0]));else if(n.length&&!n.nodeType){if(n=Xa.makeArray(n),r)for(o=n.length-1;o>=0;o--)e(t,n[o],i,r);else for(o=0;o<n.length;o++)e(t,n[o],i,r);return t}if(n.nodeType)for(o=t.length;o--;)i.call(t[o],n);return t},Na=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},Aa=function(e,t,n){var i,r;return t=Xa(t)[0],e.each((function(){var e=this;n&&i===e.parentNode||(i=e.parentNode,r=t.cloneNode(!1),e.parentNode.insertBefore(r,e)),r.appendChild(e)})),e},Pa=vt.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),La=vt.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Oa={for:"htmlFor",class:"className",readonly:"readOnly"},Ia={float:"cssFloat"},Ra={},Ba={},za=function(e,t){return new Xa.fn.init(e,t)},Fa=/^\s*|\s*$/g,Ha=function(e){return null==e?"":(""+e).replace(Fa,"")},Wa=function(e,t){var n,i,r,o;if(e)if(void 0===(n=e.length)){for(i in e)if(e.hasOwnProperty(i)&&(o=e[i],!1===t.call(o,i,o)))break}else for(r=0;r<n&&(o=e[r],!1!==t.call(o,r,o));r++);return e},ja=function(e,t){var n=[];return Wa(e,(function(e,i){t(i,e)&&n.push(i)})),n},Ua=function(e){return e?9===e.nodeType?e:e.ownerDocument:wa};za.fn=za.prototype={constructor:za,selector:"",context:null,length:0,init:function(e,t){var n,i,r=this;if(!e)return r;if(e.nodeType)return r.context=r[0]=e,r.length=1,r;if(t&&t.nodeType)r.context=t;else{if(t)return Xa(e).attr(t);r.context=t=document}if(Da(e)){if(r.selector=e,!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ka.exec(e)))return Xa(t).find(e);if(n[1])for(i=Ma(e,Ua(t)).firstChild;i;)xa.call(r,i),i=i.nextSibling;else{if(!(i=Ua(t).getElementById(n[2])))return r;if(i.id!==n[2])return r.find(e);r.length=1,r[0]=i}}else this.add(e,!1);return r},toArray:function(){return vt.toArray(this)},add:function(e,t){var n,i,r=this;if(Da(e))return r.add(Xa(e));if(!1!==t)for(n=Xa.unique(r.toArray().concat(Xa.makeArray(e))),r.length=n.length,i=0;i<n.length;i++)r[i]=n[i];else xa.apply(r,Xa.makeArray(e));return r},attr:function(e,t){var i,r=this;if("object"===n(e))Wa(e,(function(e,t){r.attr(e,t)}));else{if(!Ta(t)){if(r[0]&&1===r[0].nodeType){if((i=Ra[e])&&i.get)return i.get(r[0],e);if(La[e])return r.prop(e)?e:void 0;null===(t=r[0].getAttribute(e,2))&&(t=void 0)}return t}this.each((function(){var n;if(1===this.nodeType){if((n=Ra[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}}))}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var i=this;if("object"===n(e=Oa[e]||e))Wa(e,(function(e,t){i.prop(e,t)}));else{if(!Ta(t))return i[0]&&i[0].nodeType&&e in i[0]?i[0][e]:t;this.each((function(){1===this.nodeType&&(this[e]=t)}))}return i},css:function(e,t){var i,r,o=this,a=function(e){return e.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()}))},s=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e}))};if("object"===n(e))Wa(e,(function(e,t){o.css(e,t)}));else if(Ta(t))e=a(e),"number"!=typeof t||Pa[e]||(t=t.toString()+"px"),o.each((function(){var n=this.style;if((r=Ba[e])&&r.set)r.set(this,t);else{try{this.style[Ia[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(s(e)):n.removeAttribute(e))}}));else{if(i=o[0],(r=Ba[e])&&r.get)return r.get(i);if(!i.ownerDocument.defaultView)return i.currentStyle?i.currentStyle[a(e)]:"";try{return i.ownerDocument.defaultView.getComputedStyle(i,null).getPropertyValue(s(e))}catch(e){return}}return o},remove:function(){for(var e,t=this.length;t--;)e=this[t],_a.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(Ta(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(i){Xa(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(Ta(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return Ea(this,arguments,(function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)}))},prepend:function(){return Ea(this,arguments,(function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)}),!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?Ea(e,arguments,(function(e){this.parentNode.insertBefore(e,this)})):e},after:function(){var e=this;return e[0]&&e[0].parentNode?Ea(e,arguments,(function(e){this.parentNode.insertBefore(e,this.nextSibling)}),!0):e},appendTo:function(e){return Xa(e).append(this),this},prependTo:function(e){return Xa(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return Aa(this,e)},wrapAll:function(e){return Aa(this,e,!0)},wrapInner:function(e){return this.each((function(){Xa(this).contents().wrapAll(e)})),this},unwrap:function(){return this.parent().each((function(){Xa(this).replaceWith(this.childNodes)}))},clone:function(){var e=[];return this.each((function(){e.push(this.cloneNode(!0))})),Xa(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e||(-1!==e.indexOf(" ")?Wa(e.split(" "),(function(){n.toggleClass(this,t)})):n.each((function(n,i){var r=Na(i,e);if(r!==t){var o=i.className;r?i.className=Ha((" "+o+" ").replace(" "+e+" "," ")):i.className+=o?" "+e:e}}))),n},hasClass:function(e){return Na(this[0],e)},each:function(e){return Wa(this,e)},on:function(e,t){return this.each((function(){_a.bind(this,e,t)}))},off:function(e,t){return this.each((function(){_a.unbind(this,e,t)}))},trigger:function(e){return this.each((function(){"object"===n(e)?_a.fire(this,e.type,e):_a.fire(this,e)}))},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new Xa(Ca.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,i=[];for(t=0,n=this.length;t<n;t++)Xa.find(e,this[t],i);return Xa(i)},filter:function(e){return Xa("function"==typeof e?ja(this.toArray(),(function(t,n){return e(n,t)})):Xa.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof Xa&&(e=e[0]),this.each((function(n,i){for(;i;){if("string"==typeof e&&Xa(i).is(e)){t.push(i);break}if(i===e){t.push(i);break}i=i.parentNode}})),Xa(t)},offset:function(e){var t,n,i,r,o=0,a=0;return e?this.css(e):((t=this[0])&&(i=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(o=(r=t.getBoundingClientRect()).left+(i.scrollLeft||n.body.scrollLeft)-i.clientLeft,a=r.top+(i.scrollTop||n.body.scrollTop)-i.clientTop)),{left:o,top:a})},push:xa,sort:Array.prototype.sort,splice:Array.prototype.splice},vt.extend(za,{extend:vt.extend,makeArray:function(e){return(t=e)&&t===t.window||e.nodeType?[e]:vt.toArray(e);var t},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:vt.isArray,each:Wa,trim:Ha,grep:ja,find:sa,expr:sa.selectors,unique:sa.uniqueSort,text:sa.getText,contains:sa.contains,filter:function(e,t,n){var i=t.length;for(n&&(e=":not("+e+")");i--;)1!==t[i].nodeType&&t.splice(i,1);return t=1===t.length?Xa.find.matchesSelector(t[0],e)?[t[0]]:[]:Xa.find.matches(e,t)}});var Va=function(e,t,n){var i=[],r=e[t];for("string"!=typeof n&&n instanceof Xa&&(n=n[0]);r&&9!==r.nodeType;){if(void 0!==n){if(r===n)break;if("string"==typeof n&&Xa(r).is(n))break}1===r.nodeType&&i.push(r),r=r[t]}return i},$a=function(e,t,n,i){var r=[];for(i instanceof Xa&&(i=i[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==i){if(e===i)break;if("string"==typeof i&&Xa(e).is(i))break}r.push(e)}return r},qa=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};Wa({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Va(e,"parentNode")},next:function(e){return qa(e,"nextSibling",1)},prev:function(e){return qa(e,"previousSibling",1)},children:function(e){return $a(e.firstChild,"nextSibling",1)},contents:function(e){return vt.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},(function(e,t){za.fn[e]=function(n){var i=[];this.each((function(){var e=t.call(i,this,n,i);e&&(Xa.isArray(e)?i.push.apply(i,e):i.push(e))})),this.length>1&&(Sa[e]||(i=Xa.unique(i)),0===e.indexOf("parents")&&(i=i.reverse()));var r=Xa(i);return n?r.filter(n):r}})),Wa({parentsUntil:function(e,t){return Va(e,"parentNode",t)},nextUntil:function(e,t){return $a(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return $a(e,"previousSibling",1,t).slice(1)}},(function(e,t){za.fn[e]=function(n,i){var r=[];this.each((function(){var e=t.call(r,this,n,r);e&&(Xa.isArray(e)?r.push.apply(r,e):r.push(e))})),this.length>1&&(r=Xa.unique(r),0!==e.indexOf("parents")&&"prevUntil"!==e||(r=r.reverse()));var o=Xa(r);return i?o.filter(i):o}})),za.fn.is=function(e){return!!e&&this.filter(e).length>0},za.fn.init.prototype=za.fn,za.overrideDefaults=function(e){var t,n=function n(i,r){return t=t||e(),0===arguments.length&&(i=t.element),r||(r=t.context),new n.fn.init(i,r)};return Xa.extend(n,this),n},za.attrHooks=Ra,za.cssHooks=Ba;var Xa=za,Ya=vt.each,Ka=vt.grep,Ga=ht.ie,Ja=/^([a-z0-9],?)+$/i,Za=function(e,t){var n=t.attr("style"),i=e.serialize(e.parse(n),t[0].nodeName);i||(i=null),t.attr("data-mce-style",i)},Qa=function(e,t){var n,i,r=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)i=e.nodeType,(!t||3!==i||i!==n&&e.nodeValue.length)&&(r++,n=i);return r};function es(e,t){var i=this;void 0===t&&(t={});var r={},o=window,a={},s=0,l=Di.forElement(bt.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),c=[],d=t.schema?t.schema:Kr({}),f=mo({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),h=t.ownEvents?new _o:_o.Event,p=d.getBlockElements(),m=Xa.overrideDefaults((function(){return{context:e,element:j.getRoot()}})),g=function(t){return t&&e&&S(t)?e.getElementById(t):t},v=function(e){return m("string"==typeof e?g(e):e)},y=function(e,t,n){var i,r,o=v(e);return o.length&&(r=(i=U[t])&&i.get?i.get(o,t):o.attr(t)),void 0===r&&(r=n||""),r},b=function(e){var t=g(e);return t?t.attributes:[]},w=function(e,n,i){""===i&&(i=null);var r=v(e),o=r.attr(n);if(r.length){var a=U[n];a&&a.set?a.set(r,i,n):r.attr(n,i),o!==i&&t.onSetAttrib&&t.onSetAttrib({attrElm:r,attrName:n,attrValue:i})}},x=function(){return t.root_element||e.body},C=function(t,n){return Gn(e.body,g(t),n)},k=function(e,t,n){var i=v(e);return n?i.css(t):("float"===(t=t.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()})))&&(t=ht.browser.isIE()?"styleFloat":"cssFloat"),i[0]&&i[0].style?i[0].style[t]:void 0)},_=function(e){var t,n;return e=g(e),t=k(e,"width"),n=k(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},T=function(e,t){var n;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(Ja.test(t)){var i=t.toLowerCase().split(/,/),r=e.nodeName.toLowerCase();for(n=i.length-1;n>=0;n--)if(i[n]===r)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var o=Array.isArray(e)?e:[e];return sa(t,o[0].ownerDocument||o[0],null,o).length>0},D=function(e,t,n,i){var r,o=[],a=g(e);for(i=void 0===i,n=n||("BODY"!==x().nodeName?x().parentNode:null),vt.is(t,"string")&&(r=t,t="*"===t?function(e){return 1===e.nodeType}:function(e){return T(e,r)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!i)return[a];o.push(a)}a=a.parentNode}return i?o:null},M=function(e,t,n){var i=t;if(e)for("string"==typeof t&&(i=function(e){return T(e,t)}),e=e[n];e;e=e[n])if("function"==typeof i&&i(e))return e;return null},E=function(e,t,n){var r,o="string"==typeof e?g(e):e;if(!o)return!1;if(vt.isArray(o)&&(o.length||0===o.length))return r=[],Ya(o,(function(e,i){e&&r.push(t.call(n,"string"==typeof e?g(e):e,i))})),r;var a=n||i;return t.call(a,o)},N=function(e,t){v(e).each((function(e,n){Ya(t,(function(e,t){w(n,t,e)}))}))},A=function(e,t){var n=v(e);Ga?n.each((function(e,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(e){Xa("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}})):n.html(t)},P=function(t,n,i,r,o){return E(t,(function(t){var a="string"==typeof n?e.createElement(n):n;return N(a,i),r&&("string"!=typeof r&&r.nodeType?a.appendChild(r):"string"==typeof r&&A(a,r)),o?a:t.appendChild(a)}))},L=function(t,n,i){return P(e.createElement(t),t,n,i,!0)},O=zr.encodeAllRaw,I=function(e,t){var n=v(e);return t?n.each((function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)})).remove():n.remove(),n.length>1?n.toArray():n[0]},R=function(e,t,n){v(e).toggleClass(t,n).each((function(){""===this.className&&Xa(this).attr("class",null)}))},B=function(e,t,n){return E(t,(function(t){return vt.is(t,"array")&&(e=e.cloneNode(!0)),n&&Ya(Ka(t.childNodes),(function(t){e.appendChild(t)})),t.parentNode.replaceChild(e,t)}))},z=function(e){if(yn(e)){var t="a"===e.nodeName.toLowerCase()&&!y(e,"href")&&y(e,"id");if(y(e,"name")||y(e,"data-mce-bookmark")||t)return!0}return!1},F=function(){return e.createRange()},H=function(e){if(e&&yn(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},j={doc:e,settings:t,win:o,files:a,stdMode:!0,boxModel:!0,styleSheetLoader:l,boundEvents:c,styles:f,schema:d,events:h,isBlock:function(e){if("string"==typeof e)return!!p[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!p[e.nodeName])}return!1},$:m,$$:v,root:null,clone:function(t,n){if(!Ga||1!==t.nodeType||n)return t.cloneNode(n);var i=e.createElement(t.nodeName);return Ya(b(t),(function(e){w(i,e.nodeName,y(t,e.nodeName))})),i},getRoot:x,getViewPort:function(e){var t=mn(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:function(e){e=g(e);var t=C(e),n=_(e);return{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:_,getParent:function(e,t,n){var i=D(e,t,n,!1);return i&&i.length>0?i[0]:null},getParents:D,get:g,getNext:function(e,t){return M(e,t,"nextSibling")},getPrev:function(e,t){return M(e,t,"previousSibling")},select:function(n,i){return sa(n,g(i)||t.root_element||e,[])},is:T,add:P,create:L,createHTML:function(e,t,n){var i,r="";for(i in r+="<"+e,t)t.hasOwnProperty(i)&&null!==t[i]&&void 0!==t[i]&&(r+=" "+i+'="'+O(t[i])+'"');return void 0!==n?r+">"+n+"</"+e+">":r+" />"},createFragment:function(t){var n,i=e.createElement("div"),r=e.createDocumentFragment();for(r.appendChild(i),t&&(i.innerHTML=t);n=i.firstChild;)r.appendChild(n);return r.removeChild(i),r},remove:I,setStyle:function(e,n,i){var r=S(n)?v(e).css(n,i):v(e).css(n);t.update_styles&&Za(f,r)},getStyle:k,setStyles:function(e,n){var i=v(e).css(n);t.update_styles&&Za(f,i)},removeAllAttribs:function(e){return E(e,(function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))}))},setAttrib:w,setAttribs:N,getAttrib:y,getPos:C,parseStyle:function(e){return f.parse(e)},serializeStyle:function(e,t){return f.serialize(e,t)},addStyle:function(t){var n,i;if(j!==es.DOM&&e===document){if(r[t])return;r[t]=!0}(i=e.getElementById("mceDefaultStyles"))||((i=e.createElement("style")).id="mceDefaultStyles",i.type="text/css",(n=e.getElementsByTagName("head")[0]).firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)),i.styleSheet?i.styleSheet.cssText+=t:i.appendChild(e.createTextNode(t))},loadCSS:function(e){e||(e=""),W(e.split(","),(function(e){a[e]=!0,l.load(e,u)}))},addClass:function(e,t){v(e).addClass(t)},removeClass:function(e,t){R(e,t,!1)},hasClass:function(e,t){return v(e).hasClass(t)},toggleClass:R,show:function(e){v(e).show()},hide:function(e){v(e).hide()},isHidden:function(e){return"none"===v(e).css("display")},uniqueId:function(e){return(e||"mce_")+s++},setHTML:A,getOuterHTML:function(e){var t="string"==typeof e?g(e):e;return yn(t)?t.outerHTML:Xa("<div></div>").append(Xa(t).clone()).html()},setOuterHTML:function(e,t){v(e).each((function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}I(Xa(this).html(t),!0)}))},decode:zr.decode,encode:O,insertAfter:function(e,t){var n=g(t);return E(e,(function(e){var t=n.parentNode,i=n.nextSibling;return i?t.insertBefore(e,i):t.appendChild(e),e}))},replace:B,rename:function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=L(t),Ya(b(e),(function(t){w(n,t.nodeName,y(e,t.nodeName))})),B(n,e,!0)),n||e},findCommonAncestor:function(e,t){for(var n,i=e;i;){for(n=t;n&&i!==n;)n=n.parentNode;if(i===n)break;i=i.parentNode}return!i&&e.ownerDocument?e.ownerDocument.documentElement:i},toHex:function(e){return f.toHex(vt.trim(e))},run:E,getAttribs:b,isEmpty:function(e,t){var n,i,r=0;if(z(e))return!1;if(e=e.firstChild){var o=new Mi(e,e.parentNode),a=d?d.getWhiteSpaceElements():{};t=t||(d?d.getNonEmptyElements():null);do{if(n=e.nodeType,yn(e)){var s=e.getAttribute("data-mce-bogus");if(s){e=o.next("all"===s);continue}if(i=e.nodeName.toLowerCase(),t&&t[i]){if("br"===i){r++,e=o.next();continue}return!1}if(z(e))return!1}if(8===n)return!1;if(3===n&&!pr(e.nodeValue))return!1;if(3===n&&e.parentNode&&a[e.parentNode.nodeName]&&pr(e.nodeValue))return!1;e=o.next()}while(e)}return r<=1},createRng:F,nodeIndex:Qa,split:function(e,t,n){var i,r,o,a=F();if(e&&t)return a.setStart(e.parentNode,Qa(e)),a.setEnd(t.parentNode,Qa(t)),i=a.extractContents(),(a=F()).setStart(t.parentNode,Qa(t)+1),a.setEnd(e.parentNode,Qa(e)+1),r=a.extractContents(),(o=e.parentNode).insertBefore(_r(j,i),e),n?o.insertBefore(n,e):o.insertBefore(t,e),o.insertBefore(_r(j,r),e),I(e),n||t},bind:function n(i,r,a,s){if(vt.isArray(i)){for(var l=i.length,u=[];l--;)u[l]=n(i[l],r,a,s);return u}return!t.collect||i!==e&&i!==o||c.push([i,r,a,s]),h.bind(i,r,a,s||j)},unbind:function t(n,i,r){if(vt.isArray(n)){for(var a=n.length,s=[];a--;)s[a]=t(n[a],i,r);return s}if(c.length>0&&(n===e||n===o))for(a=c.length;a--;){var l=c[a];n!==l[0]||i&&i!==l[1]||r&&r!==l[2]||h.unbind(l[0],l[1],l[2])}return h.unbind(n,i,r)},fire:function(e,t,n){return h.fire(e,t,n)},getContentEditable:H,getContentEditableParent:function(e){for(var t=x(),n=null;e&&e!==t&&null===(n=H(e));e=e.parentNode);return n},destroy:function(){if(c.length>0)for(var e=c.length;e--;){var t=c[e];h.unbind(t[0],t[1],t[2])}ie(a,(function(e,t){l.unload(t),delete a[t]})),sa.setDocument&&sa.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}},U=function(e,t,i){var r=t.keep_values,o={set:function(e,n,r){t.url_converter&&(n=t.url_converter.call(t.url_converter_scope||i(),n,r,e[0])),e.attr("data-mce-"+r,n).attr(r,n)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},a={style:{set:function(t,i){null===i||"object"!==n(i)?(r&&t.attr("data-mce-style",i),null!==i&&"string"==typeof i?(t.removeAttr("style"),t.css(e.parse(i))):t.attr("style",i)):t.css(i)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return e.serialize(e.parse(n),t[0].nodeName)}}};return r&&(a.href=a.src=o),a}(f,t,(function(){return j}));return j}!function(e){e.DOM=e(document),e.nodeIndex=Qa}(es||(es={}));var ts=es,ns=ts.DOM,is=vt.each,rs=vt.grep,os=function(){function e(e){void 0===e&&(e={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=e}return e.prototype._setReferrerPolicy=function(e){this.settings.referrerPolicy=e},e.prototype.loadScript=function(e,t,n){var i,r=ns,o=r.uniqueId();(i=document.createElement("script")).id=o,i.type="text/javascript",i.src=vt._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(i,"referrerpolicy",this.settings.referrerPolicy),i.onload=function(){r.remove(o),i&&(i.onreadystatechange=i.onload=i=null),t()},i.onerror=function(){P(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(i)},e.prototype.isDone=function(e){return 2===this.states[e]},e.prototype.markDone=function(e){this.states[e]=2},e.prototype.add=function(e,t,n,i){void 0===this.states[e]&&(this.queue.push(e),this.states[e]=0),t&&(this.scriptLoadedCallbacks[e]||(this.scriptLoadedCallbacks[e]=[]),this.scriptLoadedCallbacks[e].push({success:t,failure:i,scope:n||this}))},e.prototype.load=function(e,t,n,i){return this.add(e,t,n,i)},e.prototype.remove=function(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]},e.prototype.loadQueue=function(e,t,n){this.loadScripts(this.queue,e,t,n)},e.prototype.loadScripts=function(e,t,n,i){var r=this,o=[],a=function(e,t){is(r.scriptLoadedCallbacks[t],(function(t){P(t[e])&&t[e].call(t.scope)})),r.scriptLoadedCallbacks[t]=void 0};r.queueLoadedCallbacks.push({success:t,failure:i,scope:n||this});!function t(){var n=rs(e);if(e.length=0,is(n,(function(e){2!==r.states[e]?3!==r.states[e]?1!==r.states[e]&&(r.states[e]=1,r.loading++,r.loadScript(e,(function(){r.states[e]=2,r.loading--,a("success",e),t()}),(function(){r.states[e]=3,r.loading--,o.push(e),a("failure",e),t()}))):a("failure",e):a("success",e)})),!r.loading){var i=r.queueLoadedCallbacks.slice(0);r.queueLoadedCallbacks.length=0,is(i,(function(e){0===o.length?P(e.success)&&e.success.call(e.scope):P(e.failure)&&e.failure.call(e.scope,o)}))}}()},e.ScriptLoader=new e,e}(),as=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},ss={},ls=as("en"),us=function(){return de(ss,ls.get())},cs={getData:function(){return re(ss,(function(e){return xe({},e)}))},setCode:function(e){e&&ls.set(e)},getCode:function(){return ls.get()},add:function(e,t){var n=ss[e];n||(ss[e]=n={}),ie(t,(function(e,t){n[t.toLowerCase()]=e}))},translate:function(e){var t,n=us().getOr({}),i=function(e){return P(e)?Object.prototype.toString.call(e):r(e)?"":""+e},r=function(e){return""===e||null==e},o=function(e){var t=i(e);return de(n,t.toLowerCase()).map(i).getOr(t)},a=function(e){return e.replace(/{context:\w+}$/,"")};if(r(e))return"";if(T(t=e)&&fe(t,"raw"))return i(e.raw);if(function(e){return D(e)&&e.length>1}(e)){var s=e.slice(1);return a(o(e[0]).replace(/\{([0-9]+)\}/g,(function(e,t){return fe(s,t)?i(s[t]):e})))}return a(o(e))},isRtl:function(){return us().bind((function(e){return de(e,"_dir")})).exists((function(e){return"rtl"===e}))},hasCode:function(e){return fe(ss,e)}};function ds(){var e=this,t=[],i={},r={},o=[],a=function(e,t){var n=U(o,(function(n){return n.name===e&&n.state===t}));W(n,(function(e){return e.callback()}))},s=function(e){var t;return r[e]&&(t=r[e].dependencies),t||[]},l=function(e,t){return"object"===n(t)?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},u=function(e,t,n,i){var r=s(e);W(r,(function(e){var n=l(t,e);c(n.resource,n,void 0,void 0)})),n&&(i?n.call(i):n.call(os))},c=function(e,t,n,o,s){if(!i[e]){var l="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==l.indexOf("/")&&-1===l.indexOf("://")&&(l=ds.baseURL+"/"+l),i[e]=l.substring(0,l.lastIndexOf("/"));var c=function(){a(e,"loaded"),u(e,t,n,o)};r[e]?c():os.ScriptLoader.add(l,c,o,s)}},d=function(e,t,n){void 0===n&&(n="added"),fe(r,e)&&"added"===n||fe(i,e)&&"loaded"===n?t():o.push({name:e,state:n,callback:t})};return{items:t,urls:i,lookup:r,_listeners:o,get:function(e){if(r[e])return r[e].instance},dependencies:s,requireLangPack:function(e,t){!1!==ds.languageLoad&&d(e,(function(){var n=cs.getCode();!n||t&&-1===(","+(t||"")+",").indexOf(","+n+",")||os.ScriptLoader.add(i[e]+"/langs/"+n+".js")}),"loaded")},add:function(e,n,i){var o=n;return t.push(o),r[e]={instance:o,dependencies:i},a(e,"added"),o},remove:function(e){delete i[e],delete r[e]},createUrl:l,addComponents:function(t,n){var i=e.urls[t];W(n,(function(e){os.ScriptLoader.add(i+"/"+e)}))},load:c,waitFor:d}}!function(e){e.PluginManager=e(),e.ThemeManager=e()}(ds||(ds={}));var fs=ds,hs=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];null===n&&(n=setTimeout((function(){e.apply(null,i),n=null}),t))}}},ps=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];null!==n&&clearTimeout(n),n=setTimeout((function(){e.apply(null,i),n=null}),t)}}},ms=function(e,t){var n=Hn(e,t);return void 0===n||""===n?[]:n.split(" ")},gs=function(e){return void 0!==e.dom.classList},vs=function(e,t){return function(e,t,n){var i=ms(e,t).concat([n]);return zn(e,t,i.join(" ")),!0}(e,"class",t)},ys=function(e,t){return function(e,t,n){var i=U(ms(e,t),(function(e){return e!==n}));return i.length>0?zn(e,t,i.join(" ")):Wn(e,t),!1}(e,"class",t)},bs=function(e,t){gs(e)?e.dom.classList.add(t):vs(e,t)},ws=function(e){var t=gs(e)?e.dom.classList:function(e){return ms(e,"class")}(e);0===t.length&&Wn(e,"class")},xs=function(e,t){return gs(e)&&e.dom.classList.contains(t)},Cs=function e(t,n){var i=[];return W(Wt(t),(function(t){n(t)&&(i=i.concat([t])),i=i.concat(e(t,n))})),i},ks=function(e,t){return function(e,t){var n=void 0===t?document:t.dom;return Ct(n)?[]:H(n.querySelectorAll(e),bt.fromDom)}(t,e)},_s=d("mce-annotation"),Ss=d("data-mce-annotation"),Ts=d("data-mce-annotation-uid"),Ds=function(e,t){var n=e.selection.getRng(),i=bt.fromDom(n.startContainer),r=bt.fromDom(e.getBody()),o=t.fold((function(){return"."+_s()}),(function(e){return"["+Ss()+'="'+e+'"]'})),a=jt(i,n.startOffset).getOr(i),s=yi(a,o,(function(e){return kt(e,r)})),l=function(e,t){return function(e,t){var n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)}(e,t)?x.some(Hn(e,t)):x.none()};return s.bind((function(t){return l(t,""+Ts()).bind((function(n){return l(t,""+Ss()).map((function(t){var i=Ms(e,n);return{uid:n,name:t,elements:i}}))}))}))},Ms=function(e,t){var n=bt.fromDom(e.getBody());return ks(n,"["+Ts()+'="'+t+'"]')},Es=function(e,t){var n=as({}),i=function(e,t){r(e,(function(e){return t(e),e}))},r=function(e,t){var i=n.get(),r=t(i.hasOwnProperty(e)?i[e]:{listeners:[],previous:as(x.none())});i[e]=r,n.set(i)},o=ps((function(){var t,o,a,s=n.get(),l=(t=te(s),(a=O.call(t,0)).sort(o),a);W(l,(function(t){r(t,(function(n){var r=n.previous.get();return Ds(e,x.some(t)).fold((function(){r.isSome()&&(!function(e){i(e,(function(t){W(t.listeners,(function(t){return t(!1,e)}))}))}(t),n.previous.set(x.none()))}),(function(e){var t=e.uid,o=e.name,a=e.elements;r.is(t)||(!function(e,t,n){i(e,(function(i){W(i.listeners,(function(i){return i(!0,e,{uid:t,nodes:H(n,(function(e){return e.dom}))})}))}))}(o,t,a),n.previous.set(x.some(t)))})),{previous:n.previous,listeners:n.listeners}}))}))}),30);e.on("remove",(function(){o.cancel()})),e.on("NodeChange",(function(){o.throttle()}));return{addListener:function(e,t){r(e,(function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}}))}}},Ns=function(e,t){e.on("init",(function(){e.serializer.addNodeFilter("span",(function(e){W(e,(function(e){(function(e){return x.from(e.attr(Ss())).bind(t.lookup)})(e).each((function(t){!1===t.persistent&&e.unwrap()}))}))}))}))},As=0,Ps=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++As+String(t)},Ls=function(e,t){var n,i,r=Lt(e).dom,o=bt.fromDom(r.createDocumentFragment()),a=(n=t,(i=(r||document).createElement("div")).innerHTML=n,Wt(bt.fromDom(i)));nn(o,a),rn(e),tn(e,o)},Os=function(e,t){return bt.fromDom(e.dom.cloneNode(t))},Is=function(e){return Os(e,!1)},Rs=function(e){return Os(e,!0)},Bs=function(e,t,n){void 0===n&&(n=g);var i=new Mi(e,t),r=function(e){var t;do{t=i[e]()}while(t&&!Tn(t)&&!n(t));return x.from(t).filter(Tn)};return{current:function(){return x.from(i.current()).filter(Tn)},next:function(){return r("next")},prev:function(){return r("prev")},prev2:function(){return r("prev2")}}},zs=function(e,t){var n=t||function(t){return e.isBlock(t)||Nn(t)||Ln(t)},i=function e(t,n,i,r){if(Tn(t)){var o=r(t,n,t.data);if(-1!==o)return x.some({container:t,offset:o})}return i().bind((function(t){return e(t.container,t.offset,i,r)}))};return{backwards:function(e,t,r,o){var a=Bs(e,o,n);return i(e,t,(function(){return a.prev().map((function(e){return{container:e,offset:e.length}}))}),r).getOrNull()},forwards:function(e,t,r,o){var a=Bs(e,o,n);return i(e,t,(function(){return a.next().map((function(e){return{container:e,offset:0}}))}),r).getOrNull()}}},Fs=function(e,t,n){return e.isSome()&&t.isSome()?x.some(n(e.getOrDie(),t.getOrDie())):x.none()},Hs=Math.round,Ws=function(e){return e?{left:Hs(e.left),top:Hs(e.top),bottom:Hs(e.bottom),right:Hs(e.right),width:Hs(e.width),height:Hs(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},js=function(e,t){return e=Ws(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},Us=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},Vs=function(e,t){var n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Us(t.top-e.bottom,e,t)},$s=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Us(t.bottom-e.top,e,t)},qs=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Xs=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Ys=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},Ks=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),Gs=function(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&Ks.test(e)},Js=yn,Zs=cr,Qs=wn("display","block table"),el=wn("float","left right"),tl=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){for(var n=0;n<e.length;n++)if(!e[n](t))return!1;return!0}}(Js,Zs,p(el)),nl=p(wn("white-space","pre pre-line pre-wrap")),il=Tn,rl=Nn,ol=ts.nodeIndex,al=Ys,sl=function(e){return"createRange"in e?e.createRange():ts.DOM.createRng()},ll=function(e){return e&&/[\r\n\t ]/.test(e)},ul=function(e){return!!e.setStart&&!!e.setEnd},cl=function(e){var t,n=e.startContainer,i=e.startOffset;return!!(ll(e.toString())&&nl(n.parentNode)&&Tn(n)&&(t=n.data,ll(t[i-1])||ll(t[i+1])))},dl=function(e){var t=e.startContainer,n=e.endContainer,i=e.startOffset,r=e.endOffset;if(t===n&&Tn(n)&&0===i&&1===r){var o=e.cloneRange();return o.setEndAfter(n),hl(o)}return null},fl=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},hl=function(e){var t,n=e.getClientRects();return t=n.length>0?Ws(n[0]):Ws(e.getBoundingClientRect()),!ul(e)&&rl(e)&&fl(t)?function(e){var t=e.ownerDocument,n=sl(t),i=t.createTextNode(Hi),r=e.parentNode;r.insertBefore(i,e),n.setStart(i,0),n.setEnd(i,1);var o=Ws(n.getBoundingClientRect());return r.removeChild(i),o}(e):fl(t)&&ul(e)?dl(e):t},pl=function(e,t){var n=js(e,t);return n.width=1,n.right=n.left+1,n},ml=function(e){var t,n,i=[],r=function(e){var t,n;0!==e.height&&(i.length>0&&(t=e,n=i[i.length-1],t.left===n.left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right)||i.push(e))},o=function(e,t){var n=sl(e.ownerDocument);if(t<e.data.length){if(Gs(e.data[t]))return i;if(Gs(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!cl(n)))return r(pl(hl(n),!1)),i}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),cl(n)||r(pl(hl(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),cl(n)||r(pl(hl(n),!0)))};if(il(e.container()))return o(e.container(),e.offset()),i;if(Js(e.container()))if(e.isAtEnd())n=al(e.container(),e.offset()),il(n)&&o(n,n.data.length),tl(n)&&!rl(n)&&r(pl(hl(n),!1));else{if(n=al(e.container(),e.offset()),il(n)&&o(n,0),tl(n)&&e.isAtEnd())return r(pl(hl(n),!1)),i;t=al(e.container(),e.offset()-1),tl(t)&&!rl(t)&&(Qs(t)||Qs(n)||!tl(n))&&r(pl(hl(t),!1)),tl(n)&&r(pl(hl(n),!0))}return i};function gl(e,t,n){var i=function(){return n||(n=ml(gl(e,t))),n};return{container:d(e),offset:d(t),toRange:function(){var n=sl(e.ownerDocument);return n.setStart(e,t),n.setEnd(e,t),n},getClientRects:i,isVisible:function(){return i().length>0},isAtStart:function(){return il(e),0===t},isAtEnd:function(){return il(e)?t>=e.data.length:t>=e.childNodes.length},isEqual:function(n){return n&&e===n.container()&&t===n.offset()},getNode:function(n){return al(e,n?t-1:t)}}}!function(e){e.fromRangeStart=function(t){return e(t.startContainer,t.startOffset)},e.fromRangeEnd=function(t){return e(t.endContainer,t.endOffset)},e.after=function(t){return e(t.parentNode,ol(t)+1)},e.before=function(t){return e(t.parentNode,ol(t))},e.isAbove=function(e,t){return Fs(Z(t.getClientRects()),Q(e.getClientRects()),Vs).getOr(!1)},e.isBelow=function(e,t){return Fs(Q(t.getClientRects()),Z(e.getClientRects()),$s).getOr(!1)},e.isAtStart=function(e){return!!e&&e.isAtStart()},e.isAtEnd=function(e){return!!e&&e.isAtEnd()},e.isTextPosition=function(e){return!!e&&Tn(e.container())},e.isElementPosition=function(t){return!1===e.isTextPosition(t)}}(gl||(gl={}));var vl,yl=gl,bl=function(e,t){Tn(t)&&0===t.data.length&&e.remove(t)},wl=function(e,t,n){En(n)?function(e,t,n){var i=x.from(n.firstChild),r=x.from(n.lastChild);t.insertNode(n),i.each((function(t){return bl(e,t.previousSibling)})),r.each((function(t){return bl(e,t.nextSibling)}))}(e,t,n):function(e,t,n){t.insertNode(n),bl(e,n.previousSibling),bl(e,n.nextSibling)}(e,t,n)},xl=Tn,Cl=Cn,kl=ts.nodeIndex,_l=function e(t){var n=t.parentNode;return Cl(n)?e(n):n},Sl=function e(t){return t?ye(t.childNodes,(function(t,n){return Cl(n)&&"BR"!==n.nodeName?t=t.concat(e(n)):t.push(n),t}),[]):[]},Tl=function(e){return function(t){return e===t}},Dl=function(e){var t,n;t=Sl(_l(e)),n=be(t,Tl(e),e),t=t.slice(0,n+1);var i=ye(t,(function(e,n,i){return xl(n)&&xl(t[i-1])&&e++,e}),0);return t=ge(t,bn([e.nodeName])),(n=be(t,Tl(e),e))-i},Ml=function(e){return(xl(e)?"text()":e.nodeName.toLowerCase())+"["+Dl(e)+"]"},El=function(e,t){var n,i,r,o,a,s=[];return n=t.container(),i=t.offset(),xl(n)?r=function(e,t){for(;(e=e.previousSibling)&&xl(e);)t+=e.data.length;return t}(n,i):(i>=(o=n.childNodes).length?(r="after",i=o.length-1):r="before",n=o[i]),s.push(Ml(n)),a=function(e,t,n){var i=[];for(t=t.parentNode;!(t===e||n&&n(t));t=t.parentNode)i.push(t);return i}(e,n),a=ge(a,p(Cn)),(s=s.concat(me(a,(function(e){return Ml(e)})))).reverse().join("/")+","+r},Nl=function(e,t){var n;if(!t)return null;var i=t.split(","),r=i[0].split("/");n=i.length>1?i[1]:"before";var o=ye(r,(function(e,t){var n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return n?("text()"===n[1]&&(n[1]="#text"),function(e,t,n){var i=Sl(e);return i=ge(i,(function(e,t){return!xl(e)||!xl(i[t-1])})),(i=ge(i,bn([t])))[n]}(e,n[1],parseInt(n[2],10))):null}),e);return o?xl(o)?function(e,t){for(var n,i=e,r=0;xl(i);){if(n=i.data.length,t>=r&&t<=r+n){e=i,t-=r;break}if(!xl(i.nextSibling)){e=i,t=n;break}r+=n,i=i.nextSibling}return xl(e)&&t>e.data.length&&(t=e.data.length),yl(e,t)}(o,parseInt(n,10)):(n="after"===n?kl(o)+1:kl(o),yl(o.parentNode,n)):null},Al=Ln,Pl=function(e,t,n,i,r){var o,a=i[r?"startContainer":"endContainer"],s=i[r?"startOffset":"endOffset"],l=[],u=0,c=e.getRoot();for(Tn(a)?l.push(n?function(e,t,n){var i,r;for(r=e(t.data.slice(0,n)).length,i=t.previousSibling;i&&Tn(i);i=i.previousSibling)r+=e(i.data).length;return r}(t,a,s):s):(s>=(o=a.childNodes).length&&o.length&&(u=1,s=Math.max(0,o.length-1)),l.push(e.nodeIndex(o[s],n)+u));a&&a!==c;a=a.parentNode)l.push(e.nodeIndex(a,n));return l},Ll=function(e,t,n){var i=0;return vt.each(e.select(t),(function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void i++})),i},Ol=function(e,t){var n,i,r,o=t?"start":"end";n=e[o+"Container"],i=e[o+"Offset"],yn(n)&&"TR"===n.nodeName&&(n=(r=n.childNodes)[Math.min(t?i:i-1,r.length-1)])&&(i=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,i))},Il=function(e){return Ol(e,!0),Ol(e,!1),e},Rl=function(e,t){var n;if(yn(e)&&(e=Ys(e,t),Al(e)))return e;if(Yi(e)){if(Tn(e)&&qi(e)&&(e=e.parentNode),n=e.previousSibling,Al(n))return n;if(n=e.nextSibling,Al(n))return n}},Bl=function(e,t,n){var i=n.getNode(),r=i?i.nodeName:null,o=n.getRng();if(Al(i)||"IMG"===r)return{name:r,index:Ll(n.dom,r,i)};var a=function(e){return Rl(e.startContainer,e.startOffset)||Rl(e.endContainer,e.endOffset)}(o);return a?{name:r=a.tagName,index:Ll(n.dom,r,a)}:function(e,t,n,i){var r=t.dom,o={};return o.start=Pl(r,e,n,i,!0),t.isCollapsed()||(o.end=Pl(r,e,n,i,!1)),o}(e,n,t,o)},zl=function(e,t,n){var i={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",i,"&#xFEFF;"):e.create("span",i)},Fl=function(e,t){var n=e.dom,i=e.getRng(),r=n.uniqueId(),o=e.isCollapsed(),a=e.getNode(),s=a.nodeName;if("IMG"===s)return{name:s,index:Ll(n,s,a)};var l=Il(i.cloneRange());if(!o){l.collapse(!1);var u=zl(n,r+"_end",t);wl(n,l,u)}(i=Il(i)).collapse(!0);var c=zl(n,r+"_start",t);return wl(n,i,c),e.moveToBookmark({id:r,keep:!0}),{id:r}},Hl=function(e,t,n){return 2===t?Bl(Ui,n,e):3===t?function(e){var t=e.getRng();return{start:El(e.dom.getRoot(),yl.fromRangeStart(t)),end:El(e.dom.getRoot(),yl.fromRangeEnd(t))}}(e):t?function(e){return{rng:e.getRng()}}(e):Fl(e,!1)},Wl=h(Bl,f,!0),jl=ts.DOM,Ul=function(e,t,n){var i=e.getParam(t,n);if(-1!==i.indexOf("=")){var r=e.getParam(t,"","hash");return r.hasOwnProperty(e.id)?r[e.id]:n}return i},Vl=function(e){return e.getParam("content_security_policy","")},$l=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":!0===t?"p":t},ql=function(e){return e.getParam("forced_root_block_attrs",{})},Xl=function(e){return e.getParam("automatic_uploads",!0,"boolean")},Yl=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},Kl=function(e){return e.getParam("icons","","string")},Gl=function(e){return e.getParam("images_upload_url","","string")},Jl=function(e){return e.getParam("images_upload_base_path","","string")},Zl=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},Ql=function(e){return e.getParam("images_upload_handler",null,"function")},eu=function(e){return e.getParam("content_css_cors",!1,"boolean")},tu=function(e){return e.getParam("referrer_policy","","string")},nu=function(e){return e.getParam("language","en","string")},iu=function(e){return e.getParam("indent_use_margin",!1)},ru=function(e){var t=e.getParam("object_resizing");return!1!==t&&!ht.iOS&&(S(t)?t:"table,img,figure.image,div")},ou=function(e){return e.getParam("event_root")},au=function(e){return e.getParam("theme")},su=function(e){return e.getParam("validate")},lu=function(e){return!1!==e.getParam("inline_boundaries")},uu=function(e){return e.getParam("content_css_cors")},cu=function(e){return e.getParam("plugins","","string")},du=yn,fu=Tn,hu=function(e){var t=e.parentNode;t&&t.removeChild(e)},pu=function(e){var t=Ui(e);return{count:e.length-t.length,text:t}},mu=function(e){for(var t;-1!==(t=e.data.lastIndexOf(Wi));)e.deleteData(t,1)},gu=function(e,t){return wu(e),t},vu=function(e,t){var n=t.container(),i=function(e,t){var n=B(e,t);return-1===n?x.none():x.some(n)}(ee(n.childNodes),e).map((function(e){return e<t.offset()?yl(n,t.offset()-1):t})).getOr(t);return wu(e),i},yu=function(e,t){return fu(e)&&t.container()===e?function(e,t){var n=pu(e.data.substr(0,t.offset())),i=pu(e.data.substr(t.offset()));return(n.text+i.text).length>0?(mu(e),yl(e,t.offset()-n.count)):t}(e,t):gu(e,t)},bu=function(e,t){return yl.isTextPosition(t)?yu(e,t):function(e,t){return t.container()===e.parentNode?vu(e,t):gu(e,t)}(e,t)},wu=function(e){du(e)&&Yi(e)&&(Ki(e)?e.removeAttribute("data-mce-caret"):hu(e)),fu(e)&&(mu(e),0===e.data.length&&hu(e))},xu=rt().browser,Cu=Ln,ku=In,_u=On,Su=function(e,t,n){var i,r,o,a,s,l=js(t.getBoundingClientRect(),n);return"BODY"===e.tagName?(i=e.ownerDocument.documentElement,r=e.scrollLeft||i.scrollLeft,o=e.scrollTop||i.scrollTop):(s=e.getBoundingClientRect(),r=e.scrollLeft-s.left,o=e.scrollTop-s.top),l.left+=r,l.right+=r,l.top+=o,l.bottom+=o,l.width=1,(a=t.offsetWidth-t.clientWidth)>0&&(n&&(a*=-1),l.left+=a,l.right+=a),l},Tu=function(e,t,n,i){var r,o,a=as(x.none()),s=$l(e),l=s.length>0?s:"p",u=function(){!function(e){for(var t=ks(bt.fromDom(e),"*[contentEditable=false],video,audio,embed,object"),n=0;n<t.length;n++){var i,r=t[n].dom,o=r.previousSibling;er(o)&&(1===(i=o.data).length?o.parentNode.removeChild(o):o.deleteData(i.length-1,1)),o=r.nextSibling,Qi(o)&&(1===(i=o.data).length?o.parentNode.removeChild(o):o.deleteData(0,1))}}(t),o&&(wu(o),o=null),a.get().each((function(e){Xa(e.caret).remove(),a.set(x.none())})),r&&(ki.clearInterval(r),r=null)},c=function(){r=ki.setInterval((function(){i()?Xa("div.mce-visual-caret",t).toggleClass("mce-visual-caret-hidden"):Xa("div.mce-visual-caret",t).addClass("mce-visual-caret-hidden")}),500)};return{show:function(e,i){var r,s;if(u(),_u(i))return null;if(!n(i))return o=function(e,t){var n,i=e.ownerDocument.createTextNode(Wi),r=e.parentNode;if(t){if(n=e.previousSibling,$i(n)){if(Yi(n))return n;if(er(n))return n.splitText(n.data.length-1)}r.insertBefore(i,e)}else{if(n=e.nextSibling,$i(n)){if(Yi(n))return n;if(Qi(n))return n.splitText(1),n}e.nextSibling?r.insertBefore(i,e.nextSibling):r.appendChild(i)}return i}(i,e),s=i.ownerDocument.createRange(),Mu(o.nextSibling)?(s.setStart(o,0),s.setEnd(o,0)):(s.setStart(o,1),s.setEnd(o,1)),s;o=Zi(l,i,e),r=Su(t,i,e),Xa(o).css("top",r.top);var d=Xa('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(r).appendTo(t)[0];return a.set(x.some({caret:d,element:i,before:e})),a.get().each((function(t){e&&Xa(t.caret).addClass("mce-visual-caret-before")})),c(),(s=i.ownerDocument.createRange()).setStart(o,0),s.setEnd(o,0),s},hide:u,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){a.get().each((function(e){var n=Su(t,e.element,e.before);Xa(e.caret).css(xe({},n))}))},destroy:function(){return ki.clearInterval(r)}}},Du=function(){return xu.isIE()||xu.isEdge()||xu.isFirefox()},Mu=function(e){return Cu(e)||ku(e)},Eu=function(e){return Mu(e)||kn(e)&&Du()},Nu=Ln,Au=In,Pu=wn("display","block table table-cell table-caption list-item"),Lu=Yi,Ou=qi,Iu=yn,Ru=cr,Bu=function(e){return e>0},zu=function(e){return e<0},Fu=function(e,t){for(var n;n=e(t);)if(!Ou(n))return n;return null},Hu=function(e,t,n,i,r){var o=new Mi(e,i),a=Nu(e)||Ou(e);if(zu(t)){if(a&&n(e=Fu(o.prev,!0)))return e;for(;e=Fu(o.prev,r);)if(n(e))return e}if(Bu(t)){if(a&&n(e=Fu(o.next,!0)))return e;for(;e=Fu(o.next,r);)if(n(e))return e}return null},Wu=function(e,t){for(;e&&e!==t;){if(Pu(e))return e;e=e.parentNode}return null},ju=function(e,t,n){return Wu(e.container(),n)===Wu(t.container(),n)},Uu=function(e,t){if(!t)return null;var n=t.container(),i=t.offset();return Iu(n)?n.childNodes[i+e]:null},Vu=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},$u=function(e,t,n){return Wu(t,e)===Wu(n,e)},qu=function(e,t,n){var i,r;for(r=e?"previousSibling":"nextSibling";n&&n!==t;){if(i=n[r],Lu(i)&&(i=i[r]),Nu(i)||Au(i)){if($u(t,i,n))return i;break}if(Ru(i))break;n=n.parentNode}return null},Xu=h(Vu,!0),Yu=h(Vu,!1),Ku=function(e,t,n){var i,r,o,a=h(qu,!0,t),s=h(qu,!1,t);r=n.startContainer;var l=n.startOffset;if(qi(r)){if(Iu(r)||(r=r.parentNode),"before"===(o=r.getAttribute("data-mce-caret"))&&(i=r.nextSibling,Eu(i)))return Xu(i);if("after"===o&&(i=r.previousSibling,Eu(i)))return Yu(i)}if(!n.collapsed)return n;if(Tn(r)){if(Lu(r)){if(1===e){if(i=s(r))return Xu(i);if(i=a(r))return Yu(i)}if(-1===e){if(i=a(r))return Yu(i);if(i=s(r))return Xu(i)}return n}if(er(r)&&l>=r.data.length-1)return 1===e&&(i=s(r))?Xu(i):n;if(Qi(r)&&l<=1)return-1===e&&(i=a(r))?Yu(i):n;if(l===r.data.length)return(i=s(r))?Xu(i):n;if(0===l)return(i=a(r))?Yu(i):n}return n},Gu=function(e,t){return x.from(Uu(e?0:-1,t)).filter(Nu)},Ju=function(e,t,n){var i=Ku(e,t,n);return-1===e?gl.fromRangeStart(i):gl.fromRangeEnd(i)},Zu=function(e){return x.from(e.getNode()).map(bt.fromDom)},Qu=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},ec=function(e,t){var n=ju(e,t);return!(n||!Nn(e.getNode()))||n};!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(vl||(vl={}));var tc,nc=Ln,ic=Tn,rc=yn,oc=Nn,ac=cr,sc=function(e){return sr(e)||function(e){return!!dr(e)&&!0!==$(ee(e.getElementsByTagName("*")),(function(e,t){return e||nr(t)}),!1)}(e)},lc=fr,uc=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},cc=function(e,t){if(Bu(e)){if(ac(t.previousSibling)&&!ic(t.previousSibling))return yl.before(t);if(ic(t))return yl(t,0)}if(zu(e)){if(ac(t.nextSibling)&&!ic(t.nextSibling))return yl.after(t);if(ic(t))return yl(t,t.data.length)}return zu(e)?oc(t)?yl.before(t):yl.after(t):yl.before(t)},dc=function(e,t){var n=t.nextSibling;return n&&ac(n)?ic(n)?yl(n,0):yl.before(n):fc(vl.Forwards,yl.after(t),e)},fc=function(e,t,n){var i,r,o,a;if(!rc(n)||!t)return null;if(t.isEqual(yl.after(n))&&n.lastChild){if(a=yl.after(n.lastChild),zu(e)&&ac(n.lastChild)&&rc(n.lastChild))return oc(n.lastChild)?yl.before(n.lastChild):a}else a=t;var s=a.container(),l=a.offset();if(ic(s)){if(zu(e)&&l>0)return yl(s,--l);if(Bu(e)&&l<s.length)return yl(s,++l);i=s}else{if(zu(e)&&l>0&&(r=uc(s,l-1),ac(r)))return!sc(r)&&(o=Hu(r,e,lc,r))?ic(o)?yl(o,o.data.length):yl.after(o):ic(r)?yl(r,r.data.length):yl.before(r);if(Bu(e)&&l<s.childNodes.length&&(r=uc(s,l),ac(r)))return oc(r)?dc(n,r):!sc(r)&&(o=Hu(r,e,lc,r))?ic(o)?yl(o,0):yl.before(o):ic(r)?yl(r,0):yl.after(r);i=r||a.getNode()}if((Bu(e)&&a.isAtEnd()||zu(e)&&a.isAtStart())&&(i=Hu(i,e,v,n,!0),lc(i,n)))return cc(e,i);r=Hu(i,e,lc,n);var u=we(U(function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n}(s,n),nc));return!u||r&&u.contains(r)?r?cc(e,r):null:a=Bu(e)?yl.after(u):yl.before(u)},hc=function(e){return{next:function(t){return fc(vl.Forwards,t,e)},prev:function(t){return fc(vl.Backwards,t,e)}}},pc=function(e){return yl.isTextPosition(e)?0===e.offset():cr(e.getNode())},mc=function(e){if(yl.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return cr(e.getNode(!0))},gc=function(e,t){return!yl.isTextPosition(e)&&!yl.isTextPosition(t)&&e.getNode()===t.getNode(!0)},vc=function(e,t,n){return e?!gc(t,n)&&(i=t,!(!yl.isTextPosition(i)&&Nn(i.getNode())))&&mc(t)&&pc(n):!gc(n,t)&&pc(t)&&mc(n);var i},yc=function(e,t,n){var i=hc(t);return x.from(e?i.next(n):i.prev(n))},bc=function(e,t,n){return yc(e,t,n).bind((function(i){return ju(n,i,t)&&vc(e,n,i)?yc(e,t,i):x.some(i)}))},wc=function e(t,n,i,r){return bc(t,n,i).bind((function(i){return r(i)?e(t,n,i,r):x.some(i)}))},xc=function(e,t){var n,i=e?t.firstChild:t.lastChild;return Tn(i)?x.some(yl(i,e?0:i.data.length)):i?cr(i)?x.some(e?yl.before(i):Nn(n=i)?yl.before(n):yl.after(n)):function(e,t,n){var i=e?yl.before(n):yl.after(n);return yc(e,t,i)}(e,t,i):x.none()},Cc=h(yc,!0),kc=h(yc,!1),_c=h(xc,!0),Sc=h(xc,!1),Tc="_mce_caret",Dc=function(e){return yn(e)&&e.id===Tc},Mc=function(e,t){for(;t&&t!==e;){if(t.id===Tc)return t;t=t.parentNode}return null},Ec=function(e,t){return yn(t)&&e.isBlock(t)&&!t.innerHTML&&!ht.ie&&(t.innerHTML='<br data-mce-bogus="1" />'),t},Nc=function(e,t){return Sc(e).fold((function(){return!1}),(function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0}))},Ac=function(e,t,n){return!(!function(e){return!1===e.hasChildNodes()}(t)||!Mc(e,t))&&(function(e,t){var n=e.ownerDocument.createTextNode(Wi);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)}(t,n),!0)},Pc=function(e,t,n,i){var r,o,a,s,l=n[t?"start":"end"],u=e.getRoot();if(l){for(a=l[0],o=u,r=l.length-1;r>=1;r--){if(s=o.childNodes,Ac(u,o,i))return!0;if(l[r]>s.length-1)return!!Ac(u,o,i)||Nc(o,i);o=s[l[r]]}3===o.nodeType&&(a=Math.min(l[0],o.nodeValue.length)),1===o.nodeType&&(a=Math.min(l[0],o.childNodes.length)),t?i.setStart(o,a):i.setEnd(o,a)}return!0},Lc=function(e){return Tn(e)&&e.data.length>0},Oc=function(e,t,n){var i,r,o,a,s,l,u=e.get(n.id+"_"+t),c=n.keep;if(u){if(i=u.parentNode,"start"===t?(c?u.hasChildNodes()?(i=u.firstChild,r=1):Lc(u.nextSibling)?(i=u.nextSibling,r=0):Lc(u.previousSibling)?(i=u.previousSibling,r=u.previousSibling.data.length):(i=u.parentNode,r=e.nodeIndex(u)+1):r=e.nodeIndex(u),s=i,l=r):(c?u.hasChildNodes()?(i=u.firstChild,r=1):Lc(u.previousSibling)?(i=u.previousSibling,r=u.previousSibling.data.length):(i=u.parentNode,r=e.nodeIndex(u)):r=e.nodeIndex(u),s=i,l=r),!c){for(a=u.previousSibling,o=u.nextSibling,vt.each(vt.grep(u.childNodes),(function(e){Tn(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))}));u=e.get(n.id+"_"+t);)e.remove(u,!0);a&&o&&a.nodeType===o.nodeType&&Tn(a)&&!ht.opera&&(r=a.nodeValue.length,a.appendData(o.nodeValue),e.remove(o),s=a,l=r)}return x.some(yl(s,l))}return x.none()},Ic=function(e,t){var n=e.dom;if(t){if(function(e){return vt.isArray(e.start)}(t))return function(e,t){var n=e.createRng();return Pc(e,!0,t,n)&&Pc(e,!1,t,n)?x.some(n):x.none()}(n,t);if(function(e){return"string"==typeof e.start}(t))return x.some(function(e,t){var n,i=e.createRng();return n=Nl(e.getRoot(),t.start),i.setStart(n.container(),n.offset()),n=Nl(e.getRoot(),t.end),i.setEnd(n.container(),n.offset()),i}(n,t));if(function(e){return e.hasOwnProperty("id")}(t))return function(e,t){var n=Oc(e,"start",t),i=Oc(e,"end",t);return Fs(n,i.or(n),(function(t,n){var i=e.createRng();return i.setStart(Ec(e,t.container()),t.offset()),i.setEnd(Ec(e,n.container()),n.offset()),i}))}(n,t);if(function(e){return e.hasOwnProperty("name")}(t))return function(e,t){return x.from(e.select(t.name)[t.index]).map((function(t){var n=e.createRng();return n.selectNode(t),n}))}(n,t);if(function(e){return e.hasOwnProperty("rng")}(t))return x.some(t.rng)}return x.none()},Rc=function(e,t,n){return Hl(e,t,n)},Bc=function(e,t){Ic(e,t).each((function(t){e.setRng(t)}))},zc=function(e){return yn(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Fc=(tc=Hi,function(e){return tc===e}),Hc=function(e){return""!==e&&-1!==" \f\n\r\t\v".indexOf(e)},Wc=function(e){return!Hc(e)&&!Fc(e)},jc=function(e){return!!e.nodeType},Uc=function(e,t,n){var i,r,o,a=n.startOffset,s=n.startContainer;if((n.startContainer!==n.endContainer||!function(e){return e&&/^(IMG)$/.test(e.nodeName)}(n.startContainer.childNodes[n.startOffset]))&&1===s.nodeType)for(a<(o=s.childNodes).length?(s=o[a],i=new Mi(s,e.getParent(s,e.isBlock))):(s=o[o.length-1],(i=new Mi(s,e.getParent(s,e.isBlock))).next(!0)),r=i.current();r;r=i.next())if(3===r.nodeType&&!Xc(r))return n.setStart(r,0),void t.setRng(n)},Vc=function(e,t,n){if(e){var i=t?"nextSibling":"previousSibling";for(e=n?e:e[i];e;e=e[i])if(1===e.nodeType||!Xc(e))return e}},$c=function(e,t){return jc(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},qc=function(e,t,n){return e.schema.isValidChild(t,n)},Xc=function(e){return e&&Tn(e)&&/^([\t \r\n]+|)$/.test(e.nodeValue)},Yc=function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,(function(e,n){return t[n]||e}))),e},Kc=function(e,t){return t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},Gc=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},Jc=function(e,t,n){return Gc(e,e.getStyle(t,n),n)},Zc=function(e,t){var n;return e.getParent(t,(function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n})),n},Qc=function(e,t,n){return e.getParents(t,n,e.getRoot())},ed=function(e,t,n){var i=["inline","block","selector","attributes","styles","classes"],r=function(e){return ue(e,(function(e,t){return F(i,(function(e){return e===t}))}))};return F(e.formatter.get(t),(function(t){var i=r(t);return F(e.formatter.get(n),(function(e){var t=r(e);return function(e,t,n){return void 0===n&&(n=l),s(n).eq(e,t)}(i,t)}))}))},td=zc,nd=Qc,id=Xc,rd=$c,od=function(e,t){for(var n=t;n;){if(yn(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},ad=function(e,t,n,i){for(var r=t.data,o=n;e?o>=0:o<r.length;e?o--:o++)if(i(r.charAt(o)))return e?o+1:o;return-1},sd=function(e,t,n){return ad(e,t,n,(function(e){return Fc(e)||Hc(e)}))},ld=function(e,t,n){return ad(e,t,n,Wc)},ud=function(e,t,n,i,r,o){var a,s=e.getParent(n,e.isBlock)||t,l=function(t,n,i){var o=zs(e),l=r?o.backwards:o.forwards;return x.from(l(t,n,(function(e,t){return td(e.parentNode)?-1:(a=e,i(r,e,t))}),s))};return l(n,i,sd).bind((function(e){return o?l(e.container,e.offset+(r?-1:0),ld):x.some(e)})).orThunk((function(){return a?x.some({container:a,offset:r?0:a.length}):x.none()}))},cd=function(e,t,n,i,r){Tn(i)&&0===i.nodeValue.length&&i[r]&&(i=i[r]);for(var o=nd(e,i),a=0;a<o.length;a++)for(var s=0;s<t.length;s++){var l=t[s];if((!("collapsed"in l)||l.collapsed===n.collapsed)&&e.is(o[a],l.selector))return o[a]}return i},dd=function(e,t,n,i){var r,o=e.dom,a=o.getRoot();if(t[0].wrapper||(r=o.getParent(n,t[0].block,a)),!r){var s=o.getParent(n,"LI,TD,TH");r=o.getParent(Tn(n)?n.parentNode:n,(function(t){return t!==a&&rd(e,t)}),s)}if(r&&t[0].wrapper&&(r=nd(o,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r[i]&&!o.isBlock(r[i])&&(r=r[i],!Kc(r,"br")););return r||n},fd=function(e,t,n,i,r,o,a){var s,l,u;s=l=a?n:r;var c,d=a?"previousSibling":"nextSibling",f=e.getRoot();if(Tn(s)&&!id(s)&&(a?i>0:o<s.nodeValue.length))return s;for(;;){if(!t[0].block_expand&&e.isBlock(l))return l;for(u=l[d];u;u=u[d])if(!td(u)&&!id(u)&&("BR"!==(c=u).nodeName||!c.getAttribute("data-mce-bogus")||c.nextSibling))return l;if(l===f||l.parentNode===f){s=l;break}l=l.parentNode}return s},hd=function(e,t,n,i){void 0===i&&(i=!1);var r=t.startContainer,o=t.startOffset,a=t.endContainer,s=t.endOffset,l=e.dom;(yn(r)&&r.hasChildNodes()&&(r=Ys(r,o),Tn(r)&&(o=0)),yn(a)&&a.hasChildNodes()&&(a=Ys(a,t.collapsed?s:s-1),Tn(a)&&(s=a.nodeValue.length)),r=od(l,r),a=od(l,a),(td(r.parentNode)||td(r))&&(r=td(r)?r:r.parentNode,r=t.collapsed?r.previousSibling||r:r.nextSibling||r,Tn(r)&&(o=t.collapsed?r.length:0)),(td(a.parentNode)||td(a))&&(a=td(a)?a:a.parentNode,a=t.collapsed?a.nextSibling||a:a.previousSibling||a,Tn(a)&&(s=t.collapsed?0:a.length)),t.collapsed)&&(ud(l,e.getBody(),r,o,!0,i).each((function(e){var t=e.container,n=e.offset;r=t,o=n})),ud(l,e.getBody(),a,s,!1,i).each((function(e){var t=e.container,n=e.offset;a=t,s=n})));return(n[0].inline||n[0].block_expand)&&(n[0].inline&&Tn(r)&&0!==o||(r=fd(l,n,r,o,a,s,!0)),n[0].inline&&Tn(a)&&s!==a.nodeValue.length||(a=fd(l,n,r,o,a,s,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(r=cd(l,n,t,r,"previousSibling"),a=cd(l,n,t,a,"nextSibling")),(n[0].block||n[0].selector)&&(r=dd(e,n,r,"previousSibling"),a=dd(e,n,a,"nextSibling"),n[0].block&&(l.isBlock(r)||(r=fd(l,n,r,o,a,s,!0)),l.isBlock(a)||(a=fd(l,n,r,o,a,s,!1)))),yn(r)&&(o=l.nodeIndex(r),r=r.parentNode),yn(a)&&(s=l.nodeIndex(a)+1,a=a.parentNode),{startContainer:r,startOffset:o,endContainer:a,endOffset:s}},pd=function(e,t){var n=e.childNodes;return t>=n.length?t=n.length-1:t<0&&(t=0),n[t]||e},md=function(e,t,n){var i=t.startContainer,r=t.startOffset,o=t.endContainer,a=t.endOffset,s=function(e){var t;return 3===(t=e[0]).nodeType&&t===i&&r>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===a&&e.length>0&&t===o&&3===t.nodeType&&e.splice(e.length-1,1),e},l=function(e,t,n){for(var i=[];e&&e!==n;e=e[t])i.push(e);return i},u=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},c=function(e,t,i){for(var r=i?"nextSibling":"previousSibling",o=e,a=o.parentNode;o&&o!==t;o=a){a=o.parentNode;var u=l(o===e?o:o[r],r);u.length&&(i||u.reverse(),n(s(u)))}};if(1===i.nodeType&&i.hasChildNodes()&&(i=pd(i,r)),1===o.nodeType&&o.hasChildNodes()&&(o=pd(o,a-1)),i===o)return n(s([i]));for(var d=e.findCommonAncestor(i,o),f=i;f;f=f.parentNode){if(f===o)return c(i,d,!0);if(f===d)break}for(f=o;f;f=f.parentNode){if(f===i)return c(o,d);if(f===d)break}var h=u(i,d)||i,p=u(o,d)||o;c(i,h,!0);var m=l(h===i?h:h.nextSibling,"nextSibling",p===o?p.nextSibling:p);m.length&&n(s(m)),c(o,p)},gd=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},vd=function(e){return U(function(e){return Y(e,(function(e){var t=Xs(e);return t?[bt.fromDom(t)]:[]}))}(e),zi)},yd=function(e,t){var n=ks(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:vd(e)},bd=function(e){return yd(gd(e.selection.getSel()),bt.fromDom(e.getBody()))},wd=function e(t){return Ut(t).fold(d([t]),(function(n){return[t].concat(e(n))}))},xd=function e(t){return Vt(t).fold(d([t]),(function(n){return"br"===Tt(n)?Bt(n).map((function(n){return[t].concat(e(n))})).getOr([]):[t].concat(e(n))}))},Cd=function(e,t){return Fs(function(e){var t=e.startContainer,n=e.startOffset;return Tn(t)?0===n?x.some(bt.fromDom(t)):x.none():x.from(t.childNodes[n]).map(bt.fromDom)}(t),function(e){var t=e.endContainer,n=e.endOffset;return Tn(t)?n===t.data.length?x.some(bt.fromDom(t)):x.none():x.from(t.childNodes[n-1]).map(bt.fromDom)}(t),(function(t,n){var i=q(wd(e),h(kt,t)),r=q(xd(e),h(kt,n));return i.isSome()&&r.isSome()})).getOr(!1)},kd=function(e,t,n,i){var r=n,o=new Mi(n,r),a=ue(e.schema.getMoveCaretBeforeOnEnterElements(),(function(e,t){return!z(["td","th","table"],t.toLowerCase())}));do{if(Tn(n)&&0!==vt.trim(n.nodeValue).length)return void(i?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName])return void(i?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n))}while(n=i?o.next():o.prev());"BODY"===r.nodeName&&(i?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},_d=function(e){var t=e.selection.getSel();return t&&t.rangeCount>0},Sd=function(e,t){var n=bd(e);n.length>0?W(n,(function(n){var i=n.dom,r=e.dom.createRng();r.setStartBefore(i),r.setEndAfter(i),t(r,!0)})):t(e.selection.getRng(),!1)},Td=function(e,t,n){var i=Fl(e,t);n(i),e.moveToBookmark(i)};var Dd=function(e,t){var n=function(t){return e(t)?x.from(t.dom.nodeValue):x.none()};return{get:function(i){if(!e(i))throw new Error("Can only get "+t+" value of a "+t+" node");return n(i).getOr("")},getOption:n,set:function(n,i){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=i}}}(Nt,"text"),Md=function(e){return Dd.get(e)},Ed=function(e,t,n,i){return Rt(t).fold((function(){return"skipping"}),(function(r){return"br"===i||function(e){return Nt(e)&&Md(e)===Wi}(t)?"valid":function(e){return Et(e)&&xs(e,_s())}(t)?"existing":Dc(t.dom)?"caret":qc(e,n,i)&&qc(e,Tt(r),n)?"valid":"invalid-child"}))},Nd=function(e,t,n,i){var r=t.uid,o=void 0===r?Ps("mce-annotation"):r,a=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,["uid"]),s=bt.fromTag("span",e);bs(s,_s()),zn(s,""+Ts(),o),zn(s,""+Ss(),n);var l=i(o,a),u=l.attributes,c=void 0===u?{}:u,d=l.classes,f=void 0===d?[]:d;return Fn(s,c),function(e,t){W(t,(function(t){bs(e,t)}))}(s,f),s},Ad=function(e,t,n,i,r){var o=[],a=Nd(e.getDoc(),r,n,i),s=as(x.none()),l=function(){s.set(x.none())},u=function(e){W(e,c)},c=function(t){switch(Ed(e,t,"span",Tt(t))){case"invalid-child":l();var n=Wt(t);u(n),l();break;case"valid":var i=s.get().getOrThunk((function(){var e=Is(a);return o.push(e),s.set(x.some(e)),e}));!function(e,t){Zt(e,t),tn(t,e)}(t,i)}};return md(e.dom,t,(function(e){l(),function(e){var t=H(e,bt.fromDom);u(t)}(e)})),o},Pd=function(e,t,n,i){e.undoManager.transact((function(){var r=e.selection,o=r.getRng(),a=bd(e).length>0;if(o.collapsed&&!a&&function(e,t){var n=hd(e,t,[{inline:!0}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)}(e,o),r.getRng().collapsed&&!a){var s=Nd(e.getDoc(),i,t,n.decorate);Ls(s,Hi),r.getRng().insertNode(s.dom),r.select(s.dom)}else Td(r,!1,(function(){Sd(e,(function(r){Ad(e,r,t,n.decorate,i)}))}))}))},Ld=function(e){var t,n=(t={},{register:function(e,n){t[e]={name:e,settings:n}},lookup:function(e){return t.hasOwnProperty(e)?x.from(t[e]).map((function(e){return e.settings})):x.none()}});Ns(e,n);var i=Es(e);return{register:function(e,t){n.register(e,t)},annotate:function(t,i){n.lookup(t).each((function(n){Pd(e,t,n,i)}))},annotationChanged:function(e,t){i.addListener(e,t)},remove:function(t){Ds(e,x.some(t)).each((function(e){var t=e.elements;W(t,an)}))},getAll:function(t){var n=function(e,t){var n=bt.fromDom(e.getBody()),i=ks(n,"["+Ss()+'="'+t+'"]'),r={};return W(i,(function(e){var t=Hn(e,Ts()),n=r.hasOwnProperty(t)?r[t]:[];r[t]=n.concat([e])})),r}(e,t);return re(n,(function(e){return H(e,(function(e){return e.dom}))}))}}};function Od(e){return{getBookmark:h(Rc,e),moveToBookmark:h(Bc,e)}}!function(e){e.isBookmarkNode=zc}(Od||(Od={}));var Id=Od,Rd=function(e,t){for(;t&&t!==e;){if(Pn(t)||Ln(t))return t;t=t.parentNode}return null},Bd=function(e,t,n){if(n.collapsed)return!1;if(ht.browser.isIE()&&n.startOffset===n.endOffset-1&&n.startContainer===n.endContainer){var i=n.startContainer.childNodes[n.startOffset];if(yn(i))return F(i.getClientRects(),(function(n){return qs(n,e,t)}))}return F(n.getClientRects(),(function(n){return qs(n,e,t)}))},zd={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return ht.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Fd=Ln,Hd=function(e,t){var n,i,r,o,a,s,l,u,c,d,f,h,p,m,g=t.dom,v=vt.each,y=t.getDoc(),b=document,w=Math.abs,x=Math.round,C=t.getBody(),k={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},_=function(e){return e&&("IMG"===e.nodeName||t.dom.is(e,"figure.image"))},S=function(e){var n=e.target;(function(e,t){if("longpress"===e.type||0===e.type.indexOf("touch")){var n=e.touches[0];return _(e.target)&&!Bd(n.clientX,n.clientY,t)}return _(e.target)&&!Bd(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(n)},T=function(e){return t.dom.is(e,"figure.image")?e.querySelector("img"):e},D=function(e){var n=ru(t);return!!n&&("false"!==e.getAttribute("data-mce-resize")&&(e!==t.getBody()&&xt(bt.fromDom(e),n)))},M=function(e,t,n){g.setStyles(T(e),{width:t,height:n})},E=function(e){var v,y,b,k,S;v=e.screenX-a,y=e.screenY-s,f=v*o[2]+l,h=y*o[3]+u,f=f<5?5:f,h=h<5?5:h,b=_(n)&&!1!==function(e){return e.getParam("resize_img_proportional",!0,"boolean")}(t)?!zd.modifierPressed(e):zd.modifierPressed(e),b&&(w(v)>w(y)?(h=x(f*c),f=x(h/c)):(f=x(h/c),h=x(f*c))),M(i,f,h),k=(k=o.startPos.x+v)>0?k:0,S=(S=o.startPos.y+y)>0?S:0,g.setStyles(r,{left:k,top:S,display:"block"}),r.innerHTML=f+" &times; "+h,o[2]<0&&i.clientWidth<=f&&g.setStyle(i,"left",undefined+(l-f)),o[3]<0&&i.clientHeight<=h&&g.setStyle(i,"top",undefined+(u-h)),(v=C.scrollWidth-p)+(y=C.scrollHeight-m)!==0&&g.setStyles(r,{left:k-v,top:S-y}),d||(!function(e,t,n,i,r){e.fire("ObjectResizeStart",{target:t,width:n,height:i,origin:r})}(t,n,l,u,"corner-"+o.name),d=!0)},N=function e(){var a=d;d=!1;var s=function(e,i){i&&(n.style[e]||!t.schema.isValid(n.nodeName.toLowerCase(),e)?g.setStyle(T(n),e,i):g.setAttrib(T(n),e,""+i))};a&&(s("width",f),s("height",h)),g.unbind(y,"mousemove",E),g.unbind(y,"mouseup",e),b!==y&&(g.unbind(b,"mousemove",E),g.unbind(b,"mouseup",e)),g.remove(i),g.remove(r),A(n),a&&(!function(e,t,n,i,r){e.fire("ObjectResized",{target:t,width:n,height:i,origin:r})}(t,n,f,h,"corner-"+o.name),g.setAttrib(n,"style",g.getAttrib(n,"style"))),t.nodeChanged()},A=function(e){P(),I();var d=g.getPos(e,C),w=d.x,x=d.y,_=e.getBoundingClientRect(),S=_.width||_.right-_.left,A=_.height||_.bottom-_.top;n!==e&&(n=e,f=h=0);var L=t.fire("ObjectSelected",{target:e});D(e)&&!L.isDefaultPrevented()?v(k,(function(e,t){var d;(d=g.get("mceResizeHandle"+t))&&g.remove(d),d=g.add(C,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),11===ht.ie&&(d.contentEditable=!1),g.bind(d,"mousedown",(function(d){d.stopImmediatePropagation(),d.preventDefault(),function(d){a=d.screenX,s=d.screenY,l=T(n).clientWidth,u=T(n).clientHeight,c=u/l,(o=e).name=t,o.startPos={x:S*e[0]+w,y:A*e[1]+x},p=C.scrollWidth,m=C.scrollHeight,i=n.cloneNode(!0),g.addClass(i,"mce-clonedresizable"),g.setAttrib(i,"data-mce-bogus","all"),i.contentEditable=!1,i.unSelectabe=!0,g.setStyles(i,{left:w,top:x,margin:0}),M(i,S,A),i.removeAttribute("data-mce-selected"),C.appendChild(i),g.bind(y,"mousemove",E),g.bind(y,"mouseup",N),b!==y&&(g.bind(b,"mousemove",E),g.bind(b,"mouseup",N)),r=g.add(C,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},l+" &times; "+u)}(d)})),e.elm=d,g.setStyles(d,{left:S*e[0]+w-d.offsetWidth/2,top:A*e[1]+x-d.offsetHeight/2})})):P(),n.setAttribute("data-mce-selected","1")},P=function(){I(),n&&n.removeAttribute("data-mce-selected"),ie(k,(function(e,t){var n=g.get("mceResizeHandle"+t);n&&(g.unbind(n),g.remove(n))}))},L=function(n){var i,r=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};d||t.removed||(v(g.select("img[data-mce-selected],hr[data-mce-selected]"),(function(e){e.removeAttribute("data-mce-selected")})),i="mousedown"===n.type?n.target:e.getNode(),r(i=g.$(i).closest("table,img,figure.image,hr")[0],C)&&(R(),r(e.getStart(!0),i)&&r(e.getEnd(!0),i))?A(i):P())},O=function(e){return Fd(Rd(t.getBody(),e))},I=function(){ie(k,(function(e){e.elm&&(g.unbind(e.elm),delete e.elm)}))},R=function(){try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};t.on("init",(function(){if(R(),ht.browser.isIE()||ht.browser.isEdge()){t.on("mousedown click",(function(e){var n=e.target,i=n.nodeName;d||!/^(TABLE|IMG|HR)$/.test(i)||O(n)||(2!==e.button&&t.selection.select(n,"TABLE"===i),"mousedown"===e.type&&t.nodeChanged())}));var e=function(e){var n=function(e){ki.setEditorTimeout(t,(function(){return t.selection.select(e)}))};if(O(e.target)||In(e.target))return e.preventDefault(),void n(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&n(e.target))};g.bind(C,"mscontrolselect",e),t.on("remove",(function(){return g.unbind(C,"mscontrolselect",e)}))}var i=ki.throttle((function(e){t.composing||L(e)}));t.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",i),t.on("keyup compositionend",(function(e){n&&"TABLE"===n.nodeName&&i(e)})),t.on("hide blur",P),t.on("contextmenu longpress",S,!0)})),t.on("remove",I);return{isResizable:D,showResizeRect:A,hideResizeRect:P,updateResizeRect:L,destroy:function(){n=i=null}}},Wd=function(e){return Pn(e)||Ln(e)},jd=function(e,t,n){var i,r,o=n;if(o.caretPositionFromPoint)(r=o.caretPositionFromPoint(e,t))&&((i=n.createRange()).setStart(r.offsetNode,r.offset),i.collapse(!0));else if(n.caretRangeFromPoint)i=n.caretRangeFromPoint(e,t);else if(o.body.createTextRange){i=o.body.createTextRange();try{i.moveToPoint(e,t),i.collapse(!0)}catch(r){i=function(e,t,n){var i,r=n.elementFromPoint(e,t),o=n.body.createTextRange();if(r&&"HTML"!==r.tagName||(r=n.body),o.moveToElementText(r),(i=(i=vt.toArray(o.getClientRects())).sort((function(e,n){return(e=Math.abs(Math.max(e.top-t,e.bottom-t)))-Math.abs(Math.max(n.top-t,n.bottom-t))}))).length>0){t=(i[0].bottom+i[0].top)/2;try{return o.moveToPoint(e,t),o.collapse(!0),o}catch(e){}}return null}(e,t,n)}return function(e,t){var n=e&&e.parentElement?e.parentElement():null;return Ln(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(n,t,Wd))?null:e}(i,n.body)}return i},Ud=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},Vd=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},$d=function(e,t,n){return Vd(e,t,(function(e){return e.nodeName===n}))},qd=function(e){return e&&"TABLE"===e.nodeName},Xd=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},Yd=function(e,t){return Yi(e)&&!1===Vd(e,t,Dc)},Kd=function(e,t,n){for(var i=new Mi(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=i[n?"prev":"next"]();)if(Nn(t))return!0},Gd=function(e,t,n,i,r){var o,a,s=e.getRoot(),l=e.schema.getNonEmptyElements(),u=e.getParent(r.parentNode,e.isBlock)||s;if(i&&Nn(r)&&t&&e.isEmpty(u))return x.some(gl(r.parentNode,e.nodeIndex(r)));for(var c=new Mi(r,u);a=c[i?"prev":"next"]();){if("false"===e.getContentEditableParent(a)||Yd(a,s))return x.none();if(Tn(a)&&a.nodeValue.length>0)return!1===$d(a,s,"A")?x.some(gl(a,i?a.nodeValue.length:0)):x.none();if(e.isBlock(a)||l[a.nodeName.toLowerCase()])return x.none();o=a}return n&&o?x.some(gl(o,0)):x.none()},Jd=function(e,t,n,i){var r,o,a,s,l=e.getRoot(),u=!1;r=i[(n?"start":"end")+"Container"],o=i[(n?"start":"end")+"Offset"];var c=yn(r)&&o===r.childNodes.length,d=e.schema.getNonEmptyElements();if(s=n,Yi(r))return x.none();if(yn(r)&&o>r.childNodes.length-1&&(s=!1),Mn(r)&&(r=l,o=0),r===l){if(s&&(a=r.childNodes[o>0?o-1:0])){if(Yi(a))return x.none();if(d[a.nodeName]||qd(a))return x.none()}if(r.hasChildNodes()){if(o=Math.min(!s&&o>0?o-1:o,r.childNodes.length-1),r=r.childNodes[o],o=Tn(r)&&c?r.data.length:0,!t&&r===l.lastChild&&qd(r))return x.none();if(function(e,t){for(;t&&t!==e;){if(Ln(t))return!0;t=t.parentNode}return!1}(l,r)||Yi(r))return x.none();if(r.hasChildNodes()&&!1===qd(r)){a=r;var f=new Mi(r,l);do{if(Ln(a)||Yi(a)){u=!1;break}if(Tn(a)&&a.nodeValue.length>0){o=s?0:a.nodeValue.length,r=a,u=!0;break}if(d[a.nodeName.toLowerCase()]&&!Xd(a)){o=e.nodeIndex(a),r=a.parentNode,s||o++,u=!0;break}}while(a=s?f.next():f.prev())}}}return t&&(Tn(r)&&0===o&&Gd(e,c,t,!0,r).each((function(e){r=e.container(),o=e.offset(),u=!0})),yn(r)&&((a=r.childNodes[o])||(a=r.childNodes[o-1]),!a||!Nn(a)||function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t}(a,"A")||Kd(e,a,!1)||Kd(e,a,!0)||Gd(e,c,t,!0,a).each((function(e){r=e.container(),o=e.offset(),u=!0})))),s&&!t&&Tn(r)&&o===r.nodeValue.length&&Gd(e,c,t,!1,r).each((function(e){r=e.container(),o=e.offset(),u=!0})),u?x.some(gl(r,o)):x.none()},Zd=function(e,t){var n=t.collapsed,i=t.cloneRange(),r=gl.fromRangeStart(t);return Jd(e,n,!0,i).each((function(e){n&&gl.isAbove(r,e)||i.setStart(e.container(),e.offset())})),n||Jd(e,n,!1,i).each((function(e){i.setEnd(e.container(),e.offset())})),n&&i.collapse(!0),Ud(t,i)?x.none():x.some(i)},Qd=function(e,t){return e.splitText(t)},ef=function(e){var t=e.startContainer,n=e.startOffset,i=e.endContainer,r=e.endOffset;return t===i&&Tn(t)?n>0&&n<t.nodeValue.length&&(t=(i=Qd(t,n)).previousSibling,r>n?(t=i=Qd(i,r-=n).previousSibling,r=i.nodeValue.length,n=0):r=0):(Tn(t)&&n>0&&n<t.nodeValue.length&&(t=Qd(t,n),n=0),Tn(i)&&r>0&&r<i.nodeValue.length&&(r=(i=Qd(i,r).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:i,endOffset:r}};function tf(e){return{walk:function(t,n){return md(e,t,n)},split:ef,normalize:function(t){return Zd(e,t).fold(g,(function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0}))}}}!function(e){e.compareRanges=Ud,e.getCaretRangeFromPoint=jd,e.getSelectedNode=Xs,e.getNode=Ys}(tf||(tf={}));var nf=tf;var rf,of=function(e,t){var n=function(n){var i=t(n);if(i<=0||null===i){var r=Un(n,e);return parseFloat(r)||0}return i},i=function(e,t){return $(t,(function(t,n){var i=Un(e,n),r=void 0===i?0:parseInt(i,10);return isNaN(r)?t:t+r}),0)};return{set:function(t,n){if(!L(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);var i=t.dom;Rn(i)&&(i.style[e]=n+"px")},get:n,getOuter:n,aggregate:i,max:function(e,t,n){var r=i(e,n);return t>r?t-r:0}}}("height",(function(e){var t=e.dom;return sn(e)?t.getBoundingClientRect().height:t.offsetHeight})),af=function e(t,n){return t.view(n).fold(d([]),(function(n){var i=t.owner(n),r=e(t,i);return[n].concat(r)}))},sf=function(e,t){var n=t.owner(e);return af(t,n)},lf=Object.freeze({__proto__:null,view:function(e){var t;return(e.dom===document?x.none():x.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(bt.fromDom)},owner:function(e){return Ot(e)}}),uf=function(e){return"textarea"===Tt(e)},cf=function(e,t){var n=function(e){var t=e.dom.ownerDocument,n=t.body,i=t.defaultView,r=t.documentElement;if(n===e.dom)return ln(n.offsetLeft,n.offsetTop);var o=un(null==i?void 0:i.pageYOffset,r.scrollTop),a=un(null==i?void 0:i.pageXOffset,r.scrollLeft),s=un(r.clientTop,n.clientTop),l=un(r.clientLeft,n.clientLeft);return cn(e).translate(a-l,o-s)}(e),i=function(e){return of.get(e)}(e);return{element:e,bottom:n.top+i,height:i,pos:n,cleanup:t}},df=function(e,t){var n=function(e,t){var n=Wt(e);if(0===n.length||uf(e))return{element:e,offset:t};if(t<n.length&&!uf(n[t]))return{element:n[t],offset:0};var i=n[n.length-1];return uf(i)?{element:e,offset:t}:"img"===Tt(i)?{element:i,offset:1}:Nt(i)?{element:i,offset:Md(i).length}:{element:i,offset:Wt(i).length}}(e,t),i=bt.fromHtml('<span data-mce-bogus="all">\ufeff</span>');return Zt(n.element,i),cf(i,(function(){return on(i)}))},ff=function(e,t,n,i){gf(e,(function(r,o){return pf(e,t,n,i)}),n)},hf=function(e,t,n,i,r){var o={elm:i.element.dom,alignToTop:r};(function(e,t){return e.fire("ScrollIntoView",t).isDefaultPrevented()})(e,o)||(n(t,dn(t).top,i,r),function(e,t){e.fire("AfterScrollIntoView",t)}(e,o))},pf=function(e,t,n,i){var r=bt.fromDom(e.getBody()),o=bt.fromDom(e.getDoc());r.dom.offsetWidth;var a=df(bt.fromDom(n.startContainer),n.startOffset);hf(e,o,t,a,i),a.cleanup()},mf=function(e,t,n,i){var r=bt.fromDom(e.getDoc());hf(e,r,n,function(e){return cf(bt.fromDom(e),u)}(t),i)},gf=function(e,t,n){var i=n.startContainer,r=n.startOffset,o=n.endContainer,a=n.endOffset;t(bt.fromDom(i),bt.fromDom(o));var s=e.dom.createRng();s.setStart(i,r),s.setEnd(o,a),e.selection.setRng(n)},vf=function(e,t,n,i){var r=e.pos;if(n)fn(r.left,r.top,i);else{var o=r.top-t+e.height;fn(r.left,o,i)}},yf=function(e,t,n,i,r){var o=n+t,a=i.pos.top,s=i.bottom,l=s-a>=n;if(a<t)vf(i,n,!1!==r,e);else if(a>o){vf(i,n,l?!1!==r:!0===r,e)}else s>o&&!l&&vf(i,n,!0===r,e)},bf=function(e,t,n,i){var r=e.dom.defaultView.innerHeight;yf(e,t,r,n,i)},wf=function(e,t,n,i){var r=e.dom.defaultView.innerHeight;yf(e,t,r,n,i);var o=function(e){var t=bt.fromDom(document),n=dn(t),i=sf(e,lf),r=cn(e),o=V(i,(function(e,t){var n=cn(t);return{left:e.left+n.left,top:e.top+n.top}}),{left:0,top:0});return ln(o.left+r.left+n.left,o.top+r.top+n.top)}(n.element),a=mn(window);o.top<a.y?hn(n.element,!1!==i):o.top>a.bottom&&hn(n.element,!0===i)},xf=function(e,t,n){return ff(e,bf,t,n)},Cf=function(e,t,n){return mf(e,t,bf,n)},kf=function(e,t,n){return ff(e,wf,t,n)},_f=function(e,t,n){return mf(e,t,wf,n)},Sf=function(e,t,n){(e.inline?xf:kf)(e,t,n)},Tf=function(e){var t=Yt(e).dom;return e.dom===t.activeElement},Df=function(e){return void 0===e&&(e=bt.fromDom(document)),x.from(e.dom.activeElement).map(bt.fromDom)},Mf=function(e,t,n,i){return{start:e,soffset:t,finish:n,foffset:i}},Ef=ci([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Nf=(Ef.before,Ef.on,Ef.after,function(e){return e.fold(f,f,f)}),Af=ci([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Pf={domRange:Af.domRange,relative:Af.relative,exact:Af.exact,exactFromRange:function(e){return Af.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){var t=function(e){return e.match({domRange:function(e){return bt.fromDom(e.startContainer)},relative:function(e,t){return Nf(e)},exact:function(e,t,n,i){return e}})}(e);return It(t)},range:Mf},Lf=rt().browser,Of=function(e,t){var n=Nt(t)?Md(t).length:Wt(t).length+1;return e>n?n:e<0?0:e},If=function(e){return Pf.range(e.start,Of(e.soffset,e.start),e.finish,Of(e.foffset,e.finish))},Rf=function(e,t){return!vn(t.dom)&&(St(e,t)||kt(e,t))},Bf=function(e){return function(t){return Rf(e,t.start)&&Rf(e,t.finish)}},zf=function(e){return!0===e.inline||Lf.isIE()},Ff=function(e){return Pf.range(bt.fromDom(e.startContainer),e.startOffset,bt.fromDom(e.endContainer),e.endOffset)},Hf=function(e){return function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?x.from(t.getRangeAt(0)):x.none()).map(Ff)}(It(e).dom).filter(Bf(e))},Wf=function(e){var t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),x.some(t)}catch(e){return x.none()}},jf=function(e){var t=zf(e)?Hf(bt.fromDom(e.getBody())):x.none();e.bookmark=t.isSome()?t:e.bookmark},Uf=function(e){return(e.bookmark?e.bookmark:x.none()).bind((function(t){return function(e,t){return x.from(t).filter(Bf(e)).map(If)}(bt.fromDom(e.getBody()),t)})).bind(Wf)},Vf={isEditorUIElement:function(e){var t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},$f=function(e,t){rt().browser.isIE()?function(e){e.on("focusout",(function(){jf(e)}))}(e):function(e,t){e.on("mouseup touchend",(function(e){t.throttle()}))}(e,t),e.on("keyup NodeChange",(function(t){(function(e){return"nodechange"===e.type&&e.selectionChange})(t)||jf(e)}))},qf=function(e){var t=hs((function(){jf(e)}),0);e.on("init",(function(){e.inline&&function(e,t){var n=function(){t.throttle()};ts.DOM.bind(document,"mouseup",n),e.on("remove",(function(){ts.DOM.unbind(document,"mouseup",n)}))}(e,t),$f(e,t)})),e.on("remove",(function(){t.cancel()}))},Xf=ts.DOM,Yf=function(e,t){var n=function(e){return e.getParam("custom_ui_selector","","string")}(e),i=Xf.getParent(t,(function(t){return function(e){return Vf.isEditorUIElement(e)}(t)||!!n&&e.dom.is(t,n)}));return null!==i},Kf=function(e,t){var n=t.editor;qf(n),n.on("focusin",(function(){var t=this,n=e.focusedEditor;n!==t&&(n&&n.fire("blur",{focusedEditor:t}),e.setActive(t),e.focusedEditor=t,t.fire("focus",{blurredEditor:n}),t.focus(!0))})),n.on("focusout",(function(){var t=this;ki.setEditorTimeout(t,(function(){var n=e.focusedEditor;Yf(t,function(e){try{var t=Yt(bt.fromDom(e.getElement()));return Df(t).fold((function(){return document.body}),(function(e){return e.dom}))}catch(e){return document.body}}(t))||n!==t||(t.fire("blur",{focusedEditor:null}),e.focusedEditor=null)}))})),rf||(rf=function(t){var n=e.activeEditor;n&&function(e){if(Xt()&&A(e.target)){var t=bt.fromDom(e.target);if(Et(t)&&Jt(t)&&e.composed&&e.composedPath){var n=e.composedPath();if(n)return Z(n)}}return x.from(e.target)}(t).each((function(t){t.ownerDocument===document&&(t===document.body||Yf(n,t)||e.focusedEditor!==n||(n.fire("blur",{focusedEditor:null}),e.focusedEditor=null))}))},Xf.bind(document,"focusin",rf))},Gf=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(Xf.unbind(document,"focusin",rf),rf=null)},Jf=function(e,t){return function(e){return e.collapsed?x.from(Ys(e.startContainer,e.startOffset)).map(bt.fromDom):x.none()}(t).bind((function(t){return Bi(t)?x.some(t):!1===St(e,t)?x.some(e):x.none()}))},Zf=function(e,t){Jf(bt.fromDom(e.getBody()),t).bind((function(e){return _c(e.dom)})).fold((function(){e.selection.normalize()}),(function(t){return e.selection.setRng(t.toRange())}))},Qf=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},eh=function(e){return Tf(e)||(t=e,Df(Yt(t)).filter((function(e){return t.dom.contains(e.dom)}))).isSome();var t},th=function(e){return e.inline?function(e){var t=e.getBody();return t&&eh(bt.fromDom(t))}(e):function(e){return e.iframeElement&&Tf(bt.fromDom(e.iframeElement))}(e)},nh=function(e){return th(e)||function(e){return Df().filter((function(t){return!(void 0!==(n=t.dom.classList)&&(n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body")))&&Yf(e,t.dom);var n})).isSome()}(e)},ih=function(e){return e.editorManager.setActive(e)},rh=function(e,t){e.removed||(t?ih(e):function(e){var t=e.selection,n=e.getBody(),i=t.getRng();e.quirks.refreshContentEditable(),void 0!==e.bookmark&&!1===th(e)&&Uf(e).each((function(t){e.selection.setRng(t),i=t}));var r=function(e,t){return e.dom.getParent(t,(function(t){return"true"===e.dom.getContentEditable(t)}))}(e,t.getNode());if(e.$.contains(n,r))return Qf(r),Zf(e,i),void ih(e);e.inline||(ht.opera||Qf(n),e.getWin().focus()),(ht.gecko||e.inline)&&(Qf(n),Zf(e,i)),ih(e)}(e))},oh=function(e,t,n,i,r){var o=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return x.from(o).map(bt.fromDom).map((function(e){return i&&t.collapsed?e:jt(e,r(e,a)).getOr(e)})).bind((function(e){return Et(e)?x.some(e):Rt(e).filter(Et)})).map((function(e){return e.dom})).getOr(e)},ah=function(e,t,n){return oh(e,t,!0,n,(function(e,t){return Math.min(e.dom.childNodes.length,t)}))},sh=function(e,t,n){return oh(e,t,!1,n,(function(e,t){return t>0?t-1:t}))},lh=function(e,t){for(var n=e;e&&Tn(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},uh=function(e,t){return H(t,(function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t}))},ch={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},dh=function(e,t,n){var i=n?"lastChild":"firstChild",r=n?"prev":"next";if(e[i])return e[i];if(e!==t){var o=e[r];if(o)return o;for(var a=e.parent;a&&a!==t;a=a.parent)if(o=a[r])return o}},fh=function(e){if(!pr(e.value))return!1;var t=e.parent;return!t||"span"===t.name&&!t.attr("style")||!/^[ ]+$/.test(e.value)},hh=function(e){var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t},ph=function(){function e(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var i=new e(t,ch[t]||1);return n&&ie(n,(function(e,t){i.attr(t,e)})),i},e.prototype.replace=function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},e.prototype.attr=function(e,t){var n,i=this;if("string"!=typeof e)return null!=e&&ie(e,(function(e,t){i.attr(t,e)})),i;if(n=i.attributes){if(void 0!==t){if(null===t){if(e in n.map){delete n.map[e];for(var r=n.length;r--;)if(n[r].name===e)return n.splice(r,1),i}return i}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,i}return n.map[e]}},e.prototype.clone=function(){var t,n=this,i=new e(n.name,n.type);if(t=n.attributes){var r=[];r.map={};for(var o=0,a=t.length;o<a;o++){var s=t[o];"id"!==s.name&&(r[r.length]={name:s.name,value:s.value},r.map[s.name]=s.value)}i.attributes=r}return i.value=n.value,i.shortEnded=n.shortEnded,i},e.prototype.wrap=function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},e.prototype.unwrap=function(){for(var e=this,t=e.firstChild;t;){var n=t.next;e.insert(t,e,!0),t=n}e.remove()},e.prototype.remove=function(){var e=this,t=e.parent,n=e.next,i=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):i.next=n,t.lastChild===e?(t.lastChild=i,i&&(i.next=null)):n.prev=i,e.parent=e.next=e.prev=null),e},e.prototype.append=function(e){var t=this;e.parent&&e.remove();var n=t.lastChild;return n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e},e.prototype.insert=function(e,t,n){e.parent&&e.remove();var i=t.parent||this;return n?(t===i.firstChild?i.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===i.lastChild?i.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=i,e},e.prototype.getAll=function(e){for(var t=[],n=this.firstChild;n;n=dh(n,this))n.name===e&&t.push(n);return t},e.prototype.empty=function(){var e=this;if(e.firstChild){for(var t=[],n=e.firstChild;n;n=dh(n,e))t.push(n);for(var i=t.length;i--;){(n=t[i]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}}return e.firstChild=e.lastChild=null,e},e.prototype.isEmpty=function(e,t,n){void 0===t&&(t={});var i=this,r=i.firstChild;if(hh(i))return!1;if(r)do{if(1===r.type){if(r.attr("data-mce-bogus"))continue;if(e[r.name])return!1;if(hh(r))return!1}if(8===r.type)return!1;if(3===r.type&&!fh(r))return!1;if(3===r.type&&r.parent&&t[r.parent.name]&&pr(r.value))return!1;if(n&&n(r))return!1}while(r=dh(r,i));return!0},e.prototype.walk=function(e){return dh(this,null,e)},e}(),mh=vt.makeMap,gh=function(e){var t=[],n=(e=e||{}).indent,i=mh(e.indent_before||""),r=mh(e.indent_after||""),o=zr.getEncodeFunc(e.entity_encoding||"raw",e.entities),a="html"===e.element_format;return{start:function(e,s,l){var u,c,d,f;if(n&&i[e]&&t.length>0&&(f=t[t.length-1]).length>0&&"\n"!==f&&t.push("\n"),t.push("<",e),s)for(u=0,c=s.length;u<c;u++)d=s[u],t.push(" ",d.name,'="',o(d.value,!0),'"');t[t.length]=!l||a?">":" />",l&&n&&r[e]&&t.length>0&&(f=t[t.length-1]).length>0&&"\n"!==f&&t.push("\n")},end:function(e){var i;t.push("</",e,">"),n&&r[e]&&t.length>0&&(i=t[t.length-1]).length>0&&"\n"!==i&&t.push("\n")},text:function(e,n){e.length>0&&(t[t.length]=n?e:o(e))},cdata:function(e){t.push("<![CDATA[",e,"]]>")},comment:function(e){t.push("\x3c!--",e,"--\x3e")},pi:function(e,i){i?t.push("<?",e," ",o(i),"?>"):t.push("<?",e,"?>"),n&&t.push("\n")},doctype:function(e){t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:function(){t.length=0},getContent:function(){return t.join("").replace(/\n$/,"")}}},vh=function(e,t){void 0===t&&(t=Kr());var n=gh(e);(e=e||{}).validate=!("validate"in e)||e.validate;return{serialize:function(i){var r=e.validate,o={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)do{a(e)}while(e=e.next)}};n.reset();var a=function e(i){var a,s,l,u,c,d,f,h,p,m=o[i.type];if(m)m(i);else{if(a=i.name,s=i.shortEnded,l=i.attributes,r&&l&&l.length>1&&((d=[]).map={},p=t.getElementRule(i.name))){for(f=0,h=p.attributesOrder.length;f<h;f++)(u=p.attributesOrder[f])in l.map&&(c=l.map[u],d.map[u]=c,d.push({name:u,value:c}));for(f=0,h=l.length;f<h;f++)(u=l[f].name)in d.map||(c=l.map[u],d.map[u]=c,d.push({name:u,value:c}));l=d}if(n.start(i.name,l,s),!s){if(i=i.firstChild)do{e(i)}while(i=i.next);n.end(a)}}};return 1!==i.type||e.inner?o[11](i):a(i),n.getContent()}}},yh=function(e,t){return e.replace(new RegExp(t.prefix+"_[0-9]+","g"),(function(e){return de(t.uris,e).getOr(e)}))},bh=function(e,t,n){var i,r,o=1,a=e.getShortEndedElements(),s=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g;for(s.lastIndex=i=n;r=s.exec(t);){if(i=s.lastIndex,"/"===r[1])o--;else if(!r[1]){if(r[2]in a)continue;o++}if(0===o)break}return i},wh=function(e,t){var n=e.exec(t);if(n){var i=n[1],r=n[2];return"string"==typeof i&&"data-mce-bogus"===i.toLowerCase()?r:null}return null};function xh(e,t){void 0===t&&(t=Kr());var n=function(){};!1!==(e=e||{}).fix_self_closing&&(e.fix_self_closing=!0);var i=e.comment?e.comment:n,r=e.cdata?e.cdata:n,o=e.text?e.text:n,a=e.start?e.start:n,s=e.end?e.end:n,l=e.pi?e.pi:n,u=e.doctype?e.doctype:n,c=function(n,c){void 0===c&&(c="html");for(var d,f,h,p,m,g,v,y,b,w,x,C,k,_,S,T,D,M,E,N=n.html,A=0,P=[],L=0,O=zr.decode,I=vt.makeMap("src,href,data,background,formaction,poster,xlink:href"),R=/((java|vb)script|mhtml):/i,B="html"===c?0:1,z=function(e){var t,n;for(t=P.length;t--&&P[t].name!==e;);if(t>=0){for(n=P.length-1;n>=t;n--)(e=P[n]).valid&&s(e.name);P.length=t}},F=function(e,t){return o(yh(e,n),t)},H=function(t){""!==t&&(">"===t.charAt(0)&&(t=" "+t),e.allow_conditional_comments||"[if"!==t.substr(0,3).toLowerCase()||(t=" "+t),i(yh(t,n)))},W=function(e,t){var n=e||"",i=!Ne(n,"--"),r=function(e,t,n){void 0===n&&(n=0);var i=e.toLowerCase();if(-1!==i.indexOf("[if ",n)&&function(e,t){return/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t))}(i,n)){var r=i.indexOf("[endif]",n);return i.indexOf(">",r)}if(t){var o=i.indexOf(">",n);return-1!==o?o:i.length}var a=/--!?>/;a.lastIndex=n;var s=a.exec(e);return s?s.index+s[0].length:i.length}(N,i,t);return e=N.substr(t,r-t),H(i?n+e:e),r+1},j=function(t,i,r,o,a){var s,l;if(r=function(e){return de(n.uris,e).getOr(e)}((i=i.toLowerCase())in X?i:O(r||o||a||"")),Y&&!y&&!1===function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")}(i)){if(!(s=_[i])&&S){for(l=S.length;l--&&!(s=S[l]).pattern.test(i););-1===l&&(s=null)}if(!s)return;if(s.validValues&&!(r in s.validValues))return}if(I[i]&&!e.allow_script_urls){var u=r.replace(/[\s\u0000-\u001F]+/g,"");try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}if(R.test(u))return;if(function(e,t){return!e.allow_html_data_urls&&(/^data:image\//i.test(t)?!1===e.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(t):/^data:/i.test(t))}(e,u))return}y&&(i in I||0===i.indexOf("on"))||(p.map[i]=r,p.push({name:i,value:r}))},U=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),V=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,$=t.getShortEndedElements(),q=e.self_closing_elements||t.getSelfClosingElements(),X=t.getBoolAttrs(),Y=e.validate,K=e.remove_internals,G=e.fix_self_closing,J=t.getSpecialElements(),Z=N+">";d=U.exec(Z);){var Q=d[0];if(A<d.index&&F(O(N.substr(A,d.index-A))),f=d[7])":"===(f=f.toLowerCase()).charAt(0)&&(f=f.substr(1)),z(f);else if(f=d[8]){if(d.index+Q.length>N.length){F(O(N.substr(d.index))),A=d.index+Q.length;continue}":"===(f=f.toLowerCase()).charAt(0)&&(f=f.substr(1)),b=f in $,G&&q[f]&&P.length>0&&P[P.length-1].name===f&&z(f);var ee=wh(V,d[9]);if(null!==ee){if("all"===ee){A=bh(t,N,U.lastIndex),U.lastIndex=A;continue}x=!1}if(!Y||(w=t.getElementRule(f))){if(x=!0,Y&&(_=w.attributes,S=w.attributePatterns),(k=d[9])?((y=-1!==k.indexOf("data-mce-type"))&&K&&(x=!1),(p=[]).map={},k.replace(V,j)):(p=[]).map={},Y&&!y){if(T=w.attributesRequired,D=w.attributesDefault,M=w.attributesForced,w.removeEmptyAttrs&&!p.length&&(x=!1),M)for(m=M.length;m--;)v=(C=M[m]).name,"{$uid}"===(E=C.value)&&(E="mce_"+L++),p.map[v]=E,p.push({name:v,value:E});if(D)for(m=D.length;m--;)(v=(C=D[m]).name)in p.map||("{$uid}"===(E=C.value)&&(E="mce_"+L++),p.map[v]=E,p.push({name:v,value:E}));if(T){for(m=T.length;m--&&!(T[m]in p.map););-1===m&&(x=!1)}if(C=p.map["data-mce-bogus"]){if("all"===C){A=bh(t,N,U.lastIndex),U.lastIndex=A;continue}x=!1}}x&&a(f,p,b)}else x=!1;if(h=J[f]){h.lastIndex=A=d.index+Q.length,(d=h.exec(N))?(x&&(g=N.substr(A,d.index-A)),A=d.index+d[0].length):(g=N.substr(A),A=N.length),x&&(g.length>0&&F(g,!0),s(f)),U.lastIndex=A;continue}b||(k&&k.indexOf("/")===k.length-1?x&&s(f):P.push({name:f,valid:x}))}else if(f=d[1])H(f);else if(f=d[2]){if(!(1===B||e.preserve_cdata||P.length>0&&t.isValidChild(P[P.length-1].name,"#cdata"))){A=W("",d.index+2),U.lastIndex=A;continue}r(f)}else if(f=d[3])u(f);else{if((f=d[4])||"<!"===Q){A=W(f,d.index+Q.length),U.lastIndex=A;continue}if(f=d[5]){if(1!==B){A=W("?",d.index+2),U.lastIndex=A;continue}l(f,d[6])}}A=d.index+Q.length}for(A<N.length&&F(O(N.substr(A))),m=P.length-1;m>=0;m--)(f=P[m]).valid&&s(f.name)};return{parse:function(e,t){void 0===t&&(t="html"),c(function(e){for(var t,n=/data:[^;]+;base64,([a-z0-9\+\/=]+)/gi,i=[],r={},o=Ps("img"),a=0,s=0;t=n.exec(e);){var l=t[0],u=o+"_"+s++;r[u]=l,a<t.index&&i.push(e.substr(a,t.index-a)),i.push(u),a=t.index+l.length}return 0===a?{prefix:o,uris:r,html:e}:(a<e.length&&i.push(e.substr(a)),{prefix:o,uris:r,html:i.join("")})}(e),t)}}}!function(e){e.findEndTag=bh}(xh||(xh={}));var Ch=xh,kh=function(e,t){var n,i,r,o,a=t,s=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,l=e.schema;a=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")}(e.getTempAttrs(),a);for(var u=l.getShortEndedElements();o=s.exec(a);)i=s.lastIndex,r=o[0].length,n=u[o[1]]?i:Ch.findEndTag(l,a,i),a=a.substring(0,i-r)+a.substring(n),s.lastIndex=i-r;return Ui(a)},_h=kh,Sh=function(e,t,n,i){var r;if(t.format=n,t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)r=vt.trim(_h(e.serializer,i.innerHTML));else if("text"===t.format)r=Ui(i.innerText||i.textContent);else{if("tree"===t.format)return e.serializer.serialize(i,t);r=function(e,t){var n=$l(e),i=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(i,"")}(e,e.serializer.serialize(i,t))}return"text"===t.format||Fi(bt.fromDom(i))?t.content=r:t.content=vt.trim(r),t.no_events||e.fire("GetContent",t),t.content},Th=vt.each,Dh=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var i=function(t){var n={};return Th(e.getAttribs(t),(function(i){var r=i.nodeName.toLowerCase();0!==r.indexOf("_")&&"style"!==r&&0!==r.indexOf("data-")&&(n[r]=e.getAttrib(t,r))})),n},r=function(e,t){var n,i;for(i in e)if(e.hasOwnProperty(i)){if(void 0===(n=t[i]))return!1;if(e[i]!==n)return!1;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return!1;return!0};return!!r(i(t),i(n))&&(!!r(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))&&(!zc(t)&&!zc(n)))}},Mh=function(e,t,n){return x.from(n.container()).filter(Tn).exists((function(i){var r=e?0:-1;return t(i.data.charAt(n.offset()+r))}))},Eh=h(Mh,!0,Hc),Nh=h(Mh,!1,Hc),Ah=function(e){var t=e.container();return Tn(t)&&(0===t.data.length||ji(t.data)&&Id.isBookmarkNode(t.parentNode))},Ph=function(e,t){return function(n){return x.from(Uu(e?0:-1,n)).filter(t).isSome()}},Lh=function(e){return An(e)&&"block"===Un(bt.fromDom(e),"display")},Oh=function(e){return Ln(e)&&!function(e){return yn(e)&&"all"===e.getAttribute("data-mce-bogus")}(e)},Ih=Ph(!0,Lh),Rh=Ph(!1,Lh),Bh=Ph(!0,In),zh=Ph(!1,In),Fh=Ph(!0,kn),Hh=Ph(!1,kn),Wh=Ph(!0,Oh),jh=Ph(!1,Oh),Uh=function(e){var t=ks(e,"br"),n=U(function(e){for(var t=[],n=e.dom;n;)t.push(bt.fromDom(n)),n=n.lastChild;return t}(e).slice(-1),Li);t.length===n.length&&W(n,on)},Vh=function(e){rn(e),tn(e,bt.fromHtml('<br data-mce-bogus="1">'))},$h=function(e){Vt(e).each((function(t){Bt(t).each((function(n){Ai(e)&&Li(t)&&Ai(n)&&on(t)}))}))},qh=function(e,t,n){return St(t,e)?(i=function(e,t){for(var n=P(t)?t:g,i=e.dom,r=[];null!==i.parentNode&&void 0!==i.parentNode;){var o=i.parentNode,a=bt.fromDom(o);if(r.push(a),!0===n(a))break;i=o}return r}(e,(function(e){return n(e)||kt(e,t)})),i.slice(0,-1)):[];var i},Xh=function(e,t){return qh(e,t,g)},Yh=function(e,t){return[e].concat(Xh(e,t))},Kh=function(e,t,n){return wc(e,t,n,Ah)},Gh=function(e,t){return q(Yh(bt.fromDom(t.container()),e),Ai)},Jh=function(e,t,n){return Kh(e,t.dom,n).forall((function(e){return Gh(t,n).fold((function(){return!1===ju(e,n,t.dom)}),(function(i){return!1===ju(e,n,t.dom)&&St(i,bt.fromDom(e.container()))}))}))},Zh=function(e,t,n){return Gh(t,n).fold((function(){return Kh(e,t.dom,n).forall((function(e){return!1===ju(e,n,t.dom)}))}),(function(t){return Kh(e,t.dom,n).isNone()}))},Qh=h(Zh,!1),ep=h(Zh,!0),tp=h(Jh,!1),np=h(Jh,!0),ip=function(e){return Zu(e).exists(Li)},rp=function(e,t,n){var i=U(Yh(bt.fromDom(n.container()),t),Ai),r=Z(i).getOr(t);return yc(e,r.dom,n).filter(ip)},op=function(e,t){return Zu(t).exists(Li)||rp(!0,e,t).isSome()},ap=function(e,t){return function(e){return x.from(e.getNode(!0)).map(bt.fromDom)}(t).exists(Li)||rp(!1,e,t).isSome()},sp=h(rp,!1),lp=h(rp,!0),up=function(e){return gl.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},cp=function(e,t){var n=U(Yh(bt.fromDom(t.container()),e),Ai);return Z(n).getOr(e)},dp=function(e,t){return up(t)?Nh(t):Nh(t)||kc(cp(e,t).dom,t).exists(Nh)},fp=function(e,t){return up(t)?Eh(t):Eh(t)||Cc(cp(e,t).dom,t).exists(Eh)},hp=function(e){return Zu(e).bind((function(e){return mi(e,Et)})).exists((function(e){return function(e){return z(["pre","pre-wrap"],e)}(Un(e,"white-space"))}))},pp=function(e,t){return function(e,t){return kc(e.dom,t).isNone()}(e,t)||function(e,t){return Cc(e.dom,t).isNone()}(e,t)||Qh(e,t)||ep(e,t)||ap(e,t)||op(e,t)},mp=function(e,t){return!hp(t)&&(Qh(e,t)||tp(e,t)||ap(e,t)||dp(e,t))},gp=function(e,t){return!hp(t)&&(ep(e,t)||np(e,t)||op(e,t)||fp(e,t))},vp=function(e,t){return mp(e,t)||gp(e,function(e){var t=e.container(),n=e.offset();return Tn(t)&&n<t.data.length?gl(t,n+1):e}(t))},yp=function(e,t){return Fc(e.charAt(t))},bp=function(e){var t=e.container();return Tn(t)&&Ee(t.data,Hi)},wp=function(e){var t=e.data,n=function(e){var t=e.split("");return H(t,(function(e,n){return Fc(e)&&n>0&&n<t.length-1&&Wc(t[n-1])&&Wc(t[n+1])?" ":e})).join("")}(t);return n!==t&&(e.data=n,!0)},xp=function(e,t){return x.some(t).filter(bp).bind((function(t){var n=t.container(),i=function(e,t){var n=t.data,i=gl(t,0);return!(!yp(n,0)||vp(e,i)||(t.data=" "+n.slice(1),0))}(e,n)||wp(n)||function(e,t){var n=t.data,i=gl(t,n.length-1);return!(!yp(n,n.length-1)||vp(e,i)||(t.data=n.slice(0,-1)+" ",0))}(e,n);return i?x.some(t):x.none()}))},Cp=function(e){var t=bt.fromDom(e.getBody());e.selection.isCollapsed()&&xp(t,gl.fromRangeStart(e.selection.getRng())).each((function(t){e.selection.setRng(t.toRange())}))},kp=function(e,t,n){if(0!==n){var i=bt.fromDom(e),r=pi(i,Ai).getOr(i),o=e.data.slice(t,t+n),a=t+n>=e.data.length&&gp(r,yl(e,e.data.length)),s=0===t&&mp(r,yl(e,0));e.replaceData(t,n,function(e,t,n){return $(e,(function(i,r){return Hc(r)||Fc(r)?i.previousCharIsSpace||""===i.str&&t||i.str.length===e.length-1&&n?{previousCharIsSpace:!1,str:i.str+Hi}:{previousCharIsSpace:!0,str:i.str+" "}:{previousCharIsSpace:!1,str:i.str+r}}),{previousCharIsSpace:!1,str:""}).str}(o,s,a))}},_p=function(e,t){var n=e.data.slice(t),i=n.length-Le(n).length;return kp(e,t,i)},Sp=function(e,t){var n=e.data.slice(0,t),i=n.length-Oe(n).length;return kp(e,t-i,i)},Tp=function(e,t,n,i){void 0===i&&(i=!0);var r=Oe(e.data).length,o=i?e:t,a=i?t:e;return i?o.appendData(a.data):o.insertData(0,a.data),on(bt.fromDom(a)),n&&_p(o,r),o},Dp=function(e,t){return function(e,t){var n=e.container(),i=e.offset();return!1===yl.isTextPosition(e)&&n===t.parentNode&&i>yl.before(t).offset()}(t,e)?yl(t.container(),t.offset()-1):t},Mp=function(e){return cr(e.previousSibling)?x.some((t=e.previousSibling,Tn(t)?yl(t,t.data.length):yl.after(t))):e.previousSibling?Sc(e.previousSibling):x.none();var t},Ep=function(e){return cr(e.nextSibling)?x.some((t=e.nextSibling,Tn(t)?yl(t,0):yl.before(t))):e.nextSibling?_c(e.nextSibling):x.none();var t},Np=function(e,t){return Mp(t).orThunk((function(){return Ep(t)})).orThunk((function(){return function(e,t){var n=yl.before(t.previousSibling?t.previousSibling:t.parentNode);return kc(e,n).fold((function(){return Cc(e,yl.after(t))}),x.some)}(e,t)}))},Ap=function(e,t){return Ep(t).orThunk((function(){return Mp(t)})).orThunk((function(){return function(e,t){return Cc(e,yl.after(t)).fold((function(){return kc(e,yl.before(t))}),x.some)}(e,t)}))},Pp=function(e,t,n){return function(e,t,n){return e?Ap(t,n):Np(t,n)}(e,t,n).map(h(Dp,n))},Lp=function(e,t,n){n.fold((function(){e.focus()}),(function(n){e.selection.setRng(n.toRange(),t)}))},Op=function(e,t){return t&&fe(e.schema.getBlockElements(),Tt(t))},Ip=function(e){if(wr(e)){var t=bt.fromHtml('<br data-mce-bogus="1">');return rn(e),tn(e,t),x.some(yl.before(t.dom))}return x.none()},Rp=function(e,t,n){var i,r,o,a,s=Bt(e).filter(Nt),l=zt(e).filter(Nt);return on(e),(i=s,r=l,o=t,a=function(e,t,i){var r=e.dom,o=t.dom,a=r.data.length;return Tp(r,o,n),i.container()===o?yl(r,a):i},i.isSome()&&r.isSome()&&o.isSome()?x.some(a(i.getOrDie(),r.getOrDie(),o.getOrDie())):x.none()).orThunk((function(){return n&&(s.each((function(e){return Sp(e.dom,e.dom.length)})),l.each((function(e){return _p(e.dom,0)}))),t}))},Bp=function(e,t,n,i){void 0===i&&(i=!0);var r,o=Pp(t,e.getBody(),n.dom),a=pi(n,h(Op,e),(r=e.getBody(),function(e){return e.dom===r})),s=Rp(n,o,function(e,t){return fe(e.schema.getTextInlineElements(),Tt(t))}(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):a.bind(Ip).fold((function(){i&&Lp(e,t,s)}),(function(n){i&&Lp(e,t,x.some(n))}))},zp=function(e,t){return{start:e,end:t}},Fp=ci([{removeTable:["element"]},{emptyCells:["cells"]},{deleteCellSelection:["rng","cell"]}]),Hp=function(e,t){return yi(bt.fromDom(e),"td,th",t)},Wp=function(e,t){return gi(e,"table",t)},jp=function(e){return!kt(e.start,e.end)},Up=function(e,t){return Wp(e.start,t).bind((function(n){return Wp(e.end,t).bind((function(e){return t=kt(n,e),i=n,t?x.some(i):x.none();var t,i}))}))},Vp=function(e){return ks(e,"td,th")},$p=function(e,t){var n=Hp(t.startContainer,e),i=Hp(t.endContainer,e);return t.collapsed?x.none():Fs(n,i,zp).fold((function(){return n.fold((function(){return i.bind((function(t){return Wp(t,e).bind((function(e){return Z(Vp(e)).map((function(e){return zp(e,t)}))}))}))}),(function(t){return Wp(t,e).bind((function(e){return Q(Vp(e)).map((function(e){return zp(t,e)}))}))}))}),(function(t){return qp(e,t)?x.none():function(e,t){return Wp(e.start,t).bind((function(t){return Q(Vp(t)).map((function(t){return zp(e.start,t)}))}))}(t,e)}))},qp=function(e,t){return Up(t,e).isSome()},Xp=function(e,t,n){return e.filter((function(e){return jp(e)&&qp(n,e)})).orThunk((function(){return $p(n,t)})).bind((function(e){return function(e,t){return Up(e,t).map((function(t){return function(e,t,n){return{rng:e,table:t,cells:n}}(e,t,Vp(t))}))}(e,n)}))},Yp=function(e,t){return X(e,(function(e){return kt(e,t)}))},Kp=function(e,t,n){return e.filter((function(e){return function(e,t){return!jp(e)&&Up(e,t).exists((function(e){var t=e.dom.rows;return 1===t.length&&1===t[0].cells.length}))}(e,n)&&Cd(e.start,t)})).map((function(e){return e.start}))},Gp=function(e){return function(e){return Fs(Yp(e.cells,e.rng.start),Yp(e.cells,e.rng.end),(function(t,n){return e.cells.slice(t,n+1)}))}(e).map((function(t){var n=e.cells;return t.length===n.length?Fp.removeTable(e.table):Fp.emptyCells(t)}))},Jp=function(e,t){var n=function(e){return function(t){return kt(e,t)}}(e),i=function(e,t){var n=Hp(e.startContainer,t),i=Hp(e.endContainer,t);return Fs(n,i,zp)}(t,n);return Kp(i,t,n).map((function(e){return Fp.deleteCellSelection(t,e)})).orThunk((function(){return Xp(i,t,n).bind(Gp)}))},Zp=function e(t){var n;return(8===Dt(n=t)||"#comment"===Tt(n)?Bt(t):Vt(t)).bind(e).orThunk((function(){return x.some(t)}))},Qp=function(e,t){return W(t,Vh),e.selection.setCursorLocation(t[0].dom,0),!0},em=function(e,t,n){t.deleteContents();var i,r=Zp(n).getOr(n),o=bt.fromDom(e.dom.getParent(r.dom,e.dom.isBlock));if(wr(o)&&(Vh(o),e.selection.setCursorLocation(o.dom,0)),!kt(n,o)){var a=Rt(o).is(n)?[]:Rt(i=o).map(Wt).map((function(e){return U(e,(function(e){return!kt(i,e)}))})).getOr([]);W(a.concat(Wt(n)),(function(e){kt(e,o)||St(e,o)||on(e)}))}return!0},tm=function(e,t){return Bp(e,!1,t),!0},nm=function(e,t,n,i){return rm(t,i).fold((function(){return function(e,t,n){return Jp(t,n).map((function(t){return t.fold(h(tm,e),h(Qp,e),h(em,e))}))}(e,t,n)}),(function(t){return function(e,t){return om(e,t)}(e,t)})).getOr(!1)},im=function(e,t){return q(Yh(t,e),zi)},rm=function(e,t){return q(Yh(t,e),(function(e){return"caption"===Tt(e)}))},om=function(e,t){return Vh(t),e.selection.setCursorLocation(t.dom,0),x.some(!0)},am=function(e,t,n,i,r){return bc(n,e.getBody(),r).bind((function(o){return function(e,t,n,i){return _c(e.dom).bind((function(r){return Sc(e.dom).map((function(e){return t?n.isEqual(r)&&i.isEqual(e):n.isEqual(e)&&i.isEqual(r)}))})).getOr(!0)}(i,n,r,o)?function(e,t){return om(e,t)}(e,i):function(e,t,n){return rm(e,bt.fromDom(n.getNode())).map((function(e){return!1===kt(e,t)}))}(t,i,o)})).or(x.some(!0))},sm=function(e,t,n,i){var r=yl.fromRangeStart(e.selection.getRng());return im(n,i).bind((function(i){return wr(i)?om(e,i):function(e,t,n,i,r){return bc(n,e.getBody(),r).bind((function(e){return im(t,bt.fromDom(e.getNode())).map((function(e){return!1===kt(e,i)}))}))}(e,n,t,i,r)})).getOr(!1)},lm=function(e,t){return e?Fh(t):Hh(t)},um=function(e,t,n){var i=bt.fromDom(e.getBody());return rm(i,n).fold((function(){return sm(e,t,i,n)||function(e,t){var n=yl.fromRangeStart(e.selection.getRng());return lm(t,n)||yc(t,e.getBody(),n).exists((function(e){return lm(t,e)}))}(e,t)}),(function(n){return function(e,t,n,i){var r=yl.fromRangeStart(e.selection.getRng());return wr(i)?om(e,i):am(e,n,t,i,r)}(e,t,i,n).getOr(!1)}))},cm=function(e,t){var n=bt.fromDom(e.selection.getStart(!0)),i=bd(e);return e.selection.isCollapsed()&&0===i.length?um(e,t,n):function(e,t){var n=bt.fromDom(e.getBody()),i=e.selection.getRng(),r=bd(e);return 0!==r.length?Qp(e,r):nm(e,n,i,t)}(e,n)},dm=function(e){var t=yl.fromRangeStart(e),n=yl.fromRangeEnd(e),i=e.commonAncestorContainer;return yc(!1,i,n).map((function(r){return!ju(t,n,i)&&ju(t,r,i)?function(e,t,n,i){var r=document.createRange();return r.setStart(e,t),r.setEnd(n,i),r}(t.container(),t.offset(),r.container(),r.offset()):e})).getOr(e)},fm=function(e){return e.collapsed?e:dm(e)},hm=function(e,t){return e.getBlockElements()[t.name]&&function(e){return e.firstChild&&e.firstChild===e.lastChild}(t)&&function(e){return"br"===e.name||e.value===Hi}(t.firstChild)},pm=function(e,t){var n=t.firstChild,i=t.lastChild;return n&&"meta"===n.name&&(n=n.next),i&&"mce_marker"===i.attr("id")&&(i=i.prev),function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||hm(e,t))}(e,i)&&(i=i.prev),!(!n||n!==i)&&("ul"===n.name||"ol"===n.name)},mm=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&function(e){return e.data===Hi||Nn(e)}(e.firstChild)},gm=function(e){return e.length>0&&(!(t=e[e.length-1]).firstChild||mm(t))?e.slice(0,-1):e;var t},vm=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},ym=function(e,t){var n=yl.after(e),i=hc(t).prev(n);return i?i.toRange():null},bm=function(e,t,n){var i=e.parentNode;return vt.each(t,(function(t){i.insertBefore(t,e)})),function(e,t){var n=yl.before(e),i=hc(t).next(n);return i?i.toRange():null}(e,n)},wm=function(e,t,n,i){var r,o=function(e,t,n){var i=t.serialize(n);return function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e}(e.createFragment(i))}(t,e,i),a=vm(t,n.startContainer),s=gm((r=o.firstChild,vt.grep(r.childNodes,(function(e){return"LI"===e.nodeName})))),l=t.getRoot(),u=function(e){var i=yl.fromRangeStart(n),r=hc(t.getRoot()),o=1===e?r.prev(i):r.next(i);return!o||vm(t,o.getNode())!==a};return u(1)?bm(a,s,l):u(2)?function(e,t,n,i){return i.insertAfter(t.reverse(),e),ym(t[0],n)}(a,s,l,t):function(e,t,n,i){var r=function(e,t){var n=t.cloneRange(),i=t.cloneRange();return n.setStartBefore(e),i.setEndAfter(e),[n.cloneContents(),i.cloneContents()]}(e,i),o=e.parentNode;return o.insertBefore(r[0],e),vt.each(t,(function(t){o.insertBefore(t,e)})),o.insertBefore(r[1],e),o.removeChild(e),ym(t[t.length-1],n)}(a,s,l,n)},xm=On,Cm=function(e){var t=e.dom,n=fm(e.selection.getRng());e.selection.setRng(n);var i=t.getParent(n.startContainer,xm);!function(e,t,n){return null!==n&&n===e.getParent(t.endContainer,xm)&&Cd(bt.fromDom(n),t)}(t,n,i)?e.getDoc().execCommand("Delete",!1,null):em(e,n,bt.fromDom(i))},km=function(e,t,n){var i,r,o,a,s,l,u=e.selection,c=e.dom;/^ | $/.test(t)&&(t=function(e,t,n){var i=bt.fromDom(e.getRoot());return n=mp(i,yl.fromRangeStart(t))?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),gp(i,yl.fromRangeEnd(t))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")}(c,u.getRng(),t));var d=e.parser,f=n.merge,h=vh({validate:su(e)},e.schema),p='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';if(o={content:t,format:"html",selection:!0,paste:n.paste},(o=e.fire("BeforeSetContent",o)).isDefaultPrevented())e.fire("SetContent",{content:o.content,format:"html",selection:!0,paste:n.paste});else{-1===(t=o.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,p);var m=(s=u.getRng()).startContainer||(s.parentElement?s.parentElement():null),g=e.getBody();m===g&&u.isCollapsed()&&c.isBlock(g.firstChild)&&function(e,t){return t&&!e.schema.getShortEndedElements()[t.nodeName]}(e,g.firstChild)&&c.isEmpty(g.firstChild)&&((s=c.createRng()).setStart(g.firstChild,0),s.setEnd(g.firstChild,0),u.setRng(s)),u.isCollapsed()||Cm(e);var v,y={context:(i=u.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0},b=d.parse(t,y);if(!0===n.paste&&pm(e.schema,b)&&function(e,t){return!!vm(e,t)}(c,i))return s=wm(h,c,u.getRng(),b),u.setRng(s),void e.fire("SetContent",o);if(function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(b),"mce_marker"===(l=b.lastChild).attr("id"))for(a=l,l=l.prev;l;l=l.walk(!0))if(3===l.type||!c.isBlock(l.name)){e.schema.isValidChild(l.parent.name,"span")&&l.parent.insert(a,l,"br"===l.name);break}if(e._selectionOverrides.showBlockCaretContainer(i),y.invalid){for(e.selection.setContent(p),i=u.getNode(),r=e.getBody(),9===i.nodeType?i=l=r:l=i;l!==r;)i=l,l=l.parentNode;t=i===r?r.innerHTML:c.getOuterHTML(i),t=h.serialize(d.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,(function(){return h.serialize(b)})))),i===r?c.setHTML(r,t):c.setOuterHTML(i,t)}else!function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var i=n.firstChild,r=n.lastChild;!i||i===r&&"BR"===i.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}}(e,t=h.serialize(b),i);!function(e,t){var n=e.schema.getTextInlineElements(),i=e.dom;if(t){var r=e.getBody(),o=new Dh(i);vt.each(i.select("*[data-mce-fragment]"),(function(e){for(var t=e.parentNode;t&&t!==r;t=t.parentNode)n[e.nodeName.toLowerCase()]&&o.compare(t,e)&&i.remove(e,!0)}))}}(e,f),function(e,t){var n,i,r=e.dom,o=e.selection;if(t){o.scrollIntoView(t);var a=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===r.getContentEditable(t))return t;return null}(t);if(a)return r.remove(t),void o.select(a);var s=r.createRng(),l=t.previousSibling;l&&3===l.nodeType?(s.setStart(l,l.nodeValue.length),ht.ie||(i=t.nextSibling)&&3===i.nodeType&&(l.appendData(i.data),i.parentNode.removeChild(i))):(s.setStartBefore(t),s.setEndBefore(t));var u=r.getParent(t,r.isBlock);r.remove(t),u&&r.isEmpty(u)&&(e.$(u).empty(),s.setStart(u,0),s.setEnd(u,0),xm(u)||function(e){return!!e.getAttribute("data-mce-fragment")}(u)||!(n=function(t){var n=yl.fromRangeStart(t);if(n=hc(e.getBody()).next(n))return n.toRange()}(s))?r.add(u,r.create("br",{"data-mce-bogus":"1"})):(s=n,r.remove(u))),o.setRng(s)}}(e,c.get("mce_marker")),v=e.getBody(),vt.each(v.getElementsByTagName("*"),(function(e){e.removeAttribute("data-mce-fragment")})),function(e,t){x.from(e.getParent(t,"td,th")).map(bt.fromDom).each($h)}(c,u.getStart()),e.fire("SetContent",o),e.addVisual()}},_m=function e(t,n){n(t),t.firstChild&&e(t.firstChild,n),t.next&&e(t.next,n)},Sm=function(e,t,n){var i=function(e,t,n){var i={},r={},o=[];for(var a in n.firstChild&&_m(n.firstChild,(function(n){W(e,(function(e){e.name===n.name&&(i[e.name]?i[e.name].nodes.push(n):i[e.name]={filter:e,nodes:[n]})})),W(t,(function(e){"string"==typeof n.attr(e.name)&&(r[e.name]?r[e.name].nodes.push(n):r[e.name]={filter:e,nodes:[n]})}))})),i)i.hasOwnProperty(a)&&o.push(i[a]);for(var s in r)r.hasOwnProperty(s)&&o.push(r[s]);return o}(e,t,n);W(i,(function(e){W(e.filter.callbacks,(function(t){t(e.nodes,e.filter.name,{})}))}))},Tm=function(e){return e instanceof ph},Dm=function(e,t){e.dom.setHTML(e.getBody(),t),function(e){th(e)&&_c(e.getBody()).each((function(t){var n=t.getNode(),i=kn(n)?_c(n).getOr(t):t;e.selection.setRng(i.toRange())}))}(e)},Mm=function(e,t,n){return n.format=n.format?n.format:"html",n.set=!0,n.content=Tm(t)?"":t,Tm(t)||n.no_events||(e.fire("BeforeSetContent",n),t=n.content),x.from(e.getBody()).fold(d(t),(function(i){return Tm(t)?function(e,t,n,i){Sm(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var r=vh({validate:e.validate},e.schema).serialize(n);return i.content=Fi(bt.fromDom(t))?r:vt.trim(r),Dm(e,i.content),i.no_events||e.fire("SetContent",i),n}(e,i,t,n):function(e,t,n,i){var r,o;return 0===n.length||/^\s+$/.test(n)?(o='<br data-mce-bogus="1">',"TABLE"===t.nodeName?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>"),(r=$l(e))&&e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())?(n=o,n=e.dom.createHTML(r,ql(e),n)):n||(n='<br data-mce-bogus="1">'),Dm(e,n),e.fire("SetContent",i)):("raw"!==i.format&&(n=vh({validate:e.validate},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0}))),i.content=Fi(bt.fromDom(t))?n:vt.trim(n),Dm(e,i.content),i.no_events||e.fire("SetContent",i)),i.content}(e,i,t,n)}))},Em=Kc,Nm=function(e,t,n){var i=e.formatter.get(n);if(i)for(var r=0;r<i.length;r++)if(!1===i[r].inherit&&e.dom.is(t,i[r].selector))return!0;return!1},Am=function(e,t,n,i){var r=e.dom.getRoot();return t!==r&&(t=e.dom.getParent(t,(function(t){return!!Nm(e,t,n)||(t.parentNode===r||!!Om(e,t,n,i,!0))})),Om(e,t,n,i))},Pm=function(e,t,n){return!!Em(t,n.inline)||(!!Em(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0))},Lm=function(e,t,n,i,r,o){var a,s,l,u=n[i];if(n.onmatch)return n.onmatch(t,n,i);if(u)if(void 0===u.length){for(a in u)if(u.hasOwnProperty(a)){if(s="attributes"===i?e.getAttrib(t,a):Jc(e,t,a),r&&!s&&!n.exact)return;if((!r||n.exact)&&!Em(s,Gc(e,Yc(u[a],o),a)))return}}else for(l=0;l<u.length;l++)if("attributes"===i?e.getAttrib(t,u[l]):Jc(e,t,u[l]))return n;return n},Om=function(e,t,n,i,r){var o,a,s,l,u=e.formatter.get(n),c=e.dom;if(u&&t)for(a=0;a<u.length;a++)if(o=u[a],Pm(e.dom,t,o)&&Lm(c,t,o,"attributes",r,i)&&Lm(c,t,o,"styles",r,i)){if(l=o.classes)for(s=0;s<l.length;s++)if(!e.dom.hasClass(t,l[s]))return;return o}},Im=function(e,t,n,i){if(i)return Am(e,i,t,n);if(i=e.selection.getNode(),Am(e,i,t,n))return!0;var r=e.selection.getStart();return!(r===i||!Am(e,r,t,n))},Rm=function(e,t,n){var i=[],r={},o=e.selection.getStart();return e.dom.getParent(o,(function(o){for(var a=0;a<t.length;a++){var s=t[a];!r[s]&&Om(e,o,s,n)&&(r[s]=!0,i.push(s))}}),e.dom.getRoot()),i},Bm=function(e,t){var n,i,r,o,a,s=e.formatter.get(t),l=e.dom;if(s)for(n=e.selection.getStart(),i=Qc(l,n),o=s.length-1;o>=0;o--){if(!(a=s[o].selector)||s[o].defaultBlock)return!0;for(r=i.length-1;r>=0;r--)if(l.is(i[r],a))return!0}return!1},zm=function(e,t,n){return $(n,(function(n,i){var r=function(e,t){return F(e.formatter.get(t),(function(e){var t=function(e){return e.length>1&&"%"===e.charAt(0)};return F(["styles","attributes"],(function(n){return de(e,n).exists((function(e){var n=D(e)?e:ce(e);return F(n,t)}))}))}))}(e,i);return e.formatter.matchNode(t,i,{},r)?n.concat([i]):n}),[])},Fm=Wi,Hm="_mce_caret",Wm=function(e){return function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==Fm||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length>0},jm=function(e){if(e){var t=new Mi(e,e);for(e=t.current();e;e=t.next())if(Tn(e))return e}return null},Um=function(e){var t=bt.fromTag("span");return Fn(t,{id:Hm,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&tn(t,bt.fromText(Fm)),t},Vm=function(e,t,n){void 0===n&&(n=!0);var i=e.dom,r=e.selection;if(Wm(t))Bp(e,!1,bt.fromDom(t),n);else{var o=r.getRng(),a=i.getParent(t,i.isBlock),s=o.startContainer,l=o.startOffset,u=o.endContainer,c=o.endOffset,d=function(e){var t=jm(e);return t&&t.nodeValue.charAt(0)===Fm&&t.deleteData(0,1),t}(t);i.remove(t,!0),s===d&&l>0&&o.setStart(d,l-1),u===d&&c>0&&o.setEnd(d,c-1),a&&i.isEmpty(a)&&Vh(bt.fromDom(a)),r.setRng(o)}},$m=function(e,t,n){void 0===n&&(n=!0);var i=e.dom,r=e.selection;if(t)Vm(e,t,n);else if(!(t=Mc(e.getBody(),r.getStart())))for(;t=i.get(Hm);)Vm(e,t,!1)},qm=function(e,t){return e.appendChild(t),t},Xm=function(e,t){var n=V(e,(function(e,t){return qm(e,t.cloneNode(!1))}),t);return qm(n,n.ownerDocument.createTextNode(Fm))},Ym=function(e,t,n,i){var r,o,a,s=e.dom,l=e.selection,u=[],c=l.getRng(),d=c.startContainer,f=c.startOffset;for(o=d,3===d.nodeType&&(f!==d.nodeValue.length&&(r=!0),o=o.parentNode);o;){if(Om(e,o,t,n,i)){a=o;break}o.nextSibling&&(r=!0),u.push(o),o=o.parentNode}if(a)if(r){var p=l.getBookmark();c.collapse(!0);var m=hd(e,c,e.formatter.get(t),!0);m=ef(m),e.formatter.remove(t,n,m,i),l.moveToBookmark(p)}else{var g=Mc(e.getBody(),a),v=Um(!1).dom;!function(e,t,n){var i=e.dom,r=i.getParent(n,h($c,e));r&&i.isEmpty(r)?n.parentNode.replaceChild(t,n):(Uh(bt.fromDom(n)),i.isEmpty(n)?n.parentNode.replaceChild(t,n):i.insertAfter(t,n))}(e,v,null!==g?g:a);var y=function(e,t,n,i,r,o){var a=e.formatter,s=e.dom,l=U(te(a.get()),(function(e){return e!==i&&!Ee(e,"removeformat")})),u=zm(e,n,l);if(U(u,(function(t){return!ed(e,t,i)})).length>0){var c=n.cloneNode(!1);return s.add(t,c),a.remove(i,r,c,o),s.remove(c),x.some(c)}return x.none()}(e,v,a,t,n,i),b=Xm(u.concat(y.toArray()),v);Vm(e,g,!1),l.setCursorLocation(b,1),s.isEmpty(a)&&s.remove(a)}},Km=function(e){e.on("mouseup keydown",(function(t){!function(e,t){var n=e.selection,i=e.getBody();$m(e,null,!1),8!==t&&46!==t||!n.isCollapsed()||n.getStart().innerHTML!==Fm||$m(e,Mc(i,n.getStart())),37!==t&&39!==t||$m(e,Mc(i,n.getStart()))}(e,t.keyCode)}))},Gm=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(Tt(t))&&!Dc(t.dom)&&!Cn(t.dom)},Jm={},Zm=ge,Qm=pe;!function(e,t){Jm[e]||(Jm[e]=[]),Jm[e].push(t)}("pre",(function(e){var t,n=e.selection.getRng(),i=bn(["pre"]);n.collapsed||(t=e.selection.getSelectedBlocks(),Qm(Zm(Zm(t,i),(function(e){return i(e.previousSibling)&&-1!==ve(t,e.previousSibling)})),(function(e){var t,n;t=e.previousSibling,Xa(n=e).remove(),Xa(t).append("<br><br>").append(n.childNodes)})))}));var eg=vt.each,tg=function(e){return yn(e)&&!zc(e)&&!Dc(e)&&!Cn(e)},ng=function(e,t){var n;for(n=e;n;n=n[t]){if(Tn(n)&&0!==n.nodeValue.length)return e;if(yn(n)&&!zc(n))return n}return e},ig=function(e,t,n){var i,r,o=new Dh(e);if(t&&n&&(t=ng(t,"previousSibling"),n=ng(n,"nextSibling"),o.compare(t,n))){for(i=t.nextSibling;i&&i!==n;)r=i,i=i.nextSibling,t.appendChild(r);return e.remove(n),vt.each(vt.grep(n.childNodes),(function(e){t.appendChild(e)})),t}return n},rg=function(e,t,n,i){if(i&&!1!==t.merge_siblings){var r=ig(e,Vc(i),i);ig(e,r,Vc(r,!0))}},og=function e(t,n,i){eg(t.childNodes,(function(t){tg(t)&&(n(t)&&i(t),t.hasChildNodes()&&e(t,n,i))}))},ag=function(e,t){return function(n){return!(!n||!Jc(e,n,t))}},sg=function(e,t,n){return function(i){e.setStyle(i,t,n),""===i.getAttribute("style")&&i.removeAttribute("style"),function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)}(e,i)}},lg=ci([{keep:[]},{rename:["name"]},{removed:[]}]),ug=/^(src|href|style)$/,cg=vt.each,dg=Kc,fg=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},hg=function(e,t,n){var i,r;if(i=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"],yn(i)){var o=i.childNodes.length-1;!n&&r&&r--,i=i.childNodes[r>o?o:r]}return Tn(i)&&n&&r>=i.nodeValue.length&&(i=new Mi(i,e.getBody()).next()||i),Tn(i)&&!n&&0===r&&(i=new Mi(i,e.getBody()).prev()||i),i},pg=function(e,t){var n=t?"firstChild":"lastChild";if(function(e){return/^(TR|TH|TD)$/.test(e.nodeName)}(e)&&e[n]){var i=e[n];return"TR"===e.nodeName&&i[n]||i}return e},mg=function(e,t,n,i){var r=e.create(n,i);return t.parentNode.insertBefore(r,t),r.appendChild(t),r},gg=function(e,t,n,i,r){var o=bt.fromDom(t),a=bt.fromDom(e.create(i,r)),s=n?Ht(o):Ft(o);return nn(a,s),n?(Zt(o,a),en(a,o)):(Qt(o,a),tn(a,o)),a.dom},vg=function(e,t,n,i){return!(t=Vc(t,n,i))||"BR"===t.nodeName||e.isBlock(t)},yg=function(e,t,n,i,r){var o,a=e.dom;if(!function(e,t,n){return!!dg(t,n.inline)||!!dg(t,n.block)||(n.selector?yn(t)&&e.is(t,n.selector):void 0)}(a,i,t)&&!function(e,t){return t.links&&"A"===e.nodeName}(i,t))return lg.keep();var s=i;if(t.inline&&"all"===t.remove&&D(t.preserve_attributes)){var l=U(a.getAttribs(s),(function(e){return z(t.preserve_attributes,e.name.toLowerCase())}));if(a.removeAllAttribs(s),W(l,(function(e){return a.setAttrib(s,e.name,e.value)})),l.length>0)return lg.rename("span")}if("all"!==t.remove){cg(t.styles,(function(e,i){e=Gc(a,Yc(e,n),i+""),L(i)&&(i=e,r=null),(t.remove_similar||!r||dg(Jc(a,r,i),e))&&a.setStyle(s,i,""),o=!0})),o&&""===a.getAttrib(s,"style")&&(s.removeAttribute("style"),s.removeAttribute("data-mce-style")),cg(t.attributes,(function(e,i){var o;if(e=Yc(e,n),L(i)&&(i=e,r=null),t.remove_similar||!r||dg(a.getAttrib(r,i),e)){if("class"===i&&(e=a.getAttrib(s,i))&&(o="",W(e.split(/\s+/),(function(e){/mce\-\w+/.test(e)&&(o+=(o?" ":"")+e)})),o))return void a.setAttrib(s,i,o);"class"===i&&s.removeAttribute("className"),ug.test(i)&&s.removeAttribute("data-mce-"+i),s.removeAttribute(i)}})),cg(t.classes,(function(e){e=Yc(e,n),r&&!a.hasClass(r,e)||a.removeClass(s,e)}));for(var u=a.getAttribs(s),c=0;c<u.length;c++){var d=u[c].nodeName;if(0!==d.indexOf("_")&&0!==d.indexOf("data-"))return lg.keep()}}return"none"!==t.remove?(function(e,t,n){var i,r=t.parentNode,o=e.dom,a=$l(e);n.block&&(a?r===o.getRoot()&&(n.list_block&&dg(t,n.list_block)||W(ee(t.childNodes),(function(t){qc(e,a,t.nodeName.toLowerCase())?i?i.appendChild(t):(i=mg(o,t,a),o.setAttribs(i,e.settings.forced_root_block_attrs)):i=0}))):o.isBlock(t)&&!o.isBlock(r)&&(vg(o,t,!1)||vg(o,t.firstChild,!0,!0)||t.insertBefore(o.create("br"),t.firstChild),vg(o,t,!0)||vg(o,t.lastChild,!1,!0)||t.appendChild(o.create("br")))),n.selector&&n.inline&&!dg(n.inline,t)||o.remove(t,!0)}(e,s,t),lg.removed()):lg.keep()},bg=function(e,t,n,i,r){return yg(e,t,n,i,r).fold(g,(function(t){return e.dom.rename(i,t),!0}),v)},wg=function(e,t,n,i){return yg(e,t,n,i,i).fold(d(i),(function(t){return e.dom.createFragment().appendChild(i),e.dom.rename(i,t)}),d(null))},xg=function(e,t,n,i,r){var o=e.formatter.get(t),a=o[0],s=!0,l=e.dom,u=e.selection,c=function(i){var s=function(e,t,n,i,r){var o;return W(Qc(e.dom,t.parentNode).reverse(),(function(t){if(!o&&"_start"!==t.id&&"_end"!==t.id){var a=Om(e,t,n,i,r);a&&!1!==a.split&&(o=t)}})),o}(e,i,t,n,r);return function(e,t,n,i,r,o,a,s){var l,u,c,d=e.dom;if(n){for(var f=n.parentNode,h=i.parentNode;h&&h!==f;h=h.parentNode){l=d.clone(h,!1);for(var p=0;p<t.length&&null!==(l=wg(e,t[p],s,l));p++);l&&(u&&l.appendChild(u),c||(c=l),u=l)}!o||a.mixed&&d.isBlock(n)||(i=d.split(n,i)),u&&(r.parentNode.insertBefore(u,r),c.appendChild(r),a.inline&&rg(d,a,0,u))}return i}(e,o,s,i,i,!0,a,n)},d=function t(i){var r,u;yn(i)&&l.getContentEditable(i)&&(r=s,s="true"===l.getContentEditable(i),u=!0);var c=ee(i.childNodes);if(s&&!u)for(var d=0;d<o.length&&!bg(e,o[d],n,i,i);d++);if(a.deep&&c.length){for(d=0;d<c.length;d++)t(c[d]);u&&(s=r)}},f=function(e){var t=l.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return function(e){return zc(e)&&yn(e)&&("_start"===e.id||"_end"===e.id)}(n)&&(n=n[e?"firstChild":"lastChild"]),Tn(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),l.remove(t,!0),n},h=function(t){var n,i,r=hd(e,t,o,!0);if(a.split){if(r=ef(r),(n=hg(e,r,!0))!==(i=hg(e,r))){if(n=pg(n,!0),i=pg(i,!1),fg(l,n,i)){var s=x.from(n.firstChild).getOr(n);return c(gg(l,s,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void f(!0)}if(fg(l,i,n)){s=x.from(i.lastChild).getOr(i);return c(gg(l,s,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void f(!1)}n=mg(l,n,"span",{id:"_start","data-mce-type":"bookmark"}),i=mg(l,i,"span",{id:"_end","data-mce-type":"bookmark"});var u=l.createRng();u.setStartAfter(n),u.setEndBefore(i),md(l,u,(function(e){W(e,(function(e){zc(e)||zc(e.parentNode)||c(e)}))})),c(n),c(i),n=f(!0),i=f()}else n=i=c(n);r.startContainer=n.parentNode?n.parentNode:n,r.startOffset=l.nodeIndex(n),r.endContainer=i.parentNode?i.parentNode:i,r.endOffset=l.nodeIndex(i)+1}md(l,r,(function(t){W(t,(function(t){d(t);W(["underline","line-through","overline"],(function(n){yn(t)&&e.dom.getStyle(t,"text-decoration")===n&&t.parentNode&&Zc(l,t.parentNode)===n&&bg(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},null,t)}))}))}))};if(i)if(jc(i)){var p=l.createRng();p.setStartBefore(i),p.setEndAfter(i),h(p)}else h(i);else if("false"!==l.getContentEditable(u.getNode()))u.isCollapsed()&&a.inline&&!bd(e).length?Ym(e,t,n,r):(Td(u,!0,(function(){Sd(e,h)})),a.inline&&Im(e,t,n,u.getStart())&&Uc(l,u,u.getRng()),e.nodeChanged());else{i=u.getNode();for(var m=0;m<o.length&&(!o[m].ceFalseOverride||!bg(e,o[m],n,i,i));m++);}},Cg=vt.each,kg=function(e,t,n,i){Cg(t,(function(t){Cg(e.dom.select(t.inline,i),(function(i){tg(i)&&bg(e,t,n,i,t.exact?i:null)})),function(e,t,n){if(t.clear_child_styles){var i=t.links?"*:not(a)":"*";eg(e.select(i,n),(function(n){tg(n)&&eg(t.styles,(function(t,i){e.setStyle(n,i,"")}))}))}}(e.dom,t,i)}))},_g=vt.each,Sg=function e(t,n,i,r){var o,a=t.formatter.get(n),s=a[0],l=!r&&t.selection.isCollapsed(),u=t.dom,c=t.selection,d=function(e,t){if(t=t||s,e){if(t.onformat&&t.onformat(e,t,i,r),_g(t.styles,(function(t,n){u.setStyle(e,n,Yc(t,i))})),t.styles){var n=u.getAttrib(e,"style");n&&u.setAttrib(e,"data-mce-style",n)}_g(t.attributes,(function(t,n){u.setAttrib(e,n,Yc(t,i))})),_g(t.classes,(function(t){t=Yc(t,i),u.hasClass(e,t)||u.addClass(e,t)}))}},f=function(e,t){var n=!1;return!!s.selector&&(_g(e,(function(e){if(!("collapsed"in e)||e.collapsed===l)return u.is(t,e.selector)&&!Dc(t)?(d(t,e),n=!0,!1):void 0})),n)},h=function(e,r,o,l){var u=[],c=!0,h=s.inline||s.block,p=e.create(h);d(p),md(e,r,(function(r){var o;_g(r,(function r(m){var g=!1,v=c,y=m.nodeName.toLowerCase(),b=m.parentNode.nodeName.toLowerCase();if(yn(m)&&e.getContentEditable(m)&&(v=c,c="true"===e.getContentEditable(m),g=!0),Kc(y,"br"))return o=0,void(s.block&&e.remove(m));if(s.wrapper&&Om(t,m,n,i))o=0;else{if(c&&!g&&s.block&&!s.wrapper&&$c(t,y)&&qc(t,b,h)){var w=e.rename(m,h);return d(w),u.push(w),void(o=0)}if(s.selector){var x=f(a,m);if(!s.inline||x)return void(o=0)}!c||g||!qc(t,h,y)||!qc(t,b,h)||!l&&3===m.nodeType&&1===m.nodeValue.length&&65279===m.nodeValue.charCodeAt(0)||Dc(m)||s.inline&&e.isBlock(m)?(o=0,_g(vt.grep(m.childNodes),r),g&&(c=v),o=0):(o||(o=e.clone(p,!1),m.parentNode.insertBefore(o,m),u.push(o)),o.appendChild(m))}}))})),!0===s.links&&_g(u,(function(e){!function e(t){"A"===t.nodeName&&d(t,s),_g(vt.grep(t.childNodes),e)}(e)})),_g(u,(function(r){var o=function(e){var t=!1;return _g(e.childNodes,(function(e){if(function(e){return e&&1===e.nodeType&&!zc(e)&&!Dc(e)&&!Cn(e)}(e))return t=e,!1})),t},l=function(e){var t=0;return _g(e.childNodes,(function(e){(function(e){return e&&Tn(e)&&0===e.length})(e)||zc(e)||t++})),t}(r);!(u.length>1)&&e.isBlock(r)||0!==l?(s.inline||s.wrapper)&&(s.exact||1!==l||(r=function(t){var n,i=o(t);return i&&!zc(i)&&Pm(e,i,s)&&(n=e.clone(i,!1),d(n),e.replace(n,t,!0),e.remove(i,!0)),n||t}(r)),kg(t,a,i,r),function(e,t,n,i,r){Om(e,r.parentNode,n,i)&&bg(e,t,i,r)||t.merge_with_parents&&e.dom.getParent(r.parentNode,(function(o){if(Om(e,o,n,i))return bg(e,t,i,r),!0}))}(t,s,n,i,r),function(e,t,n,i){t.styles&&t.styles.backgroundColor&&og(i,ag(e,"fontSize"),sg(e,"backgroundColor",Yc(t.styles.backgroundColor,n)))}(e,s,i,r),function(e,t,n,i){var r=function(t){if(1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType){var n=Zc(e,t.parentNode);e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(vt.walk(i,r,"childNodes"),r(i))}(e,s,0,r),function(e,t,n,i){"sub"!==t.inline&&"sup"!==t.inline||(og(i,ag(e,"fontSize"),sg(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",i),!0))}(e,s,0,r),rg(e,s,0,r)):e.remove(r,!0)}))};if("false"!==u.getContentEditable(c.getNode())){if(s){if(r)jc(r)?f(a,r)||((o=u.createRng()).setStartBefore(r),o.setEndAfter(r),h(u,hd(t,o,a),0,!0)):h(u,r,0,!0);else if(l&&s.inline&&!bd(t).length)!function(e,t,n){var i,r,o=e.selection,a=o.getRng(),s=a.startOffset,l=a.startContainer.nodeValue;(i=Mc(e.getBody(),o.getStart()))&&(r=jm(i));var u,c,d=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&s>0&&s<l.length&&d.test(l.charAt(s))&&d.test(l.charAt(s-1))){var f=o.getBookmark();a.collapse(!0);var h=hd(e,a,e.formatter.get(t));h=ef(h),e.formatter.apply(t,n,h),o.moveToBookmark(f)}else i&&r.nodeValue===Fm||(u=e.getDoc(),c=Um(!0).dom,r=(i=u.importNode(c,!0)).firstChild,a.insertNode(i),s=1),e.formatter.apply(t,n,i),o.setCursorLocation(r,s)}(t,n,i);else{var p=c.getNode();t.settings.forced_root_block||!a[0].defaultBlock||u.getParent(p,u.isBlock)||e(t,a[0].defaultBlock),c.setRng(fm(c.getRng())),Td(c,!0,(function(e){Sd(t,(function(e,n){var i=n?e:hd(t,e,a);h(u,i)}))})),Uc(u,c,c.getRng()),t.nodeChanged()}!function(e,t){Qm(Jm[e],(function(e){e(t)}))}(n,t)}}else{r=c.getNode();for(var m=0,g=a.length;m<g;m++)if(a[m].ceFalseOverride&&u.is(r,a[m].selector))return void d(r,a[m])}},Tg=function(e,t){var n=(t||document).createDocumentFragment();return W(e,(function(e){n.appendChild(e.dom)})),bt.fromDom(n)},Dg=function(e,t,n){return{element:e,width:t,rows:n}},Mg=function(e,t){return{element:e,cells:t}},Eg=function(e,t){return{x:e,y:t}},Ng=function(e,t){var n=parseInt(Hn(e,t),10);return isNaN(n)?1:n},Ag=function(e,t,n){var i=e.rows;return!!(i[n]?i[n].cells:[])[t]},Pg=function(e){return $(e,(function(e,t){return t.cells.length>e?t.cells.length:e}),0)},Lg=function(e,t){for(var n=e.rows,i=0;i<n.length;i++)for(var r=n[i].cells,o=0;o<r.length;o++)if(kt(r[o],t))return x.some(Eg(o,i));return x.none()},Og=function(e,t,n,i,r){for(var o=[],a=e.rows,s=n;s<=r;s++){var l=a[s].cells,u=t<i?l.slice(t,i+1):l.slice(i,t+1);o.push(Mg(a[s].element,u))}return o},Ig=function(e){var t=Dg(Is(e),0,[]);return W(ks(e,"tr"),(function(e,n){W(ks(e,"td,th"),(function(i,r){!function(e,t,n,i,r){for(var o=Ng(r,"rowspan"),a=Ng(r,"colspan"),s=e.rows,l=n;l<n+o;l++){s[l]||(s[l]=Mg(Rs(i),[]));for(var u=t;u<t+a;u++)s[l].cells[u]=l===n&&u===t?r:Is(r)}}(t,function(e,t,n){for(;Ag(e,t,n);)t++;return t}(t,r,n),n,e,i)}))})),Dg(t.element,Pg(t.rows),t.rows)},Rg=function(e){return function(e,t){var n=Is(e.element),i=bt.fromTag("tbody");return nn(i,t),tn(n,i),n}(e,function(e){return H(e.rows,(function(e){var t=H(e.cells,(function(e){var t=Rs(e);return Wn(t,"colspan"),Wn(t,"rowspan"),t})),n=Is(e.element);return nn(n,t),n}))}(e))},Bg=function(e,t,n){return Lg(e,t).bind((function(t){return Lg(e,n).map((function(n){return function(e,t,n){var i=t.x,r=t.y,o=n.x,a=n.y,s=r<a?Og(e,i,r,o,a):Og(e,i,a,o,r);return Dg(e.element,Pg(s),s)}(e,t,n)}))}))},zg=function(e,t){return q(e,(function(e){return"li"===Tt(e)&&Cd(e,t)})).fold(d([]),(function(t){return function(e){return q(e,(function(e){return"ul"===Tt(e)||"ol"===Tt(e)}))}(e).map((function(e){var t=bt.fromTag(Tt(e)),n=ue(qn(e),(function(e,t){return Ne(t,"list-style")}));return jn(t,n),[bt.fromTag("li"),t]})).getOr([])}))},Fg=function(e,t){var n=bt.fromDom(t.commonAncestorContainer),i=Yh(n,e),r=U(i,(function(e){return Pi(e)||Ni(e)})),o=zg(i,t),a=r.concat(o.length?o:function(e){return Ri(e)?Rt(e).filter(Ii).fold(d([]),(function(t){return[e,t]})):Ii(e)?[e]:[]}(n));return H(a,Is)},Hg=function(){return Tg([])},Wg=function(e,t){return n=bt.fromDom(t.cloneContents()),i=Fg(e,t),r=$(i,(function(e,t){return tn(t,e),t}),n),i.length>0?Tg([r]):r;var n,i,r},jg=function(e,t){return(n=e,i=t[0],gi(i,"table",h(kt,n))).bind((function(e){var n=t[0],i=t[t.length-1],r=Ig(e);return Bg(r,n,i).map((function(e){return Tg([Rg(e)])}))})).getOrThunk(Hg);var n,i},Ug=function(e,t){var n=yd(t,e);return n.length>0?jg(e,n):function(e,t){return t.length>0&&t[0].collapsed?Hg():Wg(e,t[0])}(e,t)},Vg=function(e,t){return t>=0&&t<e.length&&Hc(e.charAt(t))},$g=function(e){var t=Ui(e.innerText);return ht.browser.isIE()?function(e){return e.replace(/^[ \f\n\r\t\v]+/,"")}(t):t},qg=function(e,t,n){if(void 0===n&&(n={}),n.get=!0,n.format=t,n.selection=!0,(n=e.fire("BeforeGetContent",n)).isDefaultPrevented())return e.fire("GetContent",n),n.content;if("text"===n.format)return function(e){return x.from(e.selection.getRng()).map((function(t){var n=e.dom.add(e.getBody(),"div",{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),i=$g(n),r=Ui(n.textContent);if(e.dom.remove(n),Vg(r,0)||Vg(r,r.length-1)){var o=e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock),a=$g(o),s=a.indexOf(i);return-1!==s?(Vg(a,s-1)?" ":"")+i+(Vg(a,s+i.length)?" ":""):i}return i})).getOr("")}(e);n.getInner=!0;var i=function(e,t){var n=e.selection.getRng(),i=e.dom.create("body"),r=e.selection.getSel(),o=uh(e,gd(r)),a=t.contextual?Ug(bt.fromDom(e.getBody()),o).dom:n.cloneContents();return a&&i.appendChild(a),e.selection.serializer.serialize(i,t)}(e,n);return"tree"===n.format?i:(n.content=e.selection.isCollapsed()?"":i,e.fire("GetContent",n),n.content)},Xg=function(e){return yn(e)?e.outerHTML:Tn(e)?zr.encodeRaw(e.data,!1):Dn(e)?"\x3c!--"+e.data+"--\x3e":""},Yg=function(e,t,n){var i=function(e){var t,n=document.createElement("div"),i=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)i.appendChild(t);return i}(t);if(e.hasChildNodes()&&n<e.childNodes.length){var r=e.childNodes[n];r.parentNode.insertBefore(i,r)}else e.appendChild(i)},Kg=function(e,t){var n,i,r,o,a,s,l,u,c=H(ee(t.childNodes),Xg);return function(e,t){var n=0;W(e,(function(e){0===e[0]?n++:1===e[0]?(Yg(t,e[1],n),n++):2===e[0]&&function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}}(t,n)}))}((i=e,r=(n=c).length+i.length+2,o=new Array(r),a=new Array(r),s=function(e,t,r,o){for(var a=e;a-t<o&&a<r&&n[a]===i[a-t];)++a;return function(e,t,n){return{start:e,end:t,diag:n}}(e,a,t)},l=function(e,t,r,l){var u=t-e,c=l-r;if(0===u||0===c)return null;var d,f,h,p,m,g=u-c,v=c+u,y=(v%2==0?v:v+1)/2;for(o[1+y]=e,a[1+y]=t+1,d=0;d<=y;++d){for(f=-d;f<=d;f+=2){for(h=f+y,f===-d||f!==d&&o[h-1]<o[h+1]?o[h]=o[h+1]:o[h]=o[h-1]+1,m=(p=o[h])-e+r-f;p<t&&m<l&&n[p]===i[m];)o[h]=++p,++m;if(g%2!=0&&g-d<=f&&f<=g+d&&a[h-g]<=o[h])return s(a[h-g],f+e-r,t,l)}for(f=g-d;f<=g+d;f+=2){for(h=f+y-g,f===g-d||f!==g+d&&a[h+1]<=a[h-1]?a[h]=a[h+1]-1:a[h]=a[h-1],m=(p=a[h]-1)-e+r-f;p>=e&&m>=r&&n[p]===i[m];)a[h]=p--,m--;if(g%2==0&&-d<=f&&f<=d&&a[h]<=o[h+g])return s(a[h],f+e-r,t,l)}}},u=[],function e(t,r,o,a,s){var u=l(t,r,o,a);if(null===u||u.start===r&&u.diag===r-a||u.end===t&&u.diag===t-o)for(var c=t,d=o;c<r||d<a;)c<r&&d<a&&n[c]===i[d]?(s.push([0,n[c]]),++c,++d):r-t>a-o?(s.push([2,n[c]]),++c):(s.push([1,i[d]]),++d);else{e(t,u.start,o,u.start-u.diag,s);for(var f=u.start;f<u.end;++f)s.push([0,n[f]]);e(u.end,r,u.end-u.diag,a,s)}}(0,n.length,0,i.length,u),u),t),t},Gg=as(x.none()),Jg=function(e){var t,n=(t=e.getBody(),U(H(ee(t.childNodes),Xg),(function(e){return e.length>0}))),i=Y(n,(function(t){var n=kh(e.serializer,t);return n.length>0?[n]:[]})),r=i.join("");return-1!==r.indexOf("</iframe>")?function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}}(i):function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}}(r)},Zg=function(e,t,n){"fragmented"===t.type?Kg(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},Qg=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},ev=function(e){var t=bt.fromTag("body",Gg.get().getOrThunk((function(){var e=document.implementation.createHTMLDocument("undo");return Gg.set(x.some(e)),e})));return Ls(t,Qg(e)),W(ks(t,"*[data-mce-bogus]"),an),t.dom.innerHTML},tv=function(e,t){return!(!e||!t)&&(!!function(e,t){return Qg(e)===Qg(t)}(e,t)||function(e,t){return ev(e)===ev(t)}(e,t))},nv=function(e){return 0===e.get()},iv=function(e,t,n){nv(n)&&(e.typing=t)},rv=function(e,t){e.typing&&(iv(e,!1,t),e.add())},ov=function(e){return e instanceof ph},av=function(e,t){Sm(e.serializer.getNodeFilters(),e.serializer.getAttributeFilters(),t)},sv=function(e){return{undoManager:{beforeChange:function(t,n){return function(e,t,n){nv(t)&&n.set(x.some(Wl(e.selection)))}(e,t,n)},addUndoLevel:function(t,n,i,r,o,a){return function(e,t,n,i,r,o,a){var s=Jg(e);if(o=o||{},o=vt.extend(o,s),!1===nv(i)||e.removed)return null;var l=t.data[n.get()];if(e.fire("BeforeAddUndo",{level:o,lastLevel:l,originalEvent:a}).isDefaultPrevented())return null;if(l&&tv(l,o))return null;t.data[n.get()]&&r.get().each((function(e){t.data[n.get()].beforeBookmark=e}));var u=function(e){return e.getParam("custom_undo_redo_levels",0,"number")}(e);if(u&&t.data.length>u){for(var c=0;c<t.data.length-1;c++)t.data[c]=t.data[c+1];t.data.length--,n.set(t.data.length)}o.bookmark=Wl(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(o),n.set(t.data.length-1);var d={level:o,lastLevel:l,originalEvent:a};return n.get()>0?(e.setDirty(!0),e.fire("AddUndo",d),e.fire("change",d)):e.fire("AddUndo",d),o}(e,t,n,i,r,o,a)},undo:function(t,n,i){return function(e,t,n,i){var r;return t.typing&&(t.add(),t.typing=!1,iv(t,!1,n)),i.get()>0&&(i.set(i.get()-1),r=t.data[i.get()],Zg(e,r,!0),e.setDirty(!0),e.fire("Undo",{level:r})),r}(e,t,n,i)},redo:function(t,n){return function(e,t,n){var i;return t.get()<n.length-1&&(t.set(t.get()+1),i=n[t.get()],Zg(e,i,!1),e.setDirty(!0),e.fire("Redo",{level:i})),i}(e,t,n)},clear:function(t,n){return function(e,t,n){t.data=[],n.set(0),t.typing=!1,e.fire("ClearUndos")}(e,t,n)},reset:function(e){return function(e){e.clear(),e.add()}(e)},hasUndo:function(t,n){return function(e,t,n){return n.get()>0||t.typing&&t.data[0]&&!tv(Jg(e),t.data[0])}(e,t,n)},hasRedo:function(e,t){return function(e,t){return t.get()<e.data.length-1&&!e.typing}(e,t)},transact:function(e,t,n){return function(e,t,n){return rv(e,t),e.beforeChange(),e.ignore(n),e.add()}(e,t,n)},ignore:function(e,t){return function(e,t){try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}}(e,t)},extra:function(t,n,i,r){return function(e,t,n,i,r){if(t.transact(i)){var o=t.data[n.get()].bookmark,a=t.data[n.get()-1];Zg(e,a,!0),t.transact(r)&&(t.data[n.get()-1].beforeBookmark=o)}}(e,t,n,i,r)}},formatter:{apply:function(t,n,i){return Sg(e,t,n,i)},remove:function(t,n,i,r){return xg(e,t,n,i,r)},toggle:function(t,n,i){return function(e,t,n,i){var r=e.formatter.get(t);!Im(e,t,n,i)||"toggle"in r[0]&&!r[0].toggle?Sg(e,t,n,i):xg(e,t,n,i)}(e,t,n,i)}},editor:{getContent:function(t,n){return function(e,t,n){return x.from(e.getBody()).fold(d("tree"===t.format?new ph("body",11):""),(function(i){return Sh(e,t,n,i)}))}(e,t,n)},setContent:function(t,n){return Mm(e,t,n)},insertContent:function(t,n){return km(e,t,n)}},selection:{getContent:function(t,n){return qg(e,t,n)}},raw:{getModel:function(){return x.none()}}}},lv=function(e,t){var n=function(e){return T(e)?e:{}},i=m("Unimplemented feature for rtc");return{undoManager:{beforeChange:u,addUndoLevel:i,undo:function(){return t.undo(),{type:"complete",fragments:[],content:"",bookmark:null,beforeBookmark:null}},redo:function(){return t.redo(),{type:"complete",fragments:[],content:"",bookmark:null,beforeBookmark:null}},clear:i,reset:i,hasUndo:function(){return t.hasUndo()},hasRedo:function(){return t.hasRedo()},transact:function(e,n,i){return t.transact(i),{type:"complete",fragments:[],content:"",bookmark:null,beforeBookmark:null}},ignore:i,extra:i},formatter:{apply:function(e,i,r){return t.applyFormat(e,n(i))},remove:function(e,i,r,o){return t.removeFormat(e,n(i))},toggle:function(e,i,r){return t.toggleFormat(e,n(i))}},editor:{getContent:function(n,i){if("html"===i||"tree"===i){var r=t.getContent(),o=vh({inner:!0});return av(e,r),"tree"===i?r:o.serialize(r)}return sv(e).editor.getContent(n,i)},setContent:function(n,i){var r=ov(n)?n:e.parser.parse(n,{isRootContent:!0,insert:!0});return t.setContent(r),n},insertContent:function(n,i){var r,o=(r=e,x.from(r.selection.getStart(!0)).map((function(e){return e.nodeName.toLowerCase()}))).fold((function(){return{}}),(function(e){return{context:e}})),a=ov(n)?n:e.parser.parse(n,xe(xe({},o),{insert:!0}));t.insertContent(a)}},selection:{getContent:function(n,i){if("html"===n||"tree"===n){var r=t.getSelectedContent(),o=vh({});return av(e,r),"tree"===n?r:o.serialize(r)}return sv(e).selection.getContent(n,i)}},raw:{getModel:function(){return x.some(t.getRawModel())}}}},uv=function(e){return fe(e.plugins,"rtc")},cv=function(e){return e.rtcInstance?e.rtcInstance:sv(e)},dv=function(e){var t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},fv=function(e,t){return void 0===t&&(t={}),function(e,t,n){return dv(e).selection.getContent(t,n)}(e,t.format?t.format:"html",t)},hv=function(e){return 0===e.dom.length?(on(e),x.none()):x.some(e)},pv=function(e,t,n,i){e.bind((function(e){return(i?Sp:_p)(e.dom,i?e.dom.length:0),t.filter(Nt).map((function(t){return function(e,t,n,i){var r=e.dom,o=t.dom,a=i?r.length:o.length;i?(Tp(r,o,!1,!i),n.setStart(o,a)):(Tp(o,r,!1,!i),n.setEnd(o,a))}(e,t,n,i)}))})).orThunk((function(){var e=function(e,t){return e.filter((function(e){return Id.isBookmarkNode(e.dom)})).bind(t?zt:Bt)}(t,i).or(t).filter(Nt);return e.map((function(e){return function(e,t){Rt(e).each((function(n){var i=e.dom;t&&mp(n,yl(i,0))?_p(i,0):!t&&gp(n,yl(i,i.length))&&Sp(i,i.length)}))}(e,i)}))}))},mv=function(e,t,n){void 0===n&&(n={});var i=function(e,t){return xe(xe({format:"html"},e),{set:!0,selection:!0,content:t})}(n,t);if(i.no_events||!(i=e.fire("BeforeSetContent",i)).isDefaultPrevented()){n.content=function(e,t){if("raw"!==t.format){var n=e.selection.getRng(),i=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),r=i?{context:i.nodeName.toLowerCase()}:{},o=e.parser.parse(t.content,xe(xe({isRootContent:!0,forced_root_block:!1},r),t));return vh({validate:e.validate},e.schema).serialize(o)}return t.content}(e,i);var r=e.selection.getRng();!function(e,t){var n=x.from(t.firstChild).map(bt.fromDom),i=x.from(t.lastChild).map(bt.fromDom);e.deleteContents(),e.insertNode(t);var r=n.bind(Bt).filter(Nt).bind(hv),o=i.bind(zt).filter(Nt).bind(hv);pv(r,n,e,!0),pv(o,i,e,!1),e.collapse(!1)}(r,r.createContextualFragment(n.content)),e.selection.setRng(r),Sf(e,r),i.no_events||e.fire("SetContent",i)}else e.fire("SetContent",i)},gv=function(e,t,n){if(e&&e.hasOwnProperty(t)){var i=U(e[t],(function(e){return e!==n}));0===i.length?delete e[t]:e[t]=i}};var vv=function(e){return!!e.select},yv=function(e){return!(!e||!e.ownerDocument)&&St(bt.fromDom(e.ownerDocument),bt.fromDom(e))},bv=function(e,t,n,i){var r,o,a=function(e,t){var n,i;return{selectorChangedWithUnbind:function(r,o){return n||(n={},i={},t.on("NodeChange",(function(t){var r=t.element,o=e.getParents(r,null,e.getRoot()),a={};vt.each(n,(function(t,n){vt.each(o,(function(r){if(e.is(r,n))return i[n]||(vt.each(t,(function(e){e(!0,{node:r,selector:n,parents:o})})),i[n]=t),a[n]=t,!1}))})),vt.each(i,(function(e,t){a[t]||(delete i[t],vt.each(e,(function(e){e(!1,{node:r,selector:t,parents:o})})))}))}))),n[r]||(n[r]=[]),n[r].push(o),{unbind:function(){gv(n,r,o),gv(i,r,o)}}}}}(e,i).selectorChangedWithUnbind,s=function(e,t){return mv(i,e,t)},l=function(e){var t=c();t.collapse(!!e),d(t)},u=function(){return t.getSelection?t.getSelection():t.document.selection},c=function(){var n,a,s,l=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!t)return null;var c=t.document;if(null==c)return null;if(void 0!==i.bookmark&&!1===th(i)){var d=Uf(i);if(d.isSome())return d.map((function(e){return uh(i,[e])[0]})).getOr(c.createRange())}try{(n=u())&&!vn(n.anchorNode)&&(a=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():c.createRange(),a=uh(i,[a])[0])}catch(e){}return a||(a=c.createRange?c.createRange():c.body.createTextRange()),a.setStart&&9===a.startContainer.nodeType&&a.collapsed&&(s=e.getRoot(),a.setStart(s,0),a.setEnd(s,0)),r&&o&&(0===l(a.START_TO_START,a,r)&&0===l(a.END_TO_END,a,r)?a=o:(r=null,o=null)),a},d=function(e,t){var n;if(function(e){return!!e&&(!!vv(e)||yv(e.startContainer)&&yv(e.endContainer))}(e)){var a=vv(e)?e:null;if(a){o=null;try{a.select()}catch(e){}}else{var s=u();if(e=i.fire("SetSelectionRange",{range:e,forward:t}).range,s){o=e;try{s.removeAllRanges(),s.addRange(e)}catch(e){}!1===t&&s.extend&&(s.collapse(e.endContainer,e.endOffset),s.extend(e.startContainer,e.startOffset)),r=s.rangeCount>0?s.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!s.setBaseAndExtent||ht.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(n=e.startContainer.childNodes[e.startOffset])&&"IMG"===n.tagName&&(s.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),s.anchorNode===e.startContainer&&s.focusNode===e.endContainer||s.setBaseAndExtent(n,0,n,1)),i.fire("AfterSetSelectionRange",{range:e,forward:t})}}},f=function(){var t=u(),n=null==t?void 0:t.anchorNode,i=null==t?void 0:t.focusNode;if(!t||!n||!i||vn(n)||vn(i))return!0;var r=e.createRng();r.setStart(n,t.anchorOffset),r.collapse(!0);var o=e.createRng();return o.setStart(i,t.focusOffset),o.collapse(!0),r.compareBoundaryPoints(r.START_TO_START,o)<=0},h={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:i,collapse:l,setCursorLocation:function(t,n){var r=e.createRng();t?(r.setStart(t,n),r.setEnd(t,n),d(r),l(!1)):(kd(e,r,i.getBody(),!0),d(r))},getContent:function(e){return fv(i,e)},setContent:s,getBookmark:function(e,t){return p.getBookmark(e,t)},moveToBookmark:function(e){return p.moveToBookmark(e)},select:function(t,n){return function(e,t,n){return x.from(t).map((function(t){var i=e.nodeIndex(t),r=e.createRng();return r.setStart(t.parentNode,i),r.setEnd(t.parentNode,i+1),n&&(kd(e,r,t,!0),kd(e,r,t,!1)),r}))}(e,t,n).each(d),t},isCollapsed:function(){var e=c(),t=u();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:f,setNode:function(t){return s(e.getOuterHTML(t)),t},getNode:function(){return function(e,t){var n,i,r;if(!t)return e;i=t.startContainer,r=t.endContainer;var o=t.startOffset,a=t.endOffset;return n=t.commonAncestorContainer,!t.collapsed&&(i===r&&a-o<2&&i.hasChildNodes()&&(n=i.childNodes[o]),3===i.nodeType&&3===r.nodeType&&(i=i.length===o?lh(i.nextSibling,!0):i.parentNode,r=0===a?lh(r.previousSibling,!1):r.parentNode,i&&i===r))?i:n&&3===n.nodeType?n.parentNode:n}(i.getBody(),c())},getSel:u,setRng:d,getRng:c,getStart:function(e){return ah(i.getBody(),c(),e)},getEnd:function(e){return sh(i.getBody(),c(),e)},getSelectedBlocks:function(t,n){return function(e,t,n,i){var r,o=[],a=e.getRoot();if(n=e.getParent(n||ah(a,t,t.collapsed),e.isBlock),i=e.getParent(i||sh(a,t,t.collapsed),e.isBlock),n&&n!==a&&o.push(n),n&&i&&n!==i){r=n;for(var s=new Mi(n,a);(r=s.next())&&r!==i;)e.isBlock(r)&&o.push(r)}return i&&n!==i&&i!==a&&o.push(i),o}(e,c(),t,n)},normalize:function(){var t=c(),n=u();if(!(gd(n).length>1)&&_d(i)){var r=Zd(e,t);return r.each((function(e){d(e,f())})),r.getOr(t)}return t},selectorChanged:function(e,t){return a(e,t),h},selectorChangedWithUnbind:a,getScrollContainer:function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(e,t){return function(e,t,n){(e.inline?Cf:_f)(e,t,n)}(i,e,t)},placeCaretAt:function(e,t){return d(jd(e,t,i.getDoc()))},getBoundingClientRect:function(){var e=c();return e.collapsed?yl.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){t=r=o=null,m.destroy()}},p=Id(h),m=Hd(h,i);return h.bookmarkManager=p,h.controlSelection=m,h},wv=function(e,t,n){e.addNodeFilter("font",(function(e){W(e,(function(e){var i=t.parse(e.attr("style")),r=e.attr("color"),o=e.attr("face"),a=e.attr("size");r&&(i.color=r),o&&(i["font-family"]=o),a&&(i["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(i)),function(e,t){W(t,(function(t){e.attr(t,null)}))}(e,["color","face","size"])}))}))},xv=function(e,t){var n=mo();t.convert_fonts_to_spans&&wv(e,n,vt.explode(t.font_size_legacy_values)),function(e,t){e.addNodeFilter("strike",(function(e){W(e,(function(e){var n=t.parse(e.attr("style"));n["text-decoration"]="line-through",e.name="span",e.attr("style",t.serialize(n))}))}))}(e,n)},Cv=function(e){var t,n=decodeURIComponent(e).split(","),i=/data:([^;]+)/.exec(n[0]);return i&&(t=i[1]),{type:t,data:n[1]}},kv=function(e,t){var n;try{n=atob(t)}catch(e){return x.none()}for(var i=new Uint8Array(n.length),r=0;r<i.length;r++)i[r]=n.charCodeAt(r);return x.some(new Blob([i],{type:e}))},_v=function(e){return 0===e.indexOf("blob:")?function(e){return new bi((function(t,n){var i=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=function(){200===this.status?t(this.response):i()},r.onerror=i,r.send()}catch(e){i()}}))}(e):0===e.indexOf("data:")?(t=e,new bi((function(e){var n=Cv(t),i=n.type,r=n.data;kv(i,r).fold((function(){return e(new Blob([]))}),e)}))):null;var t},Sv=0,Tv=function(e){return(e||"blobid")+Sv++},Dv=function(e,t,n,i){var r,o;if(0!==t.src.indexOf("blob:")){var a=Cv(t.src),s=a.data,l=a.type;r=s,(o=e.getByData(r,l))?n({image:t,blobInfo:o}):_v(t.src).then((function(i){o=e.create(Tv(),i,r),e.add(o),n({image:t,blobInfo:o})}),(function(e){i(e)}))}else(o=e.getByUri(t.src))?n({image:t,blobInfo:o}):_v(t.src).then((function(i){(function(e){return new bi((function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)}))})(i).then((function(a){r=Cv(a).data,o=e.create(Tv(),i,r),e.add(o),n({image:t,blobInfo:o})}))}),(function(e){i(e)}))};function Mv(e,t){var n={};return{findAll:function(i,r){r||(r=v);var o=U(function(e){return e?ee(e.getElementsByTagName("img")):[]}(i),(function(t){var n=t.src;return!!ht.fileApi&&(!t.hasAttribute("data-mce-bogus")&&(!t.hasAttribute("data-mce-placeholder")&&(!(!n||n===ht.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n)&&r(t):0===n.indexOf("data:")&&r(t)))))})),a=H(o,(function(e){if(void 0!==n[e.src])return new bi((function(t){n[e.src].then((function(n){if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})}))}));var i=new bi((function(n,i){Dv(t,e,n,i)})).then((function(e){return delete n[e.image.src],e})).catch((function(t){return delete n[e.src],t}));return n[e.src]=i,i}));return bi.all(a)}}}var Ev,Nv,Av=function(e,t,n,i){(e.padd_empty_with_br||t.insert)&&n[i.name]?i.empty().append(new ph("br",1)).shortEnded=!0:i.empty().append(new ph("#text",3)).value=Hi},Pv=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},Lv=function(e,t,n,i){return i.isEmpty(t,n,(function(t){return function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty}(e,t)}))},Ov=function(e,t){var n=t.blob_cache,i=function(e){var i=e.attr("src");(function(e){return e.attr("src")===ht.transparentSrc||e.attr("data-mce-placeholder")})(e)||function(e){return e.attr("data-mce-bogus")}(e)||function(e){var t=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(e);return t?x.some({type:t[1],data:decodeURIComponent(t[2])}):x.none()}(i).filter((function(){return function(e,t){if(t.images_dataimg_filter){var n=new Image;return n.src=e.attr("src"),ie(e.attributes.map,(function(e,t){n.setAttribute(t,e)})),t.images_dataimg_filter(n)}return!0}(e,t)})).bind((function(e){var t=e.type,i=e.data;return x.from(n.getByData(i,t)).orThunk((function(){return kv(t,i).map((function(e){var t=n.create(Tv(),e,i);return n.add(t),t}))}))})).each((function(t){e.attr("src",t.blobUri())}))};n&&e.addAttributeFilter("src",(function(e){return W(e,i)}))},Iv=vt.makeMap,Rv=vt.each,Bv=vt.explode,zv=vt.extend,Fv=function(e,t){void 0===t&&(t=Kr());var n={},i=[],r={},o={};(e=e||{}).validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var a=function(e){var t,a,s;(a=e.name)in n&&((s=r[a])?s.push(e):r[a]=[e]),t=i.length;for(;t--;)(a=i[t].name)in e.attributes.map&&((s=o[a])?s.push(e):o[a]=[e]);return e},s={schema:t,addAttributeFilter:function(e,t){Rv(Bv(e),(function(e){var n;for(n=0;n<i.length;n++)if(i[n].name===e)return void i[n].callbacks.push(t);i.push({name:e,callbacks:[t]})}))},getAttributeFilters:function(){return[].concat(i)},addNodeFilter:function(e,t){Rv(Bv(e),(function(e){var i=n[e];i||(n[e]=i=[]),i.push(t)}))},getNodeFilters:function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},filterNode:a,parse:function(s,l){var u,c,d,f,h,p,m,g,v,y=[];l=l||{},r={},o={};var b=zv(Iv("script,style,head,html,body,title,meta,param"),t.getBlockElements()),w=t.getNonEmptyElements(),x=t.children,C=e.validate,k=function(e){return!1===e?"":!0===e?"p":e}("forced_root_block"in l?l.forced_root_block:e.forced_root_block),_=t.getWhiteSpaceElements(),S=/^[ \t\r\n]+/,T=/[ \t\r\n]+$/,D=/[ \t\r\n]+/g,M=/^[ \t\r\n]+$/;g=_.hasOwnProperty(l.context)||_.hasOwnProperty(e.root_name);var E=function(e,t){var i,o=new ph(e,t);return e in n&&((i=r[e])?i.push(o):r[e]=[o]),o},N=function(e){var n,i,r,o,a=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if((r=n.value.replace(T,"")).length>0)return void(n.value=r);if(i=n.next){if(3===i.type&&i.value.length){n=n.prev;continue}if(!a[i.name]&&"script"!==i.name&&"style"!==i.name){n=n.prev;continue}}o=n.prev,n.remove(),n=o}},A=Ch({validate:C,allow_html_data_urls:e.allow_html_data_urls,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,preserve_cdata:e.preserve_cdata,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(t.getSelfClosingElements()),cdata:function(e){v.append(E("#cdata",4)).value=e},text:function(e,t){var n;g||(e=e.replace(D," "),function(e,t){return e&&(t[e.name]||"br"===e.name)}(v.lastChild,b)&&(e=e.replace(S,""))),0!==e.length&&((n=E("#text",3)).raw=!!t,v.append(n).value=e)},comment:function(e){v.append(E("#comment",8)).value=e},pi:function(e,t){v.append(E(e,7)).value=t,N(v)},doctype:function(e){v.append(E("#doctype",10)).value=e,N(v)},start:function(e,n,r){var a,s,l,u,c=C?t.getElementRule(e):{};if(c){for((a=E(c.outputName||e,1)).attributes=n,a.shortEnded=r,v.append(a),(u=x[v.name])&&x[a.name]&&!u[a.name]&&y.push(a),s=i.length;s--;)(l=i[s].name)in n.map&&((p=o[l])?p.push(a):o[l]=[a]);b[e]&&N(a),r||(v=a),!g&&_[e]&&(g=!0)}},end:function(n){var i,r,o,a,s=C?t.getElementRule(n):{};if(s){if(b[n]&&!g){if((i=v.firstChild)&&3===i.type)if((r=i.value.replace(S,"")).length>0)i.value=r,i=i.next;else for(o=i.next,i.remove(),i=o;i&&3===i.type;)r=i.value,o=i.next,(0===r.length||M.test(r))&&(i.remove(),i=o),i=o;if((i=v.lastChild)&&3===i.type)if((r=i.value.replace(T,"")).length>0)i.value=r,i=i.prev;else for(o=i.prev,i.remove(),i=o;i&&3===i.type;)r=i.value,o=i.prev,(0===r.length||M.test(r))&&(i.remove(),i=o),i=o}if(g&&_[n]&&(g=!1),s.removeEmpty&&Lv(t,w,_,v))return a=v.parent,b[v.name]?v.empty().remove():v.unwrap(),void(v=a);s.paddEmpty&&(function(e){return Pv(e,"#text")&&e.firstChild.value===Hi}(v)||Lv(t,w,_,v))&&Av(e,l,b,v),v=v.parent}}},t),P=v=new ph(l.context||e.root_name,11);if(A.parse(s,l.format),C&&y.length&&(l.context?l.invalid=!0:function(e){var n,i,r,o,s,l,u,c,d,f,h,p=Iv("tr,td,th,tbody,thead,tfoot,table"),m=t.getNonEmptyElements(),g=t.getWhiteSpaceElements(),v=t.getTextBlockElements(),y=t.getSpecialElements();for(n=0;n<e.length;n++)if((i=e[n]).parent&&!i.fixed)if(v[i.name]&&"li"===i.parent.name){for(f=i.next;f&&v[f.name];)f.name="li",f.fixed=!0,i.parent.insert(f,i.parent),f=f.next;i.unwrap(i)}else{for(o=[i],r=i.parent;r&&!t.isValidChild(r.name,i.name)&&!p[r.name];r=r.parent)o.push(r);if(r&&o.length>1){for(o.reverse(),s=l=a(o[0].clone()),d=0;d<o.length-1;d++){for(t.isValidChild(l.name,o[d].name)?(u=a(o[d].clone()),l.append(u)):u=l,c=o[d].firstChild;c&&c!==o[d+1];)h=c.next,u.append(c),c=h;l=u}Lv(t,m,g,s)?r.insert(i,o[0],!0):(r.insert(s,o[0],!0),r.insert(i,s)),r=o[0],(Lv(t,m,g,r)||Pv(r,"br"))&&r.empty().remove()}else if(i.parent){if("li"===i.name){if((f=i.prev)&&("ul"===f.name||"ol"===f.name)){f.append(i);continue}if((f=i.next)&&("ul"===f.name||"ol"===f.name)){f.insert(i,f.firstChild,!0);continue}i.wrap(a(new ph("ul",1)));continue}t.isValidChild(i.parent.name,"div")&&t.isValidChild("div",i.name)?i.wrap(a(new ph("div",1))):y[i.name]?i.empty().remove():i.unwrap()}}}(y)),k&&("body"===P.name||l.isRootContent)&&function(){var n,i,r=P.firstChild,o=function(e){e&&((r=e.firstChild)&&3===r.type&&(r.value=r.value.replace(S,"")),(r=e.lastChild)&&3===r.type&&(r.value=r.value.replace(T,"")))};if(t.isValidChild(P.name,k.toLowerCase())){for(;r;)n=r.next,3===r.type||1===r.type&&"p"!==r.name&&!b[r.name]&&!r.attr("data-mce-type")?(i||((i=E(k,1)).attr(e.forced_root_block_attrs),P.insert(i,r)),i.append(r)):(o(i),i=null),r=n;o(i)}}(),!l.invalid){for(m in r)if(r.hasOwnProperty(m)){for(p=n[m],f=(u=r[m]).length;f--;)u[f].parent||u.splice(f,1);for(c=0,d=p.length;c<d;c++)p[c](u,m,l)}for(c=0,d=i.length;c<d;c++)if((p=i[c]).name in o){for(f=(u=o[p.name]).length;f--;)u[f].parent||u.splice(f,1);for(f=0,h=p.callbacks.length;f<h;f++)p.callbacks[f](u,p.name,l)}}return P}};return function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(function(e,i,r){var o,a,s,l,u,c,d,f,h=e.length,p=vt.extend({},n.getBlockElements()),m=n.getNonEmptyElements(),g=n.getWhiteSpaceElements();for(p.body=1,o=0;o<h;o++)if(s=(a=e[o]).parent,p[a.parent.name]&&a===s.lastChild){for(u=a.prev;u;){if("span"!==(c=u.name)||"bookmark"!==u.attr("data-mce-type")){"br"===c&&(a=null);break}u=u.prev}a&&(a.remove(),Lv(n,m,g,s)&&(d=n.getElementRule(s.name))&&(d.removeEmpty?s.remove():d.paddEmpty&&Av(t,r,p,s)))}else{for(l=a;s&&s.firstChild===l&&s.lastChild===l&&(l=s,!p[s.name]);)s=s.parent;l===s&&!0!==t.padd_empty_with_br&&((f=new ph("#text",3)).value=Hi,a.replace(f))}})),e.addAttributeFilter("href",(function(e){var n,i,r=e.length;if(!t.allow_unsafe_link_target)for(;r--;){var o=e[r];"a"===o.name&&"_blank"===o.attr("target")&&o.attr("rel",(i=void 0,i=(n=o.attr("rel"))?vt.trim(n):"",/\b(noopener)\b/g.test(i)?i:function(e){return e.split(" ").filter((function(e){return e.length>0})).concat(["noopener"]).sort().join(" ")}(i)))}})),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",(function(e){for(var t,n,i,r,o=e.length;o--;)if("a"===(r=e[o]).name&&r.firstChild&&!r.attr("href")){i=r.parent,t=r.lastChild;do{n=t.prev,i.insert(t,r),t=n}while(t)}})),t.fix_list_elements&&e.addNodeFilter("ul,ol",(function(e){for(var t,n,i=e.length;i--;)if("ul"===(n=(t=e[i]).parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var r=new ph("li",1);r.attr("style","list-style-type: none"),t.wrap(r)}})),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",(function(e){for(var t,i,r,o,a,s,l,u=e.length,c=n.getValidClasses();u--;){for(i=(t=e[u]).attr("class").split(" "),a="",r=0;r<i.length;r++)o=i[r],l=!1,(s=c["*"])&&s[o]&&(l=!0),s=c[t.name],!l&&s&&s[o]&&(l=!0),l&&(a&&(a+=" "),a+=o);a.length||(a=null),t.attr("class",a)}})),Ov(e,t)}(s,e),function(e,t){t.inline_styles&&xv(e,t)}(s,e),s},Hv=function(e,t,n){return function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events}(e,n)?function(e,t,n){var i,r,o=e.dom;t=t.cloneNode(!0);var a=document.implementation;return a.createHTMLDocument&&(i=a.createHTMLDocument(""),vt.each("BODY"===t.nodeName?t.childNodes:[t],(function(e){i.body.appendChild(i.importNode(e,!0))})),t="BODY"!==t.nodeName?i.body.firstChild:i.body,r=o.doc,o.doc=i),function(e,t){e.fire("PreProcess",t)}(e,xe(xe({},n),{node:t})),r&&(o.doc=r),t}(e,t,n):t},Wv=function(e,t,n){-1===vt.inArray(t,n)&&(e.addAttributeFilter(n,(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})),t.push(n))},jv=function(e,t,n,i,r){var o=function(e,t,n){return vh(e,t).serialize(n)}(t,n,i);return function(e,t,n){if(!t.no_events&&e){var i=function(e,t){return e.fire("PostProcess",t)}(e,xe(xe({},t),{content:n}));return i.content}return n}(e,r,o)},Uv=function(e,t){var n=["data-mce-selected"],i=t&&t.dom?t.dom:ts.DOM,r=t&&t.schema?t.schema:Kr(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs;var o=Fv(e,r);!function(e,t,n){e.addAttributeFilter("data-mce-tabindex",(function(e,t){for(var n,i=e.length;i--;)(n=e[i]).attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)})),e.addAttributeFilter("src,href,style",(function(e,i){for(var r,o,a=e.length,s="data-mce-"+i,l=t.url_converter,u=t.url_converter_scope;a--;)void 0!==(o=(r=e[a]).attr(s))?(r.attr(i,o.length>0?o:null),r.attr(s,null)):(o=r.attr(i),"style"===i?o=n.serializeStyle(n.parseStyle(o),r.name):l&&(o=l.call(u,o,i,r.name)),r.attr(i,o.length>0?o:null))})),e.addAttributeFilter("class",(function(e){for(var t,n,i=e.length;i--;)(n=(t=e[i]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))})),e.addAttributeFilter("data-mce-type",(function(e,t,n){for(var i,r=e.length;r--;)if("bookmark"===(i=e[r]).attr("data-mce-type")&&!n.cleanup){var o=x.from(i.firstChild).exists((function(e){return!ji(e.value)}));o?i.unwrap():i.remove()}})),e.addNodeFilter("noscript",(function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=zr.decode(t.value))})),e.addNodeFilter("script,style",(function(e,n){for(var i,r,o,a=e.length,s=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};a--;)r=(i=e[a]).firstChild?i.firstChild.value:"","script"===n?((o=i.attr("type"))&&i.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,"")),"xhtml"===t.element_format&&r.length>0&&(i.firstChild.value="// <![CDATA[\n"+s(r)+"\n// ]]>")):"xhtml"===t.element_format&&r.length>0&&(i.firstChild.value="\x3c!--\n"+s(r)+"\n--\x3e")})),e.addNodeFilter("#comment",(function(e){for(var i,r=e.length;r--;)i=e[r],t.preserve_cdata&&0===i.value.indexOf("[CDATA[")?(i.name="#cdata",i.type=4,i.value=n.decode(i.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===i.value.indexOf("mce:protected ")&&(i.name="#text",i.type=3,i.raw=!0,i.value=unescape(i.value).substr(14))})),e.addNodeFilter("xml:namespace,input",(function(e,t){for(var n,i=e.length;i--;)7===(n=e[i]).type?n.remove():1===n.type&&("input"!==t||n.attr("type")||n.attr("type","text"))})),e.addAttributeFilter("data-mce-type",(function(t){W(t,(function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())}))})),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}))}(o,e,i);return{schema:r,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:function(n,a){void 0===a&&(a={});var s=xe({format:"html"},a),l=Hv(t,n,s),u=function(e,t,n){var i=Ui(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Fi(bt.fromDom(t))?i:vt.trim(i)}(i,l,s),c=function(e,t,n){var i=n.selection?xe({forced_root_block:!1},n):n,r=e.parse(t,i);return function(e){var t=function(e){return e&&"br"===e.name},n=e.lastChild;if(t(n)){var i=n.prev;t(i)&&(n.remove(),i.remove())}}(r),r}(o,u,s);return"tree"===s.format?c:jv(t,e,r,c,s)},addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)},addTempAttr:h(Wv,o,n),getTempAttrs:function(){return n},getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters}},Vv=function(e,t){var n=Uv(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters}},$v=function(e,t){return void 0===t&&(t={}),function(e,t,n){return cv(e).editor.getContent(t,n)}(e,t,t.format?t.format:"html")},qv=function(e,t,n){return void 0===n&&(n={}),function(e,t,n){return cv(e).editor.setContent(t,n)}(e,t,n)},Xv=ts.DOM,Yv=function(e){return x.from(e).each((function(e){return e.destroy()}))},Kv=function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,i=e.getBody(),r=e.getElement();i&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&r&&Xv.remove(r.nextSibling),function(e){e.fire("remove")}(e),e.editorManager.remove(e),!e.inline&&i&&function(e){Xv.setStyle(e.id,"display",e.orgDisplay)}(e),function(e){e.fire("detach")}(e),Xv.remove(e.getContainer()),Yv(t),Yv(n),e.destroy()}},Gv=function(e,t){var n=e.selection,i=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Yv(n),Yv(i)),function(e){var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),Xv.unbind(t,"submit reset",e.formEventDelegate))}(e),function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)}(e),e.destroyed=!0):e.remove())},Jv=Object.prototype.hasOwnProperty,Zv=(Ev=function(e,t){return T(e)&&T(t)?Zv(e,t):t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},i=0;i<e.length;i++){var r=e[i];for(var o in r)Jv.call(r,o)&&(n[o]=Ev(n[o],r[o]))}return n}),Qv=rt().deviceType,ey=Qv.isTouch(),ty=Qv.isPhone(),ny=Qv.isTablet(),iy=["lists","autolink","autosave"],ry={table_grid:!1,object_resizing:!1,resize:!1},oy=function(e){var t=D(e)?e.join(" "):e,n=H(S(t)?t.split(" "):[],Pe);return U(n,(function(e){return e.length>0}))},ay=function(e,t){var n=le(t,(function(t,n){return z(e,n)}));return function(e,t){return{sections:d(e),settings:d(t)}}(n.t,n.f)},sy=function(e,t){return e.sections().hasOwnProperty(t)},ly=function(e,t){return de(e,"toolbar_mode").orThunk((function(){return de(e,"toolbar_drawer").map((function(e){return!1===e?"wrap":e}))})).getOr(t)},uy=function(e,t){var n={resize:!1,toolbar_mode:ly(e,"scrolling"),toolbar_sticky:!1};return xe(xe(xe({},ry),n),t?{menubar:!1}:{})},cy=function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?vt.extend({},e.external_plugins,n):n},dy=function(e,t,n,i){var r=oy(n.forced_plugins),o=oy(i.plugins),a=function(e,t){return sy(e,t)?e.sections()[t]:{}}(t,"mobile"),s=a.plugins?oy(a.plugins):o,l=e&&function(e,t,n){var i=e.sections();return sy(e,t)&&i[t].theme===n}(t,"mobile","mobile")?U(s,h(z,iy)):e&&sy(t,"mobile")?s:o,u=function(e,t){return[].concat(oy(e)).concat(oy(t))}(r,l);return vt.extend(i,{plugins:u.join(" ")})},fy=function(e,t,n,i,r){var o=e?{mobile:uy(r.mobile||{},t)}:{},a=ay(["mobile"],Zv(o,r)),s=vt.extend(n,i,a.settings(),function(e,t){return e&&sy(t,"mobile")}(e,a)?function(e,t,n){void 0===n&&(n={});var i=e.sections(),r=i.hasOwnProperty(t)?i[t]:{};return vt.extend({},n,r)}(a,"mobile"):{},{validate:!0,external_plugins:cy(i,a.settings())});return dy(e,a,i,s)},hy=function(e,t,n,i,r){var o=function(e,t,n,i,r){var o={id:t,theme:"silver",toolbar_mode:ly(e,"floating"),plugins:"",document_base_url:n,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:r.convertURL,url_converter_scope:r};return xe(xe({},o),i?ry:{})}(r,t,n,ey,e);return fy(ty||ny,ty,o,i,r)},py=function(e,t,n){return x.from(t.settings[n]).filter(e)},my=function(e,t,n,i){var r,o=t in e.settings?e.settings[t]:n;return"hash"===i?function(e){var t={};return"string"==typeof e?W(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),(function(e){var n=e.split("=");n.length>1?t[vt.trim(n[0])]=vt.trim(n[1]):t[vt.trim(n[0])]=vt.trim(n[0])})):t=e,t}(o):"string"===i?py(S,e,t).getOr(n):"number"===i?py(L,e,t).getOr(n):"boolean"===i?py(E,e,t).getOr(n):"object"===i?py(T,e,t).getOr(n):"array"===i?py(D,e,t).getOr(n):"string[]"===i?py((r=S,function(e){return D(e)&&K(e,r)}),e,t).getOr(n):"function"===i?py(P,e,t).getOr(n):o},gy=(Nv={},{add:function(e,t){Nv[e]=t},get:function(e){return Nv[e]?Nv[e]:{icons:{}}},has:function(e){return fe(Nv,e)}}),vy=function(e,t){return t.dom[e]},yy=function(e,t){return parseInt(Un(t,e),10)},by=h(vy,"clientWidth"),wy=h(vy,"clientHeight"),xy=h(yy,"margin-top"),Cy=h(yy,"margin-left"),ky=function(e,t,n){var i,r=bt.fromDom(e.getBody()),o=e.inline?r:(i=r,bt.fromDom(Ot(i).dom.documentElement)),a=function(e,t,n,i){var r=function(e){return e.dom.getBoundingClientRect()}(t);return{x:n-(e?r.left+t.dom.clientLeft+Cy(t):0),y:i-(e?r.top+t.dom.clientTop+xy(t):0)}}(e.inline,o,t,n);return function(e,t,n){var i=by(e),r=wy(e);return t>=0&&n>=0&&t<=i&&n<=r}(o,a.x,a.y)},_y=function(e){var t,n=e.inline?e.getBody():e.getContentAreaContainer();return(t=n,x.from(t).map(bt.fromDom)).map(sn).getOr(!1)};function Sy(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getNotificationManagerImpl?n.getNotificationManagerImpl():{open:t=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,reposition:t,getArgs:t}},i=function(){return x.from(t[0])},r=function(){t.length>0&&n().reposition(t)},o=function(e){X(t,(function(t){return t===e})).each((function(e){t.splice(e,1)}))},a=function(a){if(!e.removed&&_y(e))return q(t,(function(e){return t=n().getArgs(e),i=a,!(t.type!==i.type||t.text!==i.text||t.progressBar||t.timeout||i.progressBar||i.timeout);var t,i})).getOrThunk((function(){e.editorManager.setActive(e);var s=n().open(a,(function(){o(s),r(),i().fold((function(){return e.focus()}),(function(e){return bt.fromDom(e.getEl()).dom.focus()}))}));return function(e){t.push(e)}(s),r(),s}))};return function(e){e.on("SkinLoaded",(function(){var t=function(e){return e.getParam("service_message")}(e);t&&a({text:t,type:"warning",timeout:0})})),e.on("ResizeEditor ResizeWindow NodeChange",(function(){ki.requestAnimationFrame(r)})),e.on("remove",(function(){W(t.slice(),(function(e){n().close(e)}))}))}(e),{open:a,close:function(){i().each((function(e){n().close(e),o(e),r()}))},getNotifications:function(){return t}}}var Ty=fs.PluginManager,Dy=fs.ThemeManager;var My=function(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getWindowManagerImpl?n.getWindowManagerImpl():{open:t=function(){throw new Error("Theme did not provide a WindowManager implementation.")},openUrl:t,alert:t,confirm:t,close:t,getParams:t,setParams:t}},i=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},r=function(n){t.push(n),function(t){e.fire("OpenWindow",{dialog:t})}(n)},o=function(n){!function(t){e.fire("CloseWindow",{dialog:t})}(n),0===(t=U(t,(function(e){return e!==n}))).length&&e.focus()},a=function(t){e.editorManager.setActive(e),jf(e);var n=t();return r(n),n};return e.on("remove",(function(){W(t,(function(e){n().close(e)}))})),{open:function(e,t){return a((function(){return n().open(e,t,o)}))},openUrl:function(e){return a((function(){return n().openUrl(e,o)}))},alert:function(e,t,r){n().alert(e,i(r||this,t))},confirm:function(e,t,r){n().confirm(e,i(r||this,t))},close:function(){x.from(t[t.length-1]).each((function(e){n().close(e),o(e)}))}}},Ey=function(e,t){e.notificationManager.open({type:"error",text:t})},Ny=function(e,t){e._skinLoaded?Ey(e,t):e.on("SkinLoaded",(function(){Ey(e,t)}))},Ay=function(e,t,n){!function(e,t,n){e.fire(t,n)}(e,t,{message:n}),console.error(n)},Py=function(e,t,n){return n?"Failed to load "+e+": "+n+" from url "+t:"Failed to load "+e+" url: "+t},Ly=function(e,t,n){Ay(e,"PluginLoadError",Py("plugin",t,n))},Oy=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=window.console;i&&(i.error?i.error.apply(i,Ce([e],t)):i.log.apply(i,Ce([e],t)))},Iy=function(e){var t=function(e){var t=e.getParam("content_css");return S(t)?H(t.split(","),Pe):D(t)?t:!1===t||e.inline?[]:["default"]}(e),n=e.editorManager.baseURL+"/skins/content",i="content"+e.editorManager.suffix+".css",r=!0===e.inline;return H(t,(function(t){return function(e){return/^[a-z0-9\-]+$/i.test(e)}(t)&&!r?n+"/"+t+"/"+i:e.documentBaseURI.toAbsolute(t)}))};function Ry(e,t){var n={},i=function(e,n,i,r){var o=new XMLHttpRequest;o.open("POST",t.url),o.withCredentials=t.credentials,o.upload.onprogress=function(e){r(e.loaded/e.total*100)},o.onerror=function(){i("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){if(o.status<200||o.status>=300)i("HTTP Error: "+o.status);else{var e,r,a=JSON.parse(o.responseText);if(a&&"string"==typeof a.location)n((e=t.basePath,r=a.location,e?e.replace(/\/$/,"")+"/"+r.replace(/^\//,""):r));else i("Invalid JSON: "+o.responseText)}};var a=new FormData;a.append("file",e.blob(),e.filename()),o.send(a)},r=function(e,t){return{url:t,blobInfo:e,status:!0}},o=function(e,t,n){return{url:"",blobInfo:e,status:!1,error:{message:t,options:n}}},a=function(e,t){vt.each(n[e],(function(e){e(t)})),delete n[e]},s=function(i,s){return i=vt.grep(i,(function(t){return!e.isUploaded(t.blobUri())})),bi.all(vt.map(i,(function(i){return e.isPending(i.blobUri())?function(e){var t=e.blobUri();return new bi((function(e){n[t]=n[t]||[],n[t].push(e)}))}(i):function(t,n,i){return e.markPending(t.blobUri()),new bi((function(s){var l;try{var u=function(){l&&l.close()};n(t,(function(n){u(),e.markUploaded(t.blobUri(),n),a(t.blobUri(),r(t,n)),s(r(t,n))}),(function(n,i){var r=i||{};u(),e.removeFailed(t.blobUri()),a(t.blobUri(),o(t,n,r)),s(o(t,n,r))}),(function(e){e<0||e>100||(l||(l=i()),l.progressBar.value(e))}))}catch(e){s(o(t,e.message,{}))}}))}(i,t.handler,s)})))};return!1===P(t.handler)&&(t.handler=i),{upload:function(e,n){return t.url||t.handler!==i?s(e,n):new bi((function(e){e([])}))}}}var By=0,zy=function(e){return e+By+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+t()+t()+t());var t},Fy=function(e){var t,n,i,r,o,a=function(){var e=[],t=function(e){if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var t,n=e.id||zy("blobid"),i=e.name||n;return{id:d(n),name:d(i),filename:d(i+"."+(t=e.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[t.toLowerCase()]||"dat")),blob:d(e.blob),base64:d(e.base64),blobUri:d(e.blobUri||URL.createObjectURL(e.blob)),uri:d(e.uri)}},n=function(t){return q(e,t).getOrUndefined()},i=function(e){return n((function(t){return t.id()===e}))};return{create:function(e,n,i,r){if(S(e))return t({id:e,name:r,blob:n,base64:i});if(T(e))return t(e);throw new Error("Unknown input type")},add:function(t){i(t.id())||e.push(t)},get:i,getByUri:function(e){return n((function(t){return t.blobUri()===e}))},getByData:function(e,t){return n((function(n){return n.base64()===e&&n.blob().type===t}))},findFirst:n,removeByUri:function(t){e=U(e,(function(e){return e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1)}))},destroy:function(){W(e,(function(e){URL.revokeObjectURL(e.blobUri())})),e=[]}}}(),s=(i={},r=function(e,t){return{status:e,resultUri:t}},{hasBlobUri:o=function(e){return e in i},getResultUri:function(e){var t=i[e];return t?t.resultUri:null},isPending:function(e){return!!o(e)&&1===i[e].status},isUploaded:function(e){return!!o(e)&&2===i[e].status},markPending:function(e){i[e]=r(1,null)},markUploaded:function(e,t){i[e]=r(2,t)},removeFailed:function(e){delete i[e]},destroy:function(){i={}}}),l=[],u=function(t){return function(n){return e.selection?t(n):[]}},c=function(e,t,n){var i=0;do{-1!==(i=e.indexOf(t,i))&&(e=e.substring(0,i)+n+e.substr(i+t.length),i+=n.length-t.length+1)}while(-1!==i);return e},f=function(e,t,n){var i='src="'+n+'"'+(n===ht.transparentSrc?' data-mce-placeholder="1"':"");return e=c(e,'src="'+t+'"',i),e=c(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},h=function(t,n){W(e.undoManager.data,(function(e){"fragmented"===e.type?e.fragments=H(e.fragments,(function(e){return f(e,t,n)})):e.content=f(e.content,t,n)}))},p=function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},m=function(n){return t||(t=Ry(s,{url:Gl(e),basePath:Jl(e),credentials:Zl(e),handler:Ql(e)})),b().then(u((function(i){var r=H(i,(function(e){return e.blobInfo}));return t.upload(r,p).then(u((function(t){var r=[],o=H(t,(function(t,n){var o=i[n].blobInfo,s=i[n].image;return t.status&&function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")}(e)?(a.removeByUri(s.src),function(t,n){var i,r=e.convertURL(n,"src");h(t.src,n),e.$(t).attr({src:Yl(e)?(i=n,i+(-1===i.indexOf("?")?"?":"&")+(new Date).getTime()):n,"data-mce-src":r})}(s,t.url)):t.error&&(t.error.options.remove&&(h(s.getAttribute("src"),ht.transparentSrc),r.push(s)),function(e,t){Ny(e,cs.translate(["Failed to upload image: {0}",t]))}(e,t.error.message)),{element:s,status:t.status,uploadUri:t.url,blobInfo:o}}));return r.length>0&&(uv(e)?console.error("Removing images on failed uploads is currently unsupported for RTC"):e.undoManager.transact((function(){W(r,(function(t){e.dom.remove(t),a.removeByUri(t.src)}))}))),n&&n(o),o})))})))},g=function(t){if(Xl(e))return m(t)},y=function(t){if(!1===K(l,(function(e){return e(t)})))return!1;if(0===t.getAttribute("src").indexOf("data:")){var n=function(e){return e.getParam("images_dataimg_filter",v,"function")}(e);return n(t)}return!0},b=function(){return n||(n=Mv(s,a)),n.findAll(e.getBody(),y).then(u((function(t){return t=U(t,(function(t){return"string"!=typeof t||(Ny(e,t),!1)})),W(t,(function(e){h(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")})),t})))},w=function(t){return t.replace(/src="(blob:[^"]+)"/g,(function(t,n){var i=s.getResultUri(n);if(i)return'src="'+i+'"';var r=a.getByUri(n);return r||(r=$(e.editorManager.get(),(function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)}),null)),r?'src="data:'+r.blob().type+";base64,"+r.base64()+'"':t}))};return e.on("SetContent",(function(){Xl(e)?g():b()})),e.on("RawSaveContent",(function(e){e.content=w(e.content)})),e.on("GetContent",(function(e){e.source_view||"raw"===e.format||(e.content=w(e.content))})),e.on("PostRender",(function(){e.parser.addNodeFilter("img",(function(e){W(e,(function(e){var t=e.attr("src");if(!a.getByUri(t)){var n=s.getResultUri(t);n&&e.attr("src",n)}}))}))})),{blobCache:a,addFilter:function(e){l.push(e)},uploadImages:m,uploadImagesAuto:g,scanForImages:b,destroy:function(){a.destroy(),s.destroy(),n=t=null}}},Hy=function(e,t,n,i){var r=te(n.get()),o={},a={},s=U(Qc(e.dom,t),(function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}));ie(i,(function(t,n){vt.each(s,(function(i){return e.formatter.matchNode(i,n,{},t.similar)?(-1===r.indexOf(n)&&(W(t.callbacks,(function(e){e(!0,{node:i,format:n,parents:s})})),o[n]=t.callbacks),a[n]=t.callbacks,!1):!Nm(e,i,n)&&void 0}))}));var l=Wy(n.get(),a,t,s);n.set(xe(xe({},o),l))},Wy=function(e,t,n,i){return le(e,(function(e,r){return!!fe(t,r)||(W(e,(function(e){e(!1,{node:n,format:r,parents:i})})),!1)})).t},jy=function(e,t,n,i,r){return null===t.get()&&function(e,t){var n=as({});e.set({}),t.on("NodeChange",(function(i){Hy(t,i.element,n,e.get())}))}(t,e),function(e,t,n,i){var r=e.get();W(t.split(","),(function(e){r[e]||(r[e]={similar:i,callbacks:[]}),r[e].callbacks.push(n)})),e.set(r)}(t,n,i,r),{unbind:function(){return function(e,t,n){var i=e.get();W(t.split(","),(function(e){i[e].callbacks=U(i[e].callbacks,(function(e){return e!==n})),0===i[e].callbacks.length&&delete i[e]})),e.set(i)}(t,n,i)}}};function Uy(e){var t={},n=function e(n,i){n&&("string"!=typeof n?vt.each(n,(function(t,n){e(n,t)})):(D(i)||(i=[i]),vt.each(i,(function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))})),t[n]=i))};return n(function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(e,t,n){return yn(e)&&e.hasAttribute("href")},onformat:function(t,n,i){vt.each(i,(function(n,i){e.setAttrib(t,i,n)}))}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return vt.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),(function(e){t[e]={block:e,remove:"all"}})),t}(e.dom)),n(function(e){return e.getParam("formats")}(e)),{get:function(e){return e?t[e]:t},has:function(e){return fe(t,e)},register:n,unregister:function(e){return e&&t[e]&&delete t[e],t}}}var Vy,$y=vt.each,qy=ts.DOM,Xy=function(e,t){var n,i,r,o=t&&t.schema||Kr({}),a=function(e){i="string"==typeof e?{name:e,classes:[],attrs:{}}:e;var t=qy.create(i.name);return function(e,t){t.classes.length&&qy.addClass(e,t.classes.join(" ")),qy.setAttribs(e,t.attrs)}(t,i),t};return e&&e.length?(i=e[0],n=a(i),(r=qy.create("div")).appendChild(function e(t,n,i){var r,s,l=n.length>0&&n[0],u=l&&l.name,c=function(e,t){var n="string"!=typeof e?e.nodeName.toLowerCase():e,i=o.getElementRule(n),r=i&&i.parentsRequired;return!(!r||!r.length)&&(t&&-1!==vt.inArray(r,t)?t:r[0])}(t,u);if(c)u===c?(s=n[0],n=n.slice(1)):s=c;else if(l)s=n[0],n=n.slice(1);else if(!i)return t;return s&&(r=a(s)).appendChild(t),i&&(r||(r=qy.create("div")).appendChild(t),vt.each(i,(function(e){var n=a(e);r.insertBefore(n,t)}))),e(r,n,s&&s.siblings)}(n,e.slice(1),i.siblings)),r):""},Yy=function(e){var t,n={classes:[],attrs:{}};return"*"!==(e=n.selector=vt.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(function(e,t,i,r,o){switch(t){case"#":n.attrs.id=i;break;case".":n.classes.push(i);break;case":":-1!==vt.inArray("checked disabled enabled read-only required".split(" "),i)&&(n.attrs[i]=i)}if("["===r){var a=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""}))),n.name=t||"div",n},Ky=function(e,t){var n,i,r,o="",a=function(e){var t=e.getParam("preview_styles","font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");return S(t)?t:""}(e);if(""===a)return"";var s=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}if("preview"in t){var l=de(t,"preview");if(l.is(!1))return"";a=l.getOr(a)}n=t.block||t.inline||"span";var u,c=(u=t.selector)&&"string"==typeof u?(u=(u=u.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),vt.map(u.split(/(?:>|\s+(?![^\[\]]+\]))/),(function(e){var t=vt.map(e.split(/(?:~\+|~|\+)/),Yy),n=t.pop();return t.length&&(n.siblings=t),n})).reverse()):[];c.length?(c[0].name||(c[0].name=n),n=t.selector,i=Xy(c,e)):i=Xy([n],e);var d=qy.select(n,i)[0]||i.firstChild;return $y(t.styles,(function(e,t){var n=s(e);n&&qy.setStyle(d,t,n)})),$y(t.attributes,(function(e,t){var n=s(e);n&&qy.setAttrib(d,t,n)})),$y(t.classes,(function(e){var t=s(e);qy.hasClass(d,t)||qy.addClass(d,t)})),e.fire("PreviewFormats"),qy.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i),r=qy.getStyle(e.getBody(),"fontSize",!0),r=/px$/.test(r)?parseInt(r,10):0,$y(a.split(" "),(function(t){var n=qy.getStyle(d,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=qy.getStyle(e.getBody(),t,!0),"#ffffff"===qy.toHex(n).toLowerCase())||"color"===t&&"#000000"===qy.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===r)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*r+"px"}"border"===t&&n&&(o+="padding:0 2px;"),o+=t+":"+n+";"}})),e.fire("AfterPreviewFormats"),qy.remove(i),o},Gy=function(e){var t=Uy(e),n=as(null);return function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}(e),Km(e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:function(t,n,i){!function(e,t,n,i){dv(e).formatter.apply(t,n,i)}(e,t,n,i)},remove:function(t,n,i,r){!function(e,t,n,i,r){dv(e).formatter.remove(t,n,i,r)}(e,t,n,i,r)},toggle:function(t,n,i){!function(e,t,n,i){dv(e).formatter.toggle(t,n,i)}(e,t,n,i)},match:h(Im,e),matchAll:h(Rm,e),matchNode:h(Om,e),canApply:h(Bm,e),formatChanged:h(jy,e,n),getCssText:h(Ky,e)}},Jy=function(e){var t=as(x.none()),n=as(0),i=as(0),r={data:[],typing:!1,beforeChange:function(){!function(e,t,n){dv(e).undoManager.beforeChange(t,n)}(e,n,t)},add:function(o,a){return function(e,t,n,i,r,o,a){return dv(e).undoManager.addUndoLevel(t,n,i,r,o,a)}(e,r,i,n,t,o,a)},undo:function(){return function(e,t,n,i){return dv(e).undoManager.undo(t,n,i)}(e,r,n,i)},redo:function(){return function(e,t,n){return dv(e).undoManager.redo(t,n)}(e,i,r.data)},clear:function(){!function(e,t,n){dv(e).undoManager.clear(t,n)}(e,r,i)},reset:function(){!function(e,t){dv(e).undoManager.reset(t)}(e,r)},hasUndo:function(){return function(e,t,n){return dv(e).undoManager.hasUndo(t,n)}(e,r,i)},hasRedo:function(){return function(e,t,n){return dv(e).undoManager.hasRedo(t,n)}(e,r,i)},transact:function(t){return function(e,t,n,i){return dv(e).undoManager.transact(t,n,i)}(e,r,n,t)},ignore:function(t){!function(e,t,n){dv(e).undoManager.ignore(t,n)}(e,n,t)},extra:function(t,n){!function(e,t,n,i,r){dv(e).undoManager.extra(t,n,i,r)}(e,r,i,t,n)}};return uv(e)||function(e,t,n){var i=as(!1),r=function(e){iv(t,!1,n),t.add({},e)};e.on("init",(function(){t.add()})),e.on("BeforeExecCommand",(function(e){var i=e.command.toLowerCase();"undo"!==i&&"redo"!==i&&"mcerepaint"!==i&&(rv(t,n),t.beforeChange())})),e.on("ExecCommand",(function(e){var t=e.command.toLowerCase();"undo"!==t&&"redo"!==t&&"mcerepaint"!==t&&r(e)})),e.on("ObjectResizeStart cut",(function(){t.beforeChange()})),e.on("SaveContent ObjectResized blur",r),e.on("dragend",r),e.on("keyup",(function(n){var o=n.keyCode;n.isDefaultPrevented()||((o>=33&&o<=36||o>=37&&o<=40||45===o||n.ctrlKey)&&(r(),e.nodeChanged()),46!==o&&8!==o||e.nodeChanged(),i.get()&&t.typing&&!1===tv(Jg(e),t.data[0])&&(!1===e.isDirty()&&(e.setDirty(!0),e.fire("change",{level:t.data[0],lastLevel:null})),e.fire("TypingUndo"),i.set(!1),e.nodeChanged()))})),e.on("keydown",(function(e){var o=e.keyCode;if(!e.isDefaultPrevented())if(o>=33&&o<=36||o>=37&&o<=40||45===o)t.typing&&r(e);else{var a=e.ctrlKey&&!e.altKey||e.metaKey;!(o<16||o>20)||224===o||91===o||t.typing||a||(t.beforeChange(),iv(t,!0,n),t.add({},e),i.set(!0))}})),e.on("mousedown",(function(e){t.typing&&r(e)})),e.on("input",(function(e){var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data||function(e){return"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType}(e))&&r(e)})),e.on("AddUndo Undo Redo ClearUndos",(function(t){t.isDefaultPrevented()||e.nodeChanged()}))}(e,r,n),function(e){e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")}(e),r},Zy=[9,27,zd.HOME,zd.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,zd.DOWN,zd.UP,zd.LEFT,zd.RIGHT].concat(ht.browser.isFirefox()?[224]:[]),Qy="data-mce-placeholder",eb=function(e){return"keydown"===e.type||"keyup"===e.type},tb=function(e){var t=e.keyCode;return t===zd.BACKSPACE||t===zd.DELETE},nb=function(e){var t=e.dom,n=$l(e),i=function(e){return e.getParam("placeholder",jl.getAttrib(e.getElement(),"placeholder"),"string")}(e),r=function r(o,a){if(!function(e){if(eb(e)){var t=e.keyCode;return!tb(e)&&(zd.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||z(Zy,t))}return!1}(o)){var s=e.getBody(),l=!function(e){return eb(e)&&!(tb(e)||"keyup"===e.type&&229===e.keyCode)}(o)&&function(e,t,n){if(wr(bt.fromDom(t),!1)){var i=""===n,r=t.firstElementChild;return!r||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&(i?!e.isBlock(r):n===r.nodeName.toLowerCase())}return!1}(t,s,n);(""!==t.getAttrib(s,Qy)!==l||a)&&(t.setAttrib(s,Qy,l?i:null),t.setAttrib(s,"aria-placeholder",l?i:null),function(e,t){e.fire("PlaceholderToggle",{state:t})}(e,l),e.on(l?"keydown":"keyup",r),e.off(l?"keyup":"keydown",r))}};i&&e.on("init",(function(t){r(t,!0),e.on("change SetContent ExecCommand",r),e.on("paste",(function(t){return ki.setEditorTimeout(e,(function(){return r(t)}))}))}))},ib=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,rb=function(e,t){return xt(bt.fromDom(t),function(e){return e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")}(e))},ob=function(e){return"rtl"===ts.DOM.getStyle(e,"direction",!0)||(t=e.textContent,ib.test(t));var t},ab=function(e,t,n){var i=function(e,t,n){return U(ts.DOM.getParents(n.container(),"*",t),e)}(e,t,n);return x.from(i[i.length-1])},sb=function(e,t){if(!t)return t;var n=t.container(),i=t.offset();return e?Xi(n)?Tn(n.nextSibling)?yl(n.nextSibling,0):yl.after(n):Gi(t)?yl(n,i+1):t:Xi(n)?Tn(n.previousSibling)?yl(n.previousSibling,n.previousSibling.data.length):yl.before(n):Ji(t)?yl(n,i-1):t},lb=h(sb,!0),ub=h(sb,!1),cb=function(e,t){return St(e,t)?mi(t,(function(e){return Oi(e)||Ri(e)}),function(e){return function(t){return kt(e,bt.fromDom(t.dom.parentNode))}}(e)):x.none()},db=function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),function(e){var t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)}(e))},fb=function(e,t){return{from:e,to:t}},hb=function(e,t){var n=bt.fromDom(e),i=bt.fromDom(t.container());return cb(n,i).map((function(e){return function(e,t){return{block:e,position:t}}(e,t)}))},pb=function(e,t,n){var i=hb(e,yl.fromRangeStart(n)),r=i.bind((function(n){return yc(t,e,n.position).bind((function(n){return hb(e,n).map((function(n){return function(e,t,n){return Nn(n.position.getNode())&&!1===wr(n.block)?xc(!1,n.block.dom).bind((function(i){return i.isEqual(n.position)?yc(t,e,i).bind((function(t){return hb(e,t)})):x.some(n)})).getOr(n):n}(e,t,n)}))}))}));return Fs(i,r,fb).filter((function(e){return function(e){return!1===kt(e.from.block,e.to.block)}(e)&&function(e){return Rt(e.from.block).bind((function(t){return Rt(e.to.block).filter((function(e){return kt(t,e)}))})).isSome()}(e)&&function(e){return!1===Ln(e.from.block.dom)&&!1===Ln(e.to.block.dom)}(e)}))},mb=function(e){var t=Wt(e);return X(t,Ai).fold((function(){return t}),(function(e){return t.slice(0,e)}))},gb=function(e){var t=mb(e);return W(t,on),t},vb=function(e,t){var n=Yh(t,e);return q(n.reverse(),(function(e){return wr(e)})).each(on)},yb=function(e,t,n,i){if(wr(n))return Vh(n),_c(n.dom);0===U(Ft(i),(function(e){return!wr(e)})).length&&wr(t)&&Zt(i,bt.fromTag("br"));var r=kc(n.dom,yl.before(i.dom));return W(gb(t),(function(e){Zt(i,e)})),vb(e,t),r},bb=function(e,t,n){if(wr(n))return on(n),wr(t)&&Vh(t),_c(t.dom);var i=Sc(n.dom);return W(gb(t),(function(e){tn(n,e)})),vb(e,t),i},wb=function(e,t){return St(t,e)?function(e,t){var n=Yh(t,e);return x.from(n[n.length-1])}(t,e):x.none()},xb=function(e,t){xc(e,t.dom).map((function(e){return e.getNode()})).map(bt.fromDom).filter(Li).each(on)},Cb=function(e,t,n){return xb(!0,t),xb(!1,n),wb(t,n).fold(h(bb,e,t,n),h(yb,e,t,n))},kb=function(e,t,n,i){return t?Cb(e,i,n):Cb(e,n,i)},_b=function(e,t){var n=bt.fromDom(e.getBody()),i=function(e,t,n){return n.collapsed?pb(e,t,n):x.none()}(n.dom,t,e.selection.getRng()).bind((function(e){return kb(n,t,e.from.block,e.to.block)}));return i.each((function(t){e.selection.setRng(t.toRange())})),i.isSome()},Sb=function(e,t){var n=bt.fromDom(t),i=h(kt,e);return pi(n,zi,i).isSome()},Tb=function(e,t){var n=kc(e.dom,yl.fromRangeStart(t)).isNone(),i=Cc(e.dom,yl.fromRangeEnd(t)).isNone();return!function(e,t){return Sb(e,t.startContainer)||Sb(e,t.endContainer)}(e,t)&&n&&i},Db=function(e){var t=bt.fromDom(e.getBody()),n=e.selection.getRng();return Tb(t,n)?function(e){return e.setContent(""),e.selection.setCursorLocation(),!0}(e):function(e,t){var n=t.getRng();return Fs(cb(e,bt.fromDom(n.startContainer)),cb(e,bt.fromDom(n.endContainer)),(function(i,r){return!1===kt(i,r)&&(n.deleteContents(),kb(e,!0,i,r).each((function(e){t.setRng(e.toRange())})),!0)})).getOr(!1)}(t,e.selection)},Mb=function(e,t){return!e.selection.isCollapsed()&&Db(e)},Eb=Pn,Nb=Ln,Ab=function(e,t,n,i,r){return x.from(t._selectionOverrides.showCaret(e,n,i,r))},Pb=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?x.none():x.some(function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t}(t))},Lb=function(e,t,n){var i=Ku(1,e.getBody(),t),r=yl.fromRangeStart(i),o=r.getNode();if(Mu(o))return Ab(1,e,o,!r.isAtEnd(),!1);var a=r.getNode(!0);if(Mu(a))return Ab(1,e,a,!1,!1);var s=e.dom.getParent(r.getNode(),(function(e){return Nb(e)||Eb(e)}));return Mu(s)?Ab(1,e,s,!1,n):x.none()},Ob=function(e,t,n){return t.collapsed?Lb(e,t,n).getOr(t):t},Ib=function(e){return Wh(e)||Bh(e)},Rb=function(e){return jh(e)||zh(e)},Bb=function(e,t,n,i,r,o){return Ab(i,e,o.getNode(!r),r,!0).each((function(n){if(t.collapsed){var i=t.cloneRange();r?i.setEnd(n.startContainer,n.startOffset):i.setStart(n.endContainer,n.endOffset),i.deleteContents()}else t.deleteContents();e.selection.setRng(n)})),function(e,t){Tn(t)&&0===t.data.length&&e.remove(t)}(e.dom,n),!0},zb=function(e,t){return function(e,t){var n=e.selection.getRng();if(!Tn(n.commonAncestorContainer))return!1;var i=t?vl.Forwards:vl.Backwards,r=hc(e.getBody()),o=h(Qu,t?r.next:r.prev),a=t?Ib:Rb,s=Ju(i,e.getBody(),n),l=sb(t,o(s));if(!l||!ec(s,l))return!1;if(a(l))return Bb(e,n,s.getNode(),i,t,l);var u=o(l);return!!(u&&a(u)&&ec(l,u))&&Bb(e,n,s.getNode(),i,t,u)}(e,t)},Fb=ci([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Hb=function(e,t,n,i){var r=i.getNode(!1===t);return cb(bt.fromDom(e),bt.fromDom(n.getNode())).map((function(e){return wr(e)?Fb.remove(e.dom):Fb.moveToElement(r)})).orThunk((function(){return x.some(Fb.moveToElement(r))}))},Wb=function(e,t,n){return yc(t,e,n).bind((function(i){return r=i.getNode(),zi(bt.fromDom(r))||Ri(bt.fromDom(r))||function(e,t,n,i){var r=function(t){return Pi(bt.fromDom(t))&&!ju(n,i,e)};return Gu(!t,n).fold((function(){return Gu(t,i).fold(g,r)}),r)}(e,t,n,i)?x.none():t&&Ln(i.getNode())||!1===t&&Ln(i.getNode(!0))?Hb(e,t,n,i):t&&jh(n)||!1===t&&Wh(n)?x.some(Fb.moveToPosition(i)):x.none();var r}))},jb=function(e,t,n){return function(e,t){var n=t.getNode(!1===e),i=e?"after":"before";return yn(n)&&n.getAttribute("data-mce-caret")===i}(t,n)?function(e,t){return e&&Ln(t.nextSibling)?x.some(Fb.moveToElement(t.nextSibling)):!1===e&&Ln(t.previousSibling)?x.some(Fb.moveToElement(t.previousSibling)):x.none()}(t,n.getNode(!1===t)).fold((function(){return Wb(e,t,n)}),x.some):Wb(e,t,n).bind((function(t){return function(e,t,n){return n.fold((function(e){return x.some(Fb.remove(e))}),(function(e){return x.some(Fb.moveToElement(e))}),(function(n){return ju(t,n,e)?x.none():x.some(Fb.moveToPosition(n))}))}(e,n,t)}))},Ub=function(e,t){return x.from(Rd(e.getBody(),t))},Vb=function(e,t){var n=e.selection.getNode();return Ub(e,n).filter(Ln).fold((function(){return function(e,t,n){var i=Ku(t?1:-1,e,n),r=yl.fromRangeStart(i),o=bt.fromDom(e);return!1===t&&jh(r)?x.some(Fb.remove(r.getNode(!0))):t&&Wh(r)?x.some(Fb.remove(r.getNode())):!1===t&&Wh(r)&&ap(o,r)?sp(o,r).map((function(e){return Fb.remove(e.getNode())})):t&&jh(r)&&op(o,r)?lp(o,r).map((function(e){return Fb.remove(e.getNode())})):jb(e,t,r)}(e.getBody(),t,e.selection.getRng()).exists((function(n){return n.fold(function(e,t){return function(n){return e._selectionOverrides.hideFakeCaret(),Bp(e,t,bt.fromDom(n)),!0}}(e,t),function(e,t){return function(n){var i=t?yl.before(n):yl.after(n);return e.selection.setRng(i.toRange()),!0}}(e,t),function(e){return function(t){return e.selection.setRng(t.toRange()),!0}}(e))}))}),v)},$b=function(e,t){var n=e.selection.getNode();return!!Ln(n)&&Ub(e,n.parentNode).filter(Ln).fold((function(){var n;return n=bt.fromDom(e.getBody()),W(ks(n,".mce-offscreen-selection"),on),Bp(e,t,bt.fromDom(e.selection.getNode())),db(e),!0}),(function(){return!0}))},qb=function(e){var t=e.dom,n=e.selection,i=Rd(e.getBody(),n.getNode());if(Pn(i)&&t.isBlock(i)&&t.isEmpty(i)){var r=t.create("br",{"data-mce-bogus":"1"});t.setHTML(i,""),i.appendChild(r),n.setRng(yl.before(r).toRange())}return!0},Xb=function(e,t){return e.selection.isCollapsed()?Vb(e,t):$b(e,t)},Yb=function(e,t){return!!e.selection.isCollapsed()&&function(e,t){var n=yl.fromRangeStart(e.selection.getRng());return yc(t,e.getBody(),n).filter((function(e){return t?Ih(e):Rh(e)})).bind((function(e){return x.from(Uu(t?0:-1,e))})).exists((function(t){return e.selection.select(t),!0}))}(e,t)},Kb=Tn,Gb=function(e){return Kb(e)&&e.data[0]===Wi},Jb=function(e){return Kb(e)&&e.data[e.data.length-1]===Wi},Zb=function(e){return e.ownerDocument.createTextNode(Wi)},Qb=function(e,t){return e?function(e){if(Kb(e.previousSibling))return Jb(e.previousSibling)||e.previousSibling.appendData(Wi),e.previousSibling;if(Kb(e))return Gb(e)||e.insertData(0,Wi),e;var t=Zb(e);return e.parentNode.insertBefore(t,e),t}(t):function(e){if(Kb(e.nextSibling))return Gb(e.nextSibling)||e.nextSibling.insertData(0,Wi),e.nextSibling;if(Kb(e))return Jb(e)||e.appendData(Wi),e;var t=Zb(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}(t)},ew=h(Qb,!0),tw=h(Qb,!1),nw=function(e,t){return Tn(e.container())?Qb(t,e.container()):Qb(t,e.getNode())},iw=function(e,t){var n=t.get();return n&&e.container()===n&&Xi(n)},rw=function(e,t){return t.fold((function(t){wu(e.get());var n=ew(t);return e.set(n),x.some(yl(n,n.length-1))}),(function(t){return _c(t).map((function(t){if(iw(t,e))return yl(e.get(),1);wu(e.get());var n=nw(t,!0);return e.set(n),yl(n,1)}))}),(function(t){return Sc(t).map((function(t){if(iw(t,e))return yl(e.get(),e.get().length-1);wu(e.get());var n=nw(t,!1);return e.set(n),yl(n,n.length-1)}))}),(function(t){wu(e.get());var n=tw(t);return e.set(n),x.some(yl(n,1))}))},ow=function(e,t){for(var n=0;n<e.length;n++){var i=e[n].apply(null,t);if(i.isSome())return i}return x.none()},aw=ci([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),sw=function(e,t){var n=Wu(t,e);return n||e},lw=function(e,t,n){var i=lb(n),r=sw(t,i.container());return ab(e,r,i).fold((function(){return Cc(r,i).bind(h(ab,e,r)).map((function(e){return aw.before(e)}))}),x.none)},uw=function(e,t){return null===Mc(e,t)},cw=function(e,t,n){return ab(e,t,n).filter(h(uw,t))},dw=function(e,t,n){var i=ub(n);return cw(e,t,i).bind((function(e){return kc(e,i).isNone()?x.some(aw.start(e)):x.none()}))},fw=function(e,t,n){var i=lb(n);return cw(e,t,i).bind((function(e){return Cc(e,i).isNone()?x.some(aw.end(e)):x.none()}))},hw=function(e,t,n){var i=ub(n),r=sw(t,i.container());return ab(e,r,i).fold((function(){return kc(r,i).bind(h(ab,e,r)).map((function(e){return aw.after(e)}))}),x.none)},pw=function(e){return!1===ob(gw(e))},mw=function(e,t,n){return ow([lw,dw,fw,hw],[e,t,n]).filter(pw)},gw=function(e){return e.fold(f,f,f,f)},vw=function(e){return e.fold(d("before"),d("start"),d("end"),d("after"))},yw=function(e){return e.fold(aw.before,aw.before,aw.after,aw.after)},bw=function(e){return e.fold(aw.start,aw.start,aw.end,aw.end)},ww=function(e,t,n,i,r,o){return Fs(ab(t,n,i),ab(t,n,r),(function(t,i){return t!==i&&function(e,t,n){var i=Wu(t,e),r=Wu(n,e);return i&&i===r}(n,t,i)?aw.after(e?t:i):o})).getOr(o)},xw=function(e,t){return e.fold(v,(function(e){return i=t,!(vw(n=e)===vw(i)&&gw(n)===gw(i));var n,i}))},Cw=function(e,t){return e?t.fold(c(x.some,aw.start),x.none,c(x.some,aw.after),x.none):t.fold(x.none,c(x.some,aw.before),x.none,c(x.some,aw.end))},kw=function(e,t,n,i){var r=sb(e,i),o=mw(t,n,r);return mw(t,n,r).bind(h(Cw,e)).orThunk((function(){return function(e,t,n,i,r){var o=sb(e,r);return yc(e,n,o).map(h(sb,e)).fold((function(){return i.map(yw)}),(function(r){return mw(t,n,r).map(h(ww,e,t,n,o,r)).filter(h(xw,i))})).filter(pw)}(e,t,n,o,i)}))},_w=(h(kw,!1),h(kw,!0),function(e,t,n){var i=e?1:-1;return t.setRng(yl(n.container(),n.offset()+i).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0}),Sw=function(e,t){var n=t.selection.getRng(),i=e?yl.fromRangeEnd(n):yl.fromRangeStart(n);return!!function(e){return P(e.selection.getSel().modify)}(t)&&(e&&Gi(i)?_w(!0,t.selection,i):!(e||!Ji(i))&&_w(!1,t.selection,i))},Tw=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},Dw=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Mw=function(e,t,n){return rw(t,n).map((function(t){return Tw(e,t),n}))},Ew=function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=yl.fromRangeStart(e.selection.getRng());yl.isTextPosition(n)&&!1===function(e){return Gi(e)||Ji(e)}(n)&&(Tw(e,bu(t.get(),n)),t.set(null))}},Nw=function(e,t,n){return!!lu(e)&&function(e,t,n){var i=e.getBody(),r=yl.fromRangeStart(e.selection.getRng()),o=h(rb,e);return kw(n,o,i,r).bind((function(n){return Mw(e,t,n)}))}(e,t,n).isSome()},Aw=function(e,t,n){return!!lu(t)&&Sw(e,t)},Pw=function(e){var t=as(null),n=h(rb,e);return e.on("NodeChange",(function(i){!lu(e)||ht.browser.isIE()&&i.initial||(function(e,t,n){var i=H(ks(bt.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),(function(e){return e.dom})),r=U(i,e),o=U(n,e);W(J(r,o),h(Dw,!1)),W(J(o,r),h(Dw,!0))}(n,e.dom,i.parents),Ew(e,t),function(e,t,n,i){if(t.selection.isCollapsed()){var r=U(i,e);W(r,(function(i){var r=yl.fromRangeStart(t.selection.getRng());mw(e,t.getBody(),r).bind((function(e){return Mw(t,n,e)}))}))}}(n,e,t,i.parents))})),t},Lw=h(Aw,!0),Ow=h(Aw,!1),Iw=function(e,t){return function(n){return rw(t,n).exists((function(t){return Tw(e,t),!0}))}},Rw=function(e,t,n,i){var r=e.getBody(),o=h(rb,e);e.undoManager.ignore((function(){e.selection.setRng(function(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n}(n,i)),e.execCommand("Delete"),mw(o,r,yl.fromRangeStart(e.selection.getRng())).map(bw).map(Iw(e,t))})),e.nodeChanged()},Bw=function(e,t,n,i){var r=function(e,t){var n=Wu(t,e);return n||e}(e.getBody(),i.container()),o=h(rb,e),a=mw(o,r,i);return a.bind((function(e){return n?e.fold(d(x.some(bw(e))),x.none,d(x.some(yw(e))),x.none):e.fold(x.none,d(x.some(yw(e))),x.none,d(x.some(bw(e))))})).map(Iw(e,t)).getOrThunk((function(){var s=bc(n,r,i),l=s.bind((function(e){return mw(o,r,e)}));return Fs(a,l,(function(){return ab(o,r,i).exists((function(t){return!!function(e){return Fs(_c(e),Sc(e),(function(t,n){var i=sb(!0,t),r=sb(!1,n);return Cc(e,i).forall((function(e){return e.isEqual(r)}))})).getOr(!0)}(t)&&(Bp(e,n,bt.fromDom(t)),!0)}))})).orThunk((function(){return l.bind((function(r){return s.map((function(r){return n?Rw(e,t,i,r):Rw(e,t,r,i),!0}))}))})).getOr(!1)}))},zw=function(e,t,n){if(e.selection.isCollapsed()&&lu(e)){var i=yl.fromRangeStart(e.selection.getRng());return Bw(e,t,n,i)}return!1},Fw=function(e){return 1===Wt(e).length},Hw=function(e,t,n,i){var r=h(Gm,t),o=H(U(i,r),(function(e){return e.dom}));if(0===o.length)Bp(t,e,n);else{var a=function(e,t){var n=Um(!1),i=Xm(t,n.dom);return Zt(bt.fromDom(e),n),on(bt.fromDom(e)),yl(i,0)}(n.dom,o);t.selection.setRng(a.toRange())}},Ww=function(e,t){var n=bt.fromDom(e.getBody()),i=bt.fromDom(e.selection.getStart()),r=U(function(e,t){var n=Yh(t,e);return X(n,Ai).fold(d(n),(function(e){return n.slice(0,e)}))}(n,i),Fw);return Q(r).exists((function(n){var i,o=yl.fromRangeStart(e.selection.getRng());return!(!function(e,t,n){return Fs(_c(n),Sc(n),(function(i,r){var o=sb(!0,i),a=sb(!1,r),s=sb(!1,t);return e?Cc(n,s).exists((function(e){return e.isEqual(a)&&t.isEqual(o)})):kc(n,s).exists((function(e){return e.isEqual(o)&&t.isEqual(a)}))})).getOr(!0)}(t,o,n.dom)||(i=n,Dc(i.dom)&&Wm(i.dom)))&&(Hw(t,e,n,r),!0)}))},jw=function(e,t){return!!e.selection.isCollapsed()&&Ww(e,t)},Uw=function(e,t,n){return e._selectionOverrides.hideFakeCaret(),Bp(e,t,bt.fromDom(n)),!0},Vw=function(e,t){return e.selection.isCollapsed()?function(e,t){var n=t?Bh:zh,i=t?vl.Forwards:vl.Backwards,r=Ju(i,e.getBody(),e.selection.getRng());return n(r)?Uw(e,t,r.getNode(!t)):x.from(sb(t,r)).filter((function(e){return n(e)&&ec(r,e)})).exists((function(n){return Uw(e,t,n.getNode(!t))}))}(e,t):function(e,t){var n=e.selection.getNode();return!!In(n)&&Uw(e,t,n)}(e,t)},$w=function(e){var t=parseInt(e,10);return isNaN(t)?0:t},qw=function(e,t){return(e||"table"===Tt(t)?"margin":"padding")+("rtl"===Un(t,"direction")?"-right":"-left")},Xw=function(e){var t=Kw(e);return!e.mode.isReadOnly()&&(t.length>1||function(e,t){return K(t,(function(t){var n=qw(iu(e),t),i=$n(t,n).map($w).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&i>0}))}(e,t))},Yw=function(e){return Ii(e)||Ri(e)},Kw=function(e){return U(H(e.selection.getSelectedBlocks(),bt.fromDom),(function(e){return!Yw(e)&&!function(e){return Rt(e).map(Yw).getOr(!1)}(e)&&mi(e,(function(e){return Pn(e.dom)||Ln(e.dom)})).exists((function(e){return Pn(e.dom)}))}))},Gw=function(e,t){var n=e.dom,i=e.selection,r=e.formatter,o=function(e){return e.getParam("indentation","40px","string")}(e),a=/[a-z%]+$/i.exec(o)[0],s=parseInt(o,10),l=iu(e),u=$l(e);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||""!==u||n.getParent(i.getNode(),n.isBlock)||r.apply("div"),W(Kw(e),(function(e){!function(e,t,n,i,r,o){var a=qw(n,bt.fromDom(o));if("outdent"===t){var s=Math.max(0,$w(o.style[a])-i);e.setStyle(o,a,s?s+r:"")}else s=$w(o.style[a])+i+r,e.setStyle(o,a,s)}(n,t,l,s,a,e.dom)}))},Jw=function(e,t){if(e.selection.isCollapsed()&&Xw(e)){var n=e.dom,i=e.selection.getRng(),r=yl.fromRangeStart(i),o=n.getParent(i.startContainer,n.isBlock);if(null!==o&&Qh(bt.fromDom(o),r))return Gw(e,"outdent"),!0}return!1},Zw=function(e,t){e.getDoc().execCommand(t,!1,null)},Qw=function(e,t){e.addCommand("delete",(function(){!function(e,t){Jw(e)||Xb(e,!1)||zb(e,!1)||zw(e,t,!1)||_b(e,!1)||cm(e)||Yb(e,!1)||Vw(e,!1)||Mb(e)||jw(e,!1)||(Zw(e,"Delete"),db(e))}(e,t)})),e.addCommand("forwardDelete",(function(){!function(e,t){Xb(e,!0)||zb(e,!0)||zw(e,t,!0)||_b(e,!0)||cm(e)||Yb(e,!0)||Vw(e,!0)||Mb(e)||jw(e,!0)||Zw(e,"ForwardDelete")}(e,t)}))},ex=function(e){return void 0===e.touches||1!==e.touches.length?x.none():x.some(e.touches[0])},tx=function(e){var t=as(x.none()),n=as(!1),i=ps((function(t){e.fire("longpress",xe(xe({},t),{type:"longpress"})),n.set(!0)}),400);e.on("touchstart",(function(e){ex(e).each((function(r){i.cancel();var o={x:r.clientX,y:r.clientY,target:e.target};i.throttle(e),n.set(!1),t.set(x.some(o))}))}),!0),e.on("touchmove",(function(r){i.cancel(),ex(r).each((function(i){t.get().each((function(r){(function(e,t){var n=Math.abs(e.clientX-t.x),i=Math.abs(e.clientY-t.y);return n>5||i>5})(i,r)&&(t.set(x.none()),n.set(!1),e.fire("longpresscancel"))}))}))}),!0),e.on("touchend touchcancel",(function(r){i.cancel(),"touchcancel"!==r.type&&t.get().filter((function(e){return e.target.isEqualNode(r.target)})).each((function(){n.get()?r.preventDefault():e.fire("tap",xe(xe({},r),{type:"tap"}))}))}),!0)},nx=function(e,t){return e.hasOwnProperty(t.nodeName)},ix=function(e,t){return!!Tn(t)||!!yn(t)&&(!nx(e,t)&&!zc(t))},rx=function(e,t){if(Tn(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||nx(e,t.nextSibling)))return!0}return!1},ox=function(e){var t,n,i,r=e.dom,o=e.selection,a=e.schema,s=a.getBlockElements(),l=o.getStart(),u=e.getBody(),c=$l(e);if(l&&yn(l)&&c){var d=u.nodeName.toLowerCase();if(a.isValidChild(d,c.toLowerCase())&&!function(e,t,n){return F(Xh(bt.fromDom(n),bt.fromDom(t)),(function(t){return nx(e,t.dom)}))}(s,u,l)){var f=o.getRng(),h=f.startContainer,p=f.startOffset,m=f.endContainer,g=f.endOffset,v=th(e);for(l=u.firstChild;l;)if(ix(s,l)){if(rx(s,l)){n=l,l=l.nextSibling,r.remove(n);continue}t||(t=r.create(c,ql(e)),l.parentNode.insertBefore(t,l),i=!0),n=l,l=l.nextSibling,t.appendChild(n)}else t=null,l=l.nextSibling;i&&v&&(f.setStart(h,p),f.setEnd(m,g),o.setRng(f),e.nodeChanged())}}},ax=function(e,t){t.hasAttribute("data-mce-caret")&&(tr(t),function(e){e.selection.setRng(e.selection.getRng())}(e),e.selection.scrollIntoView(t))},sx=function(e,t){var n=function(e){return vi(bt.fromDom(e.getBody()),"*[data-mce-caret]").fold(d(null),(function(e){return e.dom}))}(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void ax(e,n)):void(Ki(n)&&(ax(e,n),e.undoManager.add()))};!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(Vy||(Vy={}));var lx,ux=function(e,t){return e===vl.Backwards?G(t):t},cx=function(e,t,n){return e===vl.Forwards?t.next(n):t.prev(n)},dx=function(e,t,n,i){return Nn(i.getNode(t===vl.Forwards))?Vy.Br:!1===ju(n,i)?Vy.Block:Vy.Wrap},fx=function(e,t,n,i){for(var r,o=hc(n),a=i,s=[];a&&(r=cx(t,o,a));){if(Nn(r.getNode(!1)))return t===vl.Forwards?{positions:ux(t,s).concat([r]),breakType:Vy.Br,breakAt:x.some(r)}:{positions:ux(t,s),breakType:Vy.Br,breakAt:x.some(r)};if(r.isVisible()){if(e(a,r)){var l=dx(0,t,a,r);return{positions:ux(t,s),breakType:l,breakAt:x.some(r)}}s.push(r),a=r}else a=r}return{positions:ux(t,s),breakType:Vy.Eol,breakAt:x.none()}},hx=function(e,t,n,i){return t(n,i).breakAt.map((function(i){var r=t(n,i).positions;return e===vl.Backwards?r.concat(i):[i].concat(r)})).getOr([])},px=function(e,t){return $(e,(function(e,n){return e.fold((function(){return x.some(n)}),(function(i){return Fs(Z(i.getClientRects()),Z(n.getClientRects()),(function(e,r){var o=Math.abs(t-e.left);return Math.abs(t-r.left)<=o?n:i})).or(e)}))}),x.none())},mx=function(e,t){return Z(t.getClientRects()).bind((function(t){return px(e,t.left)}))},gx=h(fx,gl.isAbove,-1),vx=h(fx,gl.isBelow,1),yx=h(hx,-1,gx),bx=h(hx,1,vx),wx=function(e){var t=function(t){return H(t,(function(t){return(t=Ws(t)).node=e,t}))};if(yn(e))return t(e.getClientRects());if(Tn(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}},xx=function(e){return Y(e,wx)};!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(lx||(lx={}));var Cx,kx,_x=function(e,t,n,i,r,o){var a=0,s=[],l=function(i){var o,l,c;for(c=xx([i]),-1===e&&(c=c.reverse()),o=0;o<c.length;o++)if(l=c[o],!n(l,u)){if(s.length>0&&t(l,we(s))&&a++,l.line=a,r(l))return!0;s.push(l)}},u=we(o.getClientRects());if(!u)return s;var c=o.getNode();return l(c),function(e,t,n,i){for(;i=Hu(i,e,fr,t);)if(n(i))return}(e,i,l,c),s},Sx=h(_x,lx.Up,Vs,$s),Tx=h(_x,lx.Down,$s,Vs),Dx=function(e){return function(t){return function(e,t){return t.line>e}(e,t)}},Mx=function(e){return function(t){return function(e,t){return t.line===e}(e,t)}},Ex=Ln,Nx=Hu,Ax=function(e,t){return Math.abs(e.left-t)},Px=function(e,t){return Math.abs(e.right-t)},Lx=function(e,t){return e>=t.left&&e<=t.right},Ox=function(e,t){return e>=t.top&&e<=t.bottom},Ix=function(e,t){return ye(e,(function(e,n){var i=Math.min(Ax(e,t),Px(e,t)),r=Math.min(Ax(n,t),Px(n,t));return Lx(t,n)?n:Lx(t,e)?e:r===i&&Ex(n.node)||r<i?n:e}))},Rx=function(e,t,n,i,r){var o=Nx(i,e,fr,t,!r);do{if(!o||n(o))return}while(o=Nx(o,e,fr,t))},Bx=function(e,t,n){var i=xx(function(e){return U(ee(e.getElementsByTagName("*")),Eu)}(e)),r=U(i,h(Ox,n)),o=Ix(r,t);if(o){var a=!kn(o.node)&&!In(o.node);if(o=Ix(function(e,t,n){void 0===n&&(n=!0);var i=[],r=function(e,n){var r=U(xx([n]),(function(n){return!e(n,t)}));return i=i.concat(r),0===r.length};return i.push(t),Rx(lx.Up,e,h(r,Vs),t.node,n),Rx(lx.Down,e,h(r,$s),t.node,n),i}(e,o,a),t),o&&Eu(o.node))return function(e,t){return{node:e.node,before:Ax(e,t)<Px(e,t)}}(o,t)}return null},zx=function(e,t){e.selection.setRng(t),Sf(e,e.selection.getRng())},Fx=function(e,t,n){return x.some(Ob(e,t,n))},Hx=function(e,t,n,i,r,o){var a=t===vl.Forwards,s=hc(e.getBody()),l=h(Qu,a?s.next:s.prev),u=a?i:r;if(!n.collapsed){var c=Xs(n);if(o(c))return Ab(t,e,c,t===vl.Backwards,!1)}var d=Ju(t,e.getBody(),n);if(u(d))return Pb(e,d.getNode(!a));var f=sb(a,l(d)),p=function(e){return qi(e.startContainer)}(n);if(!f)return p?x.some(n):x.none();if(u(f))return Ab(t,e,f.getNode(!a),a,!1);var m=l(f);return m&&u(m)&&ec(f,m)?Ab(t,e,m.getNode(!a),a,!1):p?Fx(e,f.toRange(),!1):x.none()},Wx=function(e,t,n,i,r,o){var a=Ju(t,e.getBody(),n),s=we(a.getClientRects()),l=t===lx.Down;if(!s)return x.none();var u,c=(l?Tx:Sx)(e.getBody(),Dx(1),a),d=U(c,Mx(1)),f=s.left,h=Ix(d,f);if(h&&o(h.node)){var p=Math.abs(f-h.left),m=Math.abs(f-h.right);return Ab(t,e,h.node,p<m,!1)}if(u=i(a)?a.getNode():r(a)?a.getNode(!0):Xs(n)){var g=function(e,t,n,i){var r,o,a,s,l,u=hc(t),c=[],d=0,f=function(e){return we(e.getClientRects())};1===e?(r=u.next,o=$s,a=Vs,s=yl.after(i)):(r=u.prev,o=Vs,a=$s,s=yl.before(i));var h=f(s);do{if(s.isVisible()&&!a(l=f(s),h)){if(c.length>0&&o(l,we(c))&&d++,(l=Ws(l)).position=s,l.line=d,n(l))return c;c.push(l)}}while(s=r(s));return c}(t,e.getBody(),Dx(1),u),v=Ix(U(g,Mx(1)),f);if(v)return Fx(e,v.position.toRange(),!1);if(v=we(U(g,Mx(0))))return Fx(e,v.position.toRange(),!1)}return 0===d.length?jx(e,l).filter(l?r:i).map((function(t){return Ob(e,t.toRange(),!1)})):x.none()},jx=function(e,t){var n=e.selection.getRng(),i=e.getBody();if(t){var r=yl.fromRangeEnd(n),o=vx(i,r);return Q(o.positions)}r=yl.fromRangeStart(n),o=gx(i,r);return Z(o.positions)},Ux=function(e,t,n){return jx(e,t).filter(n).exists((function(t){return e.selection.setRng(t.toRange()),!0}))},Vx=Ln,$x=function(e,t,n){var i=hc(e.getBody()),r=h(Qu,1===t?i.next:i.prev);if(n.collapsed&&function(e){return""!==$l(e)}(e)){var o=e.dom.getParent(n.startContainer,"PRE");if(!o)return;if(!r(yl.fromRangeStart(n))){var a=function(e){var t=e.dom.create($l(e));return(!ht.ie||ht.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t}(e);1===t?e.$(o).after(a):e.$(o).before(a),e.selection.select(a,!0),e.selection.collapse()}}},qx=function(e,t){var n=t?vl.Forwards:vl.Backwards,i=e.selection.getRng();return function(e,t,n){return Hx(t,e,n,Wh,jh,Vx)}(n,e,i).orThunk((function(){return $x(e,n,i),x.none()}))},Xx=function(e,t){var n=t?1:-1,i=e.selection.getRng();return function(e,t,n){return Wx(t,e,n,(function(e){return Wh(e)||Fh(e)}),(function(e){return jh(e)||Hh(e)}),Vx)}(n,e,i).orThunk((function(){return $x(e,n,i),x.none()}))},Yx=function(e,t){return qx(e,t).exists((function(t){return zx(e,t),!0}))},Kx=function(e,t){return Xx(e,t).exists((function(t){return zx(e,t),!0}))},Gx=function(e,t){return Ux(e,t,t?jh:Wh)},Jx=function(e){return z(["figcaption"],Tt(e))},Zx=function(e){var t=document.createRange();return t.setStartBefore(e.dom),t.setEndBefore(e.dom),t},Qx=function(e,t,n){n?tn(e,t):en(e,t)},eC=function(e,t,n,i){return""===t?function(e,t){var n=bt.fromTag("br");return Qx(e,n,t),Zx(n)}(e,i):function(e,t,n,i){var r=bt.fromTag(n),o=bt.fromTag("br");return Fn(r,i),tn(r,o),Qx(e,r,t),Zx(o)}(e,i,t,n)},tC=function(e,t,n){return t?function(e,t){return vx(e,t).breakAt.isNone()}(e.dom,n):function(e,t){return gx(e,t).breakAt.isNone()}(e.dom,n)},nC=function(e,t){var n=bt.fromDom(e.getBody()),i=yl.fromRangeStart(e.selection.getRng()),r=$l(e),o=ql(e);return function(e,t){var n=h(kt,t);return mi(bt.fromDom(e.container()),Ai,n).filter(Jx)}(i,n).exists((function(){if(tC(n,t,i)){var a=eC(n,r,o,t);return e.selection.setRng(a),!0}return!1}))},iC=function(e,t){return!!e.selection.isCollapsed()&&nC(e,t)},rC=function(e,t){return Y(function(e){return H(e,(function(e){return xe({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:u},e)}))}(e),(function(e){return function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey}(e,t)?[e]:[]}))},oC=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){return e.apply(null,t)}},aC=function(e,t){return q(rC(e,t),(function(e){return e.action()}))},sC=function(e,t){var n=t?vl.Forwards:vl.Backwards,i=e.selection.getRng();return Hx(e,n,i,Bh,zh,In).exists((function(t){return zx(e,t),!0}))},lC=function(e,t){var n=t?1:-1,i=e.selection.getRng();return Wx(e,n,i,Bh,zh,In).exists((function(t){return zx(e,t),!0}))},uC=function(e,t){return Ux(e,t,t?zh:Bh)},cC=function(e,t,n,i,r){var o=ks(bt.fromDom(n),"td,th,caption").map((function(e){return e.dom})),a=U(function(e,t){return Y(t,(function(t){var n=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}}(Ws(t.getBoundingClientRect()),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]}))}(e,o),(function(e){return t(e,r)}));return function(e,t,n){return $(e,(function(e,i){return e.fold((function(){return x.some(i)}),(function(e){var r=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),o=Math.sqrt(Math.abs(i.x-t)+Math.abs(i.y-n));return x.some(o<r?i:e)}))}),x.none())}(a,i,r).map((function(e){return e.cell}))},dC=h(cC,(function(e){return e.bottom}),(function(e,t){return e.y<t})),fC=h(cC,(function(e){return e.top}),(function(e,t){return e.y>t})),hC=function(e,t){return Z(t.getClientRects()).bind((function(t){return dC(e,t.left,t.top)})).bind((function(e){return mx(Sc(n=e).map((function(e){return gx(n,e).positions.concat(e)})).getOr([]),t);var n}))},pC=function(e,t){return Q(t.getClientRects()).bind((function(t){return fC(e,t.left,t.top)})).bind((function(e){return mx(_c(n=e).map((function(e){return[e].concat(vx(n,e).positions)})).getOr([]),t);var n}))},mC=function(e,t,n){var i=e(t,n);return function(e){return e.breakType===Vy.Wrap&&0===e.positions.length}(i)||!Nn(n.getNode())&&function(e){return e.breakType===Vy.Br&&1===e.positions.length}(i)?!function(e,t,n){return n.breakAt.exists((function(n){return e(t,n).breakAt.isSome()}))}(e,t,i):i.breakAt.isNone()},gC=h(mC,gx),vC=h(mC,vx),yC=function(e,t,n,i){var r=e.selection.getRng(),o=t?1:-1;return!(!Du()||!function(e,t,n){var i=yl.fromRangeStart(t);return xc(!e,n).exists((function(e){return e.isEqual(i)}))}(t,r,n))&&(Ab(o,e,n,!t,!1).each((function(t){zx(e,t)})),!0)},bC=function(e,t){var n=t.getNode(e);return yn(n)&&"TABLE"===n.nodeName?x.some(n):x.none()},wC=function(e,t,n){var i=bC(!!t,n),r=!1===t;i.fold((function(){return zx(e,n.toRange())}),(function(i){return xc(r,e.getBody()).filter((function(e){return e.isEqual(n)})).fold((function(){return zx(e,n.toRange())}),(function(r){return function(e,t,n,i){var r=$l(t);r?t.undoManager.transact((function(){var i=bt.fromTag(r);Fn(i,ql(t)),tn(i,bt.fromTag("br")),e?Qt(bt.fromDom(n),i):Zt(bt.fromDom(n),i);var o=t.dom.createRng();o.setStart(i.dom,0),o.setEnd(i.dom,0),zx(t,o)})):zx(t,i.toRange())}(t,e,i,n)}))}))},xC=function(e,t,n,i){var r=e.selection.getRng(),o=yl.fromRangeStart(r),a=e.getBody();if(!t&&gC(i,o)){var s=function(e,t,n){return hC(t,n).orThunk((function(){return Z(n.getClientRects()).bind((function(n){return px(yx(e,yl.before(t)),n.left)}))})).getOr(yl.before(t))}(a,n,o);return wC(e,t,s),!0}if(t&&vC(i,o)){s=function(e,t,n){return pC(t,n).orThunk((function(){return Z(n.getClientRects()).bind((function(n){return px(bx(e,yl.after(t)),n.left)}))})).getOr(yl.after(t))}(a,n,o);return wC(e,t,s),!0}return!1},CC=function(e,t,n){return x.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((function(i){return x.from(e.dom.getParent(i,"table")).map((function(r){return n(e,t,r,i)}))})).getOr(!1)},kC=function(e,t){return CC(e,t,yC)},_C=function(e,t){return CC(e,t,xC)},SC=function(e,t){e.on("keydown",(function(n){!1===n.isDefaultPrevented()&&function(e,t,n){var i=rt().os;aC([{keyCode:zd.RIGHT,action:oC(Yx,e,!0)},{keyCode:zd.LEFT,action:oC(Yx,e,!1)},{keyCode:zd.UP,action:oC(Kx,e,!1)},{keyCode:zd.DOWN,action:oC(Kx,e,!0)},{keyCode:zd.RIGHT,action:oC(kC,e,!0)},{keyCode:zd.LEFT,action:oC(kC,e,!1)},{keyCode:zd.UP,action:oC(_C,e,!1)},{keyCode:zd.DOWN,action:oC(_C,e,!0)},{keyCode:zd.RIGHT,action:oC(sC,e,!0)},{keyCode:zd.LEFT,action:oC(sC,e,!1)},{keyCode:zd.UP,action:oC(lC,e,!1)},{keyCode:zd.DOWN,action:oC(lC,e,!0)},{keyCode:zd.RIGHT,action:oC(Nw,e,t,!0)},{keyCode:zd.LEFT,action:oC(Nw,e,t,!1)},{keyCode:zd.RIGHT,ctrlKey:!i.isOSX(),altKey:i.isOSX(),action:oC(Lw,e,t)},{keyCode:zd.LEFT,ctrlKey:!i.isOSX(),altKey:i.isOSX(),action:oC(Ow,e,t)},{keyCode:zd.UP,action:oC(iC,e,!1)},{keyCode:zd.DOWN,action:oC(iC,e,!0)}],n).each((function(e){n.preventDefault()}))}(e,t,n)}))},TC=function(e,t){e.on("keydown",(function(n){!1===n.isDefaultPrevented()&&function(e,t,n){aC([{keyCode:zd.BACKSPACE,action:oC(Jw,e,!1)},{keyCode:zd.BACKSPACE,action:oC(Xb,e,!1)},{keyCode:zd.DELETE,action:oC(Xb,e,!0)},{keyCode:zd.BACKSPACE,action:oC(zb,e,!1)},{keyCode:zd.DELETE,action:oC(zb,e,!0)},{keyCode:zd.BACKSPACE,action:oC(zw,e,t,!1)},{keyCode:zd.DELETE,action:oC(zw,e,t,!0)},{keyCode:zd.BACKSPACE,action:oC(cm,e,!1)},{keyCode:zd.DELETE,action:oC(cm,e,!0)},{keyCode:zd.BACKSPACE,action:oC(Yb,e,!1)},{keyCode:zd.DELETE,action:oC(Yb,e,!0)},{keyCode:zd.BACKSPACE,action:oC(Vw,e,!1)},{keyCode:zd.DELETE,action:oC(Vw,e,!0)},{keyCode:zd.BACKSPACE,action:oC(Mb,e,!1)},{keyCode:zd.DELETE,action:oC(Mb,e,!0)},{keyCode:zd.BACKSPACE,action:oC(_b,e,!1)},{keyCode:zd.DELETE,action:oC(_b,e,!0)},{keyCode:zd.BACKSPACE,action:oC(jw,e,!1)},{keyCode:zd.DELETE,action:oC(jw,e,!0)}],n).each((function(e){n.preventDefault()}))}(e,t,n)})),e.on("keyup",(function(t){!1===t.isDefaultPrevented()&&function(e,t){aC([{keyCode:zd.BACKSPACE,action:oC(qb,e)},{keyCode:zd.DELETE,action:oC(qb,e)}],t)}(e,t)}))},DC=function(e,t){var n,i=t,r=e.dom,o=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var a=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild);a&&/^(UL|OL|DL)$/.test(a.nodeName)&&t.insertBefore(r.doc.createTextNode(Hi),t.firstChild)}var s=r.createRng();if(t.normalize(),t.hasChildNodes()){for(var l=new Mi(t,t);n=l.current();){if(Tn(n)){s.setStart(n,0),s.setEnd(n,0);break}if(o[n.nodeName.toLowerCase()]){s.setStartBefore(n),s.setEndBefore(n);break}i=n,n=l.next()}n||(s.setStart(i,0),s.setEnd(i,0))}else Nn(t)?t.nextSibling&&r.isBlock(t.nextSibling)?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)):(s.setStart(t,0),s.setEnd(t,0));e.selection.setRng(s),Sf(e,s)}},MC=function(e){return x.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},EC=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},NC=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},AC=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},PC=function(e,t,n){for(var i=e[n?"firstChild":"lastChild"];i&&!yn(i);)i=i[n?"nextSibling":"previousSibling"];return i===t},LC=function(e,t,n,i,r){var o=e.dom,a=e.selection.getRng();if(n!==e.getBody()){var s;NC(s=n)&&NC(s.parentNode)&&(r="LI");var l=r?t(r):o.create("BR");if(PC(n,i,!0)&&PC(n,i,!1))EC(n,"LI")?o.insertAfter(l,AC(n)):o.replace(l,n);else if(PC(n,i,!0))EC(n,"LI")?(o.insertAfter(l,AC(n)),l.appendChild(o.doc.createTextNode(" ")),l.appendChild(n)):n.parentNode.insertBefore(l,n);else if(PC(n,i,!1))o.insertAfter(l,AC(n));else{n=AC(n);var u=a.cloneRange();u.setStartAfter(i),u.setEndAfter(n);var c=u.extractContents();"LI"===r&&function(e,t){return e.firstChild&&e.firstChild.nodeName===t}(c,"LI")?(l=c.firstChild,o.insertAfter(c,n)):(o.insertAfter(c,n),o.insertAfter(l,n))}o.remove(i),DC(e,l)}},OC=function(e){W(Cs(bt.fromDom(e),Nt),(function(e){var t=e.dom;t.nodeValue=Ui(t.nodeValue)}))},IC=function(e,t){return t&&"A"===t.nodeName&&e.isEmpty(t)},RC=function(e){e.innerHTML='<br data-mce-bogus="1">'},BC=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},zC=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},FC=function(e,t,n){return!1===Tn(t)?n:e?1===n&&t.data.charAt(n-1)===Wi?0:n:n===t.data.length-1&&t.data.charAt(n)===Wi?t.data.length:n},HC=function(e,t){var n,i,r=e.getRoot();for(n=t;n!==r&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(i=n),n=n.parentNode;return n!==r?i:r},WC=function(e,t){var n=$l(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&function(e,t,n){var i=e.dom;x.from(n.style).map(i.parseStyle).each((function(e){var n=qn(bt.fromDom(t)),r=xe(xe({},n),e);i.setStyles(t,r)}));var r=x.from(n.class).map((function(e){return e.split(/\s+/)})),o=x.from(t.className).map((function(e){return U(e.split(/\s+/),(function(e){return""!==e}))}));Fs(r,o,(function(e,n){var r=U(n,(function(t){return!z(e,t)})),o=Ce(e,r);i.setAttrib(t,"class",o.join(" "))}));var a=["style","class"],s=ue(n,(function(e,t){return!z(a,t)}));i.setAttribs(t,s)}(e,t,ql(e))},jC=function(e,t){var n,i,r,o,a,s,l,u,c,d,f=e.dom,h=e.schema,p=h.getNonEmptyElements(),m=e.selection.getRng(),g=function(t){var n,r,a,s=i,l=h.getTextInlineElements();if(a=n=t||"TABLE"===u||"HR"===u?f.create(t||c):o.cloneNode(!1),!1===function(e){return e.getParam("keep_styles",!0)}(e))f.setAttrib(n,"style",null),f.setAttrib(n,"class",null);else do{if(l[s.nodeName]){if(Dc(s)||zc(s))continue;r=s.cloneNode(!1),f.setAttrib(r,"id",""),n.hasChildNodes()?(r.appendChild(n.firstChild),n.appendChild(r)):(a=r,n.appendChild(r))}}while((s=s.parentNode)&&s!==x);return WC(e,n),RC(a),n},v=function(e){var t,n,a=FC(e,i,r);if(Tn(i)&&(e?a>0:a<i.nodeValue.length))return!1;if(i.parentNode===o&&d&&!e)return!0;if(e&&yn(i)&&i===o.firstChild)return!0;if(BC(i,"TABLE")||BC(i,"HR"))return d&&!e||!d&&e;var s=new Mi(i,o);for(Tn(i)&&(e&&0===a?s.prev():e||a!==i.nodeValue.length||s.next());t=s.current();){if(yn(t)){if(!t.getAttribute("data-mce-bogus")&&(n=t.nodeName.toLowerCase(),p[n]&&"br"!==n))return!1}else if(Tn(t)&&!pr(t.nodeValue))return!1;e?s.prev():s.next()}return!0},y=function(){a=/^(H[1-6]|PRE|FIGURE)$/.test(u)&&"HGROUP"!==C?g(c):g(),function(e){return e.getParam("end_container_on_empty_block",!1)}(e)&&zC(f,l)&&f.isEmpty(o)?a=f.split(l,o):f.insertAfter(a,o),DC(e,a)};Zd(f,m).each((function(e){m.setStart(e.startContainer,e.startOffset),m.setEnd(e.endContainer,e.endOffset)})),i=m.startContainer,r=m.startOffset,c=$l(e);var b=!(!t||!t.shiftKey),w=!(!t||!t.ctrlKey);yn(i)&&i.hasChildNodes()&&(d=r>i.childNodes.length-1,i=i.childNodes[Math.min(r,i.childNodes.length-1)]||i,r=d&&Tn(i)?i.nodeValue.length:0);var x=HC(f,i);if(x){(c&&!b||!c&&b)&&(i=function(e,t,n,i,r){var o,a,s,l,u,c,d=t||"P",f=e.dom,h=HC(f,i);if(!(a=f.getParent(i,f.isBlock))||!zC(f,a)){if(c=(a=a||h)===e.getBody()||function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}(a)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return o=f.create(d),WC(e,o),a.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o;for(l=i;l.parentNode!==a;)l=l.parentNode;for(;l&&!f.isBlock(l);)s=l,l=l.previousSibling;if(s&&e.schema.isValidChild(c,d.toLowerCase())){for(o=f.create(d),WC(e,o),s.parentNode.insertBefore(o,s),l=s;l&&!f.isBlock(l);)u=l.nextSibling,o.appendChild(l),l=u;n.setStart(i,r),n.setEnd(i,r)}}return i}(e,c,m,i,r)),o=f.getParent(i,f.isBlock),l=o?f.getParent(o.parentNode,f.isBlock):null,u=o?o.nodeName.toUpperCase():"";var C=l?l.nodeName.toUpperCase():"";"LI"!==C||w||(o=l,l=l.parentNode,u=C),/^(LI|DT|DD)$/.test(u)&&f.isEmpty(o)?LC(e,g,l,o,c):c&&o===e.getBody()||(c=c||"P",qi(o)?(a=tr(o),f.isEmpty(o)&&RC(o),WC(e,a),DC(e,a)):v()?y():v(!0)?(a=o.parentNode.insertBefore(g(),o),DC(e,BC(o,"HR")?a:o)):(n=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,FC(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,FC(!1,e.endContainer,e.endOffset)),t}(m).cloneRange(),n.setEndAfter(o),s=n.extractContents(),OC(s),function(e){do{Tn(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)}(s),a=s.firstChild,f.insertAfter(s,o),function(e,t,n){var i,r=n,o=[];if(r){for(;r=r.firstChild;){if(e.isBlock(r))return;yn(r)&&!t[r.nodeName.toLowerCase()]&&o.push(r)}for(i=o.length;i--;)(!(r=o[i]).hasChildNodes()||r.firstChild===r.lastChild&&""===r.firstChild.nodeValue||IC(e,r))&&e.remove(r)}}(f,p,a),function(e,t){t.normalize();var n=t.lastChild;n&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")}(f,o),f.isEmpty(o)&&RC(o),a.normalize(),f.isEmpty(a)?(f.remove(a),y()):(WC(e,a),DC(e,a))),f.setAttrib(a,"id",""),e.fire("NewBlock",{newBlock:a}))}},UC=function(e,t,n){var i=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(i,n),t.scrollIntoView(i),e.remove(i)},VC=function(e,t,n,i){var r=e.createRng();i?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),t.setRng(r)},$C=function(e,t){var n,i,r=e.selection,o=e.dom,a=r.getRng();Zd(o,a).each((function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)}));var s=a.startOffset,l=a.startContainer;if(1===l.nodeType&&l.hasChildNodes()){var u=s>l.childNodes.length-1;l=l.childNodes[Math.min(s,l.childNodes.length-1)]||l,s=u&&3===l.nodeType?l.nodeValue.length:0}var c=o.getParent(l,o.isBlock),d=c?o.getParent(c.parentNode,o.isBlock):null,f=d?d.nodeName.toUpperCase():"",h=!(!t||!t.ctrlKey);"LI"!==f||h||(c=d),l&&3===l.nodeType&&s>=l.nodeValue.length&&(function(e,t,n){for(var i,r=new Mi(t,n),o=e.getNonEmptyElements();i=r.next();)if(o[i.nodeName.toLowerCase()]||i.length>0)return!0}(e.schema,l,c)||(n=o.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),i=!0)),n=o.create("br"),wl(o,a,n),UC(o,r,n),VC(o,r,n,i),e.undoManager.add()},qC=function(e,t){var n=bt.fromTag("br");Zt(bt.fromDom(t),n),e.undoManager.add()},XC=function(e,t){YC(e.getBody(),t)||Qt(bt.fromDom(t),bt.fromTag("br"));var n=bt.fromTag("br");Qt(bt.fromDom(t),n),UC(e.dom,e.selection,n.dom),VC(e.dom,e.selection,n.dom,!1),e.undoManager.add()},YC=function(e,t){return n=yl.after(t),!!Nn(n.getNode())||Cc(e,yl.after(t)).map((function(e){return Nn(e.getNode())})).getOr(!1);var n},KC=function(e){return e&&"A"===e.nodeName&&"href"in e},GC=function(e){return e.fold(g,KC,KC,g)},JC=function(e,t){t.fold(u,h(qC,e),h(XC,e),u)},ZC=function(e,t){var n=function(e){var t=h(rb,e),n=yl.fromRangeStart(e.selection.getRng());return mw(t,e.getBody(),n).filter(GC)}(e);n.isSome()?n.each(h(JC,e)):$C(e,t)},QC=function(e,t){return MC(e).filter((function(e){return t.length>0&&xt(bt.fromDom(e),t)})).isSome()},ek=ci([{br:[]},{block:[]},{none:[]}]),tk=function(e,t){return function(e){return QC(e,function(e){return e.getParam("no_newline_selector","")}(e))}(e)},nk=function(e){return function(t,n){return""===$l(t)===e}},ik=function(e){return function(t,n){return function(e){return MC(e).filter((function(e){return Ri(bt.fromDom(e))})).isSome()}(t)===e}},rk=function(e,t){return function(n,i){var r=function(e){return MC(e).fold(d(""),(function(e){return e.nodeName.toUpperCase()}))}(n)===e.toUpperCase();return r===t}},ok=function(e){return rk("pre",e)},ak=function(e){return function(t,n){return function(e){return e.getParam("br_in_pre",!0)}(t)===e}},sk=function(e,t){return function(e){return QC(e,function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")}(e))}(e)},lk=function(e,t){return t},uk=function(e){var t=$l(e),n=function(e,t){var n,i,r=e.getRoot();for(n=t;n!==r&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(i=n),n=n.parentNode;return n!==r?i:r}(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},ck=function(e,t){return function(n,i){return $(e,(function(e,t){return e&&t(n,i)}),!0)?x.some(t):x.none()}},dk=function(e,t){(function(e,t){return ow([ck([tk],ek.none()),ck([rk("summary",!0)],ek.br()),ck([ok(!0),ak(!1),lk],ek.br()),ck([ok(!0),ak(!1)],ek.block()),ck([ok(!0),ak(!0),lk],ek.block()),ck([ok(!0),ak(!0)],ek.br()),ck([ik(!0),lk],ek.br()),ck([ik(!0)],ek.block()),ck([nk(!0),lk,uk],ek.block()),ck([nk(!0)],ek.br()),ck([sk],ek.br()),ck([nk(!1),lk],ek.br()),ck([uk],ek.block())],[e,!(!t||!t.shiftKey)]).getOr(ek.none())})(e,t).fold((function(){ZC(e,t)}),(function(){jC(e,t)}),u)},fk=function(e){e.on("keydown",(function(t){t.keyCode===zd.ENTER&&function(e,t){var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact((function(){!1===e.selection.isCollapsed()&&e.execCommand("Delete"),dk(e,t)})))}(e,t)}))},hk=function(e){e.on("keydown",(function(t){!1===t.isDefaultPrevented()&&function(e,t){aC([{keyCode:zd.END,action:oC(Gx,e,!0)},{keyCode:zd.HOME,action:oC(Gx,e,!1)},{keyCode:zd.END,action:oC(uC,e,!0)},{keyCode:zd.HOME,action:oC(uC,e,!1)}],t).each((function(e){t.preventDefault()}))}(e,t)}))},pk=rt().browser,mk=function(e){!function(e){var t=hs((function(){e.composing||Cp(e)}),0);pk.isIE()&&(e.on("keypress",(function(e){t.throttle()})),e.on("remove",(function(e){t.cancel()})))}(e),e.on("input",(function(t){!1===t.isComposing&&Cp(e)}))},gk=function(e,t){var n=t.container(),i=t.offset();return Tn(n)?(n.insertData(i,e),x.some(gl(n,i+e.length))):Zu(t).map((function(n){var i=bt.fromText(e);return t.isAtEnd()?Qt(n,i):Zt(n,i),gl(i.dom,e.length)}))},vk=h(gk,Hi),yk=h(gk," "),bk=function(e,t){return function(n){return function(e,t){return!hp(t)&&(pp(e,t)||dp(e,t)||fp(e,t))}(e,n)?vk(t):yk(t)}},wk=function(e){var t=yl.fromRangeStart(e.selection.getRng()),n=bt.fromDom(e.getBody());if(e.selection.isCollapsed()){var i=h(rb,e),r=yl.fromRangeStart(e.selection.getRng());return mw(i,e.getBody(),r).bind(function(e){return function(t){return t.fold((function(t){return kc(e.dom,yl.before(t))}),(function(e){return _c(e)}),(function(e){return Sc(e)}),(function(t){return Cc(e.dom,yl.after(t))}))}}(n)).bind(bk(n,t)).exists(function(e){return function(t){return e.selection.setRng(t.toRange()),e.nodeChanged(),!0}}(e))}return!1},xk=function(e){e.on("keydown",(function(t){!1===t.isDefaultPrevented()&&function(e,t){aC([{keyCode:zd.SPACEBAR,action:oC(wk,e)}],t).each((function(e){t.preventDefault()}))}(e,t)}))},Ck=function(e){var t=Pw(e);return function(e){e.on("keyup compositionstart",h(sx,e))}(e),SC(e,t),TC(e,t),fk(e),xk(e),mk(e),hk(e),t},kk=function(){function e(e){var t;this.lastPath=[],this.editor=e;var n=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",(function(n){var i=e.selection.getRng(),r={startContainer:i.startContainer,startOffset:i.startOffset,endContainer:i.endContainer,endOffset:i.endOffset};"nodechange"!==n.type&&Ud(r,t)||e.fire("SelectionChange"),t=r})),e.on("contextmenu",(function(){e.fire("SelectionChange")})),e.on("SelectionChange",(function(){var t=e.selection.getStart(!0);!t||!ht.range&&e.selection.isCollapsed()||_d(e)&&!n.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})})),e.on("mouseup",(function(t){!t.isDefaultPrevented()&&_d(e)&&("IMG"===e.selection.getNode().nodeName?ki.setEditorTimeout(e,(function(){e.nodeChanged()})):e.nodeChanged())}))}return e.prototype.nodeChanged=function(e){var t,n,i,r=this.editor.selection;this.editor.initialized&&r&&!this.editor.getParam("disable_nodechange")&&!this.editor.mode.isReadOnly()&&(i=this.editor.getBody(),(t=r.getStart(!0)||i).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(t,i)||(t=i),n=[],this.editor.dom.getParent(t,(function(e){if(e===i)return!0;n.push(e)})),(e=e||{}).element=t,e.parents=n,this.editor.fire("NodeChange",e))},e.prototype.isSameElementPath=function(e){var t,n=this.editor.$(e).parentsUntil(this.editor.getBody()).add(e);if(n.length===this.lastPath.length){for(t=n.length;t>=0&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1},e}(),_k=function(e){!function(e){e.on("click",(function(t){e.dom.getParent(t.target,"details")&&t.preventDefault()}))}(e),function(e){e.parser.addNodeFilter("details",(function(e){W(e,(function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")}))})),e.serializer.addNodeFilter("details",(function(e){W(e,(function(e){var t=e.attr("data-mce-open");e.attr("open",S(t)?t:null),e.attr("data-mce-open",null)}))}))}(e)},Sk=function(e){return yn(e)&&Oi(bt.fromDom(e))},Tk=function(e){e.on("click",(function(t){t.detail>=3&&function(e){var t=e.selection.getRng(),n=gl.fromRangeStart(t),i=gl.fromRangeEnd(t);if(gl.isElementPosition(n)){var r=n.container();Sk(r)&&_c(r).each((function(e){return t.setStart(e.container(),e.offset())}))}gl.isElementPosition(i)&&(r=n.container(),Sk(r)&&Sc(r).each((function(e){return t.setEnd(e.container(),e.offset())})));e.selection.setRng(fm(t))}(e)}))},Dk=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,i=n.documentElement,r=n.defaultView;return{top:t.top+r.pageYOffset-i.clientTop,left:t.left+r.pageXOffset-i.clientLeft}},Mk=function(e,t){return n=function(e){return e.inline?Dk(e.getBody()):{left:0,top:0}}(e),i=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}}(e),r=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=Dk(e.getContentAreaContainer()),i=function(e){var t=e.getBody(),n=e.getDoc().documentElement,i={left:t.scrollLeft,top:t.scrollTop},r={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?i:r}(e);return{left:t.pageX-n.left+i.left,top:t.pageY-n.top+i.top}}return{left:t.pageX,top:t.pageY}}(e,t),{pageX:r.left-n.left+i.left,pageY:r.top-n.top+i.top};var n,i,r},Ek=Ln,Nk=Pn,Ak=function(e,t,n,i){var r=e.dom,o=t.cloneNode(!0);r.setStyles(o,{width:n,height:i}),r.setAttrib(o,"data-mce-selected",null);var a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:i}),r.setStyles(o,{margin:0,boxSizing:"border-box"}),a.appendChild(o),a},Pk=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},Lk=function(e,t){return function(n){if(function(e){return 0===e.button}(n)){var i=q(t.dom.getParents(n.target),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){for(var n=0;n<e.length;n++)if(e[n](t))return!0;return!1}}(Ek,Nk)).getOr(null);if(s=t.getBody(),Ek(l=i)&&l!==s){var r=t.dom.getPos(i),o=t.getBody(),a=t.getDoc().documentElement;e.set({element:i,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?o.scrollWidth:a.offsetWidth)-2,maxY:(t.inline?o.scrollHeight:a.offsetHeight)-2,relX:n.pageX-r.x,relY:n.pageY-r.y,width:i.offsetWidth,height:i.offsetHeight,ghost:Ak(t,i,i.offsetWidth,i.offsetHeight)})}}var s,l}},Ok=function(e,t){return function(n){e.on((function(e){if(e.dragging&&function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!Ek(t)}(t,(a=t.selection,3===(s=a.getSel().getRangeAt(0).startContainer).nodeType?s.parentNode:s),e.element)){var i=(r=e.element,(o=r.cloneNode(!0)).removeAttribute("data-mce-selected"),o);t.fire("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||t.undoManager.transact((function(){Pk(e.element),t.insertContent(t.dom.getOuterHTML(i)),t._selectionOverrides.hideFakeCaret()}))}var r,o,a,s})),Ik(e)}},Ik=function(e){e.on((function(e){Pk(e.ghost)})),e.clear()},Rk=function(e){var t,n=(t=as(x.none()),{clear:function(){return t.set(x.none())},set:function(e){return t.set(x.some(e))},isSet:function(){return t.get().isSome()},on:function(e){return t.get().each(e)}}),i=ts.DOM,r=document,o=Lk(n,e),a=function(e,t){var n=ki.throttle((function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)}),0);return function(i){return e.on((function(e){var r,o,a=Math.max(Math.abs(i.screenX-e.screenX),Math.abs(i.screenY-e.screenY));if(!e.dragging&&a>10){if(t.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var s=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}}(e,Mk(t,i));r=e.ghost,o=t.getBody(),r.parentNode!==o&&o.appendChild(r),function(e,t,n,i,r,o){var a=0,s=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>r&&(a=t.pageX+n-r),t.pageY+i>o&&(s=t.pageY+i-o),e.style.width=n-a+"px",e.style.height=i-s+"px"}(e.ghost,s,e.width,e.height,e.maxX,e.maxY),n(i.clientX,i.clientY)}}))}}(n,e),s=Ok(n,e),l=function(e,t){return function(){e.on((function(e){e.dragging&&t.fire("dragend")})),Ik(e)}}(n,e);e.on("mousedown",o),e.on("mousemove",a),e.on("mouseup",s),i.bind(r,"mousemove",a),i.bind(r,"mouseup",l),e.on("remove",(function(){i.unbind(r,"mousemove",a),i.unbind(r,"mouseup",l)}))},Bk=function(e){Rk(e),function(e){e.on("drop",(function(t){var n=void 0!==t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(Ek(n)||"false"===e.dom.getContentEditableParent(n))&&t.preventDefault()}))}(e),function(e){return e.getParam("block_unsupported_drop",!0,"boolean")}(e)&&function(e){var t=function(t){if(!t.defaultPrevented){var n=t.dataTransfer;n&&(z(n.types,"Files")||n.files.length>0)&&(t.preventDefault(),"drop"===t.type&&Ny(e,"Dropped file type is not supported"))}},n=function(n){Yf(e,n.target)&&t(n)},i=function(){var i=ts.DOM,r=e.dom,o=document,a=e.inline?e.getBody():e.getDoc(),s=["drop","dragover"];W(s,(function(e){i.bind(o,e,n),r.bind(a,e,t)})),e.on("remove",(function(){W(s,(function(e){i.unbind(o,e,n),r.unbind(a,e,t)}))}))};e.on("init",(function(){ki.setEditorTimeout(e,i,0)}))}(e)},zk=Pn,Fk=Ln,Hk=function(e,t){return Rd(e.getBody(),t)},Wk=function(e){var t,n=e.selection,i=e.dom,r=i.isBlock,o=e.getBody(),a=Tu(e,o,r,(function(){return th(e)})),s="sel-"+i.uniqueId(),l="data-mce-selected",u=function(e){return Fk(e)||In(e)},c=function(e){e&&n.setRng(e)},d=n.getRng,f=function(t,i,r,o){return void 0===o&&(o=!0),e.fire("ShowCaret",{target:i,direction:t,before:r}).isDefaultPrevented()?null:(o&&n.scrollIntoView(i,-1===t),a.show(r,i))},h=function(e){return Yi(e)||Qi(e)||er(e)},p=function(e){return h(e.startContainer)||h(e.endContainer)},m=function(t){var n=e.schema.getShortEndedElements(),r=i.createRng(),o=t.startContainer,a=t.startOffset,s=t.endContainer,l=t.endOffset;return fe(n,o.nodeName.toLowerCase())?0===a?r.setStartBefore(o):r.setStartAfter(o):r.setStart(o,a),fe(n,s.nodeName.toLowerCase())?0===l?r.setEndBefore(s):r.setEndAfter(s):r.setEnd(s,l),r},g=function(r){var o=r.cloneNode(!0),a=e.fire("ObjectSelected",{target:r,targetClone:o});if(a.isDefaultPrevented())return null;var u=function(t,r,o){var a=e.$,l=vi(bt.fromDom(e.getBody()),"#"+s).fold((function(){return a([])}),(function(e){return a([e.dom])}));0===l.length&&(l=a('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",s)).appendTo(e.getBody());var u=i.createRng();r===o&&ht.ie?(l.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(r),u.setStartAfter(l[0].firstChild.firstChild),u.setEndAfter(r)):(l.empty().append(Hi).append(r).append(Hi),u.setStart(l[0].firstChild,1),u.setEnd(l[0].lastChild,0)),l.css({top:i.getPos(t,e.getBody()).y}),l[0].focus();var c=n.getSel();return c.removeAllRanges(),c.addRange(u),u}(r,a.targetClone,o),c=bt.fromDom(r);return W(ks(bt.fromDom(e.getBody()),"*[data-mce-selected]"),(function(e){kt(c,e)||Wn(e,l)})),i.getAttrib(r,l)||r.setAttribute(l,"1"),t=r,b(),u},v=function(e,t){if(!e)return null;if(e.collapsed){if(!p(e)){var n=t?1:-1,r=Ju(n,o,e),a=r.getNode(!t);if(Eu(a))return f(n,a,!!t&&!r.isAtEnd(),!1);var s=r.getNode(t);if(Eu(s))return f(n,s,!t&&!r.isAtEnd(),!1)}return null}var l=e.startContainer,c=e.startOffset,d=e.endOffset;if(3===l.nodeType&&0===c&&Fk(l.parentNode)&&(l=l.parentNode,c=i.nodeIndex(l),l=l.parentNode),1!==l.nodeType)return null;if(d===c+1&&l===e.endContainer){var h=l.childNodes[c];if(u(h))return g(h)}return null},y=function(){t&&t.removeAttribute(l),vi(bt.fromDom(e.getBody()),"#"+s).each(on),t=null},b=function(){a.hide()};return ht.ceFalse&&function(){e.on("mouseup",(function(t){var n=d();n.collapsed&&ky(e,t.clientX,t.clientY)&&Lb(e,n,!1).each(c)})),e.on("click",(function(t){var r=Hk(e,t.target);r&&(Fk(r)&&(t.preventDefault(),e.focus()),zk(r)&&i.isChildOf(r,n.getNode())&&y())})),e.on("blur NewBlock",y),e.on("ResizeWindow FullscreenStateChanged",a.reposition);var l=function(e){var t=hc(e);if(!e.firstChild)return!1;var n,i=yl.before(e.firstChild),r=t.next(i);return r&&!(Wh(n=r)||jh(n)||Bh(n)||zh(n))},h=function(t,n){var o,a,s=i.getParent(t,r),u=i.getParent(n,r);return!(!s||t===u||!i.isChildOf(s,u)||!1!==Fk(Hk(e,s)))||s&&(o=s,a=u,!(i.getParent(o,r)===i.getParent(a,r)))&&l(s)};e.on("tap",(function(t){var n=t.target,i=Hk(e,n);Fk(i)?(t.preventDefault(),Pb(e,i).each(v)):u(n)&&Pb(e,n).each(v)}),!0),e.on("mousedown",(function(t){var r=t.target;if((r===o||"HTML"===r.nodeName||i.isChildOf(r,o))&&!1!==ky(e,t.clientX,t.clientY)){var a=Hk(e,r);if(a)Fk(a)?(t.preventDefault(),Pb(e,a).each(v)):(y(),zk(a)&&t.shiftKey||Bd(t.clientX,t.clientY,n.getRng())||(b(),n.placeCaretAt(t.clientX,t.clientY)));else if(u(r))Pb(e,r).each(v);else if(!1===Eu(r)){y(),b();var s=Bx(o,t.clientX,t.clientY);if(s&&!h(r,s.node)){t.preventDefault();var l=f(1,s.node,s.before,!1);e.getBody().focus(),c(l)}}}})),e.on("keypress",(function(e){zd.modifierPressed(e)||Fk(n.getNode())&&e.preventDefault()})),e.on("GetSelectionRange",(function(e){var n=e.range;if(t){if(!t.parentNode)return void(t=null);(n=n.cloneRange()).selectNode(t),e.range=n}})),e.on("SetSelectionRange",(function(e){e.range=m(e.range);var t=v(e.range,e.forward);t&&(e.range=t)})),e.on("AfterSetSelectionRange",(function(e){var t,n=e.range,r=n.startContainer.parentNode;p(n)||"mcepastebin"===r.id||b(),t=r,i.hasClass(t,"mce-offscreen-selection")||y()})),e.on("copy",(function(e){var t,n=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!ht.ie){var r=(t=i.get(s))?t.getElementsByTagName("*")[0]:t;r&&(e.preventDefault(),n.clearData(),n.setData("text/html",r.outerHTML),n.setData("text/plain",r.outerText||r.innerText))}})),Bk(e),function(e){var t=hs((function(){if(!e.removed&&e.getBody().contains(document.activeElement)){var t=e.selection.getRng();if(t.collapsed){var n=Ob(e,t,!1);e.selection.setRng(n)}}}),0);e.on("focus",(function(){t.throttle()})),e.on("blur",(function(){t.cancel()}))}(e),function(e){e.on("init",(function(){e.on("focusin",(function(t){var n=t.target;if(In(n)){var i=Rd(e.getBody(),n),r=Ln(i)?i:n;e.selection.getNode()!==r&&Pb(e,r).each((function(t){return e.selection.setRng(t)}))}}))}))}(e)}(),{showCaret:f,showBlockCaretContainer:function(e){e.hasAttribute("data-mce-caret")&&(tr(e),c(d()),n.scrollIntoView(e))},hideFakeCaret:b,destroy:function(){a.destroy(),t=null}}},jk=function(e){var t,n,i,r=vt.each,o=zd.BACKSPACE,a=zd.DELETE,s=e.dom,l=e.selection,u=e.parser,c=ht.gecko,d=ht.ie,f=ht.webkit,h="data:text/mce-internal,",p=d?"Text":"URL",m=function(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},g=function(e){return e.isDefaultPrevented()},v=function(){e.shortcuts.add("meta+a",null,"SelectAll")},y=function(){e.on("keydown",(function(e){if(!g(e)&&e.keyCode===o&&l.isCollapsed()&&0===l.getRng().startOffset){var t=l.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}}))},b=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",(function(t){var n;if("HTML"===t.target.nodeName){if(ht.ie>11)return void e.getBody().focus();n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged()}})))};return e.on("keydown",(function(t){var n,i;if(!g(t)&&t.keyCode===zd.BACKSPACE){var r=(n=l.getRng()).startContainer,o=n.startOffset,a=s.getRoot();if(i=r,n.collapsed&&0===o){for(;i&&i.parentNode&&i.parentNode.firstChild===i&&i.parentNode!==a;)i=i.parentNode;"BLOCKQUOTE"===i.tagName&&(e.formatter.toggle("blockquote",null,i),(n=s.createRng()).setStart(r,0),n.setEnd(r,0),l.setRng(n))}}})),t=function(e){var t=s.create("body"),n=e.cloneContents();return t.appendChild(n),l.serializer.serialize(t,{format:"html"})},e.on("keydown",(function(n){var i,r,l=n.keyCode;if(!g(n)&&(l===a||l===o)){if(i=e.selection.isCollapsed(),r=e.getBody(),i&&!s.isEmpty(r))return;if(!i&&!function(n){var i=t(n),r=s.createRng();return r.selectNode(e.getBody()),i===t(r)}(e.selection.getRng()))return;n.preventDefault(),e.setContent(""),r.firstChild&&s.isBlock(r.firstChild)?e.selection.setCursorLocation(r.firstChild,0):e.selection.setCursorLocation(r,0),e.nodeChanged()}})),ht.windowsPhone||e.on("keyup focusin mouseup",(function(e){zd.modifierPressed(e)||l.normalize()}),!0),f&&(e.inline||s.bind(e.getDoc(),"mousedown mouseup",(function(t){var n;if(t.target===e.getDoc().documentElement)if(n=l.getRng(),e.getBody().focus(),"mousedown"===t.type){if(Yi(n.startContainer))return;l.placeCaretAt(t.clientX,t.clientY)}else l.setRng(n)})),e.on("click",(function(t){var n=t.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==s.getContentEditableParent(n)&&(t.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&s.hasClass(n,"mce-item-anchor")&&(t.preventDefault(),l.select(n))})),$l(e)&&e.on("init",(function(){m("DefaultParagraphSeparator",$l(e))})),e.on("init",(function(){e.dom.bind(e.getBody(),"submit",(function(e){e.preventDefault()}))})),y(),u.addNodeFilter("br",(function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})),ht.iOS?(e.inline||e.on("keydown",(function(){document.activeElement===document.body&&e.getWin().focus()})),b(),e.on("click",(function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)})),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):v()),ht.ie>=11&&(b(),y()),ht.ie&&(v(),m("AutoUrlDetect",!1),e.on("dragstart",(function(t){!function(t){var n,i;t.dataTransfer&&(e.selection.isCollapsed()&&"IMG"===t.target.tagName&&l.select(t.target),(n=e.selection.getContent()).length>0&&(i=h+escape(e.id)+","+escape(n),t.dataTransfer.setData(p,i)))}(t)})),e.on("drop",(function(t){if(!g(t)){var n=function(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(p))&&t.indexOf(h)>=0?(t=t.substr(23).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null}(t);if(n&&n.id!==e.id){t.preventDefault();var i=jd(t.x,t.y,e.getDoc());l.setRng(i),r=n.html,o=!0,e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:r,internal:o}):e.execCommand("mceInsertContent",!1,r)}}var r,o}))),c&&(e.on("keydown",(function(t){if(!g(t)&&t.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(l.isCollapsed()&&0===l.getRng().startOffset){var n=l.getNode(),i=n.previousSibling;if("HR"===n.nodeName)return s.remove(n),void t.preventDefault();i&&i.nodeName&&"hr"===i.nodeName.toLowerCase()&&(s.remove(i),t.preventDefault())}}})),Range.prototype.getClientRects||e.on("mousedown",(function(t){if(!g(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),ki.setEditorTimeout(e,(function(){n.focus()}))}})),n=function(){var t=s.getAttribs(l.getStart().cloneNode(!1));return function(){var n=l.getStart();n!==e.getBody()&&(s.setAttrib(n,"style",null),r(t,(function(e){n.setAttributeNode(e.cloneNode(!0))})))}},i=function(){return!l.isCollapsed()&&s.getParent(l.getStart(),s.isBlock)!==s.getParent(l.getEnd(),s.isBlock)},e.on("keypress",(function(t){var r;if(!g(t)&&(8===t.keyCode||46===t.keyCode)&&i())return r=n(),e.getDoc().execCommand("delete",!1,null),r(),t.preventDefault(),!1})),s.bind(e.getDoc(),"cut",(function(t){var r;!g(t)&&i()&&(r=n(),ki.setEditorTimeout(e,(function(){r()})))})),function(e){return e.getParam("readonly")}(e)||e.on("BeforeExecCommand mousedown",(function(){m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),ru(e)||m("enableObjectResizing",!1)})),e.on("SetContent ExecCommand",(function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||r(s.select("a"),(function(e){var t=e.parentNode,n=s.getRoot();if(t.lastChild===e){for(;t&&!s.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}s.add(t,"br",{"data-mce-bogus":1})}}))})),e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),ht.mac&&e.on("keydown",(function(t){!zd.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))})),y()),{refreshContentEditable:function(){},isHidden:function(){if(!c||e.removed)return!1;var t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}},Uk=ts.DOM,Vk=function(e){return e.inline?e.getElement().nodeName.toLowerCase():void 0},$k=function(e){return ue(e,(function(e){return!1===N(e)}))},qk=function(e){var t=e.settings,n=e.editorUpload.blobCache;return $k({allow_conditional_comments:t.allow_conditional_comments,allow_html_data_urls:t.allow_html_data_urls,allow_html_in_named_anchor:t.allow_html_in_named_anchor,allow_script_urls:t.allow_script_urls,allow_unsafe_link_target:t.allow_unsafe_link_target,convert_fonts_to_spans:t.convert_fonts_to_spans,fix_list_elements:t.fix_list_elements,font_size_legacy_values:t.font_size_legacy_values,forced_root_block:t.forced_root_block,forced_root_block_attrs:t.forced_root_block_attrs,padd_empty_with_br:t.padd_empty_with_br,preserve_cdata:t.preserve_cdata,remove_trailing_brs:t.remove_trailing_brs,inline_styles:t.inline_styles,root_name:Vk(e),validate:!0,blob_cache:n,images_dataimg_filter:t.images_dataimg_filter})},Xk=function(e){var t=e.dom.getRoot();e.inline||_d(e)&&e.selection.getStart(!0)!==t||_c(t).each((function(t){var n=t.getNode(),i=kn(n)?_c(n).getOr(t):t;ht.browser.isIE()?function(e,t){var n=bt.fromDom(e.getBody()),i=(zf(e)?x.from(t):x.none()).map(Ff).filter(Bf(n));e.bookmark=i.isSome()?i:e.bookmark}(e,i.toRange()):e.selection.setRng(i.toRange())}))},Yk=function(e){e.bindPendingEventDelegates(),e.initialized=!0,function(e){e.fire("Init")}(e),e.focus(!0),Xk(e),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),function(e){e.settings.auto_focus&&ki.setEditorTimeout(e,(function(){var t;(t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus)).destroyed||t.focus()}),100)}(e)},Kk=function(e,t){var n=e.settings,i=e.getDoc(),r=e.getBody();n.browser_spellcheck||n.gecko_spellcheck||(i.body.spellcheck=!1,Uk.setAttrib(r,"spellcheck","false")),e.quirks=jk(e),function(e){e.fire("PostRender")}(e);var o=function(e){return e.getParam("directionality",cs.isRtl()?"rtl":void 0)}(e);if(void 0!==o&&(r.dir=o),n.protect&&e.on("BeforeSetContent",(function(e){vt.each(n.protect,(function(t){e.content=e.content.replace(t,(function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"}))}))})),e.on("SetContent",(function(){e.addVisual(e.getBody())})),!1===t&&e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),e.on("compositionstart compositionend",(function(t){e.composing="compositionstart"===t.type})),e.contentStyles.length>0){var a="";vt.each(e.contentStyles,(function(e){a+=e+"\r\n"})),e.dom.addStyle(a)}!function(e,t){var n=function(e){return e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader}(e),i=function(){e.on("remove",(function(){return n.unloadAll(t)})),Yk(e)};n.loadAll(t,i,i)}(e,e.contentCSS),n.content_style&&function(e,t){var n=bt.fromDom(e.getBody()),i=Kt(Yt(n)),r=bt.fromTag("style");zn(r,"type","text/css"),tn(r,bt.fromText(t)),tn(i,r),e.on("remove",(function(){on(r)}))}(e,n.content_style)},Gk=function(e,t){var n=e.settings,i=e.getElement(),r=e.getDoc();n.inline||(e.getElement().style.visibility=e.orgVisibility),t||e.inline||(r.open(),r.write(e.iframeHTML),r.close()),e.inline&&(Uk.addClass(i,"mce-content-body"),e.contentDocument=r=document,e.contentWindow=window,e.bodyElement=i,e.contentAreaContainer=i);var o=e.getBody();o.disabled=!0,e.readonly=!!n.readonly,e.readonly||(e.inline&&"static"===Uk.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable=e.getParam("content_editable_state",!0)),o.disabled=!1,e.editorUpload=Fy(e),e.schema=Kr(n),e.dom=ts(r,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:n.force_hex_style_colors,update_styles:!0,root_element:e.inline?e.getBody():null,collect:function(){return e.inline},schema:e.schema,contentCssCors:eu(e),referrerPolicy:tu(e),onSetAttrib:function(t){e.fire("SetAttrib",t)}}),e.parser=function(e){var t=Fv(qk(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(function(t,n){for(var i,r,o=t.length,a=e.dom,s="data-mce-"+n;o--;)if((r=(i=t[o]).attr(n))&&!i.attr(s)){if(0===r.indexOf("data:")||0===r.indexOf("blob:"))continue;"style"===n?((r=a.serializeStyle(a.parseStyle(r),i.name)).length||(r=null),i.attr(s,r),i.attr(n,r)):"tabindex"===n?(i.attr(s,r),i.attr(n,null)):i.attr(s,e.convertURL(r,n,i.name))}})),t.addNodeFilter("script",(function(e){for(var t=e.length;t--;){var n=e[t],i=n.attr("type")||"no/type";0!==i.indexOf("mce-")&&n.attr("type","mce-"+i)}})),e.settings.preserve_cdata&&t.addNodeFilter("#cdata",(function(t){for(var n=t.length;n--;){var i=t[n];i.type=8,i.name="#comment",i.value="[CDATA["+e.dom.encode(i.value)+"]]"}})),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(function(t){for(var n=t.length,i=e.schema.getNonEmptyElements();n--;){var r=t[n];r.isEmpty(i)&&0===r.getAll("br").length&&(r.append(new ph("br",1)).shortEnded=!0)}})),t}(e),e.serializer=Vv(function(e){var t=e.settings;return xe(xe({},qk(e)),$k({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope,element_format:t.element_format,entities:t.entities,entity_encoding:t.entity_encoding,indent:t.indent,indent_after:t.indent_after,indent_before:t.indent_before,block_elements:t.block_elements,boolean_attributes:t.boolean_attributes,custom_elements:t.custom_elements,extended_valid_elements:t.extended_valid_elements,invalid_elements:t.invalid_elements,invalid_styles:t.invalid_styles,move_caret_before_on_enter_elements:t.move_caret_before_on_enter_elements,non_empty_elements:t.non_empty_elements,schema:t.schema,self_closing_elements:t.self_closing_elements,short_ended_elements:t.short_ended_elements,special:t.special,text_block_elements:t.text_block_elements,text_inline_elements:t.text_inline_elements,valid_children:t.valid_children,valid_classes:t.valid_classes,valid_elements:t.valid_elements,valid_styles:t.valid_styles,verify_html:t.verify_html,whitespace_elements:t.whitespace_elements}))}(e),e),e.selection=bv(e.dom,e.getWin(),e.serializer,e),e.annotator=Ld(e),e.formatter=Gy(e),e.undoManager=Jy(e),e._nodeChangeDispatcher=new kk(e),e._selectionOverrides=Wk(e),tx(e),_k(e),uv(e)||Tk(e);var a=function(e){return uv(e)?as(null):Ck(e)}(e);Qw(e,a),function(e){$l(e)&&e.on("NodeChange",h(ox,e))}(e),nb(e),function(e){e.fire("PreInit")}(e),function(e){var t=e;return de(e.plugins,"rtc").fold((function(){return t.rtcInstance=sv(e),x.none()}),(function(n){return x.some(n.setup().then((function(n){return t.rtcInstance=lv(e,n),n.isRemote})))}))}(e).fold((function(){Kk(e,!1)}),(function(t){e.setProgressState(!0),t.then((function(t){e.setProgressState(!1),Kk(e,t)}))}))},Jk=ts.DOM,Zk=function(e){var t=function(e){return e.getParam("doctype","<!DOCTYPE html>")}(e)+"<html><head>";(function(e){return e.getParam("document_base_url","")})(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var n=function(e){return Ul(e,"body_id","tinymce")}(e),i=function(e){return Ul(e,"body_class","")}(e);return Vl(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Vl(e)+'" />'),t+='</head><body id="'+n+'" class="mce-content-body '+i+'" data-id="'+e.id+'"><br></body></html>'},Qk=function(e,t){var n=e.editorManager.translate("Rich Text Area. Press ALT-0 for help."),i=function(e,t,n,i){var r=bt.fromTag("iframe");return Fn(r,i),Fn(r,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),bs(r,"tox-edit-area__iframe"),r}(e.id,n,t.height,function(e){return e.getParam("iframe_attrs",{})}(e)).dom;i.onload=function(){i.onload=null,e.fire("load")};var r=function(e,t){if(document.domain!==window.location.hostname&&ht.browser.isIE()){var n=zy("mce");e[n]=function(){Gk(e)};var i='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return Jk.setAttrib(t,"src",i),!0}return!1}(e,i);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=i,e.iframeHTML=Zk(e),Jk.add(t.iframeContainer,i),r},e_=ts.DOM,t_=function e(t,n,i){var r=Ty.get(i),o=Ty.urls[i]||t.documentBaseUrl.replace(/\/$/,"");if(i=vt.trim(i),r&&-1===vt.inArray(n,i)){if(vt.each(Ty.dependencies(i),(function(i){e(t,n,i)})),t.plugins[i])return;try{var a=new r(t,o,t.$);t.plugins[i]=a,a.init&&(a.init(t,o),n.push(i))}catch(e){!function(e,t,n){var i=cs.translate(["Failed to initialize plugin: {0}",t]);Oy(i,n),Ny(e,i)}(t,i,e)}}},n_=function(e){return e.replace(/^\-/,"")},i_=function(e){return{editorContainer:e,iframeContainer:e,api:{}}},r_=function(e){var t=e.getElement();return e.inline?i_(null):function(e){var t=e_.create("div");return e_.insertAfter(t,e),i_(t)}(t)},o_=function(e){var t=e.getElement();return e.orgDisplay=t.style.display,S(au(e))?function(e){return e.theme.renderUI()}(e):P(au(e))?function(e){var t=e.getElement(),n=au(e)(e,t);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:t.offsetHeight,n}(e):r_(e)},a_=function(e){e.fire("ScriptsLoaded"),function(e){var t=vt.trim(Kl(e)),n=e.ui.registry.getAll().icons,i=xe(xe({},gy.get("default").icons),gy.get(t).icons);ie(i,(function(t,i){fe(n,i)||e.ui.registry.addIcon(i,t)}))}(e),function(e){var t=au(e);if(S(t)){e.settings.theme=n_(t);var n=Dy.get(t);e.theme=new n(e,Dy.urls[t]),e.theme.init&&e.theme.init(e,Dy.urls[t]||e.documentBaseUrl.replace(/\/$/,""),e.$)}else e.theme={}}(e),function(e){var t=[];vt.each(cu(e).split(/[ ,]/),(function(n){t_(e,t,n_(n))}))}(e);var t=o_(e);e.ui=xe(xe({},e.ui),t.api);var n={editorContainer:t.editorContainer,iframeContainer:t.iframeContainer};return e.editorContainer=n.editorContainer?n.editorContainer:null,function(e){e.contentCSS=e.contentCSS.concat(Iy(e))}(e),e.inline?Gk(e):function(e,t){var n=Qk(e,t);t.editorContainer&&(Jk.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=Jk.isHidden(t.editorContainer)),e.getElement().style.display="none",Jk.setAttrib(e.id,"aria-hidden","true"),n||Gk(e)}(e,n)},s_=ts.DOM,l_=function(e){return"-"===e.charAt(0)},u_=function(e,t){var n=nu(t),i=function(e){return e.getParam("language_url","","string")}(t);if(!1===cs.hasCode(n)&&"en"!==n){var r=""!==i?i:t.editorManager.baseURL+"/langs/"+n+".js";e.add(r,u,void 0,(function(){!function(e,t,n){Ay(e,"LanguageLoadError",Py("language",t,n))}(t,r,n)}))}},c_=function(e,t,n){return x.from(t).filter((function(e){return e.length>0&&!gy.has(e)})).map((function(t){return{url:e.editorManager.baseURL+"/icons/"+t+"/icons"+n+".js",name:x.some(t)}}))},d_=function(e,t,n){var i=c_(t,"default",n),r=function(e){return x.from(function(e){return e.getParam("icons_url","","string")}(e)).filter((function(e){return e.length>0})).map((function(e){return{url:e,name:x.none()}}))}(t).orThunk((function(){return c_(t,Kl(t),"")}));W(function(e){for(var t=[],n=function(e){t.push(e)},i=0;i<e.length;i++)e[i].each(n);return t}([i,r]),(function(n){e.add(n.url,u,void 0,(function(){!function(e,t,n){Ay(e,"IconsLoadError",Py("icons",t,n))}(t,n.url,n.name.getOrUndefined())}))}))},f_=function(e,t){var n=os.ScriptLoader;!function(e,t,n,i){var r=au(t);if(S(r)){if(!l_(r)&&!Dy.urls.hasOwnProperty(r)){var o=function(e){return e.getParam("theme_url")}(t);o?Dy.load(r,t.documentBaseURI.toAbsolute(o)):Dy.load(r,"themes/"+r+"/theme"+n+".js")}e.loadQueue((function(){Dy.waitFor(r,i)}))}else i()}(n,e,t,(function(){u_(n,e),d_(n,e,t),function(e,t){vt.each(function(e){return e.getParam("external_plugins")}(e),(function(t,n){Ty.load(n,t,u,void 0,(function(){Ly(e,t,n)})),e.settings.plugins+=" "+n})),vt.each(cu(e).split(/[ ,]/),(function(n){if((n=vt.trim(n))&&!Ty.urls[n])if(l_(n)){n=n.substr(1,n.length);var i=Ty.dependencies(n);vt.each(i,(function(n){var i={prefix:"plugins/",resource:n,suffix:"/plugin"+t+".js"},r=Ty.createUrl(i,n);Ty.load(r.resource,r,u,void 0,(function(){Ly(e,r.prefix+r.resource+r.suffix,r.resource)}))}))}else{var r={prefix:"plugins/",resource:n,suffix:"/plugin"+t+".js"};Ty.load(n,r,u,void 0,(function(){Ly(e,r.prefix+r.resource+r.suffix,n)}))}}))}(e,t),n.loadQueue((function(){e.removed||a_(e)}),e,(function(){e.removed||a_(e)}))}))},h_=function(e){var t=e.id;cs.setCode(nu(e));if(_o.Event.domLoaded){if(e.getElement()&&ht.contentEditable){var n=bt.fromDom(e.getElement()),i=function(e){return $(e.dom.attributes,(function(e,t){return e[t.name]=t.value,e}),{})}(n);e.on("remove",(function(){j(n.dom.attributes,(function(e){return Wn(n,e.name)})),Fn(n,i)})),e.ui.styleSheetLoader=function(e,t){return Di.forElement(e,{contentCssCors:uu(t),referrerPolicy:tu(t)})}(n,e),!function(e){return e.getParam("inline")}(e)?(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden"):e.inline=!0;var r=e.getElement().form||s_.getParent(t,"form");r&&(e.formElement=r,function(e){return e.getParam("hidden_input")}(e)&&!Sn(e.getElement())&&(s_.insertAfter(s_.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},s_.bind(r,"submit reset",e.formEventDelegate),e.on("reset",(function(){e.resetContent()})),!function(e){return e.getParam("submit_patch")}(e)||r.submit.nodeType||r.submit.length||r._mceOldSubmit||(r._mceOldSubmit=r.submit,r.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)})),e.windowManager=My(e),e.notificationManager=Sy(e),function(e){return"xml"===e.getParam("encoding")}(e)&&e.on("GetContent",(function(e){e.save&&(e.content=s_.encode(e.content))})),function(e){return e.getParam("add_form_submit_trigger")}(e)&&e.on("submit",(function(){e.initialized&&e.save()})),function(e){return e.getParam("add_unload_trigger")}(e)&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),f_(e,e.suffix)}}else s_.bind(window,"ready",(function t(){s_.unbind(window,"ready",t),e.render()}))},p_=function(e){return P(e)?e:g},m_=function(e,t,n){var i=t(e),r=p_(n);return i.orThunk((function(){return r(e)?x.none():function(e,t,n){for(var i=e.dom,r=p_(n);i.parentNode;){i=i.parentNode;var o=bt.fromDom(i),a=t(o);if(a.isSome())return a;if(r(o))break}return x.none()}(e,t,r)}))},g_={"font-size":"size","font-family":"face"},v_=function(e,t,n){var i=function(t){return $n(t,e).orThunk((function(){return"font"===Tt(t)?de(g_,e).bind((function(e){return x.from(Hn(t,e))})):x.none()}))};return m_(bt.fromDom(n),(function(e){return i(e)}),(function(e){return kt(bt.fromDom(t),e)}))},y_=function(e){return function(t,n){return x.from(n).map(bt.fromDom).filter(Et).bind((function(n){return v_(e,t,n.dom).or(function(e,t){return x.from(ts.DOM.getStyle(t,e,!0))}(e,n.dom))})).getOr("")}},b_=y_("font-size"),w_=c((function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")}),y_("font-family")),x_=function(e){return _c(e.getBody()).map((function(e){var t=e.container();return Tn(t)?t.parentNode:t}))},C_=function(e,t){return function(e){return x.from(e.selection.getRng()).bind((function(t){var n=e.getBody();return t.startContainer===n&&0===t.startOffset?x.none():x.from(e.selection.getStart(!0))}))}(e).orThunk(h(x_,e)).map(bt.fromDom).filter(Et).map(t)},k_=function(e,t){if(/^[0-9.]+$/.test(t)){var n=parseInt(t,10);if(n>=1&&n<=7){var i=function(e){return vt.explode(e.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large"))}(e),r=function(e){return vt.explode(e.getParam("font_size_classes",""))}(e);return r?r[n-1]||t:i[n-1]||t}return t}return t},__=function(e){var t=e.split(/\s*,\s*/);return H(t,(function(e){return-1===e.indexOf(" ")||Ne(e,'"')||Ne(e,"'")?e:"'"+e+"'"})).join(",")},S_=function(e,t){var n=function(e){var t;return"string"!=typeof e?(t=vt.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}}(t);!function(e,t,n){cv(e).editor.insertContent(t,n)}(e,n.content,n.details)},T_=vt.each,D_=vt.map,M_=vt.inArray,E_=function(){function e(e){this.commands={state:{},exec:{},value:{}},this.editor=e,this.setupCommands(e)}return e.prototype.execCommand=function(e,t,n,i){var r,o=!1,a=this;if(!a.editor.removed){var s;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||i&&i.skip_focus?(s=a.editor,Uf(s).each((function(e){return s.selection.setRng(e)}))):a.editor.focus(),(i=a.editor.fire("BeforeExecCommand",{command:e,ui:t,value:n})).isDefaultPrevented())return!1;var l=e.toLowerCase();if(r=a.commands.exec[l])return r(l,t,n),a.editor.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(T_(this.editor.plugins,(function(i){if(i.execCommand&&i.execCommand(e,t,n))return a.editor.fire("ExecCommand",{command:e,ui:t,value:n}),o=!0,!1})),o)return o;if(a.editor.theme&&a.editor.theme.execCommand&&a.editor.theme.execCommand(e,t,n))return a.editor.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{o=a.editor.getDoc().execCommand(e,t,n)}catch(e){}return!!o&&(a.editor.fire("ExecCommand",{command:e,ui:t,value:n}),!0)}},e.prototype.queryCommandState=function(e){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(e=e.toLowerCase(),t=this.commands.state[e])return t(e);try{return this.editor.getDoc().queryCommandState(e)}catch(e){}return!1}},e.prototype.queryCommandValue=function(e){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(e=e.toLowerCase(),t=this.commands.value[e])return t(e);try{return this.editor.getDoc().queryCommandValue(e)}catch(e){}}},e.prototype.addCommands=function(e,t){void 0===t&&(t="exec");var n=this;T_(e,(function(e,i){T_(i.toLowerCase().split(","),(function(i){n.commands[t][i]=e}))}))},e.prototype.addCommand=function(e,t,n){var i=this;e=e.toLowerCase(),this.commands.exec[e]=function(e,r,o,a){return t.call(n||i.editor,r,o,a)}},e.prototype.queryCommandSupported=function(e){if(e=e.toLowerCase(),this.commands.exec[e])return!0;try{return this.editor.getDoc().queryCommandSupported(e)}catch(e){}return!1},e.prototype.addQueryStateHandler=function(e,t,n){var i=this;e=e.toLowerCase(),this.commands.state[e]=function(){return t.call(n||i.editor)}},e.prototype.addQueryValueHandler=function(e,t,n){var i=this;e=e.toLowerCase(),this.commands.value[e]=function(){return t.call(n||i.editor)}},e.prototype.hasCustomCommand=function(e){return e=e.toLowerCase(),!!this.commands.exec[e]},e.prototype.execNativeCommand=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=null),this.editor.getDoc().execCommand(e,t,n)},e.prototype.isFormatMatch=function(e){return this.editor.formatter.match(e)},e.prototype.toggleFormat=function(e,t){this.editor.formatter.toggle(e,t?{value:t}:void 0),this.editor.nodeChanged()},e.prototype.storeSelection=function(e){this.selectionBookmark=this.editor.selection.getBookmark(e)},e.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},e.prototype.setupCommands=function(e){var t=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(n){var i,r=e.getDoc();try{t.execNativeCommand(n)}catch(e){i=!0}if("paste"!==n||r.queryCommandEnabled(n)||(i=!0),i||!r.queryCommandSupported(n)){var o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");ht.mac&&(o=o.replace(/Ctrl\+/g,"+")),e.notificationManager.open({text:o,type:"error"})}},unlink:function(){if(e.selection.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else e.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(n){var i=n.substring(7);"full"===i&&(i="justify"),T_("left,center,right,justify".split(","),(function(t){i!==t&&e.formatter.remove("align"+t)})),"none"!==i&&t.toggleFormat("align"+i)},"InsertUnorderedList,InsertOrderedList":function(n){var i;t.execNativeCommand(n);var r=e.dom.getParent(e.selection.getNode(),"ol,ul");r&&(i=r.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)&&(t.storeSelection(),e.dom.split(i,r),t.restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){t.toggleFormat(e)},"ForeColor,HiliteColor":function(e,n,i){t.toggleFormat(e,i)},FontName:function(t,n,i){!function(e,t){var n=k_(e,t);e.formatter.toggle("fontname",{value:__(n)}),e.nodeChanged()}(e,i)},FontSize:function(t,n,i){!function(e,t){e.formatter.toggle("fontsize",{value:k_(e,t)}),e.nodeChanged()}(e,i)},LineHeight:function(t,n,i){!function(e,t){e.undoManager.transact((function(){e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()}))}(e,i)},RemoveFormat:function(t){e.formatter.remove(t)},mceBlockQuote:function(){t.toggleFormat("blockquote")},FormatBlock:function(e,n,i){return t.toggleFormat(i||"p")},mceCleanup:function(){var t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},mceRemoveNode:function(n,i,r){var o=r||e.selection.getNode();o!==e.getBody()&&(t.storeSelection(),e.dom.remove(o,!0),t.restoreSelection())},mceSelectNodeDepth:function(t,n,i){var r=0;e.dom.getParent(e.selection.getNode(),(function(t){if(1===t.nodeType&&r++===i)return e.selection.select(t),!1}),e.getBody())},mceSelectNode:function(t,n,i){e.selection.select(i)},mceInsertContent:function(t,n,i){S_(e,i)},mceInsertRawHTML:function(t,n,i){e.selection.setContent("tiny_mce_marker");var r=e.getContent();e.setContent(r.replace(/tiny_mce_marker/g,(function(){return i})))},mceInsertNewLine:function(t,n,i){dk(e,i)},mceToggleFormat:function(e,n,i){t.toggleFormat(i)},mceSetContent:function(t,n,i){e.setContent(i)},"Indent,Outdent":function(t){Gw(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,n,i){e.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceInsertLink:function(t,n,i){"string"==typeof i&&(i={href:i});var r=e.dom.getParent(e.selection.getNode(),"a");i.href=i.href.replace(/ /g,"%20"),r&&i.href||e.formatter.remove("link"),i.href&&e.formatter.apply("link",i,r)},selectAll:function(){var t=e.dom.getParent(e.selection.getStart(),Pn);if(t){var n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,i){return ZC(e,i),!0}});var n=function(t){return function(){var n=e.selection,i=n.isCollapsed()?[e.dom.getParent(n.getNode(),e.dom.isBlock)]:n.getSelectedBlocks(),r=D_(i,(function(n){return!!e.formatter.matchNode(n,t)}));return-1!==M_(r,!0)}};t.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return t.isFormatMatch(e)},mceBlockQuote:function(){return t.isFormatMatch("blockquote")},Outdent:function(){return Xw(e)},"InsertUnorderedList,InsertOrderedList":function(t){var n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===t&&"UL"===n.tagName||"insertorderedlist"===t&&"OL"===n.tagName)}},"state"),t.addCommands({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}}),t.addQueryValueHandler("FontName",(function(){return function(e){return C_(e,(function(t){return w_(e.getBody(),t.dom)})).getOr("")}(e)}),this),t.addQueryValueHandler("FontSize",(function(){return function(e){return C_(e,(function(t){return b_(e.getBody(),t.dom)})).getOr("")}(e)}),this),t.addQueryValueHandler("LineHeight",(function(){return function(e){return C_(e,(function(t){var n=bt.fromDom(e.getBody()),i=m_(t,(function(e){return $n(e,"line-height")}),h(kt,n));return i.getOrThunk((function(){var e=parseFloat(Un(t,"line-height")),n=parseFloat(Un(t,"font-size"));return String(e/n)}))})).getOr("")}(e)}),this)},e}(),N_="data-mce-contenteditable",A_=function(e,t,n){var i,r;xs(e,t)&&!1===n?(r=t,gs(i=e)?i.dom.classList.remove(r):ys(i,r),ws(i)):n&&bs(e,t)},P_=function(e,t,n){try{e.getDoc().execCommand(t,!1,String(n))}catch(e){}},L_=function(e,t){e.dom.contentEditable=t?"true":"false"},O_=function(e,t){var n=bt.fromDom(e.getBody());A_(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),function(e){x.from(e.selection.getNode()).each((function(e){e.removeAttribute("data-mce-selected")}))}(e),e.readonly=!0,L_(n,!1),W(ks(n,'*[contenteditable="true"]'),(function(e){zn(e,N_,"true"),L_(e,!1)}))):(e.readonly=!1,L_(n,!0),function(e){W(ks(e,"*["+N_+'="true"]'),(function(e){Wn(e,N_),L_(e,!0)}))}(n),P_(e,"StyleWithCSS",!1),P_(e,"enableInlineTableEditing",!1),P_(e,"enableObjectResizing",!1),nh(e)&&e.focus(),function(e){e.selection.setRng(e.selection.getRng())}(e),e.nodeChanged())},I_=function(e){return e.readonly},R_=function(e){e.parser.addAttributeFilter("contenteditable",(function(t){I_(e)&&W(t,(function(e){e.attr(N_,e.attr("contenteditable")),e.attr("contenteditable","false")}))})),e.serializer.addAttributeFilter(N_,(function(t){I_(e)&&W(t,(function(e){e.attr("contenteditable",e.attr(N_))}))})),e.serializer.addTempAttr(N_)},B_=vt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),z_=function(){function e(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||g}return e.isNative=function(e){return!!B_[e.toLowerCase()]},e.prototype.fire=function(e,t){var n=e.toLowerCase(),i=t||{};i.type=n,i.target||(i.target=this.scope),i.preventDefault||(i.preventDefault=function(){i.isDefaultPrevented=v},i.stopPropagation=function(){i.isPropagationStopped=v},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=v},i.isDefaultPrevented=g,i.isPropagationStopped=g,i.isImmediatePropagationStopped=g),this.settings.beforeFire&&this.settings.beforeFire(i);var r=this.bindings[n];if(r)for(var o=0,a=r.length;o<a;o++){var s=r[o];if(s.once&&this.off(n,s.func),i.isImmediatePropagationStopped())return i.stopPropagation(),i;if(!1===s.func.call(this.scope,i))return i.preventDefault(),i}return i},e.prototype.on=function(e,t,n,i){if(!1===t&&(t=g),t){var r={func:t};i&&vt.extend(r,i);for(var o=e.toLowerCase().split(" "),a=o.length;a--;){var s=o[a],l=this.bindings[s];l||(l=this.bindings[s]=[],this.toggleEvent(s,!0)),n?l.unshift(r):l.push(r)}}return this},e.prototype.off=function(e,t){var n=this;if(e)for(var i=e.toLowerCase().split(" "),r=i.length;r--;){var o=i[r],a=this.bindings[o];if(!o)return ie(this.bindings,(function(e,t){n.toggleEvent(t,!1),delete n.bindings[t]})),this;if(a){if(t)for(var s=a.length;s--;)a[s].func===t&&(a=a.slice(0,s).concat(a.slice(s+1)),this.bindings[o]=a);else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[o])}}else ie(this.bindings,(function(e,t){n.toggleEvent(t,!1)})),this.bindings={};return this},e.prototype.once=function(e,t,n){return this.on(e,t,n,{once:!0})},e.prototype.has=function(e){return e=e.toLowerCase(),!(!this.bindings[e]||0===this.bindings[e].length)},e}(),F_=function(e){return e._eventDispatcher||(e._eventDispatcher=new z_({scope:e,toggleEvent:function(t,n){z_.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},H_={fire:function(e,t,n){var i=this;if(i.removed&&"remove"!==e&&"detach"!==e)return t;var r=F_(i).fire(e,t);if(!1!==n&&i.parent)for(var o=i.parent();o&&!r.isPropagationStopped();)o.fire(e,r,!1),o=o.parent();return r},on:function(e,t,n){return F_(this).on(e,t,n)},off:function(e,t){return F_(this).off(e,t)},once:function(e,t){return F_(this).once(e,t)},hasEventListeners:function(e){return F_(this).has(e)}},W_=ts.DOM,j_=function(e,t){if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;var n=ou(e);return n?(e.eventRoot||(e.eventRoot=W_.select(n)[0]),e.eventRoot):e.getBody()},U_=function(e,t,n){!function(e){return!e.hidden&&!I_(e)}(e)?I_(e)&&function(e,t){var n=t.target;(function(e){return"click"===e.type})(t)&&!zd.metaKeyPressed(t)&&function(e,t){return null!==e.dom.getParent(t,"a")}(e,n)&&t.preventDefault()}(e,n):e.fire(t,n)},V_=function(e,t){var n;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed){var i=j_(e,t);if(ou(e)){if(Cx||(Cx={},e.editorManager.on("removeEditor",(function(){e.editorManager.activeEditor||Cx&&(ie(Cx,(function(t,n){e.dom.unbind(j_(e,n))})),Cx=null)}))),Cx[t])return;n=function(n){for(var i=n.target,r=e.editorManager.get(),o=r.length;o--;){var a=r[o].getBody();(a===i||W_.isChildOf(i,a))&&U_(r[o],t,n)}},Cx[t]=n,W_.bind(i,t,n)}else n=function(n){U_(e,t,n)},W_.bind(i,t,n),e.delegates[t]=n}},$_=xe(xe({},H_),{bindPendingEventDelegates:function(){var e=this;vt.each(e._pendingNativeEvents,(function(t){V_(e,t)}))},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?V_(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(j_(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e=this,t=e.getBody(),n=e.dom;e.delegates&&(ie(e.delegates,(function(t,n){e.dom.unbind(j_(e,n),n,t)})),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}}),q_=["design","readonly"],X_=function(e,t,n,i){var r=n[t.get()],o=n[i];try{o.activate()}catch(e){return void console.error("problem while activating editor mode "+i+":",e)}r.deactivate(),r.editorReadOnly!==o.editorReadOnly&&O_(e,o.editorReadOnly),t.set(i),function(e,t){e.fire("SwitchMode",{mode:t})}(e,i)},Y_=function(e){var t=as("design"),n=as({design:{activate:u,deactivate:u,editorReadOnly:!1},readonly:{activate:u,deactivate:u,editorReadOnly:!0}});return function(e){e.serializer?R_(e):e.on("PreInit",(function(){R_(e)}))}(e),function(e){e.on("ShowCaret",(function(t){I_(e)&&t.preventDefault()})),e.on("ObjectSelected",(function(t){I_(e)&&t.preventDefault()}))}(e),{isReadOnly:function(){return I_(e)},set:function(i){return function(e,t,n,i){if(i!==n.get()){if(!fe(t,i))throw new Error("Editor mode '"+i+"' is invalid");e.initialized?X_(e,n,t,i):e.on("init",(function(){return X_(e,n,t,i)}))}}(e,n.get(),t,i)},get:function(){return t.get()},register:function(e,t){n.set(function(e,t,n){var i;if(z(q_,t))throw new Error("Cannot override default mode "+t);return xe(xe({},e),((i={})[t]=xe(xe({},n),{deactivate:function(){try{n.deactivate()}catch(e){console.error("problem while deactivating editor mode "+t+":",e)}}}),i))}(n.get(),e,t))}}},K_=vt.each,G_=vt.explode,J_={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Z_=vt.makeMap("alt,ctrl,shift,meta,access"),Q_=function(){function e(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;var t=this;e.on("keyup keypress keydown",(function(e){!t.hasModifier(e)&&!t.isFunctionKey(e)||e.isDefaultPrevented()||(K_(t.shortcuts,(function(n){if(t.matchShortcut(e,n))return t.pendingPatterns=n.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(n),!0})),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))}))}return e.prototype.add=function(e,t,n,i){var r=this,o=r.normalizeCommandFunc(n);return K_(G_(vt.trim(e)),(function(e){var n=r.createShortcut(e,t,o,i);r.shortcuts[n.id]=n})),!0},e.prototype.remove=function(e){var t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)},e.prototype.normalizeCommandFunc=function(e){var t=this,n=e;return"string"==typeof n?function(){t.editor.execCommand(n,!1,null)}:vt.isArray(n)?function(){t.editor.execCommand(n[0],n[1],n[2])}:n},e.prototype.parseShortcut=function(e){var t,n={};K_(G_(e.toLowerCase(),"+"),(function(e){e in Z_?n[e]=!0:/^[0-9]{2,}$/.test(e)?n.keyCode=parseInt(e,10):(n.charCode=e.charCodeAt(0),n.keyCode=J_[e]||e.toUpperCase().charCodeAt(0))}));var i=[n.keyCode];for(t in Z_)n[t]?i.push(t):n[t]=!1;return n.id=i.join(","),n.access&&(n.alt=!0,ht.mac?n.ctrl=!0:n.shift=!0),n.meta&&(ht.mac?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n},e.prototype.createShortcut=function(e,t,n,i){var r=vt.map(G_(e,">"),this.parseShortcut);return r[r.length-1]=vt.extend(r[r.length-1],{func:n,scope:i||this.editor}),vt.extend(r[0],{desc:this.editor.translate(t),subpatterns:r.slice(1)})},e.prototype.hasModifier=function(e){return e.altKey||e.ctrlKey||e.metaKey},e.prototype.isFunctionKey=function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123},e.prototype.matchShortcut=function(e,t){return!!t&&(t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&(t.alt===e.altKey&&t.shift===e.shiftKey&&(!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0))))},e.prototype.executeShortcutAction=function(e){return e.func?e.func.call(e.scope):null},e}(),eS=function(){var e=function(){var e={},t={},n={},i={},r={},o={},a={},s=function(e,t){return function(n,i){return e[n.toLowerCase()]=xe(xe({},i),{type:t})}};return{addButton:s(e,"button"),addGroupToolbarButton:s(e,"grouptoolbarbutton"),addToggleButton:s(e,"togglebutton"),addMenuButton:s(e,"menubutton"),addSplitButton:s(e,"splitbutton"),addMenuItem:s(t,"menuitem"),addNestedMenuItem:s(t,"nestedmenuitem"),addToggleMenuItem:s(t,"togglemenuitem"),addAutocompleter:s(n,"autocompleter"),addContextMenu:s(r,"contextmenu"),addContextToolbar:s(o,"contexttoolbar"),addContextForm:s(o,"contextform"),addSidebar:s(a,"sidebar"),addIcon:function(e,t){return i[e.toLowerCase()]=t},getAll:function(){return{buttons:e,menuItems:t,icons:i,popups:n,contextMenus:r,contextToolbars:o,sidebars:a}}}}();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},tS=vt.each,nS=vt.trim,iS="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),rS={ftp:21,http:80,https:443,mailto:25},oS=function(){function e(t,n){t=nS(t),this.settings=n||{};var i=this.settings.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))r.source=t;else{var o=0===t.indexOf("//");if(0!==t.indexOf("/")||o||(t=(i&&i.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){var a=this.settings.base_uri?this.settings.base_uri.path:new e(document.location.href).directory;if(this.settings.base_uri&&""==this.settings.base_uri.protocol)t="//mce_host"+r.toAbsPath(a,t);else{var s=/([^#?]*)([#?]?.*)/.exec(t);t=(i&&i.protocol||"http")+"://mce_host"+r.toAbsPath(a,s[1])+s[2]}}t=t.replace(/@@/g,"(mce_at)");var l=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);tS(iS,(function(e,t){var n=l[t];n&&(n=n.replace(/\(mce_at\)/g,"@@")),r[e]=n})),i&&(r.protocol||(r.protocol=i.protocol),r.userInfo||(r.userInfo=i.userInfo),r.port||"mce_host"!==r.host||(r.port=i.port),r.host&&"mce_host"!==r.host||(r.host=i.host),r.source=""),o&&(r.protocol="")}}return e.parseDataUri=function(e){var t,n=decodeURIComponent(e).split(","),i=/data:([^;]+)/.exec(n[0]);return i&&(t=i[1]),{type:t,data:n[1]}},e.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t},e.prototype.setPath=function(e){var t=/^(.*?)\/?(\w+)?$/.exec(e);this.path=t[0],this.directory=t[1],this.file=t[2],this.source="",this.getURI()},e.prototype.toRelative=function(t){var n;if("./"===t)return t;var i=new e(t,{base_uri:this});if("mce_host"!==i.host&&this.host!==i.host&&i.host||this.port!==i.port||this.protocol!==i.protocol&&""!==i.protocol)return i.getURI();var r=this.getURI(),o=i.getURI();return r===o||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===o?r:(n=this.toRelPath(this.path,i.path),i.query&&(n+="?"+i.query),i.anchor&&(n+="#"+i.anchor),n)},e.prototype.toAbsolute=function(t,n){var i=new e(t,{base_uri:this});return i.getURI(n&&this.isSameOrigin(i))},e.prototype.isSameOrigin=function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=rS[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},e.prototype.toRelPath=function(e,t){var n,i,r=0,o="",a=e.substring(0,e.lastIndexOf("/")).split("/"),s=t.split("/");if(a.length>=s.length)for(n=0,i=a.length;n<i;n++)if(n>=s.length||a[n]!==s[n]){r=n+1;break}if(a.length<s.length)for(n=0,i=s.length;n<i;n++)if(n>=a.length||a[n]!==s[n]){r=n+1;break}if(1===r)return t;for(n=0,i=a.length-(r-1);n<i;n++)o+="../";for(n=r-1,i=s.length;n<i;n++)o+=n!==r-1?"/"+s[n]:s[n];return o},e.prototype.toAbsPath=function(e,t){var n,i,r=0,o=[],a=/\/$/.test(t)?"/":"",s=e.split("/"),l=t.split("/");for(tS(s,(function(e){e&&o.push(e)})),s=o,n=l.length-1,o=[];n>=0;n--)0!==l[n].length&&"."!==l[n]&&(".."!==l[n]?r>0?r--:o.push(l[n]):r++);return 0!==(i=(n=s.length-r)<=0?G(o).join("/"):s.slice(0,n).join("/")+"/"+G(o).join("/")).indexOf("/")&&(i="/"+i),a&&i.lastIndexOf("/")!==i.length-1&&(i+=a),i},e.prototype.getURI=function(e){var t;return void 0===e&&(e=!1),this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source},e}(),aS=ts.DOM,sS=vt.extend,lS=vt.each,uS=vt.resolve,cS=ht.ie,dS=function(){function e(e,t,n){var i=this;this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,sS(this,$_),this.settings=hy(this,e,this.documentBaseUrl,n.defaultSettings,t),this.settings.suffix&&(n.suffix=this.settings.suffix),this.suffix=n.suffix,this.settings.base_url&&n._setBaseUrl(this.settings.base_url),this.baseUri=n.baseURI,this.settings.referrer_policy&&(os.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),ts.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),fs.languageLoad=this.settings.language_load,fs.baseURL=n.baseURL,this.id=e,this.setDirty(!1),this.documentBaseURI=new oS(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new Q_(this),this.editorCommands=new E_(this),this.settings.cache_suffix&&(ht.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:eS(),styleSheetLoader:void 0,show:u,hide:u};var r=Y_(this);this.mode=r,this.setMode=r.set,n.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=Xa.overrideDefaults((function(){return{context:i.inline?i.getBody():i.getDoc(),element:i.getBody()}}))}return e.prototype.render=function(){h_(this)},e.prototype.focus=function(e){rh(this,e)},e.prototype.hasFocus=function(){return th(this)},e.prototype.execCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i,r=this,o=r.settings[e];if(o)return r.callbackLookup&&(i=r.callbackLookup[e])&&(o=i.func,i=i.scope),"string"==typeof o&&(i=(i=o.replace(/\.\w+$/,""))?uS(i):0,o=uS(o),r.callbackLookup=r.callbackLookup||{},r.callbackLookup[e]={func:o,scope:i}),o.apply(i||r,t)},e.prototype.translate=function(e){return cs.translate(e)},e.prototype.getParam=function(e,t,n){return my(this,e,t,n)},e.prototype.hasPlugin=function(e,t){return!!z(cu(this).split(/[ ,]/),e)&&(!t||void 0!==Ty.get(e))},e.prototype.nodeChanged=function(e){this._nodeChangeDispatcher.nodeChanged(e)},e.prototype.addCommand=function(e,t,n){this.editorCommands.addCommand(e,t,n)},e.prototype.addQueryStateHandler=function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},e.prototype.addQueryValueHandler=function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},e.prototype.addShortcut=function(e,t,n,i){this.shortcuts.add(e,t,n,i)},e.prototype.execCommand=function(e,t,n,i){return this.editorCommands.execCommand(e,t,n,i)},e.prototype.queryCommandState=function(e){return this.editorCommands.queryCommandState(e)},e.prototype.queryCommandValue=function(e){return this.editorCommands.queryCommandValue(e)},e.prototype.queryCommandSupported=function(e){return this.editorCommands.queryCommandSupported(e)},e.prototype.show=function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(aS.show(e.getContainer()),aS.hide(e.id)),e.load(),e.fire("show"))},e.prototype.hide=function(){var e=this,t=e.getDoc();e.hidden||(cS&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(aS.hide(e.getContainer()),aS.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},e.prototype.isHidden=function(){return!!this.hidden},e.prototype.setProgressState=function(e,t){this.fire("ProgressState",{state:e,time:t})},e.prototype.load=function(e){var t,n=this,i=n.getElement();if(n.removed)return"";if(i){(e=e||{}).load=!0;var r=Sn(i)?i.value:i.innerHTML;return t=n.setContent(r,e),e.element=i,e.no_events||n.fire("LoadContent",e),e.element=i=null,t}},e.prototype.save=function(e){var t,n,i=this,r=i.getElement();if(r&&i.initialized&&!i.removed)return(e=e||{}).save=!0,e.element=r,e.content=i.getContent(e),e.no_events||i.fire("SaveContent",e),"raw"===e.format&&i.fire("RawSaveContent",e),t=e.content,Sn(r)?r.value=t:(!e.is_removing&&i.inline||(r.innerHTML=t),(n=aS.getParent(i.id,"form"))&&lS(n.elements,(function(e){if(e.name===i.id)return e.value=t,!1}))),e.element=r=null,!1!==e.set_dirty&&i.setDirty(!1),t},e.prototype.setContent=function(e,t){return qv(this,e,t)},e.prototype.getContent=function(e){return $v(this,e)},e.prototype.insertContent=function(e,t){t&&(e=sS({content:e},t)),this.execCommand("mceInsertContent",!1,e)},e.prototype.resetContent=function(e){void 0===e?qv(this,this.startContent,{format:"raw"}):qv(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},e.prototype.isDirty=function(){return!this.isNotDirty},e.prototype.setDirty=function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},e.prototype.getContainer=function(){var e=this;return e.container||(e.container=aS.get(e.editorContainer||e.id+"_parent")),e.container},e.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},e.prototype.getElement=function(){return this.targetElm||(this.targetElm=aS.get(this.id)),this.targetElm},e.prototype.getWin=function(){var e,t=this;return t.contentWindow||(e=t.iframeElement)&&(t.contentWindow=e.contentWindow),t.contentWindow},e.prototype.getDoc=function(){var e,t=this;return t.contentDocument||(e=t.getWin())&&(t.contentDocument=e.document),t.contentDocument},e.prototype.getBody=function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},e.prototype.convertURL=function(e,t,n){var i=this,r=i.settings;return r.urlconverter_callback?i.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?i.documentBaseURI.toRelative(e):e=i.documentBaseURI.toAbsolute(e,r.remove_script_host)},e.prototype.addVisual=function(e){var t,n=this,i=n.settings,r=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=i.visual),lS(r.select("table,a",e),(function(e){var o;switch(e.nodeName){case"TABLE":return t=i.visual_table_class||"mce-item-table",void((o=r.getAttrib(e,"border"))&&"0"!==o||!n.hasVisual?r.removeClass(e,t):r.addClass(e,t));case"A":return void(r.getAttrib(e,"href")||(o=r.getAttrib(e,"name")||e.id,t=i.visual_anchor_class||"mce-item-anchor",o&&n.hasVisual?r.addClass(e,t):r.removeClass(e,t)))}})),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},e.prototype.remove=function(){Kv(this)},e.prototype.destroy=function(e){Gv(this,e)},e.prototype.uploadImages=function(e){return this.editorUpload.uploadImages(e)},e.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},e.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},e.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},e.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},e.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},e}(),fS=ts.DOM,hS=vt.explode,pS=vt.each,mS=vt.extend,gS=0,vS=!1,yS=[],bS=[],wS=function(e){var t=e.type;pS(_S.get(),(function(n){switch(t){case"scroll":n.fire("ScrollWindow",e);break;case"resize":n.fire("ResizeWindow",e)}}))},xS=function(e){e!==vS&&(e?Xa(window).on("resize scroll",wS):Xa(window).off("resize scroll",wS),vS=e)},CS=function(e){var t=bS;delete yS[e.id];for(var n=0;n<yS.length;n++)if(yS[n]===e){yS.splice(n,1);break}return bS=U(bS,(function(t){return e!==t})),_S.activeEditor===e&&(_S.activeEditor=bS.length>0?bS[0]:null),_S.focusedEditor===e&&(_S.focusedEditor=null),t.length!==bS.length},kS="CSS1Compat"!==document.compatMode,_S=xe(xe({},H_),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:Xa,majorVersion:"5",minorVersion:"5.1",releaseDate:"2020-10-01",editors:yS,i18n:cs,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var e,t,n=this,i="";t=oS.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/"));var r,o=window.tinymce||window.tinyMCEPreInit;if(o)e=o.base||o.baseURL,i=o.suffix;else{for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var l;if(""!==(l=a[s].src||"")){var u=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==u.indexOf(".min")&&(i=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}}if(!e&&document.currentScript)-1!==(l=document.currentScript.src).indexOf(".min")&&(i=".min"),e=l.substring(0,l.lastIndexOf("/"))}n.baseURL=new oS(t).toAbsolute(e),n.documentBaseURL=t,n.baseURI=new oS(n.baseURL),n.suffix=i,(r=n).on("AddEditor",h(Kf,r)),r.on("RemoveEditor",h(Gf,r))},overrideDefaults:function(e){var t=e.base_url;t&&this._setBaseUrl(t);var n=e.suffix;e.suffix&&(this.suffix=n),this.defaultSettings=e;var i=e.plugin_base_urls;void 0!==i&&ie(i,(function(e,t){fs.PluginManager.urls[t]=e}))},init:function(e){var t,n=this,i=vt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),r=function(e){var t=e.id;return t||(t=de(e,"name").filter((function(e){return!fS.get(e)})).getOrThunk(fS.uniqueId),e.setAttribute("id",t)),t},o=function(e,t){return t.constructor===RegExp?t.test(e.className):fS.hasClass(e,t)},a=function(e){t=e};return n.settings=e,fS.bind(window,"ready",(function t(){var s,l=0,u=[],c=function(e,t,i){var r=new dS(e,t,n);u.push(r),r.on("init",(function(){++l===s.length&&a(u)})),r.targetElm=r.targetElm||i,r.render()};fS.unbind(window,"ready",t),function(t){var i=e[t];if(i)i.apply(n,Array.prototype.slice.call(arguments,2))}("onpageload"),s=Xa.unique(function(e){var t=[];if(ht.browser.isIE()&&ht.browser.version.major<11)return Oy("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(kS)return Oy("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(e.types)return pS(e.types,(function(e){t=t.concat(fS.select(e.selector))})),t;if(e.selector)return fS.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":var n=e.elements||"";n.length>0&&pS(hS(n),(function(e){var n=fS.get(e);n?t.push(n):pS(document.forms,(function(n){pS(n.elements,(function(n){n.name===e&&(e="mce_editor_"+gS++,fS.setAttrib(n,"id",e),t.push(n))}))}))}));break;case"textareas":case"specific_textareas":pS(fS.select("textarea"),(function(n){e.editor_deselector&&o(n,e.editor_deselector)||e.editor_selector&&!o(n,e.editor_selector)||t.push(n)}))}return t}(e)),e.types?pS(e.types,(function(t){vt.each(s,(function(n){return!fS.is(n,t.selector)||(c(r(n),mS({},e,t),n),!1)}))})):(vt.each(s,(function(e){var t;(t=n.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(CS(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null)})),0===(s=vt.grep(s,(function(e){return!n.get(e.id)}))).length?a([]):pS(s,(function(t){!function(e,t){return e.inline&&t.tagName.toLowerCase()in i}(e,t)?c(r(t),e,t):Oy("Could not initialize inline editor on invalid inline target element",t)})))})),new bi((function(e){t?e(t):a=function(t){e(t)}}))},get:function(e){return 0===arguments.length?bS.slice(0):S(e)?q(bS,(function(t){return t.id===e})).getOr(null):L(e)&&bS[e]?bS[e]:null},add:function(e){var t=this;return yS[e.id]===e||(null===t.get(e.id)&&("length"!==e.id&&(yS[e.id]=e),yS.push(e),bS.push(e)),xS(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),kx||(kx=function(e){var n=t.fire("BeforeUnload");if(n.returnValue)return e.preventDefault(),e.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",kx))),e},createEditor:function(e,t){return this.add(new dS(e,t,this))},remove:function(e){var t,n,i=this;if(e){if(!S(e))return n=e,M(i.get(n.id))?null:(CS(n)&&i.fire("RemoveEditor",{editor:n}),0===bS.length&&window.removeEventListener("beforeunload",kx),n.remove(),xS(bS.length>0),n);pS(fS.select(e),(function(e){(n=i.get(e.id))&&i.remove(n)}))}else for(t=bS.length-1;t>=0;t--)i.remove(bS[t])},execCommand:function(e,t,n){var i=this,r=i.get(n);switch(e){case"mceAddEditor":return i.get(n)||new dS(n,i.settings,i).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?(r.isHidden()?r.show():r.hide(),!0):(i.execCommand("mceAddEditor",0,n),!0)}return!!i.activeEditor&&i.activeEditor.execCommand(e,t,n)},triggerSave:function(){pS(bS,(function(e){e.save()}))},addI18n:function(e,t){cs.add(e,t)},translate:function(e){return cs.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl:function(e){this.baseURL=new oS(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new oS(this.baseURL)}});_S.setup();var SS,TS,DS,MS,ES=Math.min,NS=Math.max,AS=Math.round,PS=function(e,t,n){var i=t.x,r=t.y,o=e.w,a=e.h,s=t.w,l=t.h,u=(n||"").split("");return"b"===u[0]&&(r+=l),"r"===u[1]&&(i+=s),"c"===u[0]&&(r+=AS(l/2)),"c"===u[1]&&(i+=AS(s/2)),"b"===u[3]&&(r-=a),"r"===u[4]&&(i-=o),"c"===u[3]&&(r-=AS(a/2)),"c"===u[4]&&(i-=AS(o/2)),LS(i,r,o,a)},LS=function(e,t,n,i){return{x:e,y:t,w:n,h:i}},OS={inflate:function(e,t,n){return LS(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:PS,findBestRelativePosition:function(e,t,n,i){var r,o;for(o=0;o<i.length;o++)if((r=PS(e,t,i[o])).x>=n.x&&r.x+r.w<=n.w+n.x&&r.y>=n.y&&r.y+r.h<=n.h+n.y)return i[o];return null},intersect:function(e,t){var n=NS(e.x,t.x),i=NS(e.y,t.y),r=ES(e.x+e.w,t.x+t.w),o=ES(e.y+e.h,t.y+t.h);return r-n<0||o-i<0?null:LS(n,i,r-n,o-i)},clamp:function(e,t,n){var i=e.x,r=e.y,o=e.x+e.w,a=e.y+e.h,s=t.x+t.w,l=t.y+t.h,u=NS(0,t.x-i),c=NS(0,t.y-r),d=NS(0,o-s),f=NS(0,a-l);return i+=u,r+=c,n&&(o+=u,a+=c,i-=d,r-=f),LS(i,r,(o-=d)-i,(a-=f)-r)},create:LS,fromClientRect:function(e){return LS(e.left,e.top,e.width,e.height)}},IS=(SS={},TS={},{load:function(e,t){var n='Script at URL "'+t+'" failed to load',i='Script at URL "'+t+"\" did not call `tinymce.Resource.add('"+e+"', data)` within 1 second";if(void 0!==SS[e])return SS[e];var r=new bi((function(r,o){var a=function(e,t,n){void 0===n&&(n=1e3);var i=!1,r=null,o=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i||(i=!0,null!==r&&(clearTimeout(r),r=null),e.apply(null,t))}},a=o(e),s=o(t);return{start:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i||null!==r||(r=setTimeout((function(){return s.apply(null,e)}),n))},resolve:a,reject:s}}(r,o);TS[e]=a.resolve,os.ScriptLoader.loadScript(t,(function(){return a.start(i)}),(function(){return a.reject(n)}))}));return SS[e]=r,r},add:function(e,t){void 0!==TS[e]&&(TS[e](t),delete TS[e]),SS[e]=bi.resolve(t)}}),RS=vt.each,BS=vt.extend,zS=function(){};zS.extend=DS=function(e){var t=this.prototype,n=function(){var e,t,n,i=this;if(!MS&&(i.init&&i.init.apply(i,arguments),t=i.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(i,arguments)},i=function(){return this};MS=!0;var r=new this;return MS=!1,e.Mixins&&(RS(e.Mixins,(function(t){for(var n in t)"init"!==n&&(e[n]=t[n])})),t.Mixins&&(e.Mixins=t.Mixins.concat(e.Mixins))),e.Methods&&RS(e.Methods.split(","),(function(t){e[t]=i})),e.Properties&&RS(e.Properties.split(","),(function(t){var n="_"+t;e[t]=function(e){var t=this;return void 0!==e?(t[n]=e,t):t[n]}})),e.Statics&&RS(e.Statics,(function(e,t){n[t]=e})),e.Defaults&&t.Defaults&&(e.Defaults=BS({},t.Defaults,e.Defaults)),ie(e,(function(e,n){"function"==typeof e&&t[n]?r[n]=function(e,n){return function(){var i=this,r=i._super;i._super=t[e];var o=n.apply(i,arguments);return i._super=r,o}}(n,e):r[n]=e})),n.prototype=r,n.constructor=n,n.extend=DS,n};var FS,HS=Math.min,WS=Math.max,jS=Math.round,US={serialize:function(e){var t=JSON.stringify(e);return S(t)?t.replace(/[\u0080-\uFFFF]/g,(function(e){var t=e.charCodeAt(0).toString(16);return"\\u"+"0000".substring(t.length)+t})):t},parse:function(e){try{return JSON.parse(e)}catch(e){}}},VS={callbacks:{},count:0,send:function(e){var t=this,n=ts.DOM,i=void 0!==e.count?e.count:t.count,r="tinymce_jsonp_"+i;t.callbacks[i]=function(o){n.remove(r),delete t.callbacks[i],e.callback(o)},n.add(n.doc.body,"script",{id:r,src:e.url,type:"text/javascript"}),t.count++}},$S=xe(xe({},H_),{send:function(e){var t,n=0,i=function i(){!e.async||4===t.readyState||n++>1e4?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):ki.setTimeout(i,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",$S.fire("beforeInitialize",{settings:e}),(t=new XMLHttpRequest).overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&vt.each(e.requestheaders,(function(e){t.setRequestHeader(e.key,e.value)})),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=$S.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return i();ki.setTimeout(i,10)}}),qS=vt.extend,XS=function(){function e(e){this.settings=qS({},e),this.count=0}return e.sendRPC=function(t){return(new e).send(t)},e.prototype.send=function(e){var t=e.error,n=e.success,i=qS(this.settings,e);i.success=function(e,r){void 0===(e=US.parse(e))&&(e={error:"JSON Parse error."}),e.error?t.call(i.error_scope||i.scope,e.error,r):n.call(i.success_scope||i.scope,e.result)},i.error=function(e,n){t&&t.call(i.error_scope||i.scope,e,n)},i.data=US.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),i.content_type="application/json",$S.send(i)},e}();try{var YS="__storage_test__";(FS=window.localStorage).setItem(YS,YS),FS.removeItem(YS)}catch(e){FS=function(){var e={},t=[],n={getItem:function(t){return e[t]||null},setItem:function(n,i){t.push(n),e[n]=String(i)},key:function(e){return t[e]},removeItem:function(n){t=t.filter((function(e){return e===n})),delete e[n]},clear:function(){t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:function(){return t.length},configurable:!1,enumerable:!1}),n}()}var KS={geom:{Rect:OS},util:{Promise:bi,Delay:ki,Tools:vt,VK:zd,URI:oS,Class:zS,EventDispatcher:z_,Observable:H_,I18n:cs,XHR:$S,JSON:US,JSONRequest:XS,JSONP:VS,LocalStorage:FS,Color:function(e){var t={},i=0,r=0,o=0,a=function(e){var a;return"object"===n(e)?"r"in e?(i=e.r,r=e.g,o=e.b):"v"in e&&function(e,t,n){if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,n=parseInt(n,10)/100,t=WS(0,HS(t,1)),n=WS(0,HS(n,1)),0!==t){var a=e/60,s=n*t,l=s*(1-Math.abs(a%2-1)),u=n-s;switch(Math.floor(a)){case 0:i=s,r=l,o=0;break;case 1:i=l,r=s,o=0;break;case 2:i=0,r=s,o=l;break;case 3:i=0,r=l,o=s;break;case 4:i=l,r=0,o=s;break;case 5:i=s,r=0,o=l;break;default:i=r=o=0}i=jS(255*(i+u)),r=jS(255*(r+u)),o=jS(255*(o+u))}else i=r=o=jS(255*n)}(e.h,e.s,e.v):(a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(i=parseInt(a[1],10),r=parseInt(a[2],10),o=parseInt(a[3],10)):(a=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(i=parseInt(a[1],16),r=parseInt(a[2],16),o=parseInt(a[3],16)):(a=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(i=parseInt(a[1]+a[1],16),r=parseInt(a[2]+a[2],16),o=parseInt(a[3]+a[3],16)),i=i<0?0:i>255?255:i,r=r<0?0:r>255?255:r,o=o<0?0:o>255?255:o,t};return e&&a(e),t.toRgb=function(){return{r:i,g:r,b:o}},t.toHsv=function(){return function(e,t,n){var i,r;r=0;var o=HS(e/=255,HS(t/=255,n/=255)),a=WS(e,WS(t,n));return o===a?{h:0,s:0,v:100*(r=o)}:(i=(a-o)/a,r=a,{h:jS(60*((e===o?3:n===o?1:5)-(e===o?t-n:n===o?e-t:n-e)/(a-o))),s:jS(100*i),v:jS(100*r)})}(i,r,o)},t.toHex=function(){var e=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+e(i)+e(r)+e(o)},t.parse=a,t}},dom:{EventUtils:_o,Sizzle:sa,DomQuery:Xa,TreeWalker:Mi,TextSeeker:zs,DOMUtils:ts,ScriptLoader:os,RangeUtils:nf,Serializer:Vv,StyleSheetLoader:_i,ControlSelection:Hd,BookmarkManager:Id,Selection:bv,Event:_o.Event},html:{Styles:mo,Entities:zr,Node:ph,Schema:Kr,SaxParser:Ch,DomParser:Fv,Writer:gh,Serializer:vh},Env:ht,AddOnManager:fs,Annotator:Ld,Formatter:Gy,UndoManager:Jy,EditorCommands:E_,WindowManager:My,NotificationManager:Sy,EditorObservable:$_,Shortcuts:Q_,Editor:dS,FocusManager:Vf,EditorManager:_S,DOM:ts.DOM,ScriptLoader:os.ScriptLoader,PluginManager:Ty,ThemeManager:Dy,IconManager:gy,Resource:IS,trim:vt.trim,isArray:vt.isArray,is:vt.is,toArray:vt.toArray,makeMap:vt.makeMap,each:vt.each,map:vt.map,grep:vt.grep,inArray:vt.inArray,extend:vt.extend,create:vt.create,walk:vt.walk,createNS:vt.createNS,resolve:vt.resolve,explode:vt.explode,_addCacheSuffix:vt._addCacheSuffix,isOpera:ht.opera,isWebKit:ht.webkit,isIE:ht.ie,isGecko:ht.gecko,isMac:ht.mac},GS=vt.extend(_S,KS);!function(e){window.tinymce=e,window.tinyMCE=e}(GS),function(t){if("object"===(void 0===e?"undefined":n(e)))try{e.exports=t}catch(e){}}(GS)}()}).call(window)},72188:function(e,t,n){var i,r;(function(o){"use strict";i=[n(99927),n(20428),n(95891),n(45476),n(55039)],void 0===(r=function(e,t,n,i,r){return e.View.extend({tpl:n.template(r),events:{"click .js-dropdown-button":"clickOpenDropdown","click a":"analyticsLinkClick",keydown:"viewKeypress"},dropdownButton:".js-dropdown-button",menu:".dropdown-menu",initialize:function(e){e.parent&&(this.$parent=t(e.parent)),this.menuId=e.menuId||"dropdown-menu-"+this.cid,this.keyBack=[i.keyCodes.up,i.keyCodes.left],this.keyForward=[i.keyCodes.down,i.keyCodes.right],this.keyClose=[i.keyCodes.esc,i.keyCodes.space]},className:function(){return this.options.className},render:function(){return this.model.set({menuId:this.menuId}),this.$el.html(this.tpl(this.model.toJSON())),this.$parent.replaceWith(this.$el),this.postRender(),this},postRender:function(){this.$menu=this.$(".dropdown-menu"),this.$page=t(document),this.$dropdownButton=this.$(this.dropdownButton),this.$lastItem=this.$menu.find("li:last-child a")},analyticsLinkClick:function(e){return e},clickCloseDropdown:function(e,n){var i,r=t(e.target)||t(document);r.hasClass(this.dropdownButton)||(i=r.closest(this.dropdownButton)).length>0&&(r=i),r.hasClass("button-more")||r.hasClass("has-dropdown")||n.closeDropdownMenu()},clickOpenDropdown:function(e){e.preventDefault(),this.openMenu(this.$dropdownButton)},closeDropdownMenu:function(){this.$(this.menu).removeClass("is-visible").addClass("is-hidden"),this.$dropdownButton.removeClass("is-active").attr("aria-expanded","false")},focusFirstItem:function(){this.$menu.find(".dropdown-item:first-child .action").focus()},focusLastItem:function(){this.$lastItem.focus()},handlerIsAction:function(e,t){n.contains(this.keyForward,e)?this.nextMenuItemLink(t):n.contains(this.keyBack,e)&&this.previousMenuItemLink(t)},handlerIsButton:function(e,t){n.contains(this.keyForward,e)?this.focusFirstItem():(n.contains(this.keyBack,e)||e===i.keyCodes.tab&&t.shiftKey)&&(t.preventDefault(),this.focusLastItem())},handlerIsMenu:function(e){n.contains(this.keyForward,e)?this.focusFirstItem():n.contains(this.keyBack,e)&&this.$dropdownButton.focus()},handlerPageClicks:function(e){this.$page.off("click.dropdown"),this.$page.on("click.dropdown",(function(t){e.clickCloseDropdown(t,e)}))},nextMenuItemLink:function(e){var t=this.$(".dropdown-menu").children(".dropdown-item").find(".action"),n=t.length-1,i=t.index(e),r=i+1;i===n?this.$dropdownButton.focus():t.eq(r).focus()},openMenu:function(e){var t=this.$menu;t.hasClass("is-visible")?this.closeDropdownMenu():(e.addClass("is-active").attr("aria-expanded","true"),t.removeClass("is-hidden").addClass("is-visible"),t.focus(),this.setOrientation(),this.handlerPageClicks(this))},previousMenuItemLink:function(e){var t=this.$(".dropdown-menu").children(".dropdown-item").find(".action"),n=t.index(e),i=n-1;0===n?this.$dropdownButton.focus():t.eq(i).focus()},setOrientation:function(){var e=t(window).width()/2,n=this.$dropdownButton.offset().left>e?"align-right":"align-left";this.$menu.removeClass("align-left align-right").addClass(n)},viewKeypress:function(e){var r=e.keyCode,o=t(e.target);(n.contains(this.keyForward,r)||n.contains(this.keyBack,r))&&e.preventDefault(),r!==i.keyCodes.tab||e.shiftKey||n.first(o)!==n.first(this.$lastItem)?n.contains(this.keyClose,r)?(this.closeDropdownMenu(),this.$dropdownButton.focus()):o.hasClass("action")?this.handlerIsAction(r,o):o.hasClass("dropdown-menu")?this.handlerIsMenu(r):o.hasClass("has-dropdown")&&this.handlerIsButton(r,e):(e.preventDefault(),this.$dropdownButton.focus())}})}.apply(t,i))||(e.exports=r)}).call(this,n.amdD)},45476:function(e,t,n){var i;(function(n){"use strict";void 0===(i=function(){return{keys:{tab:"Tab",enter:"Enter",esc:"Escape",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown"},keyCodes:{tab:9,enter:13,esc:27,space:32,left:37,up:38,right:39,down:40}}}.apply(t,[]))||(e.exports=i)}).call(this,n.amdD)},23844:function(e,t,n){var i,r;(function(o){"use strict";i=[n(95891),n(20428),n(2648)],r=function(e,t,n){var i,r,o,a,s,l,u,c;function d(e){this.text=e}return d.prototype.valueOf=function(){return this.text},d.prototype.toString=function(){return this.text},o=function(t,i){var o=n.interpolate(r(t).toString(),e.mapObject(i,r));return s(o)},a=function(){var e,t="",n=arguments.length;for(e=0;e<n;e+=1)t+=r(arguments[e]);return s(t)},l=function(t,r){return function(o){var a=e.extend({HtmlUtils:i,StringUtils:n},o||{});return s(e.template(t,r)(a))}},u=function(e,n){return t(e).html(r(n).toString())},c=function(e,n){return t(e).prepend(r(n).toString())},i={append:function(e,n){return t(e).append(r(n).toString())},ensureHtml:r=function(t){return t instanceof d?t:s(e.escape(t))},HTML:s=function(e){return new d(e)},HtmlSnippet:d,interpolateHtml:o,joinHtml:a,prepend:c,setHtml:u,template:l}}.apply(t,i),void 0===r||(e.exports=r)}).call(this,n.amdD)},2648:function(e,t,n){var i;(function(n){"use strict";void 0===(i=function(){return{interpolate:function(e,t){return e.replace(/{\w+}/g,(function(e){var n=e.slice(1,-1);return String(t[n])}))}}}.apply(t,[]))||(e.exports=i)}).call(this,n.amdD)},18390:e=>{e.exports='<div class="wrapper-license">\n    <h3 class="label setting-label">\n        <%- gettext("License Type") %>\n    </h3>\n    <ul class="license-types">\n        <% var link_start_tpl = \'<a href="{url}" rel="noopener" target="_blank">\'; %>\n        <% _.each(licenseInfo, function(license, licenseType) { %>\n            <li class="license-type" data-license="<%- licenseType %>">\n                <button name="license-<%- licenseType %>"\n                        class="action license-button <% if(model.type === licenseType) { print("is-selected"); } %>"\n                        aria-pressed="<%- (model.type === licenseType).toString() %>"\n                        <% if (license.tooltip) { %>data-tooltip="<%- license.tooltip %>"<% } %>>\n                    <%- license.name %>\n                </button>\n                <p class="tip">\n                    <% if(license.url) { %>\n                        <a href="<%- license.url %>" rel="noopener" target="_blank">\n                            <%- gettext("Learn more about {license_name}")\n                                        .replace("{license_name}", license.name)\n                            %>\n                        </a>\n                    <% } else { %>\n                        &nbsp;\n                    <% } %>\n                </p>\n            </li>\n        <% }) %>\n    </ul>\n\n<% var license = licenseInfo[model.type]; %>\n<% if(license && !_.isEmpty(license.options)) { %>\n    <div class="wrapper-license-options">\n        <h4 class="label setting-label">\n            <%- gettext("Options for {license_name}").replace("{license_name}", license.name) %>\n        </h4>\n        <p class=\'tip tip-inline\'>\n            <%- gettext("The following options are available for the {license_name} license.")\n                        .replace("{license_name}", license.name) %>\n        </p>\n        <ul class="license-options">\n            <% _.each(license.option_order, function(optionKey) { %>\n                <% var optionInfo = license.options[optionKey]; %>\n                <% if (optionInfo.type == "boolean") { %>\n                    <% var optionSelected = model.options[optionKey]; %>\n                    <% var optionDisabled = optionInfo.disabled %>\n                    <li data-option="<%- optionKey %>"\n                        class="action-item license-option\n                               <% if (optionSelected) { print("is-selected"); } %>\n                               <% if (optionDisabled) { print("is-disabled"); } else { print("is-clickable"); } %>"\n                    >\n                        <input type="checkbox"\n                               id="<%- model.type %>-<%- optionKey %>"\n                               name="<%- model.type %>-<%- optionKey %>"\n                               aria-describedby="<%- optionKey %>-explanation"\n                               <% if(optionSelected) { print(\'checked="checked"\'); } %>\n                               <% if(optionDisabled) { print(\'disabled="disabled"\'); } %>\n                        />\n                        <label for="<%- model.type %>-<%- optionKey %>" class="option-name">\n                            <%- optionInfo.name %>\n                        </label>\n                        <div id="<%- optionKey %>-explanation" class="explanation">\n                            <%- optionInfo.help %>\n                        </div>\n                    </li>\n                <% } // could implement other types here %>\n            <% }) %>\n        </ul>\n    </div>\n<% } %>\n\n<% if (showPreview) { %>\n    <div class="wrapper-license-preview">\n        <h4 class="label setting-label">\n            <%- gettext("License Display") %>\n        </h4>\n        <p class="tip">\n            <%- gettext("The following message will be displayed at the bottom of the courseware pages within your course:") %>\n        </p>\n        <div class="license-preview">\n        <% // keep this synchronized with the contents of common/templates/license.html %>\n        <% if (model.type === "all-rights-reserved") { %>\n             <span class="license-text"><%- gettext("All Rights Reserved") %></span>\n        <% } else if (model.type === "creative-commons") {\n             var possible = ["by", "nc", "nd", "sa"];\n             var enabled = _.filter(possible, function(option) {\n                 return model.options[option] === true || model.options[option.toUpperCase()] === true;\n             });\n             var version = model.options.ver || "4.0";\n             if (_.isEmpty(enabled)) {\n                    enabled = ["zero"];\n                    version = model.options.ver || "1.0";\n             }\n        %>\n            <a rel="license" href="https://creativecommons.org/licenses/<%- enabled.join("-") %>/<%- version %>/">\n            <% if (previewButton) { %>\n                <img src="https://licensebuttons.net/l/<%- enabled.join("-") %>/<%- version %>/<%- typeof buttonSize == "string" ? buttonSize : "88x31" %>.png"\n                    alt="<%- typeof licenseString == "string" ? licenseString : "" %>"\n                    />\n            <% } else { %>\n\t        <% //<span> must come before <i> icon or else spacing gets messed up %>\n                <span class="sr"><%- gettext("Creative Commons licensed content, with terms as follow:") %>&nbsp;</span><span aria-hidden="true" class="icon-cc"></span>\n                <% _.each(enabled, function(option) { %>\n                        <span class="sr"><%- license.options[option.toUpperCase()].name %>&nbsp;</span><span aria-hidden="true" class="icon-cc-<%- option %>"></span>\n                <% }); %>\n                <span class="license-text"><%- gettext("Some Rights Reserved") %></span>\n            <% } %>\n        <% } else { %>\n            <%- typeof licenseString == "string" ? licenseString : "" %>\n            <% // Default to ARR license %>\n             <span class="license-text"><%- gettext("All Rights Reserved") %></span>\n        <% } %>\n        </a>\n    </div>\n<% } %>\n</div>\n'},33600:e=>{e.exports='<nav class="breadcrumbs" aria-label="Course Outline breadcrumb">\n    <% _.each(breadcrumbs.slice(0, -1), function (breadcrumb, index, items) { %>\n        <ol class="bc-container bc-<%- index %>">\n            <li class="bc-container-content">\n                <button class="parent-nav-button" data-parent-index="<%- index %>">\n                    <%- breadcrumb %>\n                </button>\n                <span class="fa fa-angle-right breadcrumb-fa-icon" aria-hidden="true"></span>\n            </li>\n        </ol>\n    <% }) %>\n    <ol class="bc-container bc-<%- breadcrumbs.length - 1 %> last">\n        <li class="bc-container-content">\n            <span class="parent-displayname"><%- breadcrumbs[breadcrumbs.length - 1] %></span>\n        </li>\n    </ol>\n</nav>\n'},95265:e=>{e.exports='<div class="xblock-items-category">\n    <span class="sr">\n        <%\n        // Translators: message will be like `Units in Homework - Question Styles`, `Subsections in Example 1 - Getting started` etc.\n        %>\n        <%- StringUtils.interpolate(\n                gettext("{categoryText} in {parentDisplayname}"),\n                {categoryText: categoryText, parentDisplayname: parentDisplayname}\n            )\n        %>\n    </span>\n    <span class="category-text" aria-hidden="true">\n        <%- categoryText %>:\n    </span>\n</div>\n<ul class="xblock-items-container" data-items-category="<%- XBlocksCategory %>">\n    <% for (var i = 0; i < xblocks.length; i++) {\n        var xblock = xblocks[i];\n    %>\n        <li class="xblock-item" data-item-index="<%- i %>">\n            <% if (sourceXBlockId !== xblock.id && (xblock.get(\'child_info\') || XBlocksCategory !== \'component\')) { %>\n                <button class="button-forward" >\n                    <span class="xblock-displayname truncate">\n                        <%- xblock.get(\'display_name\') %>\n                    </span>\n                    <% if(currentLocationIndex === i) { %>\n                        <span class="current-location">\n                            (<%- gettext(\'Current location\') %>)\n                        </span>\n                    <% } %>\n                    <span class="icon fa fa-arrow-right forward-sr-icon" aria-hidden="true"></span>\n                    <span class="sr forward-sr-text"><%- gettext("View child items") %></span>\n                </button>\n            <% } else { %>\n                <span class="component">\n                    <span class="xblock-displayname truncate">\n                        <%- xblock.get(\'display_name\') %>\n                    </span>\n                    <% if(currentLocationIndex === i) { %>\n                        <span class="current-location">\n                            (<%- gettext(\'Currently selected\') %>)\n                        </span>\n                    <% } %>\n                </span>\n            <% } %>\n        </li>\n    <% } %>\n    <% if(xblocks.length === 0) { %>\n        <span class="xblock-no-child-message">\n            <%- noChildText %>\n        </span>\n    <% } %>\n</ul>\n'},9170:e=>{e.exports='<div class="ui-loading">\n    <p>\n        <span class="spin">\n            <span class="icon fa fa-refresh" aria-hidden="true"></span>\n        </span>\n        <span class="copy"><%- gettext(\'Loading\') %></span>\n    </p>\n</div>\n<div class=\'breadcrumb-container is-hidden\'></div>\n<div class=\'xblock-list-container\'></div>\n'},79525:e=>{e.exports='<div class="meta-wrap">\n    <div class="meta">\n        <p><%= HtmlUtils.ensureHtml(messageHtml) %></p>\n    </div>\n    <nav class="pagination pagination-compact top" aria-label="Compact Pagination">\n        <ol>\n            <li class="nav-item previous"><a class="nav-link previous-page-link" href="#"><span class="icon fa fa-angle-left" aria-hidden="true"></span> <span class="nav-label"><%- gettext("Previous") %></span></a></li>\n            <li class="nav-item next"><a class="nav-link next-page-link" href="#"><span class="nav-label"><%- gettext("Next") %></span> <span class="icon fa fa-angle-right" aria-hidden="true"></span></a></li>\n        </ol>\n    </nav>\n</div>\n'},29065:e=>{e.exports='<nav class="pagination pagination-full bottom" aria-label="<%- paginationLabel %>">\n    <div class="nav-item previous"><button class="nav-link previous-page-link"><span class="icon fa fa-angle-left" aria-hidden="true"></span> <span class="nav-label"><%- gettext("Previous") %></span></button></div>\n    <div class="nav-item page">\n        <div class="pagination-form">\n            <label class="page-number-label" for="page-number-input"><%- interpolate(\n                    gettext("Page number out of %(total_pages)s"),\n                    {total_pages: total_pages},\n                    true\n                )%></label>\n            <input id="page-number-input" class="page-number-input" name="page-number" type="text" size="4" autocomplete="off" aria-describedby="page-number-input-helper"/>\n            <span class="sr field-helper" id="page-number-input-helper"><%- gettext("Enter the page number you\'d like to quickly navigate to.") %></span>\n        </div>\n\n        <span class="current-page"><%- current_page %></span>\n        <span class="sr">&nbsp;out of&nbsp;</span>\n        <span class="page-divider" aria-hidden="true">/</span>\n        <span class="total-pages"><%- total_pages %></span>\n    </div>\n    <div class="nav-item next"><button class="nav-link next-page-link"><span class="nav-label"><%- gettext("Next") %></span> <span class="icon fa fa-angle-right" aria-hidden="true"></span></button></div>\n</nav>\n'},86450:e=>{e.exports='<div class="wrapper wrapper-<%- type %> wrapper-<%- type %>-<%- intent %>\n            <% if(obj.shown) { %>is-shown<% } else { %>is-hiding<% } %>\n            <% if(_.contains([\'help\', \'mini\'], intent)) { %>wrapper-<%- type %>-status<% } %>"\n     id="<%- type %>-<%- intent %>"\n     aria-hidden="<% if(obj.shown) { %>false<% } else { %>true<% } %>"\n     aria-labelledby="<%- type %>-<%- intent %>-title"\n     tabindex="-1"\n     <% if (obj.message) { %>aria-describedby="<%- type %>-<%- intent %>-description" <% } %>\n     <% if (obj.actions) { %>role="dialog"<% } %>\n  >\n  <div class="<%- type %> <%- intent %> <% if(obj.actions) { %>has-actions<% } %>">\n    <% if(obj.icon) { %>\n      <% var iconClass = {"warning": "warning", "confirmation": "check", "error": "warning", "announcement": "bullhorn", "step-required": "exclamation-circle", "help": "question", "mini": "cog", "info": "info-circle"} %>\n      <span class="feedback-symbol fa fa-<%- iconClass[intent] %>" aria-hidden="true"></span>\n    <% } %>\n\n    <div class="copy">\n      <h2 class="title title-3" id="<%- type %>-<%- intent %>-title"><%- title %></h2>\n      <% if(obj.message) { %><p class="message" id="<%- type %>-<%- intent %>-description"><%- message %></p><% } %>\n    </div>\n\n    <% if(obj.actions) { %>\n    <nav class="nav-actions">\n      <ul>\n        <% if(actions.primary) { %>\n        <li class="nav-item">\n          <button class="action-primary <%- actions.primary.class %>"><%- actions.primary.text %></button>\n        </li>\n        <% } %>\n        <% if(actions.secondary) {\n             _.each(actions.secondary, function(secondary) { %>\n        <li class="nav-item">\n          <a class="action-secondary <%- secondary.class %>" tabindex="0"><%- secondary.text %></a>\n        </li>\n        <%   });\n           } %>\n      </ul>\n    </nav>\n    <% } %>\n\n    <% if(obj.closeIcon) { %>\n    <a href="#" rel="view" class="action action-close action-<%- type %>-close">\n      <span class="icon fa fa-times-circle" aria-hidden="true"></span>\n      <span class="label">close <%- type %></span>\n    </a>\n    <% } %>\n  </div>\n</div>\n'},55039:e=>{e.exports='module.exports = "<a href=\\"<%- main.url %>\\" class=\\"menu-title\\">\\n    <% if (main.screenreader_label) { %>\\n        <span class=\\"sr-only\\"><%- main.screenreader_label %> </span>\\n    <% } %>\\n    <% if (main.image) { %>\\n        <img class=\\"menu-image\\" src=\\"<%- main.image %>\\" alt=\\"\\">\\n    <% } %>\\n    <%- main.text %>\\n</a>\\n<button type=\\"button\\" class=\\"menu-button button-more has-dropdown js-dropdown-button <% if (!button.icon) { %>default-icon<% } %>\\" aria-haspopup=\\"true\\" aria-expanded=\\"false\\" aria-controls=\\"<%- menuId %>\\">\\n    <% if (button.icon) { %>\\n        <span class=\\"icon <%- button.icon %>\\" aria-hidden=\\"true\\"></span>\\n    <% } %>\\n    <span class=\\"sr-only\\"><%- button.label %></span>\\n</button>\\n<ul class=\\"dropdown-menu list-divided is-hidden\\" id=\\"<%- menuId %>\\" tabindex=\\"-1\\">\\n    <% _.each(items, function(item, index) { %>\\n        <li class=\\"dropdown-item item has-block-link\\">\\n            <a href=\\"<%- item.url %>\\" class=\\"action\\"><%- item.text %></a>\\n        </li>\\n    <% }); %>\\n</ul>\\n"'},81239:(e,t,n)=>{var i,r,o;o=function(){var e,t,n=document,i=n.getElementsByTagName("head")[0],r=!1,o="push",a="readyState",s="onreadystatechange",l={},u={},c={},d={};function f(e,t){for(var n=0,i=e.length;n<i;++n)if(!t(e[n]))return r;return 1}function h(e,t){f(e,(function(e){return t(e),1}))}function p(t,n,i){t=t[o]?t:[t];var r=n&&n.call,a=r?n:i,s=r?t.join(""):n,g=t.length;function v(e){return e.call?e():l[e]}function y(){if(! --g)for(var e in l[s]=1,a&&a(),c)f(e.split("|"),v)&&!h(c[e],v)&&(c[e]=[])}return setTimeout((function(){h(t,(function t(n,i){return null===n?y():(i||/^https?:\/\//.test(n)||!e||(n=-1===n.indexOf(".js")?e+n+".js":e+n),d[n]?(s&&(u[s]=1),2==d[n]?y():setTimeout((function(){t(n,!0)}),0)):(d[n]=1,s&&(u[s]=1),void m(n,y)))}))}),0),p}function m(e,r){var o,l=n.createElement("script");l.onload=l.onerror=l[s]=function(){l[a]&&!/^c|loade/.test(l[a])||o||(l.onload=l[s]=null,o=1,d[e]=2,r())},l.async=1,l.src=t?e+(-1===e.indexOf("?")?"?":"&")+t:e,i.insertBefore(l,i.lastChild)}return p.get=m,p.order=function(e,t,n){!function i(r){r=e.shift(),e.length?p(r,i):p(r,t,n)}()},p.path=function(t){e=t},p.urlArgs=function(e){t=e},p.ready=function(e,t,n){e=e[o]?e:[e];var i,r=[];return!h(e,(function(e){l[e]||r[o](e)}))&&f(e,(function(e){return l[e]}))?t():(i=e.join("|"),c[i]=c[i]||[],c[i][o](t),n&&n(r)),p},p.done=function(e){p([null],e)},p},e.exports?e.exports=o():void 0===(r="function"==typeof(i=o)?i.call(t,n,t,e):i)||(e.exports=r)},68575:(e,t,n)=>{var i,r,o=n(23844),a=n(20428);i=[n(39346),n(95891),n(18390)],r=function(e,t,n){var i={"all-rights-reserved":{name:gettext("All Rights Reserved"),tooltip:gettext("You reserve all rights for your work")},"creative-commons":{name:gettext("Creative Commons"),tooltip:gettext("You waive some rights for your work, such that others can use it too"),url:"https://creativecommons.org/about",options:{ver:{name:gettext("Version"),type:"string",default:"4.0"},BY:{name:gettext("Attribution"),type:"boolean",default:!0,help:gettext("Allow others to copy, distribute, display and perform your copyrighted work but only if they give credit the way you request. Currently, this option is required."),disabled:!0},NC:{name:gettext("Noncommercial"),type:"boolean",default:!0,help:gettext("Allow others to copy, distribute, display and perform your work - and derivative works based upon it - but for noncommercial purposes only.")},ND:{name:gettext("No Derivatives"),type:"boolean",default:!0,help:gettext('Allow others to copy, distribute, display and perform only verbatim copies of your work, not derivative works based upon it. This option is incompatible with "Share Alike".'),conflictsWith:["SA"]},SA:{name:gettext("Share Alike"),type:"boolean",default:!1,help:gettext('Allow others to distribute derivative works only under a license identical to the license that governs your work. This option is incompatible with "No Derivatives".'),conflictsWith:["ND"]}},option_order:["BY","NC","ND","SA"]}},r=e.extend({events:{"click ul.license-types li button":"onLicenseClick","click ul.license-options li":"onOptionClick"},initialize:function(e){this.licenseInfo=e.licenseInfo||i,this.showPreview=!!e.showPreview,this.listenTo(this.model,"change",this.render),this.render()},getDefaultOptionsForLicenseType:function(e){if(!this.licenseInfo[e])return{};if(!this.licenseInfo[e].options)return{};var n={};return t.each(this.licenseInfo[e].options,(function(e,t){n[t]=e.default})),n},render:function(){return o.setHtml(this.$el,o.template(n)({model:this.model.attributes,licenseString:this.model.toString()||"",licenseInfo:this.licenseInfo,showPreview:this.showPreview,previewButton:!1})),this},onLicenseClick:function(e){var t=a(e.srcElement||e.target).closest("li").data("license");t!=this.model.attributes.type&&(this.model.set({type:t,options:this.getDefaultOptionsForLicenseType(t)}),this.model.trigger("change change:type")),e.preventDefault()},onOptionClick:function(e){var t=this.model.get("type"),n=a.extend({},this.model.get("options")),i=a(e.srcElement||e.target).closest("li").data("option"),r=this.licenseInfo[t].options[i];if(!r.disabled){var o=n[i];if("boolean"===r.type&&(o=!o,n[i]=o),o&&r.conflictsWith)for(var s=r.conflictsWith,l=0;l<s.length;l++)n[s[l]]=!1,console.log(n);this.model.set({options:n}),this.model.trigger("change change:options"),e.preventDefault()}}});return r}.apply(t,i),void 0===r||(e.exports=r)},54974:(e,t,n)=>{var i,r;i=[n(20428),n(99927),n(95891),n(90165),n(39346),n(56155),n(76623),n(23844),n(2648),n(5452),n(19506),n(3332),n(39938),n(28411),n(9170)],void 0===(r=function(e,t,n,i,r,o,a,s,l,u,c,d,f,h,p){"use strict";return d.extend({events:n.extend({},d.prototype.events,{"click .action-move:not(.is-disabled)":"moveXBlock"}),options:e.extend({},d.prototype.options,{modalName:"move-xblock",modalSize:"lg",showEditorModeButtons:!1,addPrimaryActionButton:!0,primaryActionButtonType:"move",viewSpecificClasses:"move-modal",primaryActionButtonTitle:i("Move"),modalSRTitle:i("Choose a location to move your component to")}),initialize:function(){var n=this;d.prototype.initialize.call(this),this.sourceXBlockInfo=this.options.sourceXBlockInfo,this.sourceParentXBlockInfo=this.options.sourceParentXBlockInfo,this.targetParentXBlockInfo=null,this.XBlockURLRoot=this.options.XBlockURLRoot,this.XBlockAncestorInfoURL=l.interpolate("{urlRoot}/{usageId}?fields=ancestorInfo",{urlRoot:this.XBlockURLRoot,usageId:this.sourceXBlockInfo.get("id")}),this.outlineURL=this.options.outlineURL,this.options.title=this.getTitle(),this.fetchCourseOutline().done((function(t,i){e(".ui-loading").addClass("is-hidden"),e(".breadcrumb-container").removeClass("is-hidden"),n.renderViews(t,i)})),this.listenTo(t,"move:breadcrumbRendered",this.focusModal),this.listenTo(t,"move:enableMoveOperation",this.enableMoveOperation),this.listenTo(t,"move:hideMoveModal",this.hide)},getTitle:function(){return l.interpolate(i("Move: {displayName}"),{displayName:this.sourceXBlockInfo.get("display_name")})},getContentHtml:function(){return n.template(p)({})},show:function(){d.prototype.show.apply(this,[!1]),this.updateMoveState(!1),a.hideMovedNotification()},hide:function(){this.moveXBlockListView&&this.moveXBlockListView.remove(),this.moveXBlockBreadcrumbView&&this.moveXBlockBreadcrumbView.remove(),d.prototype.hide.apply(this),u.prototype.outFocus.apply(this)},resize:function(){},focusModal:function(){u.prototype.inFocus.apply(this,[this.options.modalWindowClass]),e(this.options.modalWindowClass).focus()},fetchCourseOutline:function(){return e.when(this.fetchData(this.outlineURL),this.fetchData(this.XBlockAncestorInfoURL))},fetchData:function(t){var n=e.Deferred();return e.ajax({url:t,contentType:"application/json",dataType:"json",type:"GET"}).done((function(e){n.resolve(e)})).fail((function(){n.reject()})),n.promise()},renderViews:function(e,t){this.moveXBlockBreadcrumbView=new h({}),this.moveXBlockListView=new f({model:new c(e,{parse:!0}),sourceXBlockInfo:this.sourceXBlockInfo,ancestorInfo:t})},updateMoveState:function(e){var t=this.$el.find(".action-move");e?t.removeClass("is-disabled"):t.addClass("is-disabled")},isValidCategory:function(e){var t=["course","chapter","sequential","vertical"],i=this.sourceParentXBlockInfo.get("category"),r=e.get("category"),o=this.sourceParentXBlockInfo.get("has_children"),a=e.get("has_children");return o&&!n.contains(t,i)&&(i="vertical"),a&&!n.contains(t,r)&&"split_test"!==r&&(r="vertical"),r===i},enableMoveOperation:function(e){var t=!1;this.targetParentXBlockInfo=e,this.isValidCategory(e)&&this.sourceParentXBlockInfo.id!==e.id&&this.sourceXBlockInfo.id!==e.id&&(t=!0),this.updateMoveState(t)},moveXBlock:function(){a.moveXBlock({sourceXBlockElement:e("li.studio-xblock-wrapper[data-locator='"+this.sourceXBlockInfo.id+"']"),sourceDisplayName:this.sourceXBlockInfo.get("display_name"),sourceLocator:this.sourceXBlockInfo.id,sourceParentLocator:this.sourceParentXBlockInfo.id,targetParentLocator:this.targetParentXBlockInfo.id})}})}.apply(t,i))||(e.exports=r)},28411:(e,t,n)=>{var i,r;i=[n(20428),n(99927),n(95891),n(90165),n(23844),n(2648),n(33600)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";return t.View.extend({el:".breadcrumb-container",events:{"click .parent-nav-button":"handleBreadcrumbButtonPress"},initialize:function(){this.template=r.template(a),this.listenTo(t,"move:childrenRendered",this.render)},render:function(e){return r.setHtml(this.$el,this.template(e)),t.trigger("move:breadcrumbRendered"),this},handleBreadcrumbButtonPress:function(n){t.trigger("move:breadcrumbButtonPressed",e(n.target).data("parentIndex"))}})}.apply(t,i))||(e.exports=r)},39938:(e,t,n)=>{var i,r;i=[n(20428),n(99927),n(95891),n(90165),n(23844),n(2648),n(56155),n(95265)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";return t.View.extend({el:".xblock-list-container",parentInfo:{},childrenInfo:{},visitedAncestors:null,categoryRelationMap:{course:"section",section:"subsection",subsection:"unit",unit:"component"},categoriesText:{section:i("Sections"),subsection:i("Subsections"),unit:i("Units"),component:i("Components"),group:i("Groups")},events:{"click .button-forward":"renderChildren"},initialize:function(e){this.visitedAncestors=[],this.template=r.template(s),this.sourceXBlockInfo=e.sourceXBlockInfo,this.ancestorInfo=e.ancestorInfo,this.listenTo(t,"move:breadcrumbButtonPressed",this.handleBreadcrumbButtonPress),this.renderXBlockInfo()},render:function(){return r.setHtml(this.$el,this.template({sourceXBlockId:this.sourceXBlockInfo.id,xblocks:this.childrenInfo.children,noChildText:this.getNoChildText(),categoryText:this.getCategoryText(),parentDisplayname:this.parentInfo.parent.get("display_name"),XBlocksCategory:this.childrenInfo.category,currentLocationIndex:this.getCurrentLocationIndex()})),t.trigger("move:childrenRendered",this.breadcrumbInfo()),t.trigger("move:enableMoveOperation",this.parentInfo.parent),this},renderChildren:function(t){this.renderXBlockInfo("forward",e(t.target).closest(".xblock-item").data("itemIndex"))},handleBreadcrumbButtonPress:function(e){this.renderXBlockInfo("backward",e)},renderXBlockInfo:function(e,t){void 0===e?this.parentInfo.parent=this.model:"forward"===e?this.parentInfo.parent=this.childrenInfo.children[t]:"backward"===e&&(this.parentInfo.parent=this.visitedAncestors[t],this.visitedAncestors.splice(t)),this.visitedAncestors.push(this.parentInfo.parent),this.parentInfo.parent.get("child_info")?this.childrenInfo.children=this.parentInfo.parent.get("child_info").children:this.childrenInfo.children=[],this.setDisplayedXBlocksCategories(),this.render()},setDisplayedXBlocksCategories:function(){var e="component";this.parentInfo.category=a.getXBlockType(this.parentInfo.parent.get("category")),n.contains(n.keys(this.categoryRelationMap),this.parentInfo.category)||("split_test"===this.parentInfo.category&&(e="group"),this.categoryRelationMap[this.parentInfo.category]=e),this.childrenInfo.category=this.categoryRelationMap[this.parentInfo.category]},getCurrentLocationIndex:function(){var e,t=this;return n.each(t.childrenInfo.children,(function(i,r){i.get("id")===t.sourceXBlockInfo.id?e=r:n.each(t.ancestorInfo.ancestors,(function(t){t.display_name===i.get("display_name")&&t.id===i.get("id")&&(e=r)}))})),e},getCategoryText:function(){return this.categoriesText[this.childrenInfo.category]},getNoChildText:function(){return o.interpolate(i("This {parentCategory} has no {childCategory}"),{parentCategory:this.parentInfo.category,childCategory:this.categoriesText[this.childrenInfo.category].toLowerCase()})},breadcrumbInfo:function(){return{breadcrumbs:n.map(this.visitedAncestors,(function(e){return"course"===e.get("category")?i("Course Outline"):e.get("display_name")}))}}})}.apply(t,i))||(e.exports=r)},21756:(e,t,n)=>{var i,r;i=[n(95891),n(99927),n(90165),n(23844),n(2648),n(79525)],void 0===(r=function(e,t,n,i,r,o){"use strict";return t.View.extend({events:{"click .next-page-link":"nextPage","click .previous-page-link":"previousPage"},initialize:function(t){var n=t.view,i=n.collection;this.view=n,i.bind("add",e.bind(this.render,this)),i.bind("remove",e.bind(this.render,this)),i.bind("reset",e.bind(this.render,this))},render:function(){var e=this.view.collection,t=e.getPageNumber(),n=e.getTotalPages(),r=this.messageHtml(),a=0===n||t===n;return i.setHtml(this.$el,i.template(o)({messageHtml:r})),this.$(".previous-page-link").toggleClass("is-disabled",1===t).attr("aria-disabled",1===t),this.$(".next-page-link").toggleClass("is-disabled",a).attr("aria-disabled",a),this},messageHtml:function(){var e="",t=!1;return this.view.collection.assetType?(e="asc"===this.view.collection.sortDirection?n("Showing {currentItemRange} out of {totalItemsCount}, filtered by {assetType}, sorted by {sortName} ascending"):n("Showing {currentItemRange} out of {totalItemsCount}, filtered by {assetType}, sorted by {sortName} descending"),t=this.filterNameLabel()):e="asc"===this.view.collection.sortDirection?n("Showing {currentItemRange} out of {totalItemsCount}, sorted by {sortName} ascending"):n("Showing {currentItemRange} out of {totalItemsCount}, sorted by {sortName} descending"),i.interpolateHtml(e,{currentItemRange:this.currentItemRangeLabel(),totalItemsCount:this.totalItemsCountLabel(),assetType:t,sortName:this.sortNameLabel()})},currentItemRangeLabel:function(){var e=this.view.collection,t=(e.getPageNumber()-1)*e.getPageSize(),n=t+e.size(),r=i.HTML('<span class="count-current-shown">{start}-{end}</span>');return i.interpolateHtml(r,{start:Math.min(t+1,n),end:n})},totalItemsCountLabel:function(){var e,t=i.HTML('<span class="count-total">{totalItemsLabel}</span>');return e=r.interpolate(n("{totalItems} total"),{totalItems:this.view.collection.getTotalRecords()}),i.interpolateHtml(t,{totalItemsLabel:e})},sortNameLabel:function(){var e=i.HTML('<span class="sort-order">{sortName}</span>');return i.interpolateHtml(e,{sortName:this.view.sortDisplayName()})},filterNameLabel:function(){var e=i.HTML('<span class="filter-column">{filterName}</span>');return i.interpolateHtml(e,{filterName:this.view.filterDisplayName()})},nextPage:function(){this.view.nextPage()},previousPage:function(){this.view.previousPage()}})}.apply(t,i))||(e.exports=r)},5581:(e,t,n)=>{"use strict";var i,r;i=[n(20428),n(95891),n(90165),n(84516),n(56537),n(81239)],r=function(e,t,n,i,r,o){var a,s,l,u,c,d,f,h;return s=function(e,t){var n=e.offset().top;l(n-t)},u=function(e,n){var i,r=e.changedAttributes();if(!r)return!1;for(i=0;i<n.length;i++)if(t.has(r,n[i]))return!0;return!1},d=function(e,t){var i=c(e);if(i)return i;if(t){if(/\s/g.test(e))return n("Please do not use any spaces in this field.")}else if(e!==encodeURIComponent(e)||e.match(/[!'()*]/))return n("Please do not use any spaces or special characters in this field.");return""},h=function(t,n,i,r){var o;f(i)?e(t.errorWrapper).removeClass(n.shown).addClass(n.hiding):(e(t.errorWrapper).addClass(n.shown).removeClass(n.hiding),o=HtmlUtils.joinHtml(HtmlUtils.HTML("<p>"),HtmlUtils.template(r)({limit:65}),HtmlUtils.HTML("</p>")),HtmlUtils.setHtml(e(t.errorMessage),o),e(t.save).addClass(n.disabled))},{toggleExpandCollapse:function(e,t){var n=t||"collapsed";e.closest(".expand-collapse").toggleClass("expand collapse"),e.closest(".is-collapsible, .window").toggleClass(n),e.closest(".is-collapsible").children("article").slideToggle()},showLoadingIndicator:function(){e(".ui-loading").show()},hideLoadingIndicator:function(){e(".ui-loading").hide()},confirmThenRunOperation:function(e,t,i,o,a){return new r.Warning({title:e,message:t,actions:{primary:{text:i,click:function(e){e.hide(),o()}},secondary:{text:n("Cancel"),click:function(e){return a&&a(),e.hide()}}}}).show()},runOperationShowingMessage:function(e,t){var r;return(r=new i.Mini({title:n(e)})).show(),t().done((function(){r.hide()}))},showErrorMeassage:function(e,t,r){var o=new i.Error({title:n(e),message:n(t)});o.show(),setTimeout((function(){o.hide()}),r)},withDisabledElement:function(t){return function(n){var i=this;a(e(n.currentTarget),(function(){return i[t].apply(i,[n])}))}},disableElementWhileRunning:a=function(e,t){return e.addClass("is-disabled").attr("aria-disabled",!0),t().always((function(){e.removeClass("is-disabled").attr("aria-disabled",!1)}))},deleteNotificationHandler:function(t){return function(n){n.preventDefault(),e.ajax({url:e(this).data("dismiss-link"),type:"DELETE",success:t})}},setScrollTop:l=function(t){e("html, body").animate({scrollTop:t},500)},getScrollOffset:function(t){return t.offset().top-e(window).scrollTop()},setScrollOffset:s,redirect:function(e){window.location=e},reload:function(){window.location.reload()},hasChangedAttributes:u,validateRequiredField:c=function(e){return 0===e.length?n("Required field."):""},validateURLItemEncoding:d,validateTotalKeyLength:f=function(n){return t.reduce(n,(function(t,n){return t+e(n).val().length}),0)<=65},checkTotalKeyLengthViolations:h,loadJavaScript:function(t){var n=e.Deferred();return o(t,t,(function(){n.resolve()})),n.promise()}}}.apply(t,i),void 0===r||(e.exports=r)},5452:(e,t,n)=>{"use strict";var i,r;i=[n(20428),n(95891),n(44511),n(99927),n(23844),n(86450)],r=function(e,t,n,i,r,o){var a=["a[href]:not([tabindex='-1'])","area[href]:not([tabindex='-1'])","input:not([disabled]):not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","iframe:not([tabindex='-1'])","[tabindex]:not([tabindex='-1'])","[contentEditable=true]:not([tabindex='-1'])"],s=i.View.extend({options:{title:"",message:"",intent:null,type:null,shown:!0,icon:!0,closeIcon:!0,minShown:0,maxShown:1/0,outFocusElement:null},initialize:function(n){if(this.options=t.extend({},this.options,n),!this.options.type)throw"SystemFeedback: type required (given "+JSON.stringify(this.options)+")";if(!this.options.intent)throw"SystemFeedback: intent required (given "+JSON.stringify(this.options)+")";return this.setElement(e("#page-"+this.options.type)),this.options.actions&&this.options.actions.secondary&&!t.isArray(this.options.actions.secondary)&&(this.options.actions.secondary=[this.options.actions.secondary]),this},inFocus:function(e){var t,n=e||".wrapper";return this.options.outFocusElement=this.options.outFocusElement||document.activeElement,this.$(n).first().focus(),(t=this.$(a.join())).on("keydown",(function(e){9===e.which&&e.shiftKey&&e.target===t.first()[0]?(e.preventDefault(),t.last().focus()):9!==e.which||e.shiftKey||e.target!==t.last()[0]||(e.preventDefault(),t.first().focus())})),this},outFocus:function(){return this.$(a.join()).off("keydown"),this.options.outFocusElement&&this.options.outFocusElement.focus(),this},show:function(){return clearTimeout(this.hideTimeout),this.options.shown=!0,this.shownAt=new Date,this.render(),e.isNumeric(this.options.maxShown)&&(this.hideTimeout=setTimeout(t.bind(this.hide,this),this.options.maxShown)),this},hide:function(){return this.shownAt&&e.isNumeric(this.options.minShown)&&this.options.minShown>new Date-this.shownAt?(clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(t.bind(this.hide,this),this.options.minShown-(new Date-this.shownAt))):(this.options.shown=!1,delete this.shownAt,this.render()),this},events:{"click .action-close":"hide","click .action-primary":"primaryClick","click .action-secondary":"secondaryClick"},render:function(){var e=s["active_"+this.options.type];return e&&e!==this&&(e.stopListening(),e.undelegateEvents()),r.setHtml(this.$el,r.template(o)(this.options)),s["active_"+this.options.type]=this,this},primaryClick:function(e){var t,n;(t=this.options.actions)&&(n=t.primary)&&(!1!==n.preventDefault&&e.preventDefault(),n.click&&n.click.call(e.target,this,e))},secondaryClick:function(e){var n,i,r,o;(n=this.options.actions)&&(i=n.secondary)&&(o=0,e&&e.target&&(o=t.indexOf(this.$(".action-secondary"),e.target)),!1!==(r=i[o]).preventDefault&&e.preventDefault(),r.click&&r.click.call(e.target,this,e))}});return s}.apply(t,i),void 0===r||(e.exports=r)},32969:(e,t,n)=>{"use strict";var i,r;i=[n(20428),n(95891),n(44511),n(5452)],void 0===(r=function(e,t,n,i){var r,o,a=i.extend({options:e.extend({},i.prototype.options,{type:"alert"}),slide_speed:900,show:function(){return i.prototype.show.apply(this,arguments),this.$el.hide(),this.$el.slideDown(this.slide_speed),this},hide:function(){this.$el.slideUp({duration:this.slide_speed}),setTimeout(t.bind(i.prototype.hide,this,arguments),this.slideSpeed)}});return r=t.compose(n.capitalize,n.camelize),o=["warning","error","confirmation","announcement","step-required","help","mini"],t.each(o,(function(t){var n;n=a.extend({options:e.extend({},a.prototype.options,{intent:t})}),a[r(t)]=n})),a}.apply(t,i))||(e.exports=r)},84516:(e,t,n)=>{"use strict";var i,r;i=[n(20428),n(95891),n(44511),n(5452)],void 0===(r=function(e,t,n,i){var r,o,a,s=i.extend({options:e.extend({},i.prototype.options,{type:"notification",closeIcon:!1})});return r=t.compose(n.capitalize,n.camelize),o=["warning","error","confirmation","announcement","step-required","help","mini","info"],t.each(o,(function(t){var n;n=s.extend({options:e.extend({},s.prototype.options,{intent:t})}),s[r(t)]=n})),(a=s.Mini.prototype.options).minShown=1250,a.closeIcon=!1,s}.apply(t,i))||(e.exports=r)},56537:(e,t,n)=>{"use strict";var i,r;i=[n(20428),n(95891),n(44511),n(5452)],void 0===(r=function(e,t,n,i){var r,o,a=i.extend({options:e.extend({},i.prototype.options,{type:"prompt",closeIcon:!1,icon:!1}),render:function(){return window.$body||(window.$body=e(document.body)),this.options.shown?$body.addClass("prompt-is-shown"):$body.removeClass("prompt-is-shown"),i.prototype.render.apply(this,arguments)},show:function(){return i.prototype.show.apply(this,arguments),this.inFocus()},hide:function(){return i.prototype.hide.apply(this,arguments),this.outFocus()}});return r=t.compose(n.capitalize,n.camelize),o=["warning","error","confirmation","announcement","step-required","help","mini"],t.each(o,(function(t){var n;n=a.extend({options:e.extend({},a.prototype.options,{intent:t})}),a[r(t)]=n})),a}.apply(t,i))||(e.exports=r)},8017:(e,t,n)=>{"use strict";var i,r;i=[n(95891),n(90165),n(99927),n(23844),n(29065)],void 0===(r=function(e,t,n,i,r){return n.View.extend({events:{"click .next-page-link":"nextPage","click .previous-page-link":"previousPage","change .page-number-input":"changePage"},initialize:function(n){this.collection=n.collection,this.hideWhenOnePage=n.hideWhenOnePage||!1,this.paginationLabel=n.paginationLabel||t("Pagination"),this.collection.bind("add",e.bind(this.render,this)),this.collection.bind("remove",e.bind(this.render,this)),this.collection.bind("reset",e.bind(this.render,this))},render:function(){var e=!this.collection.hasPreviousPage(),t=!this.collection.hasNextPage();return this.hideWhenOnePage&&(this.collection.getTotalPages()<=1?this.$el.addClass("hidden"):this.$el.hasClass("hidden")&&this.$el.removeClass("hidden")),i.setHtml(this.$el,i.template(r)({current_page:this.collection.getPageNumber(),total_pages:this.collection.getTotalPages(),paginationLabel:this.paginationLabel})),this.$(".previous-page-link").toggleClass("is-disabled",e).attr("aria-disabled",e),this.$(".next-page-link").toggleClass("is-disabled",t).attr("aria-disabled",t),this},changePage:function(){var e=this.collection,t=e.getPageNumber(),n=this.$("#page-number-input"),i=parseInt(n.val(),10),r=!0;(!i||i>e.getTotalPages()||i<1)&&(r=!1),r&&i!==t&&e.setPage(i),n.val("")},nextPage:function(){this.collection.nextPage()},previousPage:function(){this.collection.previousPage()}})}.apply(t,i))||(e.exports=r)},99927:e=>{"use strict";e.exports=window.Backbone},8468:e=>{"use strict";e.exports=window.URI},95891:e=>{"use strict";e.exports=window._},90165:e=>{"use strict";e.exports=window.gettext},20428:e=>{"use strict";e.exports=window.jQuery}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{"use strict";n.r(i),n.d(i,{LibraryFactory:()=>u,default:()=>u});var e=n(20428),t=n(95891),r=n(19506),o=n(29086),a=n(40895),s=n(79225),l=n(41023);n(13183),n(33714),n(70483);function u(n,i,u){var c={el:e("#content"),model:new r(i,{parse:!0}),templates:new s(n,{parse:!0}),action:"view",viewClass:a,canEdit:!0};l.done((function(){new o(t.extend(c,u)).render()}))}})();var o=window;for(var a in i)o[a]=i[a];i.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();